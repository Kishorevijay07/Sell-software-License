var UN=Object.defineProperty;var BN=(n,e,t)=>e in n?UN(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Na=(n,e,t)=>BN(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function Mr(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var tp={exports:{}},gu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wS;function zN(){if(wS)return gu;wS=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,o){var l=null;if(o!==void 0&&(l=""+o),i.key!==void 0&&(l=""+i.key),"key"in i){o={};for(var c in i)c!=="key"&&(o[c]=i[c])}else o=i;return i=o.ref,{$$typeof:n,type:r,key:l,ref:i!==void 0?i:null,props:o}}return gu.Fragment=e,gu.jsx=t,gu.jsxs=t,gu}var SS;function VN(){return SS||(SS=1,tp.exports=zN()),tp.exports}var K=VN(),np={exports:{}},Oe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AS;function qN(){if(AS)return Oe;AS=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function b(R){return R===null||typeof R!="object"?null:(R=g&&R[g]||R["@@iterator"],typeof R=="function"?R:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,S={};function A(R,B,X){this.props=R,this.context=B,this.refs=S,this.updater=X||_}A.prototype.isReactComponent={},A.prototype.setState=function(R,B){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,B,"setState")},A.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function E(){}E.prototype=A.prototype;function O(R,B,X){this.props=R,this.context=B,this.refs=S,this.updater=X||_}var x=O.prototype=new E;x.constructor=O,v(x,A.prototype),x.isPureReactComponent=!0;var j=Array.isArray,P={H:null,A:null,T:null,S:null,V:null},z=Object.prototype.hasOwnProperty;function H(R,B,X,J,re,fe){return X=fe.ref,{$$typeof:n,type:R,key:B,ref:X!==void 0?X:null,props:fe}}function V(R,B){return H(R.type,B,void 0,void 0,void 0,R.props)}function ie(R){return typeof R=="object"&&R!==null&&R.$$typeof===n}function he(R){var B={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(X){return B[X]})}var me=/\/+/g;function De(R,B){return typeof R=="object"&&R!==null&&R.key!=null?he(""+R.key):B.toString(36)}function pt(){}function te(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(pt,pt):(R.status="pending",R.then(function(B){R.status==="pending"&&(R.status="fulfilled",R.value=B)},function(B){R.status==="pending"&&(R.status="rejected",R.reason=B)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function Q(R,B,X,J,re){var fe=typeof R;(fe==="undefined"||fe==="boolean")&&(R=null);var pe=!1;if(R===null)pe=!0;else switch(fe){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(R.$$typeof){case n:case e:pe=!0;break;case m:return pe=R._init,Q(pe(R._payload),B,X,J,re)}}if(pe)return re=re(R),pe=J===""?"."+De(R,0):J,j(re)?(X="",pe!=null&&(X=pe.replace(me,"$&/")+"/"),Q(re,B,X,"",function(jn){return jn})):re!=null&&(ie(re)&&(re=V(re,X+(re.key==null||R&&R.key===re.key?"":(""+re.key).replace(me,"$&/")+"/")+pe)),B.push(re)),1;pe=0;var gt=J===""?".":J+":";if(j(R))for(var Je=0;Je<R.length;Je++)J=R[Je],fe=gt+De(J,Je),pe+=Q(J,B,X,fe,re);else if(Je=b(R),typeof Je=="function")for(R=Je.call(R),Je=0;!(J=R.next()).done;)J=J.value,fe=gt+De(J,Je++),pe+=Q(J,B,X,fe,re);else if(fe==="object"){if(typeof R.then=="function")return Q(te(R),B,X,J,re);throw B=String(R),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return pe}function M(R,B,X){if(R==null)return R;var J=[],re=0;return Q(R,J,"","",function(fe){return B.call(X,fe,re++)}),J}function U(R){if(R._status===-1){var B=R._result;B=B(),B.then(function(X){(R._status===0||R._status===-1)&&(R._status=1,R._result=X)},function(X){(R._status===0||R._status===-1)&&(R._status=2,R._result=X)}),R._status===-1&&(R._status=0,R._result=B)}if(R._status===1)return R._result.default;throw R._result}var G=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)};function ee(){}return Oe.Children={map:M,forEach:function(R,B,X){M(R,function(){B.apply(this,arguments)},X)},count:function(R){var B=0;return M(R,function(){B++}),B},toArray:function(R){return M(R,function(B){return B})||[]},only:function(R){if(!ie(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},Oe.Component=A,Oe.Fragment=t,Oe.Profiler=i,Oe.PureComponent=O,Oe.StrictMode=r,Oe.Suspense=d,Oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,Oe.__COMPILER_RUNTIME={__proto__:null,c:function(R){return P.H.useMemoCache(R)}},Oe.cache=function(R){return function(){return R.apply(null,arguments)}},Oe.cloneElement=function(R,B,X){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var J=v({},R.props),re=R.key,fe=void 0;if(B!=null)for(pe in B.ref!==void 0&&(fe=void 0),B.key!==void 0&&(re=""+B.key),B)!z.call(B,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&B.ref===void 0||(J[pe]=B[pe]);var pe=arguments.length-2;if(pe===1)J.children=X;else if(1<pe){for(var gt=Array(pe),Je=0;Je<pe;Je++)gt[Je]=arguments[Je+2];J.children=gt}return H(R.type,re,void 0,void 0,fe,J)},Oe.createContext=function(R){return R={$$typeof:l,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:o,_context:R},R},Oe.createElement=function(R,B,X){var J,re={},fe=null;if(B!=null)for(J in B.key!==void 0&&(fe=""+B.key),B)z.call(B,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(re[J]=B[J]);var pe=arguments.length-2;if(pe===1)re.children=X;else if(1<pe){for(var gt=Array(pe),Je=0;Je<pe;Je++)gt[Je]=arguments[Je+2];re.children=gt}if(R&&R.defaultProps)for(J in pe=R.defaultProps,pe)re[J]===void 0&&(re[J]=pe[J]);return H(R,fe,void 0,void 0,null,re)},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(R){return{$$typeof:c,render:R}},Oe.isValidElement=ie,Oe.lazy=function(R){return{$$typeof:m,_payload:{_status:-1,_result:R},_init:U}},Oe.memo=function(R,B){return{$$typeof:h,type:R,compare:B===void 0?null:B}},Oe.startTransition=function(R){var B=P.T,X={};P.T=X;try{var J=R(),re=P.S;re!==null&&re(X,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(ee,G)}catch(fe){G(fe)}finally{P.T=B}},Oe.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},Oe.use=function(R){return P.H.use(R)},Oe.useActionState=function(R,B,X){return P.H.useActionState(R,B,X)},Oe.useCallback=function(R,B){return P.H.useCallback(R,B)},Oe.useContext=function(R){return P.H.useContext(R)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(R,B){return P.H.useDeferredValue(R,B)},Oe.useEffect=function(R,B,X){var J=P.H;if(typeof X=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return J.useEffect(R,B)},Oe.useId=function(){return P.H.useId()},Oe.useImperativeHandle=function(R,B,X){return P.H.useImperativeHandle(R,B,X)},Oe.useInsertionEffect=function(R,B){return P.H.useInsertionEffect(R,B)},Oe.useLayoutEffect=function(R,B){return P.H.useLayoutEffect(R,B)},Oe.useMemo=function(R,B){return P.H.useMemo(R,B)},Oe.useOptimistic=function(R,B){return P.H.useOptimistic(R,B)},Oe.useReducer=function(R,B,X){return P.H.useReducer(R,B,X)},Oe.useRef=function(R){return P.H.useRef(R)},Oe.useState=function(R){return P.H.useState(R)},Oe.useSyncExternalStore=function(R,B,X){return P.H.useSyncExternalStore(R,B,X)},Oe.useTransition=function(){return P.H.useTransition()},Oe.version="19.1.0",Oe}var TS;function fd(){return TS||(TS=1,np.exports=qN()),np.exports}var oe=fd();const Hn=Mr(oe);var rp={exports:{}},yu={},ap={exports:{}},ip={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ES;function FN(){return ES||(ES=1,function(n){function e(M,U){var G=M.length;M.push(U);e:for(;0<G;){var ee=G-1>>>1,R=M[ee];if(0<i(R,U))M[ee]=U,M[G]=R,G=ee;else break e}}function t(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var U=M[0],G=M.pop();if(G!==U){M[0]=G;e:for(var ee=0,R=M.length,B=R>>>1;ee<B;){var X=2*(ee+1)-1,J=M[X],re=X+1,fe=M[re];if(0>i(J,G))re<R&&0>i(fe,J)?(M[ee]=fe,M[re]=G,ee=re):(M[ee]=J,M[X]=G,ee=X);else if(re<R&&0>i(fe,G))M[ee]=fe,M[re]=G,ee=re;else break e}}return U}function i(M,U){var G=M.sortIndex-U.sortIndex;return G!==0?G:M.id-U.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var d=[],h=[],m=1,g=null,b=3,_=!1,v=!1,S=!1,A=!1,E=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;function j(M){for(var U=t(h);U!==null;){if(U.callback===null)r(h);else if(U.startTime<=M)r(h),U.sortIndex=U.expirationTime,e(d,U);else break;U=t(h)}}function P(M){if(S=!1,j(M),!v)if(t(d)!==null)v=!0,z||(z=!0,De());else{var U=t(h);U!==null&&Q(P,U.startTime-M)}}var z=!1,H=-1,V=5,ie=-1;function he(){return A?!0:!(n.unstable_now()-ie<V)}function me(){if(A=!1,z){var M=n.unstable_now();ie=M;var U=!0;try{e:{v=!1,S&&(S=!1,O(H),H=-1),_=!0;var G=b;try{t:{for(j(M),g=t(d);g!==null&&!(g.expirationTime>M&&he());){var ee=g.callback;if(typeof ee=="function"){g.callback=null,b=g.priorityLevel;var R=ee(g.expirationTime<=M);if(M=n.unstable_now(),typeof R=="function"){g.callback=R,j(M),U=!0;break t}g===t(d)&&r(d),j(M)}else r(d);g=t(d)}if(g!==null)U=!0;else{var B=t(h);B!==null&&Q(P,B.startTime-M),U=!1}}break e}finally{g=null,b=G,_=!1}U=void 0}}finally{U?De():z=!1}}}var De;if(typeof x=="function")De=function(){x(me)};else if(typeof MessageChannel<"u"){var pt=new MessageChannel,te=pt.port2;pt.port1.onmessage=me,De=function(){te.postMessage(null)}}else De=function(){E(me,0)};function Q(M,U){H=E(function(){M(n.unstable_now())},U)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(M){M.callback=null},n.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<M?Math.floor(1e3/M):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(M){switch(b){case 1:case 2:case 3:var U=3;break;default:U=b}var G=b;b=U;try{return M()}finally{b=G}},n.unstable_requestPaint=function(){A=!0},n.unstable_runWithPriority=function(M,U){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var G=b;b=M;try{return U()}finally{b=G}},n.unstable_scheduleCallback=function(M,U,G){var ee=n.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?ee+G:ee):G=ee,M){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=G+R,M={id:m++,callback:U,priorityLevel:M,startTime:G,expirationTime:R,sortIndex:-1},G>ee?(M.sortIndex=G,e(h,M),t(d)===null&&M===t(h)&&(S?(O(H),H=-1):S=!0,Q(P,G-ee))):(M.sortIndex=R,e(d,M),v||_||(v=!0,z||(z=!0,De()))),M},n.unstable_shouldYield=he,n.unstable_wrapCallback=function(M){var U=b;return function(){var G=b;b=U;try{return M.apply(this,arguments)}finally{b=G}}}}(ip)),ip}var xS;function HN(){return xS||(xS=1,ap.exports=FN()),ap.exports}var sp={exports:{}},qt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OS;function ZN(){if(OS)return qt;OS=1;var n=fd();function e(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(d,h,m){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:d,containerInfo:h,implementation:m}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return qt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,qt.createPortal=function(d,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return o(d,h,null,m)},qt.flushSync=function(d){var h=l.T,m=r.p;try{if(l.T=null,r.p=2,d)return d()}finally{l.T=h,r.p=m,r.d.f()}},qt.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(d,h))},qt.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},qt.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var m=h.as,g=c(m,h.crossOrigin),b=typeof h.integrity=="string"?h.integrity:void 0,_=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?r.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:b,fetchPriority:_}):m==="script"&&r.d.X(d,{crossOrigin:g,integrity:b,fetchPriority:_,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},qt.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=c(h.as,h.crossOrigin);r.d.M(d,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(d)},qt.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,g=c(m,h.crossOrigin);r.d.L(d,m,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},qt.preloadModule=function(d,h){if(typeof d=="string")if(h){var m=c(h.as,h.crossOrigin);r.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(d)},qt.requestFormReset=function(d){r.d.r(d)},qt.unstable_batchedUpdates=function(d,h){return d(h)},qt.useFormState=function(d,h,m){return l.H.useFormState(d,h,m)},qt.useFormStatus=function(){return l.H.useHostTransitionStatus()},qt.version="19.1.0",qt}var RS;function GN(){if(RS)return sp.exports;RS=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),sp.exports=ZN(),sp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CS;function YN(){if(CS)return yu;CS=1;var n=HN(),e=fd(),t=GN();function r(a){var s="https://react.dev/errors/"+a;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)s+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+a+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function o(a){var s=a,u=a;if(a.alternate)for(;s.return;)s=s.return;else{a=s;do s=a,(s.flags&4098)!==0&&(u=s.return),a=s.return;while(a)}return s.tag===3?u:null}function l(a){if(a.tag===13){var s=a.memoizedState;if(s===null&&(a=a.alternate,a!==null&&(s=a.memoizedState)),s!==null)return s.dehydrated}return null}function c(a){if(o(a)!==a)throw Error(r(188))}function d(a){var s=a.alternate;if(!s){if(s=o(a),s===null)throw Error(r(188));return s!==a?null:a}for(var u=a,f=s;;){var p=u.return;if(p===null)break;var y=p.alternate;if(y===null){if(f=p.return,f!==null){u=f;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===u)return c(p),a;if(y===f)return c(p),s;y=y.sibling}throw Error(r(188))}if(u.return!==f.return)u=p,f=y;else{for(var w=!1,T=p.child;T;){if(T===u){w=!0,u=p,f=y;break}if(T===f){w=!0,f=p,u=y;break}T=T.sibling}if(!w){for(T=y.child;T;){if(T===u){w=!0,u=y,f=p;break}if(T===f){w=!0,f=y,u=p;break}T=T.sibling}if(!w)throw Error(r(189))}}if(u.alternate!==f)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?a:s}function h(a){var s=a.tag;if(s===5||s===26||s===27||s===6)return a;for(a=a.child;a!==null;){if(s=h(a),s!==null)return s;a=a.sibling}return null}var m=Object.assign,g=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),O=Symbol.for("react.consumer"),x=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),ie=Symbol.for("react.activity"),he=Symbol.for("react.memo_cache_sentinel"),me=Symbol.iterator;function De(a){return a===null||typeof a!="object"?null:(a=me&&a[me]||a["@@iterator"],typeof a=="function"?a:null)}var pt=Symbol.for("react.client.reference");function te(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===pt?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case v:return"Fragment";case A:return"Profiler";case S:return"StrictMode";case P:return"Suspense";case z:return"SuspenseList";case ie:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case _:return"Portal";case x:return(a.displayName||"Context")+".Provider";case O:return(a._context.displayName||"Context")+".Consumer";case j:var s=a.render;return a=a.displayName,a||(a=s.displayName||s.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case H:return s=a.displayName||null,s!==null?s:te(a.type)||"Memo";case V:s=a._payload,a=a._init;try{return te(a(s))}catch{}}return null}var Q=Array.isArray,M=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},ee=[],R=-1;function B(a){return{current:a}}function X(a){0>R||(a.current=ee[R],ee[R]=null,R--)}function J(a,s){R++,ee[R]=a.current,a.current=s}var re=B(null),fe=B(null),pe=B(null),gt=B(null);function Je(a,s){switch(J(pe,s),J(fe,a),J(re,null),s.nodeType){case 9:case 11:a=(a=s.documentElement)&&(a=a.namespaceURI)?Xw(a):0;break;default:if(a=s.tagName,s=s.namespaceURI)s=Xw(s),a=Kw(s,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}X(re),J(re,a)}function jn(){X(re),X(fe),X(pe)}function ni(a){a.memoizedState!==null&&J(gt,a);var s=re.current,u=Kw(s,a.type);s!==u&&(J(fe,a),J(re,u))}function zi(a){fe.current===a&&(X(re),X(fe)),gt.current===a&&(X(gt),fu._currentValue=G)}var zd=Object.prototype.hasOwnProperty,Vd=n.unstable_scheduleCallback,qd=n.unstable_cancelCallback,yC=n.unstable_shouldYield,bC=n.unstable_requestPaint,gr=n.unstable_now,_C=n.unstable_getCurrentPriorityLevel,C_=n.unstable_ImmediatePriority,P_=n.unstable_UserBlockingPriority,$l=n.unstable_NormalPriority,vC=n.unstable_LowPriority,N_=n.unstable_IdlePriority,wC=n.log,SC=n.unstable_setDisableYieldValue,_o=null,pn=null;function oa(a){if(typeof wC=="function"&&SC(a),pn&&typeof pn.setStrictMode=="function")try{pn.setStrictMode(_o,a)}catch{}}var gn=Math.clz32?Math.clz32:EC,AC=Math.log,TC=Math.LN2;function EC(a){return a>>>=0,a===0?32:31-(AC(a)/TC|0)|0}var Ul=256,Bl=4194304;function ri(a){var s=a&42;if(s!==0)return s;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function zl(a,s,u){var f=a.pendingLanes;if(f===0)return 0;var p=0,y=a.suspendedLanes,w=a.pingedLanes;a=a.warmLanes;var T=f&134217727;return T!==0?(f=T&~y,f!==0?p=ri(f):(w&=T,w!==0?p=ri(w):u||(u=T&~a,u!==0&&(p=ri(u))))):(T=f&~y,T!==0?p=ri(T):w!==0?p=ri(w):u||(u=f&~a,u!==0&&(p=ri(u)))),p===0?0:s!==0&&s!==p&&(s&y)===0&&(y=p&-p,u=s&-s,y>=u||y===32&&(u&4194048)!==0)?s:p}function vo(a,s){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&s)===0}function xC(a,s){switch(a){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function j_(){var a=Ul;return Ul<<=1,(Ul&4194048)===0&&(Ul=256),a}function k_(){var a=Bl;return Bl<<=1,(Bl&62914560)===0&&(Bl=4194304),a}function Fd(a){for(var s=[],u=0;31>u;u++)s.push(a);return s}function wo(a,s){a.pendingLanes|=s,s!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function OC(a,s,u,f,p,y){var w=a.pendingLanes;a.pendingLanes=u,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=u,a.entangledLanes&=u,a.errorRecoveryDisabledLanes&=u,a.shellSuspendCounter=0;var T=a.entanglements,C=a.expirationTimes,L=a.hiddenUpdates;for(u=w&~u;0<u;){var F=31-gn(u),Y=1<<F;T[F]=0,C[F]=-1;var D=L[F];if(D!==null)for(L[F]=null,F=0;F<D.length;F++){var $=D[F];$!==null&&($.lane&=-536870913)}u&=~Y}f!==0&&M_(a,f,0),y!==0&&p===0&&a.tag!==0&&(a.suspendedLanes|=y&~(w&~s))}function M_(a,s,u){a.pendingLanes|=s,a.suspendedLanes&=~s;var f=31-gn(s);a.entangledLanes|=s,a.entanglements[f]=a.entanglements[f]|1073741824|u&4194090}function I_(a,s){var u=a.entangledLanes|=s;for(a=a.entanglements;u;){var f=31-gn(u),p=1<<f;p&s|a[f]&s&&(a[f]|=s),u&=~p}}function Hd(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Zd(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function L_(){var a=U.p;return a!==0?a:(a=window.event,a===void 0?32:pS(a.type))}function RC(a,s){var u=U.p;try{return U.p=a,s()}finally{U.p=u}}var ua=Math.random().toString(36).slice(2),zt="__reactFiber$"+ua,an="__reactProps$"+ua,Vi="__reactContainer$"+ua,Gd="__reactEvents$"+ua,CC="__reactListeners$"+ua,PC="__reactHandles$"+ua,D_="__reactResources$"+ua,So="__reactMarker$"+ua;function Yd(a){delete a[zt],delete a[an],delete a[Gd],delete a[CC],delete a[PC]}function qi(a){var s=a[zt];if(s)return s;for(var u=a.parentNode;u;){if(s=u[Vi]||u[zt]){if(u=s.alternate,s.child!==null||u!==null&&u.child!==null)for(a=eS(a);a!==null;){if(u=a[zt])return u;a=eS(a)}return s}a=u,u=a.parentNode}return null}function Fi(a){if(a=a[zt]||a[Vi]){var s=a.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return a}return null}function Ao(a){var s=a.tag;if(s===5||s===26||s===27||s===6)return a.stateNode;throw Error(r(33))}function Hi(a){var s=a[D_];return s||(s=a[D_]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Et(a){a[So]=!0}var $_=new Set,U_={};function ai(a,s){Zi(a,s),Zi(a+"Capture",s)}function Zi(a,s){for(U_[a]=s,a=0;a<s.length;a++)$_.add(s[a])}var NC=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),B_={},z_={};function jC(a){return zd.call(z_,a)?!0:zd.call(B_,a)?!1:NC.test(a)?z_[a]=!0:(B_[a]=!0,!1)}function Vl(a,s,u){if(jC(s))if(u===null)a.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":a.removeAttribute(s);return;case"boolean":var f=s.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){a.removeAttribute(s);return}}a.setAttribute(s,""+u)}}function ql(a,s,u){if(u===null)a.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(s);return}a.setAttribute(s,""+u)}}function Ir(a,s,u,f){if(f===null)a.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(u);return}a.setAttributeNS(s,u,""+f)}}var Xd,V_;function Gi(a){if(Xd===void 0)try{throw Error()}catch(u){var s=u.stack.trim().match(/\n( *(at )?)/);Xd=s&&s[1]||"",V_=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xd+a+V_}var Kd=!1;function Jd(a,s){if(!a||Kd)return"";Kd=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(s){var Y=function(){throw Error()};if(Object.defineProperty(Y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Y,[])}catch($){var D=$}Reflect.construct(a,[],Y)}else{try{Y.call()}catch($){D=$}a.call(Y.prototype)}}else{try{throw Error()}catch($){D=$}(Y=a())&&typeof Y.catch=="function"&&Y.catch(function(){})}}catch($){if($&&D&&typeof $.stack=="string")return[$.stack,D.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=f.DetermineComponentFrameRoot(),w=y[0],T=y[1];if(w&&T){var C=w.split(`
`),L=T.split(`
`);for(p=f=0;f<C.length&&!C[f].includes("DetermineComponentFrameRoot");)f++;for(;p<L.length&&!L[p].includes("DetermineComponentFrameRoot");)p++;if(f===C.length||p===L.length)for(f=C.length-1,p=L.length-1;1<=f&&0<=p&&C[f]!==L[p];)p--;for(;1<=f&&0<=p;f--,p--)if(C[f]!==L[p]){if(f!==1||p!==1)do if(f--,p--,0>p||C[f]!==L[p]){var F=`
`+C[f].replace(" at new "," at ");return a.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",a.displayName)),F}while(1<=f&&0<=p);break}}}finally{Kd=!1,Error.prepareStackTrace=u}return(u=a?a.displayName||a.name:"")?Gi(u):""}function kC(a){switch(a.tag){case 26:case 27:case 5:return Gi(a.type);case 16:return Gi("Lazy");case 13:return Gi("Suspense");case 19:return Gi("SuspenseList");case 0:case 15:return Jd(a.type,!1);case 11:return Jd(a.type.render,!1);case 1:return Jd(a.type,!0);case 31:return Gi("Activity");default:return""}}function q_(a){try{var s="";do s+=kC(a),a=a.return;while(a);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function kn(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function F_(a){var s=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function MC(a){var s=F_(a)?"checked":"value",u=Object.getOwnPropertyDescriptor(a.constructor.prototype,s),f=""+a[s];if(!a.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var p=u.get,y=u.set;return Object.defineProperty(a,s,{configurable:!0,get:function(){return p.call(this)},set:function(w){f=""+w,y.call(this,w)}}),Object.defineProperty(a,s,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(w){f=""+w},stopTracking:function(){a._valueTracker=null,delete a[s]}}}}function Fl(a){a._valueTracker||(a._valueTracker=MC(a))}function H_(a){if(!a)return!1;var s=a._valueTracker;if(!s)return!0;var u=s.getValue(),f="";return a&&(f=F_(a)?a.checked?"true":"false":a.value),a=f,a!==u?(s.setValue(a),!0):!1}function Hl(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var IC=/[\n"\\]/g;function Mn(a){return a.replace(IC,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Qd(a,s,u,f,p,y,w,T){a.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?a.type=w:a.removeAttribute("type"),s!=null?w==="number"?(s===0&&a.value===""||a.value!=s)&&(a.value=""+kn(s)):a.value!==""+kn(s)&&(a.value=""+kn(s)):w!=="submit"&&w!=="reset"||a.removeAttribute("value"),s!=null?Wd(a,w,kn(s)):u!=null?Wd(a,w,kn(u)):f!=null&&a.removeAttribute("value"),p==null&&y!=null&&(a.defaultChecked=!!y),p!=null&&(a.checked=p&&typeof p!="function"&&typeof p!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?a.name=""+kn(T):a.removeAttribute("name")}function Z_(a,s,u,f,p,y,w,T){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(a.type=y),s!=null||u!=null){if(!(y!=="submit"&&y!=="reset"||s!=null))return;u=u!=null?""+kn(u):"",s=s!=null?""+kn(s):u,T||s===a.value||(a.value=s),a.defaultValue=s}f=f??p,f=typeof f!="function"&&typeof f!="symbol"&&!!f,a.checked=T?a.checked:!!f,a.defaultChecked=!!f,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(a.name=w)}function Wd(a,s,u){s==="number"&&Hl(a.ownerDocument)===a||a.defaultValue===""+u||(a.defaultValue=""+u)}function Yi(a,s,u,f){if(a=a.options,s){s={};for(var p=0;p<u.length;p++)s["$"+u[p]]=!0;for(u=0;u<a.length;u++)p=s.hasOwnProperty("$"+a[u].value),a[u].selected!==p&&(a[u].selected=p),p&&f&&(a[u].defaultSelected=!0)}else{for(u=""+kn(u),s=null,p=0;p<a.length;p++){if(a[p].value===u){a[p].selected=!0,f&&(a[p].defaultSelected=!0);return}s!==null||a[p].disabled||(s=a[p])}s!==null&&(s.selected=!0)}}function G_(a,s,u){if(s!=null&&(s=""+kn(s),s!==a.value&&(a.value=s),u==null)){a.defaultValue!==s&&(a.defaultValue=s);return}a.defaultValue=u!=null?""+kn(u):""}function Y_(a,s,u,f){if(s==null){if(f!=null){if(u!=null)throw Error(r(92));if(Q(f)){if(1<f.length)throw Error(r(93));f=f[0]}u=f}u==null&&(u=""),s=u}u=kn(s),a.defaultValue=u,f=a.textContent,f===u&&f!==""&&f!==null&&(a.value=f)}function Xi(a,s){if(s){var u=a.firstChild;if(u&&u===a.lastChild&&u.nodeType===3){u.nodeValue=s;return}}a.textContent=s}var LC=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function X_(a,s,u){var f=s.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?f?a.setProperty(s,""):s==="float"?a.cssFloat="":a[s]="":f?a.setProperty(s,u):typeof u!="number"||u===0||LC.has(s)?s==="float"?a.cssFloat=u:a[s]=(""+u).trim():a[s]=u+"px"}function K_(a,s,u){if(s!=null&&typeof s!="object")throw Error(r(62));if(a=a.style,u!=null){for(var f in u)!u.hasOwnProperty(f)||s!=null&&s.hasOwnProperty(f)||(f.indexOf("--")===0?a.setProperty(f,""):f==="float"?a.cssFloat="":a[f]="");for(var p in s)f=s[p],s.hasOwnProperty(p)&&u[p]!==f&&X_(a,p,f)}else for(var y in s)s.hasOwnProperty(y)&&X_(a,y,s[y])}function eh(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var DC=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$C=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zl(a){return $C.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var th=null;function nh(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Ki=null,Ji=null;function J_(a){var s=Fi(a);if(s&&(a=s.stateNode)){var u=a[an]||null;e:switch(a=s.stateNode,s.type){case"input":if(Qd(a,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),s=u.name,u.type==="radio"&&s!=null){for(u=a;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Mn(""+s)+'"][type="radio"]'),s=0;s<u.length;s++){var f=u[s];if(f!==a&&f.form===a.form){var p=f[an]||null;if(!p)throw Error(r(90));Qd(f,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(s=0;s<u.length;s++)f=u[s],f.form===a.form&&H_(f)}break e;case"textarea":G_(a,u.value,u.defaultValue);break e;case"select":s=u.value,s!=null&&Yi(a,!!u.multiple,s,!1)}}}var rh=!1;function Q_(a,s,u){if(rh)return a(s,u);rh=!0;try{var f=a(s);return f}finally{if(rh=!1,(Ki!==null||Ji!==null)&&(Nc(),Ki&&(s=Ki,a=Ji,Ji=Ki=null,J_(s),a)))for(s=0;s<a.length;s++)J_(a[s])}}function To(a,s){var u=a.stateNode;if(u===null)return null;var f=u[an]||null;if(f===null)return null;u=f[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(a=a.type,f=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!f;break e;default:a=!1}if(a)return null;if(u&&typeof u!="function")throw Error(r(231,s,typeof u));return u}var Lr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ah=!1;if(Lr)try{var Eo={};Object.defineProperty(Eo,"passive",{get:function(){ah=!0}}),window.addEventListener("test",Eo,Eo),window.removeEventListener("test",Eo,Eo)}catch{ah=!1}var la=null,ih=null,Gl=null;function W_(){if(Gl)return Gl;var a,s=ih,u=s.length,f,p="value"in la?la.value:la.textContent,y=p.length;for(a=0;a<u&&s[a]===p[a];a++);var w=u-a;for(f=1;f<=w&&s[u-f]===p[y-f];f++);return Gl=p.slice(a,1<f?1-f:void 0)}function Yl(a){var s=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&s===13&&(a=13)):a=s,a===10&&(a=13),32<=a||a===13?a:0}function Xl(){return!0}function ev(){return!1}function sn(a){function s(u,f,p,y,w){this._reactName=u,this._targetInst=p,this.type=f,this.nativeEvent=y,this.target=w,this.currentTarget=null;for(var T in a)a.hasOwnProperty(T)&&(u=a[T],this[T]=u?u(y):y[T]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Xl:ev,this.isPropagationStopped=ev,this}return m(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Xl)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Xl)},persist:function(){},isPersistent:Xl}),s}var ii={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kl=sn(ii),xo=m({},ii,{view:0,detail:0}),UC=sn(xo),sh,oh,Oo,Jl=m({},xo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lh,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Oo&&(Oo&&a.type==="mousemove"?(sh=a.screenX-Oo.screenX,oh=a.screenY-Oo.screenY):oh=sh=0,Oo=a),sh)},movementY:function(a){return"movementY"in a?a.movementY:oh}}),tv=sn(Jl),BC=m({},Jl,{dataTransfer:0}),zC=sn(BC),VC=m({},xo,{relatedTarget:0}),uh=sn(VC),qC=m({},ii,{animationName:0,elapsedTime:0,pseudoElement:0}),FC=sn(qC),HC=m({},ii,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),ZC=sn(HC),GC=m({},ii,{data:0}),nv=sn(GC),YC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},XC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},KC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function JC(a){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(a):(a=KC[a])?!!s[a]:!1}function lh(){return JC}var QC=m({},xo,{key:function(a){if(a.key){var s=YC[a.key]||a.key;if(s!=="Unidentified")return s}return a.type==="keypress"?(a=Yl(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?XC[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lh,charCode:function(a){return a.type==="keypress"?Yl(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Yl(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),WC=sn(QC),eP=m({},Jl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rv=sn(eP),tP=m({},xo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lh}),nP=sn(tP),rP=m({},ii,{propertyName:0,elapsedTime:0,pseudoElement:0}),aP=sn(rP),iP=m({},Jl,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),sP=sn(iP),oP=m({},ii,{newState:0,oldState:0}),uP=sn(oP),lP=[9,13,27,32],ch=Lr&&"CompositionEvent"in window,Ro=null;Lr&&"documentMode"in document&&(Ro=document.documentMode);var cP=Lr&&"TextEvent"in window&&!Ro,av=Lr&&(!ch||Ro&&8<Ro&&11>=Ro),iv=" ",sv=!1;function ov(a,s){switch(a){case"keyup":return lP.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uv(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Qi=!1;function fP(a,s){switch(a){case"compositionend":return uv(s);case"keypress":return s.which!==32?null:(sv=!0,iv);case"textInput":return a=s.data,a===iv&&sv?null:a;default:return null}}function dP(a,s){if(Qi)return a==="compositionend"||!ch&&ov(a,s)?(a=W_(),Gl=ih=la=null,Qi=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return av&&s.locale!=="ko"?null:s.data;default:return null}}var hP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lv(a){var s=a&&a.nodeName&&a.nodeName.toLowerCase();return s==="input"?!!hP[a.type]:s==="textarea"}function cv(a,s,u,f){Ki?Ji?Ji.push(f):Ji=[f]:Ki=f,s=Dc(s,"onChange"),0<s.length&&(u=new Kl("onChange","change",null,u,f),a.push({event:u,listeners:s}))}var Co=null,Po=null;function mP(a){Fw(a,0)}function Ql(a){var s=Ao(a);if(H_(s))return a}function fv(a,s){if(a==="change")return s}var dv=!1;if(Lr){var fh;if(Lr){var dh="oninput"in document;if(!dh){var hv=document.createElement("div");hv.setAttribute("oninput","return;"),dh=typeof hv.oninput=="function"}fh=dh}else fh=!1;dv=fh&&(!document.documentMode||9<document.documentMode)}function mv(){Co&&(Co.detachEvent("onpropertychange",pv),Po=Co=null)}function pv(a){if(a.propertyName==="value"&&Ql(Po)){var s=[];cv(s,Po,a,nh(a)),Q_(mP,s)}}function pP(a,s,u){a==="focusin"?(mv(),Co=s,Po=u,Co.attachEvent("onpropertychange",pv)):a==="focusout"&&mv()}function gP(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Ql(Po)}function yP(a,s){if(a==="click")return Ql(s)}function bP(a,s){if(a==="input"||a==="change")return Ql(s)}function _P(a,s){return a===s&&(a!==0||1/a===1/s)||a!==a&&s!==s}var yn=typeof Object.is=="function"?Object.is:_P;function No(a,s){if(yn(a,s))return!0;if(typeof a!="object"||a===null||typeof s!="object"||s===null)return!1;var u=Object.keys(a),f=Object.keys(s);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var p=u[f];if(!zd.call(s,p)||!yn(a[p],s[p]))return!1}return!0}function gv(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function yv(a,s){var u=gv(a);a=0;for(var f;u;){if(u.nodeType===3){if(f=a+u.textContent.length,a<=s&&f>=s)return{node:u,offset:s-a};a=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=gv(u)}}function bv(a,s){return a&&s?a===s?!0:a&&a.nodeType===3?!1:s&&s.nodeType===3?bv(a,s.parentNode):"contains"in a?a.contains(s):a.compareDocumentPosition?!!(a.compareDocumentPosition(s)&16):!1:!1}function _v(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var s=Hl(a.document);s instanceof a.HTMLIFrameElement;){try{var u=typeof s.contentWindow.location.href=="string"}catch{u=!1}if(u)a=s.contentWindow;else break;s=Hl(a.document)}return s}function hh(a){var s=a&&a.nodeName&&a.nodeName.toLowerCase();return s&&(s==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||s==="textarea"||a.contentEditable==="true")}var vP=Lr&&"documentMode"in document&&11>=document.documentMode,Wi=null,mh=null,jo=null,ph=!1;function vv(a,s,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;ph||Wi==null||Wi!==Hl(f)||(f=Wi,"selectionStart"in f&&hh(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),jo&&No(jo,f)||(jo=f,f=Dc(mh,"onSelect"),0<f.length&&(s=new Kl("onSelect","select",null,s,u),a.push({event:s,listeners:f}),s.target=Wi)))}function si(a,s){var u={};return u[a.toLowerCase()]=s.toLowerCase(),u["Webkit"+a]="webkit"+s,u["Moz"+a]="moz"+s,u}var es={animationend:si("Animation","AnimationEnd"),animationiteration:si("Animation","AnimationIteration"),animationstart:si("Animation","AnimationStart"),transitionrun:si("Transition","TransitionRun"),transitionstart:si("Transition","TransitionStart"),transitioncancel:si("Transition","TransitionCancel"),transitionend:si("Transition","TransitionEnd")},gh={},wv={};Lr&&(wv=document.createElement("div").style,"AnimationEvent"in window||(delete es.animationend.animation,delete es.animationiteration.animation,delete es.animationstart.animation),"TransitionEvent"in window||delete es.transitionend.transition);function oi(a){if(gh[a])return gh[a];if(!es[a])return a;var s=es[a],u;for(u in s)if(s.hasOwnProperty(u)&&u in wv)return gh[a]=s[u];return a}var Sv=oi("animationend"),Av=oi("animationiteration"),Tv=oi("animationstart"),wP=oi("transitionrun"),SP=oi("transitionstart"),AP=oi("transitioncancel"),Ev=oi("transitionend"),xv=new Map,yh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yh.push("scrollEnd");function Gn(a,s){xv.set(a,s),ai(s,[a])}var Ov=new WeakMap;function In(a,s){if(typeof a=="object"&&a!==null){var u=Ov.get(a);return u!==void 0?u:(s={value:a,source:s,stack:q_(s)},Ov.set(a,s),s)}return{value:a,source:s,stack:q_(s)}}var Ln=[],ts=0,bh=0;function Wl(){for(var a=ts,s=bh=ts=0;s<a;){var u=Ln[s];Ln[s++]=null;var f=Ln[s];Ln[s++]=null;var p=Ln[s];Ln[s++]=null;var y=Ln[s];if(Ln[s++]=null,f!==null&&p!==null){var w=f.pending;w===null?p.next=p:(p.next=w.next,w.next=p),f.pending=p}y!==0&&Rv(u,p,y)}}function ec(a,s,u,f){Ln[ts++]=a,Ln[ts++]=s,Ln[ts++]=u,Ln[ts++]=f,bh|=f,a.lanes|=f,a=a.alternate,a!==null&&(a.lanes|=f)}function _h(a,s,u,f){return ec(a,s,u,f),tc(a)}function ns(a,s){return ec(a,null,null,s),tc(a)}function Rv(a,s,u){a.lanes|=u;var f=a.alternate;f!==null&&(f.lanes|=u);for(var p=!1,y=a.return;y!==null;)y.childLanes|=u,f=y.alternate,f!==null&&(f.childLanes|=u),y.tag===22&&(a=y.stateNode,a===null||a._visibility&1||(p=!0)),a=y,y=y.return;return a.tag===3?(y=a.stateNode,p&&s!==null&&(p=31-gn(u),a=y.hiddenUpdates,f=a[p],f===null?a[p]=[s]:f.push(s),s.lane=u|536870912),y):null}function tc(a){if(50<ru)throw ru=0,Em=null,Error(r(185));for(var s=a.return;s!==null;)a=s,s=a.return;return a.tag===3?a.stateNode:null}var rs={};function TP(a,s,u,f){this.tag=a,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(a,s,u,f){return new TP(a,s,u,f)}function vh(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Dr(a,s){var u=a.alternate;return u===null?(u=bn(a.tag,s,a.key,a.mode),u.elementType=a.elementType,u.type=a.type,u.stateNode=a.stateNode,u.alternate=a,a.alternate=u):(u.pendingProps=s,u.type=a.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=a.flags&65011712,u.childLanes=a.childLanes,u.lanes=a.lanes,u.child=a.child,u.memoizedProps=a.memoizedProps,u.memoizedState=a.memoizedState,u.updateQueue=a.updateQueue,s=a.dependencies,u.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},u.sibling=a.sibling,u.index=a.index,u.ref=a.ref,u.refCleanup=a.refCleanup,u}function Cv(a,s){a.flags&=65011714;var u=a.alternate;return u===null?(a.childLanes=0,a.lanes=s,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,s=u.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),a}function nc(a,s,u,f,p,y){var w=0;if(f=a,typeof a=="function")vh(a)&&(w=1);else if(typeof a=="string")w=xN(a,u,re.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case ie:return a=bn(31,u,s,p),a.elementType=ie,a.lanes=y,a;case v:return ui(u.children,p,y,s);case S:w=8,p|=24;break;case A:return a=bn(12,u,s,p|2),a.elementType=A,a.lanes=y,a;case P:return a=bn(13,u,s,p),a.elementType=P,a.lanes=y,a;case z:return a=bn(19,u,s,p),a.elementType=z,a.lanes=y,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case E:case x:w=10;break e;case O:w=9;break e;case j:w=11;break e;case H:w=14;break e;case V:w=16,f=null;break e}w=29,u=Error(r(130,a===null?"null":typeof a,"")),f=null}return s=bn(w,u,s,p),s.elementType=a,s.type=f,s.lanes=y,s}function ui(a,s,u,f){return a=bn(7,a,f,s),a.lanes=u,a}function wh(a,s,u){return a=bn(6,a,null,s),a.lanes=u,a}function Sh(a,s,u){return s=bn(4,a.children!==null?a.children:[],a.key,s),s.lanes=u,s.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},s}var as=[],is=0,rc=null,ac=0,Dn=[],$n=0,li=null,$r=1,Ur="";function ci(a,s){as[is++]=ac,as[is++]=rc,rc=a,ac=s}function Pv(a,s,u){Dn[$n++]=$r,Dn[$n++]=Ur,Dn[$n++]=li,li=a;var f=$r;a=Ur;var p=32-gn(f)-1;f&=~(1<<p),u+=1;var y=32-gn(s)+p;if(30<y){var w=p-p%5;y=(f&(1<<w)-1).toString(32),f>>=w,p-=w,$r=1<<32-gn(s)+p|u<<p|f,Ur=y+a}else $r=1<<y|u<<p|f,Ur=a}function Ah(a){a.return!==null&&(ci(a,1),Pv(a,1,0))}function Th(a){for(;a===rc;)rc=as[--is],as[is]=null,ac=as[--is],as[is]=null;for(;a===li;)li=Dn[--$n],Dn[$n]=null,Ur=Dn[--$n],Dn[$n]=null,$r=Dn[--$n],Dn[$n]=null}var Kt=null,ut=null,Be=!1,fi=null,yr=!1,Eh=Error(r(519));function di(a){var s=Error(r(418,""));throw Io(In(s,a)),Eh}function Nv(a){var s=a.stateNode,u=a.type,f=a.memoizedProps;switch(s[zt]=a,s[an]=f,u){case"dialog":Me("cancel",s),Me("close",s);break;case"iframe":case"object":case"embed":Me("load",s);break;case"video":case"audio":for(u=0;u<iu.length;u++)Me(iu[u],s);break;case"source":Me("error",s);break;case"img":case"image":case"link":Me("error",s),Me("load",s);break;case"details":Me("toggle",s);break;case"input":Me("invalid",s),Z_(s,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),Fl(s);break;case"select":Me("invalid",s);break;case"textarea":Me("invalid",s),Y_(s,f.value,f.defaultValue,f.children),Fl(s)}u=f.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||s.textContent===""+u||f.suppressHydrationWarning===!0||Yw(s.textContent,u)?(f.popover!=null&&(Me("beforetoggle",s),Me("toggle",s)),f.onScroll!=null&&Me("scroll",s),f.onScrollEnd!=null&&Me("scrollend",s),f.onClick!=null&&(s.onclick=$c),s=!0):s=!1,s||di(a)}function jv(a){for(Kt=a.return;Kt;)switch(Kt.tag){case 5:case 13:yr=!1;return;case 27:case 3:yr=!0;return;default:Kt=Kt.return}}function ko(a){if(a!==Kt)return!1;if(!Be)return jv(a),Be=!0,!1;var s=a.tag,u;if((u=s!==3&&s!==27)&&((u=s===5)&&(u=a.type,u=!(u!=="form"&&u!=="button")||zm(a.type,a.memoizedProps)),u=!u),u&&ut&&di(a),jv(a),s===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,s=0;a;){if(a.nodeType===8)if(u=a.data,u==="/$"){if(s===0){ut=Xn(a.nextSibling);break e}s--}else u!=="$"&&u!=="$!"&&u!=="$?"||s++;a=a.nextSibling}ut=null}}else s===27?(s=ut,Ea(a.type)?(a=Hm,Hm=null,ut=a):ut=s):ut=Kt?Xn(a.stateNode.nextSibling):null;return!0}function Mo(){ut=Kt=null,Be=!1}function kv(){var a=fi;return a!==null&&(ln===null?ln=a:ln.push.apply(ln,a),fi=null),a}function Io(a){fi===null?fi=[a]:fi.push(a)}var xh=B(null),hi=null,Br=null;function ca(a,s,u){J(xh,s._currentValue),s._currentValue=u}function zr(a){a._currentValue=xh.current,X(xh)}function Oh(a,s,u){for(;a!==null;){var f=a.alternate;if((a.childLanes&s)!==s?(a.childLanes|=s,f!==null&&(f.childLanes|=s)):f!==null&&(f.childLanes&s)!==s&&(f.childLanes|=s),a===u)break;a=a.return}}function Rh(a,s,u,f){var p=a.child;for(p!==null&&(p.return=a);p!==null;){var y=p.dependencies;if(y!==null){var w=p.child;y=y.firstContext;e:for(;y!==null;){var T=y;y=p;for(var C=0;C<s.length;C++)if(T.context===s[C]){y.lanes|=u,T=y.alternate,T!==null&&(T.lanes|=u),Oh(y.return,u,a),f||(w=null);break e}y=T.next}}else if(p.tag===18){if(w=p.return,w===null)throw Error(r(341));w.lanes|=u,y=w.alternate,y!==null&&(y.lanes|=u),Oh(w,u,a),w=null}else w=p.child;if(w!==null)w.return=p;else for(w=p;w!==null;){if(w===a){w=null;break}if(p=w.sibling,p!==null){p.return=w.return,w=p;break}w=w.return}p=w}}function Lo(a,s,u,f){a=null;for(var p=s,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var w=p.alternate;if(w===null)throw Error(r(387));if(w=w.memoizedProps,w!==null){var T=p.type;yn(p.pendingProps.value,w.value)||(a!==null?a.push(T):a=[T])}}else if(p===gt.current){if(w=p.alternate,w===null)throw Error(r(387));w.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(a!==null?a.push(fu):a=[fu])}p=p.return}a!==null&&Rh(s,a,u,f),s.flags|=262144}function ic(a){for(a=a.firstContext;a!==null;){if(!yn(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function mi(a){hi=a,Br=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Vt(a){return Mv(hi,a)}function sc(a,s){return hi===null&&mi(a),Mv(a,s)}function Mv(a,s){var u=s._currentValue;if(s={context:s,memoizedValue:u,next:null},Br===null){if(a===null)throw Error(r(308));Br=s,a.dependencies={lanes:0,firstContext:s},a.flags|=524288}else Br=Br.next=s;return u}var EP=typeof AbortController<"u"?AbortController:function(){var a=[],s=this.signal={aborted:!1,addEventListener:function(u,f){a.push(f)}};this.abort=function(){s.aborted=!0,a.forEach(function(u){return u()})}},xP=n.unstable_scheduleCallback,OP=n.unstable_NormalPriority,vt={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ch(){return{controller:new EP,data:new Map,refCount:0}}function Do(a){a.refCount--,a.refCount===0&&xP(OP,function(){a.controller.abort()})}var $o=null,Ph=0,ss=0,os=null;function RP(a,s){if($o===null){var u=$o=[];Ph=0,ss=jm(),os={status:"pending",value:void 0,then:function(f){u.push(f)}}}return Ph++,s.then(Iv,Iv),s}function Iv(){if(--Ph===0&&$o!==null){os!==null&&(os.status="fulfilled");var a=$o;$o=null,ss=0,os=null;for(var s=0;s<a.length;s++)(0,a[s])()}}function CP(a,s){var u=[],f={status:"pending",value:null,reason:null,then:function(p){u.push(p)}};return a.then(function(){f.status="fulfilled",f.value=s;for(var p=0;p<u.length;p++)(0,u[p])(s)},function(p){for(f.status="rejected",f.reason=p,p=0;p<u.length;p++)(0,u[p])(void 0)}),f}var Lv=M.S;M.S=function(a,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&RP(a,s),Lv!==null&&Lv(a,s)};var pi=B(null);function Nh(){var a=pi.current;return a!==null?a:We.pooledCache}function oc(a,s){s===null?J(pi,pi.current):J(pi,s.pool)}function Dv(){var a=Nh();return a===null?null:{parent:vt._currentValue,pool:a}}var Uo=Error(r(460)),$v=Error(r(474)),uc=Error(r(542)),jh={then:function(){}};function Uv(a){return a=a.status,a==="fulfilled"||a==="rejected"}function lc(){}function Bv(a,s,u){switch(u=a[u],u===void 0?a.push(s):u!==s&&(s.then(lc,lc),s=u),s.status){case"fulfilled":return s.value;case"rejected":throw a=s.reason,Vv(a),a;default:if(typeof s.status=="string")s.then(lc,lc);else{if(a=We,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=s,a.status="pending",a.then(function(f){if(s.status==="pending"){var p=s;p.status="fulfilled",p.value=f}},function(f){if(s.status==="pending"){var p=s;p.status="rejected",p.reason=f}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw a=s.reason,Vv(a),a}throw Bo=s,Uo}}var Bo=null;function zv(){if(Bo===null)throw Error(r(459));var a=Bo;return Bo=null,a}function Vv(a){if(a===Uo||a===uc)throw Error(r(483))}var fa=!1;function kh(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Mh(a,s){a=a.updateQueue,s.updateQueue===a&&(s.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function da(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function ha(a,s,u){var f=a.updateQueue;if(f===null)return null;if(f=f.shared,(qe&2)!==0){var p=f.pending;return p===null?s.next=s:(s.next=p.next,p.next=s),f.pending=s,s=tc(a),Rv(a,null,u),s}return ec(a,f,s,u),tc(a)}function zo(a,s,u){if(s=s.updateQueue,s!==null&&(s=s.shared,(u&4194048)!==0)){var f=s.lanes;f&=a.pendingLanes,u|=f,s.lanes=u,I_(a,u)}}function Ih(a,s){var u=a.updateQueue,f=a.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var p=null,y=null;if(u=u.firstBaseUpdate,u!==null){do{var w={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};y===null?p=y=w:y=y.next=w,u=u.next}while(u!==null);y===null?p=y=s:y=y.next=s}else p=y=s;u={baseState:f.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:f.shared,callbacks:f.callbacks},a.updateQueue=u;return}a=u.lastBaseUpdate,a===null?u.firstBaseUpdate=s:a.next=s,u.lastBaseUpdate=s}var Lh=!1;function Vo(){if(Lh){var a=os;if(a!==null)throw a}}function qo(a,s,u,f){Lh=!1;var p=a.updateQueue;fa=!1;var y=p.firstBaseUpdate,w=p.lastBaseUpdate,T=p.shared.pending;if(T!==null){p.shared.pending=null;var C=T,L=C.next;C.next=null,w===null?y=L:w.next=L,w=C;var F=a.alternate;F!==null&&(F=F.updateQueue,T=F.lastBaseUpdate,T!==w&&(T===null?F.firstBaseUpdate=L:T.next=L,F.lastBaseUpdate=C))}if(y!==null){var Y=p.baseState;w=0,F=L=C=null,T=y;do{var D=T.lane&-536870913,$=D!==T.lane;if($?(Ie&D)===D:(f&D)===D){D!==0&&D===ss&&(Lh=!0),F!==null&&(F=F.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var _e=a,ge=T;D=s;var Xe=u;switch(ge.tag){case 1:if(_e=ge.payload,typeof _e=="function"){Y=_e.call(Xe,Y,D);break e}Y=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=ge.payload,D=typeof _e=="function"?_e.call(Xe,Y,D):_e,D==null)break e;Y=m({},Y,D);break e;case 2:fa=!0}}D=T.callback,D!==null&&(a.flags|=64,$&&(a.flags|=8192),$=p.callbacks,$===null?p.callbacks=[D]:$.push(D))}else $={lane:D,tag:T.tag,payload:T.payload,callback:T.callback,next:null},F===null?(L=F=$,C=Y):F=F.next=$,w|=D;if(T=T.next,T===null){if(T=p.shared.pending,T===null)break;$=T,T=$.next,$.next=null,p.lastBaseUpdate=$,p.shared.pending=null}}while(!0);F===null&&(C=Y),p.baseState=C,p.firstBaseUpdate=L,p.lastBaseUpdate=F,y===null&&(p.shared.lanes=0),wa|=w,a.lanes=w,a.memoizedState=Y}}function qv(a,s){if(typeof a!="function")throw Error(r(191,a));a.call(s)}function Fv(a,s){var u=a.callbacks;if(u!==null)for(a.callbacks=null,a=0;a<u.length;a++)qv(u[a],s)}var us=B(null),cc=B(0);function Hv(a,s){a=Yr,J(cc,a),J(us,s),Yr=a|s.baseLanes}function Dh(){J(cc,Yr),J(us,us.current)}function $h(){Yr=cc.current,X(us),X(cc)}var ma=0,Ne=null,Ge=null,yt=null,fc=!1,ls=!1,gi=!1,dc=0,Fo=0,cs=null,PP=0;function dt(){throw Error(r(321))}function Uh(a,s){if(s===null)return!1;for(var u=0;u<s.length&&u<a.length;u++)if(!yn(a[u],s[u]))return!1;return!0}function Bh(a,s,u,f,p,y){return ma=y,Ne=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,M.H=a===null||a.memoizedState===null?R0:C0,gi=!1,y=u(f,p),gi=!1,ls&&(y=Gv(s,u,f,p)),Zv(a),y}function Zv(a){M.H=bc;var s=Ge!==null&&Ge.next!==null;if(ma=0,yt=Ge=Ne=null,fc=!1,Fo=0,cs=null,s)throw Error(r(300));a===null||xt||(a=a.dependencies,a!==null&&ic(a)&&(xt=!0))}function Gv(a,s,u,f){Ne=a;var p=0;do{if(ls&&(cs=null),Fo=0,ls=!1,25<=p)throw Error(r(301));if(p+=1,yt=Ge=null,a.updateQueue!=null){var y=a.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}M.H=DP,y=s(u,f)}while(ls);return y}function NP(){var a=M.H,s=a.useState()[0];return s=typeof s.then=="function"?Ho(s):s,a=a.useState()[0],(Ge!==null?Ge.memoizedState:null)!==a&&(Ne.flags|=1024),s}function zh(){var a=dc!==0;return dc=0,a}function Vh(a,s,u){s.updateQueue=a.updateQueue,s.flags&=-2053,a.lanes&=~u}function qh(a){if(fc){for(a=a.memoizedState;a!==null;){var s=a.queue;s!==null&&(s.pending=null),a=a.next}fc=!1}ma=0,yt=Ge=Ne=null,ls=!1,Fo=dc=0,cs=null}function on(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?Ne.memoizedState=yt=a:yt=yt.next=a,yt}function bt(){if(Ge===null){var a=Ne.alternate;a=a!==null?a.memoizedState:null}else a=Ge.next;var s=yt===null?Ne.memoizedState:yt.next;if(s!==null)yt=s,Ge=a;else{if(a===null)throw Ne.alternate===null?Error(r(467)):Error(r(310));Ge=a,a={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},yt===null?Ne.memoizedState=yt=a:yt=yt.next=a}return yt}function Fh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ho(a){var s=Fo;return Fo+=1,cs===null&&(cs=[]),a=Bv(cs,a,s),s=Ne,(yt===null?s.memoizedState:yt.next)===null&&(s=s.alternate,M.H=s===null||s.memoizedState===null?R0:C0),a}function hc(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Ho(a);if(a.$$typeof===x)return Vt(a)}throw Error(r(438,String(a)))}function Hh(a){var s=null,u=Ne.updateQueue;if(u!==null&&(s=u.memoCache),s==null){var f=Ne.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(s={data:f.data.map(function(p){return p.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),u===null&&(u=Fh(),Ne.updateQueue=u),u.memoCache=s,u=s.data[s.index],u===void 0)for(u=s.data[s.index]=Array(a),f=0;f<a;f++)u[f]=he;return s.index++,u}function Vr(a,s){return typeof s=="function"?s(a):s}function mc(a){var s=bt();return Zh(s,Ge,a)}function Zh(a,s,u){var f=a.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=u;var p=a.baseQueue,y=f.pending;if(y!==null){if(p!==null){var w=p.next;p.next=y.next,y.next=w}s.baseQueue=p=y,f.pending=null}if(y=a.baseState,p===null)a.memoizedState=y;else{s=p.next;var T=w=null,C=null,L=s,F=!1;do{var Y=L.lane&-536870913;if(Y!==L.lane?(Ie&Y)===Y:(ma&Y)===Y){var D=L.revertLane;if(D===0)C!==null&&(C=C.next={lane:0,revertLane:0,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),Y===ss&&(F=!0);else if((ma&D)===D){L=L.next,D===ss&&(F=!0);continue}else Y={lane:0,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},C===null?(T=C=Y,w=y):C=C.next=Y,Ne.lanes|=D,wa|=D;Y=L.action,gi&&u(y,Y),y=L.hasEagerState?L.eagerState:u(y,Y)}else D={lane:Y,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},C===null?(T=C=D,w=y):C=C.next=D,Ne.lanes|=Y,wa|=Y;L=L.next}while(L!==null&&L!==s);if(C===null?w=y:C.next=T,!yn(y,a.memoizedState)&&(xt=!0,F&&(u=os,u!==null)))throw u;a.memoizedState=y,a.baseState=w,a.baseQueue=C,f.lastRenderedState=y}return p===null&&(f.lanes=0),[a.memoizedState,f.dispatch]}function Gh(a){var s=bt(),u=s.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=a;var f=u.dispatch,p=u.pending,y=s.memoizedState;if(p!==null){u.pending=null;var w=p=p.next;do y=a(y,w.action),w=w.next;while(w!==p);yn(y,s.memoizedState)||(xt=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),u.lastRenderedState=y}return[y,f]}function Yv(a,s,u){var f=Ne,p=bt(),y=Be;if(y){if(u===void 0)throw Error(r(407));u=u()}else u=s();var w=!yn((Ge||p).memoizedState,u);w&&(p.memoizedState=u,xt=!0),p=p.queue;var T=Jv.bind(null,f,p,a);if(Zo(2048,8,T,[a]),p.getSnapshot!==s||w||yt!==null&&yt.memoizedState.tag&1){if(f.flags|=2048,fs(9,pc(),Kv.bind(null,f,p,u,s),null),We===null)throw Error(r(349));y||(ma&124)!==0||Xv(f,s,u)}return u}function Xv(a,s,u){a.flags|=16384,a={getSnapshot:s,value:u},s=Ne.updateQueue,s===null?(s=Fh(),Ne.updateQueue=s,s.stores=[a]):(u=s.stores,u===null?s.stores=[a]:u.push(a))}function Kv(a,s,u,f){s.value=u,s.getSnapshot=f,Qv(s)&&Wv(a)}function Jv(a,s,u){return u(function(){Qv(s)&&Wv(a)})}function Qv(a){var s=a.getSnapshot;a=a.value;try{var u=s();return!yn(a,u)}catch{return!0}}function Wv(a){var s=ns(a,2);s!==null&&An(s,a,2)}function Yh(a){var s=on();if(typeof a=="function"){var u=a;if(a=u(),gi){oa(!0);try{u()}finally{oa(!1)}}}return s.memoizedState=s.baseState=a,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vr,lastRenderedState:a},s}function e0(a,s,u,f){return a.baseState=u,Zh(a,Ge,typeof f=="function"?f:Vr)}function jP(a,s,u,f,p){if(yc(a))throw Error(r(485));if(a=s.action,a!==null){var y={payload:p,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){y.listeners.push(w)}};M.T!==null?u(!0):y.isTransition=!1,f(y),u=s.pending,u===null?(y.next=s.pending=y,t0(s,y)):(y.next=u.next,s.pending=u.next=y)}}function t0(a,s){var u=s.action,f=s.payload,p=a.state;if(s.isTransition){var y=M.T,w={};M.T=w;try{var T=u(p,f),C=M.S;C!==null&&C(w,T),n0(a,s,T)}catch(L){Xh(a,s,L)}finally{M.T=y}}else try{y=u(p,f),n0(a,s,y)}catch(L){Xh(a,s,L)}}function n0(a,s,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(f){r0(a,s,f)},function(f){return Xh(a,s,f)}):r0(a,s,u)}function r0(a,s,u){s.status="fulfilled",s.value=u,a0(s),a.state=u,s=a.pending,s!==null&&(u=s.next,u===s?a.pending=null:(u=u.next,s.next=u,t0(a,u)))}function Xh(a,s,u){var f=a.pending;if(a.pending=null,f!==null){f=f.next;do s.status="rejected",s.reason=u,a0(s),s=s.next;while(s!==f)}a.action=null}function a0(a){a=a.listeners;for(var s=0;s<a.length;s++)(0,a[s])()}function i0(a,s){return s}function s0(a,s){if(Be){var u=We.formState;if(u!==null){e:{var f=Ne;if(Be){if(ut){t:{for(var p=ut,y=yr;p.nodeType!==8;){if(!y){p=null;break t}if(p=Xn(p.nextSibling),p===null){p=null;break t}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){ut=Xn(p.nextSibling),f=p.data==="F!";break e}}di(f)}f=!1}f&&(s=u[0])}}return u=on(),u.memoizedState=u.baseState=s,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i0,lastRenderedState:s},u.queue=f,u=E0.bind(null,Ne,f),f.dispatch=u,f=Yh(!1),y=em.bind(null,Ne,!1,f.queue),f=on(),p={state:s,dispatch:null,action:a,pending:null},f.queue=p,u=jP.bind(null,Ne,p,y,u),p.dispatch=u,f.memoizedState=a,[s,u,!1]}function o0(a){var s=bt();return u0(s,Ge,a)}function u0(a,s,u){if(s=Zh(a,s,i0)[0],a=mc(Vr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var f=Ho(s)}catch(w){throw w===Uo?uc:w}else f=s;s=bt();var p=s.queue,y=p.dispatch;return u!==s.memoizedState&&(Ne.flags|=2048,fs(9,pc(),kP.bind(null,p,u),null)),[f,y,a]}function kP(a,s){a.action=s}function l0(a){var s=bt(),u=Ge;if(u!==null)return u0(s,u,a);bt(),s=s.memoizedState,u=bt();var f=u.queue.dispatch;return u.memoizedState=a,[s,f,!1]}function fs(a,s,u,f){return a={tag:a,create:u,deps:f,inst:s,next:null},s=Ne.updateQueue,s===null&&(s=Fh(),Ne.updateQueue=s),u=s.lastEffect,u===null?s.lastEffect=a.next=a:(f=u.next,u.next=a,a.next=f,s.lastEffect=a),a}function pc(){return{destroy:void 0,resource:void 0}}function c0(){return bt().memoizedState}function gc(a,s,u,f){var p=on();f=f===void 0?null:f,Ne.flags|=a,p.memoizedState=fs(1|s,pc(),u,f)}function Zo(a,s,u,f){var p=bt();f=f===void 0?null:f;var y=p.memoizedState.inst;Ge!==null&&f!==null&&Uh(f,Ge.memoizedState.deps)?p.memoizedState=fs(s,y,u,f):(Ne.flags|=a,p.memoizedState=fs(1|s,y,u,f))}function f0(a,s){gc(8390656,8,a,s)}function d0(a,s){Zo(2048,8,a,s)}function h0(a,s){return Zo(4,2,a,s)}function m0(a,s){return Zo(4,4,a,s)}function p0(a,s){if(typeof s=="function"){a=a();var u=s(a);return function(){typeof u=="function"?u():s(null)}}if(s!=null)return a=a(),s.current=a,function(){s.current=null}}function g0(a,s,u){u=u!=null?u.concat([a]):null,Zo(4,4,p0.bind(null,s,a),u)}function Kh(){}function y0(a,s){var u=bt();s=s===void 0?null:s;var f=u.memoizedState;return s!==null&&Uh(s,f[1])?f[0]:(u.memoizedState=[a,s],a)}function b0(a,s){var u=bt();s=s===void 0?null:s;var f=u.memoizedState;if(s!==null&&Uh(s,f[1]))return f[0];if(f=a(),gi){oa(!0);try{a()}finally{oa(!1)}}return u.memoizedState=[f,s],f}function Jh(a,s,u){return u===void 0||(ma&1073741824)!==0?a.memoizedState=s:(a.memoizedState=u,a=ww(),Ne.lanes|=a,wa|=a,u)}function _0(a,s,u,f){return yn(u,s)?u:us.current!==null?(a=Jh(a,u,f),yn(a,s)||(xt=!0),a):(ma&42)===0?(xt=!0,a.memoizedState=u):(a=ww(),Ne.lanes|=a,wa|=a,s)}function v0(a,s,u,f,p){var y=U.p;U.p=y!==0&&8>y?y:8;var w=M.T,T={};M.T=T,em(a,!1,s,u);try{var C=p(),L=M.S;if(L!==null&&L(T,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var F=CP(C,f);Go(a,s,F,Sn(a))}else Go(a,s,f,Sn(a))}catch(Y){Go(a,s,{then:function(){},status:"rejected",reason:Y},Sn())}finally{U.p=y,M.T=w}}function MP(){}function Qh(a,s,u,f){if(a.tag!==5)throw Error(r(476));var p=w0(a).queue;v0(a,p,s,G,u===null?MP:function(){return S0(a),u(f)})}function w0(a){var s=a.memoizedState;if(s!==null)return s;s={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vr,lastRenderedState:G},next:null};var u={};return s.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vr,lastRenderedState:u},next:null},a.memoizedState=s,a=a.alternate,a!==null&&(a.memoizedState=s),s}function S0(a){var s=w0(a).next.queue;Go(a,s,{},Sn())}function Wh(){return Vt(fu)}function A0(){return bt().memoizedState}function T0(){return bt().memoizedState}function IP(a){for(var s=a.return;s!==null;){switch(s.tag){case 24:case 3:var u=Sn();a=da(u);var f=ha(s,a,u);f!==null&&(An(f,s,u),zo(f,s,u)),s={cache:Ch()},a.payload=s;return}s=s.return}}function LP(a,s,u){var f=Sn();u={lane:f,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},yc(a)?x0(s,u):(u=_h(a,s,u,f),u!==null&&(An(u,a,f),O0(u,s,f)))}function E0(a,s,u){var f=Sn();Go(a,s,u,f)}function Go(a,s,u,f){var p={lane:f,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(yc(a))x0(s,p);else{var y=a.alternate;if(a.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var w=s.lastRenderedState,T=y(w,u);if(p.hasEagerState=!0,p.eagerState=T,yn(T,w))return ec(a,s,p,0),We===null&&Wl(),!1}catch{}finally{}if(u=_h(a,s,p,f),u!==null)return An(u,a,f),O0(u,s,f),!0}return!1}function em(a,s,u,f){if(f={lane:2,revertLane:jm(),action:f,hasEagerState:!1,eagerState:null,next:null},yc(a)){if(s)throw Error(r(479))}else s=_h(a,u,f,2),s!==null&&An(s,a,2)}function yc(a){var s=a.alternate;return a===Ne||s!==null&&s===Ne}function x0(a,s){ls=fc=!0;var u=a.pending;u===null?s.next=s:(s.next=u.next,u.next=s),a.pending=s}function O0(a,s,u){if((u&4194048)!==0){var f=s.lanes;f&=a.pendingLanes,u|=f,s.lanes=u,I_(a,u)}}var bc={readContext:Vt,use:hc,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useLayoutEffect:dt,useInsertionEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useSyncExternalStore:dt,useId:dt,useHostTransitionStatus:dt,useFormState:dt,useActionState:dt,useOptimistic:dt,useMemoCache:dt,useCacheRefresh:dt},R0={readContext:Vt,use:hc,useCallback:function(a,s){return on().memoizedState=[a,s===void 0?null:s],a},useContext:Vt,useEffect:f0,useImperativeHandle:function(a,s,u){u=u!=null?u.concat([a]):null,gc(4194308,4,p0.bind(null,s,a),u)},useLayoutEffect:function(a,s){return gc(4194308,4,a,s)},useInsertionEffect:function(a,s){gc(4,2,a,s)},useMemo:function(a,s){var u=on();s=s===void 0?null:s;var f=a();if(gi){oa(!0);try{a()}finally{oa(!1)}}return u.memoizedState=[f,s],f},useReducer:function(a,s,u){var f=on();if(u!==void 0){var p=u(s);if(gi){oa(!0);try{u(s)}finally{oa(!1)}}}else p=s;return f.memoizedState=f.baseState=p,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:p},f.queue=a,a=a.dispatch=LP.bind(null,Ne,a),[f.memoizedState,a]},useRef:function(a){var s=on();return a={current:a},s.memoizedState=a},useState:function(a){a=Yh(a);var s=a.queue,u=E0.bind(null,Ne,s);return s.dispatch=u,[a.memoizedState,u]},useDebugValue:Kh,useDeferredValue:function(a,s){var u=on();return Jh(u,a,s)},useTransition:function(){var a=Yh(!1);return a=v0.bind(null,Ne,a.queue,!0,!1),on().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,s,u){var f=Ne,p=on();if(Be){if(u===void 0)throw Error(r(407));u=u()}else{if(u=s(),We===null)throw Error(r(349));(Ie&124)!==0||Xv(f,s,u)}p.memoizedState=u;var y={value:u,getSnapshot:s};return p.queue=y,f0(Jv.bind(null,f,y,a),[a]),f.flags|=2048,fs(9,pc(),Kv.bind(null,f,y,u,s),null),u},useId:function(){var a=on(),s=We.identifierPrefix;if(Be){var u=Ur,f=$r;u=(f&~(1<<32-gn(f)-1)).toString(32)+u,s=""+s+"R"+u,u=dc++,0<u&&(s+="H"+u.toString(32)),s+=""}else u=PP++,s=""+s+"r"+u.toString(32)+"";return a.memoizedState=s},useHostTransitionStatus:Wh,useFormState:s0,useActionState:s0,useOptimistic:function(a){var s=on();s.memoizedState=s.baseState=a;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=u,s=em.bind(null,Ne,!0,u),u.dispatch=s,[a,s]},useMemoCache:Hh,useCacheRefresh:function(){return on().memoizedState=IP.bind(null,Ne)}},C0={readContext:Vt,use:hc,useCallback:y0,useContext:Vt,useEffect:d0,useImperativeHandle:g0,useInsertionEffect:h0,useLayoutEffect:m0,useMemo:b0,useReducer:mc,useRef:c0,useState:function(){return mc(Vr)},useDebugValue:Kh,useDeferredValue:function(a,s){var u=bt();return _0(u,Ge.memoizedState,a,s)},useTransition:function(){var a=mc(Vr)[0],s=bt().memoizedState;return[typeof a=="boolean"?a:Ho(a),s]},useSyncExternalStore:Yv,useId:A0,useHostTransitionStatus:Wh,useFormState:o0,useActionState:o0,useOptimistic:function(a,s){var u=bt();return e0(u,Ge,a,s)},useMemoCache:Hh,useCacheRefresh:T0},DP={readContext:Vt,use:hc,useCallback:y0,useContext:Vt,useEffect:d0,useImperativeHandle:g0,useInsertionEffect:h0,useLayoutEffect:m0,useMemo:b0,useReducer:Gh,useRef:c0,useState:function(){return Gh(Vr)},useDebugValue:Kh,useDeferredValue:function(a,s){var u=bt();return Ge===null?Jh(u,a,s):_0(u,Ge.memoizedState,a,s)},useTransition:function(){var a=Gh(Vr)[0],s=bt().memoizedState;return[typeof a=="boolean"?a:Ho(a),s]},useSyncExternalStore:Yv,useId:A0,useHostTransitionStatus:Wh,useFormState:l0,useActionState:l0,useOptimistic:function(a,s){var u=bt();return Ge!==null?e0(u,Ge,a,s):(u.baseState=a,[a,u.queue.dispatch])},useMemoCache:Hh,useCacheRefresh:T0},ds=null,Yo=0;function _c(a){var s=Yo;return Yo+=1,ds===null&&(ds=[]),Bv(ds,a,s)}function Xo(a,s){s=s.props.ref,a.ref=s!==void 0?s:null}function vc(a,s){throw s.$$typeof===g?Error(r(525)):(a=Object.prototype.toString.call(s),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":a)))}function P0(a){var s=a._init;return s(a._payload)}function N0(a){function s(k,N){if(a){var I=k.deletions;I===null?(k.deletions=[N],k.flags|=16):I.push(N)}}function u(k,N){if(!a)return null;for(;N!==null;)s(k,N),N=N.sibling;return null}function f(k){for(var N=new Map;k!==null;)k.key!==null?N.set(k.key,k):N.set(k.index,k),k=k.sibling;return N}function p(k,N){return k=Dr(k,N),k.index=0,k.sibling=null,k}function y(k,N,I){return k.index=I,a?(I=k.alternate,I!==null?(I=I.index,I<N?(k.flags|=67108866,N):I):(k.flags|=67108866,N)):(k.flags|=1048576,N)}function w(k){return a&&k.alternate===null&&(k.flags|=67108866),k}function T(k,N,I,Z){return N===null||N.tag!==6?(N=wh(I,k.mode,Z),N.return=k,N):(N=p(N,I),N.return=k,N)}function C(k,N,I,Z){var se=I.type;return se===v?F(k,N,I.props.children,Z,I.key):N!==null&&(N.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===V&&P0(se)===N.type)?(N=p(N,I.props),Xo(N,I),N.return=k,N):(N=nc(I.type,I.key,I.props,null,k.mode,Z),Xo(N,I),N.return=k,N)}function L(k,N,I,Z){return N===null||N.tag!==4||N.stateNode.containerInfo!==I.containerInfo||N.stateNode.implementation!==I.implementation?(N=Sh(I,k.mode,Z),N.return=k,N):(N=p(N,I.children||[]),N.return=k,N)}function F(k,N,I,Z,se){return N===null||N.tag!==7?(N=ui(I,k.mode,Z,se),N.return=k,N):(N=p(N,I),N.return=k,N)}function Y(k,N,I){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=wh(""+N,k.mode,I),N.return=k,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case b:return I=nc(N.type,N.key,N.props,null,k.mode,I),Xo(I,N),I.return=k,I;case _:return N=Sh(N,k.mode,I),N.return=k,N;case V:var Z=N._init;return N=Z(N._payload),Y(k,N,I)}if(Q(N)||De(N))return N=ui(N,k.mode,I,null),N.return=k,N;if(typeof N.then=="function")return Y(k,_c(N),I);if(N.$$typeof===x)return Y(k,sc(k,N),I);vc(k,N)}return null}function D(k,N,I,Z){var se=N!==null?N.key:null;if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return se!==null?null:T(k,N,""+I,Z);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case b:return I.key===se?C(k,N,I,Z):null;case _:return I.key===se?L(k,N,I,Z):null;case V:return se=I._init,I=se(I._payload),D(k,N,I,Z)}if(Q(I)||De(I))return se!==null?null:F(k,N,I,Z,null);if(typeof I.then=="function")return D(k,N,_c(I),Z);if(I.$$typeof===x)return D(k,N,sc(k,I),Z);vc(k,I)}return null}function $(k,N,I,Z,se){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return k=k.get(I)||null,T(N,k,""+Z,se);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case b:return k=k.get(Z.key===null?I:Z.key)||null,C(N,k,Z,se);case _:return k=k.get(Z.key===null?I:Z.key)||null,L(N,k,Z,se);case V:var je=Z._init;return Z=je(Z._payload),$(k,N,I,Z,se)}if(Q(Z)||De(Z))return k=k.get(I)||null,F(N,k,Z,se,null);if(typeof Z.then=="function")return $(k,N,I,_c(Z),se);if(Z.$$typeof===x)return $(k,N,I,sc(N,Z),se);vc(N,Z)}return null}function _e(k,N,I,Z){for(var se=null,je=null,le=N,ye=N=0,Rt=null;le!==null&&ye<I.length;ye++){le.index>ye?(Rt=le,le=null):Rt=le.sibling;var $e=D(k,le,I[ye],Z);if($e===null){le===null&&(le=Rt);break}a&&le&&$e.alternate===null&&s(k,le),N=y($e,N,ye),je===null?se=$e:je.sibling=$e,je=$e,le=Rt}if(ye===I.length)return u(k,le),Be&&ci(k,ye),se;if(le===null){for(;ye<I.length;ye++)le=Y(k,I[ye],Z),le!==null&&(N=y(le,N,ye),je===null?se=le:je.sibling=le,je=le);return Be&&ci(k,ye),se}for(le=f(le);ye<I.length;ye++)Rt=$(le,k,ye,I[ye],Z),Rt!==null&&(a&&Rt.alternate!==null&&le.delete(Rt.key===null?ye:Rt.key),N=y(Rt,N,ye),je===null?se=Rt:je.sibling=Rt,je=Rt);return a&&le.forEach(function(Pa){return s(k,Pa)}),Be&&ci(k,ye),se}function ge(k,N,I,Z){if(I==null)throw Error(r(151));for(var se=null,je=null,le=N,ye=N=0,Rt=null,$e=I.next();le!==null&&!$e.done;ye++,$e=I.next()){le.index>ye?(Rt=le,le=null):Rt=le.sibling;var Pa=D(k,le,$e.value,Z);if(Pa===null){le===null&&(le=Rt);break}a&&le&&Pa.alternate===null&&s(k,le),N=y(Pa,N,ye),je===null?se=Pa:je.sibling=Pa,je=Pa,le=Rt}if($e.done)return u(k,le),Be&&ci(k,ye),se;if(le===null){for(;!$e.done;ye++,$e=I.next())$e=Y(k,$e.value,Z),$e!==null&&(N=y($e,N,ye),je===null?se=$e:je.sibling=$e,je=$e);return Be&&ci(k,ye),se}for(le=f(le);!$e.done;ye++,$e=I.next())$e=$(le,k,ye,$e.value,Z),$e!==null&&(a&&$e.alternate!==null&&le.delete($e.key===null?ye:$e.key),N=y($e,N,ye),je===null?se=$e:je.sibling=$e,je=$e);return a&&le.forEach(function($N){return s(k,$N)}),Be&&ci(k,ye),se}function Xe(k,N,I,Z){if(typeof I=="object"&&I!==null&&I.type===v&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case b:e:{for(var se=I.key;N!==null;){if(N.key===se){if(se=I.type,se===v){if(N.tag===7){u(k,N.sibling),Z=p(N,I.props.children),Z.return=k,k=Z;break e}}else if(N.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===V&&P0(se)===N.type){u(k,N.sibling),Z=p(N,I.props),Xo(Z,I),Z.return=k,k=Z;break e}u(k,N);break}else s(k,N);N=N.sibling}I.type===v?(Z=ui(I.props.children,k.mode,Z,I.key),Z.return=k,k=Z):(Z=nc(I.type,I.key,I.props,null,k.mode,Z),Xo(Z,I),Z.return=k,k=Z)}return w(k);case _:e:{for(se=I.key;N!==null;){if(N.key===se)if(N.tag===4&&N.stateNode.containerInfo===I.containerInfo&&N.stateNode.implementation===I.implementation){u(k,N.sibling),Z=p(N,I.children||[]),Z.return=k,k=Z;break e}else{u(k,N);break}else s(k,N);N=N.sibling}Z=Sh(I,k.mode,Z),Z.return=k,k=Z}return w(k);case V:return se=I._init,I=se(I._payload),Xe(k,N,I,Z)}if(Q(I))return _e(k,N,I,Z);if(De(I)){if(se=De(I),typeof se!="function")throw Error(r(150));return I=se.call(I),ge(k,N,I,Z)}if(typeof I.then=="function")return Xe(k,N,_c(I),Z);if(I.$$typeof===x)return Xe(k,N,sc(k,I),Z);vc(k,I)}return typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint"?(I=""+I,N!==null&&N.tag===6?(u(k,N.sibling),Z=p(N,I),Z.return=k,k=Z):(u(k,N),Z=wh(I,k.mode,Z),Z.return=k,k=Z),w(k)):u(k,N)}return function(k,N,I,Z){try{Yo=0;var se=Xe(k,N,I,Z);return ds=null,se}catch(le){if(le===Uo||le===uc)throw le;var je=bn(29,le,null,k.mode);return je.lanes=Z,je.return=k,je}finally{}}}var hs=N0(!0),j0=N0(!1),Un=B(null),br=null;function pa(a){var s=a.alternate;J(wt,wt.current&1),J(Un,a),br===null&&(s===null||us.current!==null||s.memoizedState!==null)&&(br=a)}function k0(a){if(a.tag===22){if(J(wt,wt.current),J(Un,a),br===null){var s=a.alternate;s!==null&&s.memoizedState!==null&&(br=a)}}else ga()}function ga(){J(wt,wt.current),J(Un,Un.current)}function qr(a){X(Un),br===a&&(br=null),X(wt)}var wt=B(0);function wc(a){for(var s=a;s!==null;){if(s.tag===13){var u=s.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||Fm(u)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break;for(;s.sibling===null;){if(s.return===null||s.return===a)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function tm(a,s,u,f){s=a.memoizedState,u=u(f,s),u=u==null?s:m({},s,u),a.memoizedState=u,a.lanes===0&&(a.updateQueue.baseState=u)}var nm={enqueueSetState:function(a,s,u){a=a._reactInternals;var f=Sn(),p=da(f);p.payload=s,u!=null&&(p.callback=u),s=ha(a,p,f),s!==null&&(An(s,a,f),zo(s,a,f))},enqueueReplaceState:function(a,s,u){a=a._reactInternals;var f=Sn(),p=da(f);p.tag=1,p.payload=s,u!=null&&(p.callback=u),s=ha(a,p,f),s!==null&&(An(s,a,f),zo(s,a,f))},enqueueForceUpdate:function(a,s){a=a._reactInternals;var u=Sn(),f=da(u);f.tag=2,s!=null&&(f.callback=s),s=ha(a,f,u),s!==null&&(An(s,a,u),zo(s,a,u))}};function M0(a,s,u,f,p,y,w){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(f,y,w):s.prototype&&s.prototype.isPureReactComponent?!No(u,f)||!No(p,y):!0}function I0(a,s,u,f){a=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(u,f),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(u,f),s.state!==a&&nm.enqueueReplaceState(s,s.state,null)}function yi(a,s){var u=s;if("ref"in s){u={};for(var f in s)f!=="ref"&&(u[f]=s[f])}if(a=a.defaultProps){u===s&&(u=m({},u));for(var p in a)u[p]===void 0&&(u[p]=a[p])}return u}var Sc=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function L0(a){Sc(a)}function D0(a){console.error(a)}function $0(a){Sc(a)}function Ac(a,s){try{var u=a.onUncaughtError;u(s.value,{componentStack:s.stack})}catch(f){setTimeout(function(){throw f})}}function U0(a,s,u){try{var f=a.onCaughtError;f(u.value,{componentStack:u.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function rm(a,s,u){return u=da(u),u.tag=3,u.payload={element:null},u.callback=function(){Ac(a,s)},u}function B0(a){return a=da(a),a.tag=3,a}function z0(a,s,u,f){var p=u.type.getDerivedStateFromError;if(typeof p=="function"){var y=f.value;a.payload=function(){return p(y)},a.callback=function(){U0(s,u,f)}}var w=u.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(a.callback=function(){U0(s,u,f),typeof p!="function"&&(Sa===null?Sa=new Set([this]):Sa.add(this));var T=f.stack;this.componentDidCatch(f.value,{componentStack:T!==null?T:""})})}function $P(a,s,u,f,p){if(u.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(s=u.alternate,s!==null&&Lo(s,u,p,!0),u=Un.current,u!==null){switch(u.tag){case 13:return br===null?Om():u.alternate===null&&lt===0&&(lt=3),u.flags&=-257,u.flags|=65536,u.lanes=p,f===jh?u.flags|=16384:(s=u.updateQueue,s===null?u.updateQueue=new Set([f]):s.add(f),Cm(a,f,p)),!1;case 22:return u.flags|=65536,f===jh?u.flags|=16384:(s=u.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([f])},u.updateQueue=s):(u=s.retryQueue,u===null?s.retryQueue=new Set([f]):u.add(f)),Cm(a,f,p)),!1}throw Error(r(435,u.tag))}return Cm(a,f,p),Om(),!1}if(Be)return s=Un.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=p,f!==Eh&&(a=Error(r(422),{cause:f}),Io(In(a,u)))):(f!==Eh&&(s=Error(r(423),{cause:f}),Io(In(s,u))),a=a.current.alternate,a.flags|=65536,p&=-p,a.lanes|=p,f=In(f,u),p=rm(a.stateNode,f,p),Ih(a,p),lt!==4&&(lt=2)),!1;var y=Error(r(520),{cause:f});if(y=In(y,u),nu===null?nu=[y]:nu.push(y),lt!==4&&(lt=2),s===null)return!0;f=In(f,u),u=s;do{switch(u.tag){case 3:return u.flags|=65536,a=p&-p,u.lanes|=a,a=rm(u.stateNode,f,a),Ih(u,a),!1;case 1:if(s=u.type,y=u.stateNode,(u.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Sa===null||!Sa.has(y))))return u.flags|=65536,p&=-p,u.lanes|=p,p=B0(p),z0(p,a,u,f),Ih(u,p),!1}u=u.return}while(u!==null);return!1}var V0=Error(r(461)),xt=!1;function kt(a,s,u,f){s.child=a===null?j0(s,null,u,f):hs(s,a.child,u,f)}function q0(a,s,u,f,p){u=u.render;var y=s.ref;if("ref"in f){var w={};for(var T in f)T!=="ref"&&(w[T]=f[T])}else w=f;return mi(s),f=Bh(a,s,u,w,y,p),T=zh(),a!==null&&!xt?(Vh(a,s,p),Fr(a,s,p)):(Be&&T&&Ah(s),s.flags|=1,kt(a,s,f,p),s.child)}function F0(a,s,u,f,p){if(a===null){var y=u.type;return typeof y=="function"&&!vh(y)&&y.defaultProps===void 0&&u.compare===null?(s.tag=15,s.type=y,H0(a,s,y,f,p)):(a=nc(u.type,null,f,s,s.mode,p),a.ref=s.ref,a.return=s,s.child=a)}if(y=a.child,!fm(a,p)){var w=y.memoizedProps;if(u=u.compare,u=u!==null?u:No,u(w,f)&&a.ref===s.ref)return Fr(a,s,p)}return s.flags|=1,a=Dr(y,f),a.ref=s.ref,a.return=s,s.child=a}function H0(a,s,u,f,p){if(a!==null){var y=a.memoizedProps;if(No(y,f)&&a.ref===s.ref)if(xt=!1,s.pendingProps=f=y,fm(a,p))(a.flags&131072)!==0&&(xt=!0);else return s.lanes=a.lanes,Fr(a,s,p)}return am(a,s,u,f,p)}function Z0(a,s,u){var f=s.pendingProps,p=f.children,y=a!==null?a.memoizedState:null;if(f.mode==="hidden"){if((s.flags&128)!==0){if(f=y!==null?y.baseLanes|u:u,a!==null){for(p=s.child=a.child,y=0;p!==null;)y=y|p.lanes|p.childLanes,p=p.sibling;s.childLanes=y&~f}else s.childLanes=0,s.child=null;return G0(a,s,f,u)}if((u&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},a!==null&&oc(s,y!==null?y.cachePool:null),y!==null?Hv(s,y):Dh(),k0(s);else return s.lanes=s.childLanes=536870912,G0(a,s,y!==null?y.baseLanes|u:u,u)}else y!==null?(oc(s,y.cachePool),Hv(s,y),ga(),s.memoizedState=null):(a!==null&&oc(s,null),Dh(),ga());return kt(a,s,p,u),s.child}function G0(a,s,u,f){var p=Nh();return p=p===null?null:{parent:vt._currentValue,pool:p},s.memoizedState={baseLanes:u,cachePool:p},a!==null&&oc(s,null),Dh(),k0(s),a!==null&&Lo(a,s,f,!0),null}function Tc(a,s){var u=s.ref;if(u===null)a!==null&&a.ref!==null&&(s.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(r(284));(a===null||a.ref!==u)&&(s.flags|=4194816)}}function am(a,s,u,f,p){return mi(s),u=Bh(a,s,u,f,void 0,p),f=zh(),a!==null&&!xt?(Vh(a,s,p),Fr(a,s,p)):(Be&&f&&Ah(s),s.flags|=1,kt(a,s,u,p),s.child)}function Y0(a,s,u,f,p,y){return mi(s),s.updateQueue=null,u=Gv(s,f,u,p),Zv(a),f=zh(),a!==null&&!xt?(Vh(a,s,y),Fr(a,s,y)):(Be&&f&&Ah(s),s.flags|=1,kt(a,s,u,y),s.child)}function X0(a,s,u,f,p){if(mi(s),s.stateNode===null){var y=rs,w=u.contextType;typeof w=="object"&&w!==null&&(y=Vt(w)),y=new u(f,y),s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=nm,s.stateNode=y,y._reactInternals=s,y=s.stateNode,y.props=f,y.state=s.memoizedState,y.refs={},kh(s),w=u.contextType,y.context=typeof w=="object"&&w!==null?Vt(w):rs,y.state=s.memoizedState,w=u.getDerivedStateFromProps,typeof w=="function"&&(tm(s,u,w,f),y.state=s.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(w=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),w!==y.state&&nm.enqueueReplaceState(y,y.state,null),qo(s,f,y,p),Vo(),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308),f=!0}else if(a===null){y=s.stateNode;var T=s.memoizedProps,C=yi(u,T);y.props=C;var L=y.context,F=u.contextType;w=rs,typeof F=="object"&&F!==null&&(w=Vt(F));var Y=u.getDerivedStateFromProps;F=typeof Y=="function"||typeof y.getSnapshotBeforeUpdate=="function",T=s.pendingProps!==T,F||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T||L!==w)&&I0(s,y,f,w),fa=!1;var D=s.memoizedState;y.state=D,qo(s,f,y,p),Vo(),L=s.memoizedState,T||D!==L||fa?(typeof Y=="function"&&(tm(s,u,Y,f),L=s.memoizedState),(C=fa||M0(s,u,C,f,D,L,w))?(F||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=f,s.memoizedState=L),y.props=f,y.state=L,y.context=w,f=C):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),f=!1)}else{y=s.stateNode,Mh(a,s),w=s.memoizedProps,F=yi(u,w),y.props=F,Y=s.pendingProps,D=y.context,L=u.contextType,C=rs,typeof L=="object"&&L!==null&&(C=Vt(L)),T=u.getDerivedStateFromProps,(L=typeof T=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(w!==Y||D!==C)&&I0(s,y,f,C),fa=!1,D=s.memoizedState,y.state=D,qo(s,f,y,p),Vo();var $=s.memoizedState;w!==Y||D!==$||fa||a!==null&&a.dependencies!==null&&ic(a.dependencies)?(typeof T=="function"&&(tm(s,u,T,f),$=s.memoizedState),(F=fa||M0(s,u,F,f,D,$,C)||a!==null&&a.dependencies!==null&&ic(a.dependencies))?(L||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(f,$,C),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(f,$,C)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||w===a.memoizedProps&&D===a.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===a.memoizedProps&&D===a.memoizedState||(s.flags|=1024),s.memoizedProps=f,s.memoizedState=$),y.props=f,y.state=$,y.context=C,f=F):(typeof y.componentDidUpdate!="function"||w===a.memoizedProps&&D===a.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===a.memoizedProps&&D===a.memoizedState||(s.flags|=1024),f=!1)}return y=f,Tc(a,s),f=(s.flags&128)!==0,y||f?(y=s.stateNode,u=f&&typeof u.getDerivedStateFromError!="function"?null:y.render(),s.flags|=1,a!==null&&f?(s.child=hs(s,a.child,null,p),s.child=hs(s,null,u,p)):kt(a,s,u,p),s.memoizedState=y.state,a=s.child):a=Fr(a,s,p),a}function K0(a,s,u,f){return Mo(),s.flags|=256,kt(a,s,u,f),s.child}var im={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function sm(a){return{baseLanes:a,cachePool:Dv()}}function om(a,s,u){return a=a!==null?a.childLanes&~u:0,s&&(a|=Bn),a}function J0(a,s,u){var f=s.pendingProps,p=!1,y=(s.flags&128)!==0,w;if((w=y)||(w=a!==null&&a.memoizedState===null?!1:(wt.current&2)!==0),w&&(p=!0,s.flags&=-129),w=(s.flags&32)!==0,s.flags&=-33,a===null){if(Be){if(p?pa(s):ga(),Be){var T=ut,C;if(C=T){e:{for(C=T,T=yr;C.nodeType!==8;){if(!T){T=null;break e}if(C=Xn(C.nextSibling),C===null){T=null;break e}}T=C}T!==null?(s.memoizedState={dehydrated:T,treeContext:li!==null?{id:$r,overflow:Ur}:null,retryLane:536870912,hydrationErrors:null},C=bn(18,null,null,0),C.stateNode=T,C.return=s,s.child=C,Kt=s,ut=null,C=!0):C=!1}C||di(s)}if(T=s.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return Fm(T)?s.lanes=32:s.lanes=536870912,null;qr(s)}return T=f.children,f=f.fallback,p?(ga(),p=s.mode,T=Ec({mode:"hidden",children:T},p),f=ui(f,p,u,null),T.return=s,f.return=s,T.sibling=f,s.child=T,p=s.child,p.memoizedState=sm(u),p.childLanes=om(a,w,u),s.memoizedState=im,f):(pa(s),um(s,T))}if(C=a.memoizedState,C!==null&&(T=C.dehydrated,T!==null)){if(y)s.flags&256?(pa(s),s.flags&=-257,s=lm(a,s,u)):s.memoizedState!==null?(ga(),s.child=a.child,s.flags|=128,s=null):(ga(),p=f.fallback,T=s.mode,f=Ec({mode:"visible",children:f.children},T),p=ui(p,T,u,null),p.flags|=2,f.return=s,p.return=s,f.sibling=p,s.child=f,hs(s,a.child,null,u),f=s.child,f.memoizedState=sm(u),f.childLanes=om(a,w,u),s.memoizedState=im,s=p);else if(pa(s),Fm(T)){if(w=T.nextSibling&&T.nextSibling.dataset,w)var L=w.dgst;w=L,f=Error(r(419)),f.stack="",f.digest=w,Io({value:f,source:null,stack:null}),s=lm(a,s,u)}else if(xt||Lo(a,s,u,!1),w=(u&a.childLanes)!==0,xt||w){if(w=We,w!==null&&(f=u&-u,f=(f&42)!==0?1:Hd(f),f=(f&(w.suspendedLanes|u))!==0?0:f,f!==0&&f!==C.retryLane))throw C.retryLane=f,ns(a,f),An(w,a,f),V0;T.data==="$?"||Om(),s=lm(a,s,u)}else T.data==="$?"?(s.flags|=192,s.child=a.child,s=null):(a=C.treeContext,ut=Xn(T.nextSibling),Kt=s,Be=!0,fi=null,yr=!1,a!==null&&(Dn[$n++]=$r,Dn[$n++]=Ur,Dn[$n++]=li,$r=a.id,Ur=a.overflow,li=s),s=um(s,f.children),s.flags|=4096);return s}return p?(ga(),p=f.fallback,T=s.mode,C=a.child,L=C.sibling,f=Dr(C,{mode:"hidden",children:f.children}),f.subtreeFlags=C.subtreeFlags&65011712,L!==null?p=Dr(L,p):(p=ui(p,T,u,null),p.flags|=2),p.return=s,f.return=s,f.sibling=p,s.child=f,f=p,p=s.child,T=a.child.memoizedState,T===null?T=sm(u):(C=T.cachePool,C!==null?(L=vt._currentValue,C=C.parent!==L?{parent:L,pool:L}:C):C=Dv(),T={baseLanes:T.baseLanes|u,cachePool:C}),p.memoizedState=T,p.childLanes=om(a,w,u),s.memoizedState=im,f):(pa(s),u=a.child,a=u.sibling,u=Dr(u,{mode:"visible",children:f.children}),u.return=s,u.sibling=null,a!==null&&(w=s.deletions,w===null?(s.deletions=[a],s.flags|=16):w.push(a)),s.child=u,s.memoizedState=null,u)}function um(a,s){return s=Ec({mode:"visible",children:s},a.mode),s.return=a,a.child=s}function Ec(a,s){return a=bn(22,a,null,s),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function lm(a,s,u){return hs(s,a.child,null,u),a=um(s,s.pendingProps.children),a.flags|=2,s.memoizedState=null,a}function Q0(a,s,u){a.lanes|=s;var f=a.alternate;f!==null&&(f.lanes|=s),Oh(a.return,s,u)}function cm(a,s,u,f,p){var y=a.memoizedState;y===null?a.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:p}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=f,y.tail=u,y.tailMode=p)}function W0(a,s,u){var f=s.pendingProps,p=f.revealOrder,y=f.tail;if(kt(a,s,f.children,u),f=wt.current,(f&2)!==0)f=f&1|2,s.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=s.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Q0(a,u,s);else if(a.tag===19)Q0(a,u,s);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}f&=1}switch(J(wt,f),p){case"forwards":for(u=s.child,p=null;u!==null;)a=u.alternate,a!==null&&wc(a)===null&&(p=u),u=u.sibling;u=p,u===null?(p=s.child,s.child=null):(p=u.sibling,u.sibling=null),cm(s,!1,p,u,y);break;case"backwards":for(u=null,p=s.child,s.child=null;p!==null;){if(a=p.alternate,a!==null&&wc(a)===null){s.child=p;break}a=p.sibling,p.sibling=u,u=p,p=a}cm(s,!0,u,null,y);break;case"together":cm(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Fr(a,s,u){if(a!==null&&(s.dependencies=a.dependencies),wa|=s.lanes,(u&s.childLanes)===0)if(a!==null){if(Lo(a,s,u,!1),(u&s.childLanes)===0)return null}else return null;if(a!==null&&s.child!==a.child)throw Error(r(153));if(s.child!==null){for(a=s.child,u=Dr(a,a.pendingProps),s.child=u,u.return=s;a.sibling!==null;)a=a.sibling,u=u.sibling=Dr(a,a.pendingProps),u.return=s;u.sibling=null}return s.child}function fm(a,s){return(a.lanes&s)!==0?!0:(a=a.dependencies,!!(a!==null&&ic(a)))}function UP(a,s,u){switch(s.tag){case 3:Je(s,s.stateNode.containerInfo),ca(s,vt,a.memoizedState.cache),Mo();break;case 27:case 5:ni(s);break;case 4:Je(s,s.stateNode.containerInfo);break;case 10:ca(s,s.type,s.memoizedProps.value);break;case 13:var f=s.memoizedState;if(f!==null)return f.dehydrated!==null?(pa(s),s.flags|=128,null):(u&s.child.childLanes)!==0?J0(a,s,u):(pa(s),a=Fr(a,s,u),a!==null?a.sibling:null);pa(s);break;case 19:var p=(a.flags&128)!==0;if(f=(u&s.childLanes)!==0,f||(Lo(a,s,u,!1),f=(u&s.childLanes)!==0),p){if(f)return W0(a,s,u);s.flags|=128}if(p=s.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),J(wt,wt.current),f)break;return null;case 22:case 23:return s.lanes=0,Z0(a,s,u);case 24:ca(s,vt,a.memoizedState.cache)}return Fr(a,s,u)}function ew(a,s,u){if(a!==null)if(a.memoizedProps!==s.pendingProps)xt=!0;else{if(!fm(a,u)&&(s.flags&128)===0)return xt=!1,UP(a,s,u);xt=(a.flags&131072)!==0}else xt=!1,Be&&(s.flags&1048576)!==0&&Pv(s,ac,s.index);switch(s.lanes=0,s.tag){case 16:e:{a=s.pendingProps;var f=s.elementType,p=f._init;if(f=p(f._payload),s.type=f,typeof f=="function")vh(f)?(a=yi(f,a),s.tag=1,s=X0(null,s,f,a,u)):(s.tag=0,s=am(null,s,f,a,u));else{if(f!=null){if(p=f.$$typeof,p===j){s.tag=11,s=q0(null,s,f,a,u);break e}else if(p===H){s.tag=14,s=F0(null,s,f,a,u);break e}}throw s=te(f)||f,Error(r(306,s,""))}}return s;case 0:return am(a,s,s.type,s.pendingProps,u);case 1:return f=s.type,p=yi(f,s.pendingProps),X0(a,s,f,p,u);case 3:e:{if(Je(s,s.stateNode.containerInfo),a===null)throw Error(r(387));f=s.pendingProps;var y=s.memoizedState;p=y.element,Mh(a,s),qo(s,f,null,u);var w=s.memoizedState;if(f=w.cache,ca(s,vt,f),f!==y.cache&&Rh(s,[vt],u,!0),Vo(),f=w.element,y.isDehydrated)if(y={element:f,isDehydrated:!1,cache:w.cache},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){s=K0(a,s,f,u);break e}else if(f!==p){p=In(Error(r(424)),s),Io(p),s=K0(a,s,f,u);break e}else{switch(a=s.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(ut=Xn(a.firstChild),Kt=s,Be=!0,fi=null,yr=!0,u=j0(s,null,f,u),s.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(Mo(),f===p){s=Fr(a,s,u);break e}kt(a,s,f,u)}s=s.child}return s;case 26:return Tc(a,s),a===null?(u=aS(s.type,null,s.pendingProps,null))?s.memoizedState=u:Be||(u=s.type,a=s.pendingProps,f=Uc(pe.current).createElement(u),f[zt]=s,f[an]=a,It(f,u,a),Et(f),s.stateNode=f):s.memoizedState=aS(s.type,a.memoizedProps,s.pendingProps,a.memoizedState),null;case 27:return ni(s),a===null&&Be&&(f=s.stateNode=tS(s.type,s.pendingProps,pe.current),Kt=s,yr=!0,p=ut,Ea(s.type)?(Hm=p,ut=Xn(f.firstChild)):ut=p),kt(a,s,s.pendingProps.children,u),Tc(a,s),a===null&&(s.flags|=4194304),s.child;case 5:return a===null&&Be&&((p=f=ut)&&(f=hN(f,s.type,s.pendingProps,yr),f!==null?(s.stateNode=f,Kt=s,ut=Xn(f.firstChild),yr=!1,p=!0):p=!1),p||di(s)),ni(s),p=s.type,y=s.pendingProps,w=a!==null?a.memoizedProps:null,f=y.children,zm(p,y)?f=null:w!==null&&zm(p,w)&&(s.flags|=32),s.memoizedState!==null&&(p=Bh(a,s,NP,null,null,u),fu._currentValue=p),Tc(a,s),kt(a,s,f,u),s.child;case 6:return a===null&&Be&&((a=u=ut)&&(u=mN(u,s.pendingProps,yr),u!==null?(s.stateNode=u,Kt=s,ut=null,a=!0):a=!1),a||di(s)),null;case 13:return J0(a,s,u);case 4:return Je(s,s.stateNode.containerInfo),f=s.pendingProps,a===null?s.child=hs(s,null,f,u):kt(a,s,f,u),s.child;case 11:return q0(a,s,s.type,s.pendingProps,u);case 7:return kt(a,s,s.pendingProps,u),s.child;case 8:return kt(a,s,s.pendingProps.children,u),s.child;case 12:return kt(a,s,s.pendingProps.children,u),s.child;case 10:return f=s.pendingProps,ca(s,s.type,f.value),kt(a,s,f.children,u),s.child;case 9:return p=s.type._context,f=s.pendingProps.children,mi(s),p=Vt(p),f=f(p),s.flags|=1,kt(a,s,f,u),s.child;case 14:return F0(a,s,s.type,s.pendingProps,u);case 15:return H0(a,s,s.type,s.pendingProps,u);case 19:return W0(a,s,u);case 31:return f=s.pendingProps,u=s.mode,f={mode:f.mode,children:f.children},a===null?(u=Ec(f,u),u.ref=s.ref,s.child=u,u.return=s,s=u):(u=Dr(a.child,f),u.ref=s.ref,s.child=u,u.return=s,s=u),s;case 22:return Z0(a,s,u);case 24:return mi(s),f=Vt(vt),a===null?(p=Nh(),p===null&&(p=We,y=Ch(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=u),p=y),s.memoizedState={parent:f,cache:p},kh(s),ca(s,vt,p)):((a.lanes&u)!==0&&(Mh(a,s),qo(s,null,null,u),Vo()),p=a.memoizedState,y=s.memoizedState,p.parent!==f?(p={parent:f,cache:f},s.memoizedState=p,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=p),ca(s,vt,f)):(f=y.cache,ca(s,vt,f),f!==p.cache&&Rh(s,[vt],u,!0))),kt(a,s,s.pendingProps.children,u),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Hr(a){a.flags|=4}function tw(a,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!lS(s)){if(s=Un.current,s!==null&&((Ie&4194048)===Ie?br!==null:(Ie&62914560)!==Ie&&(Ie&536870912)===0||s!==br))throw Bo=jh,$v;a.flags|=8192}}function xc(a,s){s!==null&&(a.flags|=4),a.flags&16384&&(s=a.tag!==22?k_():536870912,a.lanes|=s,ys|=s)}function Ko(a,s){if(!Be)switch(a.tailMode){case"hidden":s=a.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?a.tail=null:u.sibling=null;break;case"collapsed":u=a.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?s||a.tail===null?a.tail=null:a.tail.sibling=null:f.sibling=null}}function rt(a){var s=a.alternate!==null&&a.alternate.child===a.child,u=0,f=0;if(s)for(var p=a.child;p!==null;)u|=p.lanes|p.childLanes,f|=p.subtreeFlags&65011712,f|=p.flags&65011712,p.return=a,p=p.sibling;else for(p=a.child;p!==null;)u|=p.lanes|p.childLanes,f|=p.subtreeFlags,f|=p.flags,p.return=a,p=p.sibling;return a.subtreeFlags|=f,a.childLanes=u,s}function BP(a,s,u){var f=s.pendingProps;switch(Th(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(s),null;case 1:return rt(s),null;case 3:return u=s.stateNode,f=null,a!==null&&(f=a.memoizedState.cache),s.memoizedState.cache!==f&&(s.flags|=2048),zr(vt),jn(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(a===null||a.child===null)&&(ko(s)?Hr(s):a===null||a.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,kv())),rt(s),null;case 26:return u=s.memoizedState,a===null?(Hr(s),u!==null?(rt(s),tw(s,u)):(rt(s),s.flags&=-16777217)):u?u!==a.memoizedState?(Hr(s),rt(s),tw(s,u)):(rt(s),s.flags&=-16777217):(a.memoizedProps!==f&&Hr(s),rt(s),s.flags&=-16777217),null;case 27:zi(s),u=pe.current;var p=s.type;if(a!==null&&s.stateNode!=null)a.memoizedProps!==f&&Hr(s);else{if(!f){if(s.stateNode===null)throw Error(r(166));return rt(s),null}a=re.current,ko(s)?Nv(s):(a=tS(p,f,u),s.stateNode=a,Hr(s))}return rt(s),null;case 5:if(zi(s),u=s.type,a!==null&&s.stateNode!=null)a.memoizedProps!==f&&Hr(s);else{if(!f){if(s.stateNode===null)throw Error(r(166));return rt(s),null}if(a=re.current,ko(s))Nv(s);else{switch(p=Uc(pe.current),a){case 1:a=p.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:a=p.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":a=p.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":a=p.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":a=p.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof f.is=="string"?p.createElement("select",{is:f.is}):p.createElement("select"),f.multiple?a.multiple=!0:f.size&&(a.size=f.size);break;default:a=typeof f.is=="string"?p.createElement(u,{is:f.is}):p.createElement(u)}}a[zt]=s,a[an]=f;e:for(p=s.child;p!==null;){if(p.tag===5||p.tag===6)a.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===s)break e;for(;p.sibling===null;){if(p.return===null||p.return===s)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}s.stateNode=a;e:switch(It(a,u,f),u){case"button":case"input":case"select":case"textarea":a=!!f.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&Hr(s)}}return rt(s),s.flags&=-16777217,null;case 6:if(a&&s.stateNode!=null)a.memoizedProps!==f&&Hr(s);else{if(typeof f!="string"&&s.stateNode===null)throw Error(r(166));if(a=pe.current,ko(s)){if(a=s.stateNode,u=s.memoizedProps,f=null,p=Kt,p!==null)switch(p.tag){case 27:case 5:f=p.memoizedProps}a[zt]=s,a=!!(a.nodeValue===u||f!==null&&f.suppressHydrationWarning===!0||Yw(a.nodeValue,u)),a||di(s)}else a=Uc(a).createTextNode(f),a[zt]=s,s.stateNode=a}return rt(s),null;case 13:if(f=s.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(p=ko(s),f!==null&&f.dehydrated!==null){if(a===null){if(!p)throw Error(r(318));if(p=s.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));p[zt]=s}else Mo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;rt(s),p=!1}else p=kv(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=p),p=!0;if(!p)return s.flags&256?(qr(s),s):(qr(s),null)}if(qr(s),(s.flags&128)!==0)return s.lanes=u,s;if(u=f!==null,a=a!==null&&a.memoizedState!==null,u){f=s.child,p=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(p=f.alternate.memoizedState.cachePool.pool);var y=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(y=f.memoizedState.cachePool.pool),y!==p&&(f.flags|=2048)}return u!==a&&u&&(s.child.flags|=8192),xc(s,s.updateQueue),rt(s),null;case 4:return jn(),a===null&&Lm(s.stateNode.containerInfo),rt(s),null;case 10:return zr(s.type),rt(s),null;case 19:if(X(wt),p=s.memoizedState,p===null)return rt(s),null;if(f=(s.flags&128)!==0,y=p.rendering,y===null)if(f)Ko(p,!1);else{if(lt!==0||a!==null&&(a.flags&128)!==0)for(a=s.child;a!==null;){if(y=wc(a),y!==null){for(s.flags|=128,Ko(p,!1),a=y.updateQueue,s.updateQueue=a,xc(s,a),s.subtreeFlags=0,a=u,u=s.child;u!==null;)Cv(u,a),u=u.sibling;return J(wt,wt.current&1|2),s.child}a=a.sibling}p.tail!==null&&gr()>Cc&&(s.flags|=128,f=!0,Ko(p,!1),s.lanes=4194304)}else{if(!f)if(a=wc(y),a!==null){if(s.flags|=128,f=!0,a=a.updateQueue,s.updateQueue=a,xc(s,a),Ko(p,!0),p.tail===null&&p.tailMode==="hidden"&&!y.alternate&&!Be)return rt(s),null}else 2*gr()-p.renderingStartTime>Cc&&u!==536870912&&(s.flags|=128,f=!0,Ko(p,!1),s.lanes=4194304);p.isBackwards?(y.sibling=s.child,s.child=y):(a=p.last,a!==null?a.sibling=y:s.child=y,p.last=y)}return p.tail!==null?(s=p.tail,p.rendering=s,p.tail=s.sibling,p.renderingStartTime=gr(),s.sibling=null,a=wt.current,J(wt,f?a&1|2:a&1),s):(rt(s),null);case 22:case 23:return qr(s),$h(),f=s.memoizedState!==null,a!==null?a.memoizedState!==null!==f&&(s.flags|=8192):f&&(s.flags|=8192),f?(u&536870912)!==0&&(s.flags&128)===0&&(rt(s),s.subtreeFlags&6&&(s.flags|=8192)):rt(s),u=s.updateQueue,u!==null&&xc(s,u.retryQueue),u=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),f=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),f!==u&&(s.flags|=2048),a!==null&&X(pi),null;case 24:return u=null,a!==null&&(u=a.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),zr(vt),rt(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function zP(a,s){switch(Th(s),s.tag){case 1:return a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 3:return zr(vt),jn(),a=s.flags,(a&65536)!==0&&(a&128)===0?(s.flags=a&-65537|128,s):null;case 26:case 27:case 5:return zi(s),null;case 13:if(qr(s),a=s.memoizedState,a!==null&&a.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Mo()}return a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 19:return X(wt),null;case 4:return jn(),null;case 10:return zr(s.type),null;case 22:case 23:return qr(s),$h(),a!==null&&X(pi),a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 24:return zr(vt),null;case 25:return null;default:return null}}function nw(a,s){switch(Th(s),s.tag){case 3:zr(vt),jn();break;case 26:case 27:case 5:zi(s);break;case 4:jn();break;case 13:qr(s);break;case 19:X(wt);break;case 10:zr(s.type);break;case 22:case 23:qr(s),$h(),a!==null&&X(pi);break;case 24:zr(vt)}}function Jo(a,s){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var p=f.next;u=p;do{if((u.tag&a)===a){f=void 0;var y=u.create,w=u.inst;f=y(),w.destroy=f}u=u.next}while(u!==p)}}catch(T){Qe(s,s.return,T)}}function ya(a,s,u){try{var f=s.updateQueue,p=f!==null?f.lastEffect:null;if(p!==null){var y=p.next;f=y;do{if((f.tag&a)===a){var w=f.inst,T=w.destroy;if(T!==void 0){w.destroy=void 0,p=s;var C=u,L=T;try{L()}catch(F){Qe(p,C,F)}}}f=f.next}while(f!==y)}}catch(F){Qe(s,s.return,F)}}function rw(a){var s=a.updateQueue;if(s!==null){var u=a.stateNode;try{Fv(s,u)}catch(f){Qe(a,a.return,f)}}}function aw(a,s,u){u.props=yi(a.type,a.memoizedProps),u.state=a.memoizedState;try{u.componentWillUnmount()}catch(f){Qe(a,s,f)}}function Qo(a,s){try{var u=a.ref;if(u!==null){switch(a.tag){case 26:case 27:case 5:var f=a.stateNode;break;case 30:f=a.stateNode;break;default:f=a.stateNode}typeof u=="function"?a.refCleanup=u(f):u.current=f}}catch(p){Qe(a,s,p)}}function _r(a,s){var u=a.ref,f=a.refCleanup;if(u!==null)if(typeof f=="function")try{f()}catch(p){Qe(a,s,p)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(p){Qe(a,s,p)}else u.current=null}function iw(a){var s=a.type,u=a.memoizedProps,f=a.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":u.autoFocus&&f.focus();break e;case"img":u.src?f.src=u.src:u.srcSet&&(f.srcset=u.srcSet)}}catch(p){Qe(a,a.return,p)}}function dm(a,s,u){try{var f=a.stateNode;uN(f,a.type,u,s),f[an]=s}catch(p){Qe(a,a.return,p)}}function sw(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Ea(a.type)||a.tag===4}function hm(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||sw(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Ea(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function mm(a,s,u){var f=a.tag;if(f===5||f===6)a=a.stateNode,s?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(a,s):(s=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,s.appendChild(a),u=u._reactRootContainer,u!=null||s.onclick!==null||(s.onclick=$c));else if(f!==4&&(f===27&&Ea(a.type)&&(u=a.stateNode,s=null),a=a.child,a!==null))for(mm(a,s,u),a=a.sibling;a!==null;)mm(a,s,u),a=a.sibling}function Oc(a,s,u){var f=a.tag;if(f===5||f===6)a=a.stateNode,s?u.insertBefore(a,s):u.appendChild(a);else if(f!==4&&(f===27&&Ea(a.type)&&(u=a.stateNode),a=a.child,a!==null))for(Oc(a,s,u),a=a.sibling;a!==null;)Oc(a,s,u),a=a.sibling}function ow(a){var s=a.stateNode,u=a.memoizedProps;try{for(var f=a.type,p=s.attributes;p.length;)s.removeAttributeNode(p[0]);It(s,f,u),s[zt]=a,s[an]=u}catch(y){Qe(a,a.return,y)}}var Zr=!1,ht=!1,pm=!1,uw=typeof WeakSet=="function"?WeakSet:Set,Ot=null;function VP(a,s){if(a=a.containerInfo,Um=Hc,a=_v(a),hh(a)){if("selectionStart"in a)var u={start:a.selectionStart,end:a.selectionEnd};else e:{u=(u=a.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var p=f.anchorOffset,y=f.focusNode;f=f.focusOffset;try{u.nodeType,y.nodeType}catch{u=null;break e}var w=0,T=-1,C=-1,L=0,F=0,Y=a,D=null;t:for(;;){for(var $;Y!==u||p!==0&&Y.nodeType!==3||(T=w+p),Y!==y||f!==0&&Y.nodeType!==3||(C=w+f),Y.nodeType===3&&(w+=Y.nodeValue.length),($=Y.firstChild)!==null;)D=Y,Y=$;for(;;){if(Y===a)break t;if(D===u&&++L===p&&(T=w),D===y&&++F===f&&(C=w),($=Y.nextSibling)!==null)break;Y=D,D=Y.parentNode}Y=$}u=T===-1||C===-1?null:{start:T,end:C}}else u=null}u=u||{start:0,end:0}}else u=null;for(Bm={focusedElem:a,selectionRange:u},Hc=!1,Ot=s;Ot!==null;)if(s=Ot,a=s.child,(s.subtreeFlags&1024)!==0&&a!==null)a.return=s,Ot=a;else for(;Ot!==null;){switch(s=Ot,y=s.alternate,a=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&y!==null){a=void 0,u=s,p=y.memoizedProps,y=y.memoizedState,f=u.stateNode;try{var _e=yi(u.type,p,u.elementType===u.type);a=f.getSnapshotBeforeUpdate(_e,y),f.__reactInternalSnapshotBeforeUpdate=a}catch(ge){Qe(u,u.return,ge)}}break;case 3:if((a&1024)!==0){if(a=s.stateNode.containerInfo,u=a.nodeType,u===9)qm(a);else if(u===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":qm(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=s.sibling,a!==null){a.return=s.return,Ot=a;break}Ot=s.return}}function lw(a,s,u){var f=u.flags;switch(u.tag){case 0:case 11:case 15:ba(a,u),f&4&&Jo(5,u);break;case 1:if(ba(a,u),f&4)if(a=u.stateNode,s===null)try{a.componentDidMount()}catch(w){Qe(u,u.return,w)}else{var p=yi(u.type,s.memoizedProps);s=s.memoizedState;try{a.componentDidUpdate(p,s,a.__reactInternalSnapshotBeforeUpdate)}catch(w){Qe(u,u.return,w)}}f&64&&rw(u),f&512&&Qo(u,u.return);break;case 3:if(ba(a,u),f&64&&(a=u.updateQueue,a!==null)){if(s=null,u.child!==null)switch(u.child.tag){case 27:case 5:s=u.child.stateNode;break;case 1:s=u.child.stateNode}try{Fv(a,s)}catch(w){Qe(u,u.return,w)}}break;case 27:s===null&&f&4&&ow(u);case 26:case 5:ba(a,u),s===null&&f&4&&iw(u),f&512&&Qo(u,u.return);break;case 12:ba(a,u);break;case 13:ba(a,u),f&4&&dw(a,u),f&64&&(a=u.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(u=JP.bind(null,u),pN(a,u))));break;case 22:if(f=u.memoizedState!==null||Zr,!f){s=s!==null&&s.memoizedState!==null||ht,p=Zr;var y=ht;Zr=f,(ht=s)&&!y?_a(a,u,(u.subtreeFlags&8772)!==0):ba(a,u),Zr=p,ht=y}break;case 30:break;default:ba(a,u)}}function cw(a){var s=a.alternate;s!==null&&(a.alternate=null,cw(s)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(s=a.stateNode,s!==null&&Yd(s)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var et=null,un=!1;function Gr(a,s,u){for(u=u.child;u!==null;)fw(a,s,u),u=u.sibling}function fw(a,s,u){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(_o,u)}catch{}switch(u.tag){case 26:ht||_r(u,s),Gr(a,s,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:ht||_r(u,s);var f=et,p=un;Ea(u.type)&&(et=u.stateNode,un=!1),Gr(a,s,u),ou(u.stateNode),et=f,un=p;break;case 5:ht||_r(u,s);case 6:if(f=et,p=un,et=null,Gr(a,s,u),et=f,un=p,et!==null)if(un)try{(et.nodeType===9?et.body:et.nodeName==="HTML"?et.ownerDocument.body:et).removeChild(u.stateNode)}catch(y){Qe(u,s,y)}else try{et.removeChild(u.stateNode)}catch(y){Qe(u,s,y)}break;case 18:et!==null&&(un?(a=et,Ww(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,u.stateNode),pu(a)):Ww(et,u.stateNode));break;case 4:f=et,p=un,et=u.stateNode.containerInfo,un=!0,Gr(a,s,u),et=f,un=p;break;case 0:case 11:case 14:case 15:ht||ya(2,u,s),ht||ya(4,u,s),Gr(a,s,u);break;case 1:ht||(_r(u,s),f=u.stateNode,typeof f.componentWillUnmount=="function"&&aw(u,s,f)),Gr(a,s,u);break;case 21:Gr(a,s,u);break;case 22:ht=(f=ht)||u.memoizedState!==null,Gr(a,s,u),ht=f;break;default:Gr(a,s,u)}}function dw(a,s){if(s.memoizedState===null&&(a=s.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{pu(a)}catch(u){Qe(s,s.return,u)}}function qP(a){switch(a.tag){case 13:case 19:var s=a.stateNode;return s===null&&(s=a.stateNode=new uw),s;case 22:return a=a.stateNode,s=a._retryCache,s===null&&(s=a._retryCache=new uw),s;default:throw Error(r(435,a.tag))}}function gm(a,s){var u=qP(a);s.forEach(function(f){var p=QP.bind(null,a,f);u.has(f)||(u.add(f),f.then(p,p))})}function _n(a,s){var u=s.deletions;if(u!==null)for(var f=0;f<u.length;f++){var p=u[f],y=a,w=s,T=w;e:for(;T!==null;){switch(T.tag){case 27:if(Ea(T.type)){et=T.stateNode,un=!1;break e}break;case 5:et=T.stateNode,un=!1;break e;case 3:case 4:et=T.stateNode.containerInfo,un=!0;break e}T=T.return}if(et===null)throw Error(r(160));fw(y,w,p),et=null,un=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)hw(s,a),s=s.sibling}var Yn=null;function hw(a,s){var u=a.alternate,f=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:_n(s,a),vn(a),f&4&&(ya(3,a,a.return),Jo(3,a),ya(5,a,a.return));break;case 1:_n(s,a),vn(a),f&512&&(ht||u===null||_r(u,u.return)),f&64&&Zr&&(a=a.updateQueue,a!==null&&(f=a.callbacks,f!==null&&(u=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=u===null?f:u.concat(f))));break;case 26:var p=Yn;if(_n(s,a),vn(a),f&512&&(ht||u===null||_r(u,u.return)),f&4){var y=u!==null?u.memoizedState:null;if(f=a.memoizedState,u===null)if(f===null)if(a.stateNode===null){e:{f=a.type,u=a.memoizedProps,p=p.ownerDocument||p;t:switch(f){case"title":y=p.getElementsByTagName("title")[0],(!y||y[So]||y[zt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(f),p.head.insertBefore(y,p.querySelector("head > title"))),It(y,f,u),y[zt]=a,Et(y),f=y;break e;case"link":var w=oS("link","href",p).get(f+(u.href||""));if(w){for(var T=0;T<w.length;T++)if(y=w[T],y.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&y.getAttribute("rel")===(u.rel==null?null:u.rel)&&y.getAttribute("title")===(u.title==null?null:u.title)&&y.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){w.splice(T,1);break t}}y=p.createElement(f),It(y,f,u),p.head.appendChild(y);break;case"meta":if(w=oS("meta","content",p).get(f+(u.content||""))){for(T=0;T<w.length;T++)if(y=w[T],y.getAttribute("content")===(u.content==null?null:""+u.content)&&y.getAttribute("name")===(u.name==null?null:u.name)&&y.getAttribute("property")===(u.property==null?null:u.property)&&y.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&y.getAttribute("charset")===(u.charSet==null?null:u.charSet)){w.splice(T,1);break t}}y=p.createElement(f),It(y,f,u),p.head.appendChild(y);break;default:throw Error(r(468,f))}y[zt]=a,Et(y),f=y}a.stateNode=f}else uS(p,a.type,a.stateNode);else a.stateNode=sS(p,f,a.memoizedProps);else y!==f?(y===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):y.count--,f===null?uS(p,a.type,a.stateNode):sS(p,f,a.memoizedProps)):f===null&&a.stateNode!==null&&dm(a,a.memoizedProps,u.memoizedProps)}break;case 27:_n(s,a),vn(a),f&512&&(ht||u===null||_r(u,u.return)),u!==null&&f&4&&dm(a,a.memoizedProps,u.memoizedProps);break;case 5:if(_n(s,a),vn(a),f&512&&(ht||u===null||_r(u,u.return)),a.flags&32){p=a.stateNode;try{Xi(p,"")}catch($){Qe(a,a.return,$)}}f&4&&a.stateNode!=null&&(p=a.memoizedProps,dm(a,p,u!==null?u.memoizedProps:p)),f&1024&&(pm=!0);break;case 6:if(_n(s,a),vn(a),f&4){if(a.stateNode===null)throw Error(r(162));f=a.memoizedProps,u=a.stateNode;try{u.nodeValue=f}catch($){Qe(a,a.return,$)}}break;case 3:if(Vc=null,p=Yn,Yn=Bc(s.containerInfo),_n(s,a),Yn=p,vn(a),f&4&&u!==null&&u.memoizedState.isDehydrated)try{pu(s.containerInfo)}catch($){Qe(a,a.return,$)}pm&&(pm=!1,mw(a));break;case 4:f=Yn,Yn=Bc(a.stateNode.containerInfo),_n(s,a),vn(a),Yn=f;break;case 12:_n(s,a),vn(a);break;case 13:_n(s,a),vn(a),a.child.flags&8192&&a.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Sm=gr()),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,gm(a,f)));break;case 22:p=a.memoizedState!==null;var C=u!==null&&u.memoizedState!==null,L=Zr,F=ht;if(Zr=L||p,ht=F||C,_n(s,a),ht=F,Zr=L,vn(a),f&8192)e:for(s=a.stateNode,s._visibility=p?s._visibility&-2:s._visibility|1,p&&(u===null||C||Zr||ht||bi(a)),u=null,s=a;;){if(s.tag===5||s.tag===26){if(u===null){C=u=s;try{if(y=C.stateNode,p)w=y.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{T=C.stateNode;var Y=C.memoizedProps.style,D=Y!=null&&Y.hasOwnProperty("display")?Y.display:null;T.style.display=D==null||typeof D=="boolean"?"":(""+D).trim()}}catch($){Qe(C,C.return,$)}}}else if(s.tag===6){if(u===null){C=s;try{C.stateNode.nodeValue=p?"":C.memoizedProps}catch($){Qe(C,C.return,$)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===a)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;u===s&&(u=null),s=s.return}u===s&&(u=null),s.sibling.return=s.return,s=s.sibling}f&4&&(f=a.updateQueue,f!==null&&(u=f.retryQueue,u!==null&&(f.retryQueue=null,gm(a,u))));break;case 19:_n(s,a),vn(a),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,gm(a,f)));break;case 30:break;case 21:break;default:_n(s,a),vn(a)}}function vn(a){var s=a.flags;if(s&2){try{for(var u,f=a.return;f!==null;){if(sw(f)){u=f;break}f=f.return}if(u==null)throw Error(r(160));switch(u.tag){case 27:var p=u.stateNode,y=hm(a);Oc(a,y,p);break;case 5:var w=u.stateNode;u.flags&32&&(Xi(w,""),u.flags&=-33);var T=hm(a);Oc(a,T,w);break;case 3:case 4:var C=u.stateNode.containerInfo,L=hm(a);mm(a,L,C);break;default:throw Error(r(161))}}catch(F){Qe(a,a.return,F)}a.flags&=-3}s&4096&&(a.flags&=-4097)}function mw(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var s=a;mw(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),a=a.sibling}}function ba(a,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)lw(a,s.alternate,s),s=s.sibling}function bi(a){for(a=a.child;a!==null;){var s=a;switch(s.tag){case 0:case 11:case 14:case 15:ya(4,s,s.return),bi(s);break;case 1:_r(s,s.return);var u=s.stateNode;typeof u.componentWillUnmount=="function"&&aw(s,s.return,u),bi(s);break;case 27:ou(s.stateNode);case 26:case 5:_r(s,s.return),bi(s);break;case 22:s.memoizedState===null&&bi(s);break;case 30:bi(s);break;default:bi(s)}a=a.sibling}}function _a(a,s,u){for(u=u&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var f=s.alternate,p=a,y=s,w=y.flags;switch(y.tag){case 0:case 11:case 15:_a(p,y,u),Jo(4,y);break;case 1:if(_a(p,y,u),f=y,p=f.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(L){Qe(f,f.return,L)}if(f=y,p=f.updateQueue,p!==null){var T=f.stateNode;try{var C=p.shared.hiddenCallbacks;if(C!==null)for(p.shared.hiddenCallbacks=null,p=0;p<C.length;p++)qv(C[p],T)}catch(L){Qe(f,f.return,L)}}u&&w&64&&rw(y),Qo(y,y.return);break;case 27:ow(y);case 26:case 5:_a(p,y,u),u&&f===null&&w&4&&iw(y),Qo(y,y.return);break;case 12:_a(p,y,u);break;case 13:_a(p,y,u),u&&w&4&&dw(p,y);break;case 22:y.memoizedState===null&&_a(p,y,u),Qo(y,y.return);break;case 30:break;default:_a(p,y,u)}s=s.sibling}}function ym(a,s){var u=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),a=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),a!==u&&(a!=null&&a.refCount++,u!=null&&Do(u))}function bm(a,s){a=null,s.alternate!==null&&(a=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==a&&(s.refCount++,a!=null&&Do(a))}function vr(a,s,u,f){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)pw(a,s,u,f),s=s.sibling}function pw(a,s,u,f){var p=s.flags;switch(s.tag){case 0:case 11:case 15:vr(a,s,u,f),p&2048&&Jo(9,s);break;case 1:vr(a,s,u,f);break;case 3:vr(a,s,u,f),p&2048&&(a=null,s.alternate!==null&&(a=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==a&&(s.refCount++,a!=null&&Do(a)));break;case 12:if(p&2048){vr(a,s,u,f),a=s.stateNode;try{var y=s.memoizedProps,w=y.id,T=y.onPostCommit;typeof T=="function"&&T(w,s.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(C){Qe(s,s.return,C)}}else vr(a,s,u,f);break;case 13:vr(a,s,u,f);break;case 23:break;case 22:y=s.stateNode,w=s.alternate,s.memoizedState!==null?y._visibility&2?vr(a,s,u,f):Wo(a,s):y._visibility&2?vr(a,s,u,f):(y._visibility|=2,ms(a,s,u,f,(s.subtreeFlags&10256)!==0)),p&2048&&ym(w,s);break;case 24:vr(a,s,u,f),p&2048&&bm(s.alternate,s);break;default:vr(a,s,u,f)}}function ms(a,s,u,f,p){for(p=p&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var y=a,w=s,T=u,C=f,L=w.flags;switch(w.tag){case 0:case 11:case 15:ms(y,w,T,C,p),Jo(8,w);break;case 23:break;case 22:var F=w.stateNode;w.memoizedState!==null?F._visibility&2?ms(y,w,T,C,p):Wo(y,w):(F._visibility|=2,ms(y,w,T,C,p)),p&&L&2048&&ym(w.alternate,w);break;case 24:ms(y,w,T,C,p),p&&L&2048&&bm(w.alternate,w);break;default:ms(y,w,T,C,p)}s=s.sibling}}function Wo(a,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var u=a,f=s,p=f.flags;switch(f.tag){case 22:Wo(u,f),p&2048&&ym(f.alternate,f);break;case 24:Wo(u,f),p&2048&&bm(f.alternate,f);break;default:Wo(u,f)}s=s.sibling}}var eu=8192;function ps(a){if(a.subtreeFlags&eu)for(a=a.child;a!==null;)gw(a),a=a.sibling}function gw(a){switch(a.tag){case 26:ps(a),a.flags&eu&&a.memoizedState!==null&&RN(Yn,a.memoizedState,a.memoizedProps);break;case 5:ps(a);break;case 3:case 4:var s=Yn;Yn=Bc(a.stateNode.containerInfo),ps(a),Yn=s;break;case 22:a.memoizedState===null&&(s=a.alternate,s!==null&&s.memoizedState!==null?(s=eu,eu=16777216,ps(a),eu=s):ps(a));break;default:ps(a)}}function yw(a){var s=a.alternate;if(s!==null&&(a=s.child,a!==null)){s.child=null;do s=a.sibling,a.sibling=null,a=s;while(a!==null)}}function tu(a){var s=a.deletions;if((a.flags&16)!==0){if(s!==null)for(var u=0;u<s.length;u++){var f=s[u];Ot=f,_w(f,a)}yw(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)bw(a),a=a.sibling}function bw(a){switch(a.tag){case 0:case 11:case 15:tu(a),a.flags&2048&&ya(9,a,a.return);break;case 3:tu(a);break;case 12:tu(a);break;case 22:var s=a.stateNode;a.memoizedState!==null&&s._visibility&2&&(a.return===null||a.return.tag!==13)?(s._visibility&=-3,Rc(a)):tu(a);break;default:tu(a)}}function Rc(a){var s=a.deletions;if((a.flags&16)!==0){if(s!==null)for(var u=0;u<s.length;u++){var f=s[u];Ot=f,_w(f,a)}yw(a)}for(a=a.child;a!==null;){switch(s=a,s.tag){case 0:case 11:case 15:ya(8,s,s.return),Rc(s);break;case 22:u=s.stateNode,u._visibility&2&&(u._visibility&=-3,Rc(s));break;default:Rc(s)}a=a.sibling}}function _w(a,s){for(;Ot!==null;){var u=Ot;switch(u.tag){case 0:case 11:case 15:ya(8,u,s);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var f=u.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:Do(u.memoizedState.cache)}if(f=u.child,f!==null)f.return=u,Ot=f;else e:for(u=a;Ot!==null;){f=Ot;var p=f.sibling,y=f.return;if(cw(f),f===u){Ot=null;break e}if(p!==null){p.return=y,Ot=p;break e}Ot=y}}}var FP={getCacheForType:function(a){var s=Vt(vt),u=s.data.get(a);return u===void 0&&(u=a(),s.data.set(a,u)),u}},HP=typeof WeakMap=="function"?WeakMap:Map,qe=0,We=null,ke=null,Ie=0,Fe=0,wn=null,va=!1,gs=!1,_m=!1,Yr=0,lt=0,wa=0,_i=0,vm=0,Bn=0,ys=0,nu=null,ln=null,wm=!1,Sm=0,Cc=1/0,Pc=null,Sa=null,Mt=0,Aa=null,bs=null,_s=0,Am=0,Tm=null,vw=null,ru=0,Em=null;function Sn(){if((qe&2)!==0&&Ie!==0)return Ie&-Ie;if(M.T!==null){var a=ss;return a!==0?a:jm()}return L_()}function ww(){Bn===0&&(Bn=(Ie&536870912)===0||Be?j_():536870912);var a=Un.current;return a!==null&&(a.flags|=32),Bn}function An(a,s,u){(a===We&&(Fe===2||Fe===9)||a.cancelPendingCommit!==null)&&(vs(a,0),Ta(a,Ie,Bn,!1)),wo(a,u),((qe&2)===0||a!==We)&&(a===We&&((qe&2)===0&&(_i|=u),lt===4&&Ta(a,Ie,Bn,!1)),wr(a))}function Sw(a,s,u){if((qe&6)!==0)throw Error(r(327));var f=!u&&(s&124)===0&&(s&a.expiredLanes)===0||vo(a,s),p=f?YP(a,s):Rm(a,s,!0),y=f;do{if(p===0){gs&&!f&&Ta(a,s,0,!1);break}else{if(u=a.current.alternate,y&&!ZP(u)){p=Rm(a,s,!1),y=!1;continue}if(p===2){if(y=s,a.errorRecoveryDisabledLanes&y)var w=0;else w=a.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){s=w;e:{var T=a;p=nu;var C=T.current.memoizedState.isDehydrated;if(C&&(vs(T,w).flags|=256),w=Rm(T,w,!1),w!==2){if(_m&&!C){T.errorRecoveryDisabledLanes|=y,_i|=y,p=4;break e}y=ln,ln=p,y!==null&&(ln===null?ln=y:ln.push.apply(ln,y))}p=w}if(y=!1,p!==2)continue}}if(p===1){vs(a,0),Ta(a,s,0,!0);break}e:{switch(f=a,y=p,y){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Ta(f,s,Bn,!va);break e;case 2:ln=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(p=Sm+300-gr(),10<p)){if(Ta(f,s,Bn,!va),zl(f,0,!0)!==0)break e;f.timeoutHandle=Jw(Aw.bind(null,f,u,ln,Pc,wm,s,Bn,_i,ys,va,y,2,-0,0),p);break e}Aw(f,u,ln,Pc,wm,s,Bn,_i,ys,va,y,0,-0,0)}}break}while(!0);wr(a)}function Aw(a,s,u,f,p,y,w,T,C,L,F,Y,D,$){if(a.timeoutHandle=-1,Y=s.subtreeFlags,(Y&8192||(Y&16785408)===16785408)&&(cu={stylesheets:null,count:0,unsuspend:ON},gw(s),Y=CN(),Y!==null)){a.cancelPendingCommit=Y(Pw.bind(null,a,s,y,u,f,p,w,T,C,F,1,D,$)),Ta(a,y,w,!L);return}Pw(a,s,y,u,f,p,w,T,C)}function ZP(a){for(var s=a;;){var u=s.tag;if((u===0||u===11||u===15)&&s.flags&16384&&(u=s.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var f=0;f<u.length;f++){var p=u[f],y=p.getSnapshot;p=p.value;try{if(!yn(y(),p))return!1}catch{return!1}}if(u=s.child,s.subtreeFlags&16384&&u!==null)u.return=s,s=u;else{if(s===a)break;for(;s.sibling===null;){if(s.return===null||s.return===a)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ta(a,s,u,f){s&=~vm,s&=~_i,a.suspendedLanes|=s,a.pingedLanes&=~s,f&&(a.warmLanes|=s),f=a.expirationTimes;for(var p=s;0<p;){var y=31-gn(p),w=1<<y;f[y]=-1,p&=~w}u!==0&&M_(a,u,s)}function Nc(){return(qe&6)===0?(au(0),!1):!0}function xm(){if(ke!==null){if(Fe===0)var a=ke.return;else a=ke,Br=hi=null,qh(a),ds=null,Yo=0,a=ke;for(;a!==null;)nw(a.alternate,a),a=a.return;ke=null}}function vs(a,s){var u=a.timeoutHandle;u!==-1&&(a.timeoutHandle=-1,cN(u)),u=a.cancelPendingCommit,u!==null&&(a.cancelPendingCommit=null,u()),xm(),We=a,ke=u=Dr(a.current,null),Ie=s,Fe=0,wn=null,va=!1,gs=vo(a,s),_m=!1,ys=Bn=vm=_i=wa=lt=0,ln=nu=null,wm=!1,(s&8)!==0&&(s|=s&32);var f=a.entangledLanes;if(f!==0)for(a=a.entanglements,f&=s;0<f;){var p=31-gn(f),y=1<<p;s|=a[p],f&=~y}return Yr=s,Wl(),u}function Tw(a,s){Ne=null,M.H=bc,s===Uo||s===uc?(s=zv(),Fe=3):s===$v?(s=zv(),Fe=4):Fe=s===V0?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,wn=s,ke===null&&(lt=1,Ac(a,In(s,a.current)))}function Ew(){var a=M.H;return M.H=bc,a===null?bc:a}function xw(){var a=M.A;return M.A=FP,a}function Om(){lt=4,va||(Ie&4194048)!==Ie&&Un.current!==null||(gs=!0),(wa&134217727)===0&&(_i&134217727)===0||We===null||Ta(We,Ie,Bn,!1)}function Rm(a,s,u){var f=qe;qe|=2;var p=Ew(),y=xw();(We!==a||Ie!==s)&&(Pc=null,vs(a,s)),s=!1;var w=lt;e:do try{if(Fe!==0&&ke!==null){var T=ke,C=wn;switch(Fe){case 8:xm(),w=6;break e;case 3:case 2:case 9:case 6:Un.current===null&&(s=!0);var L=Fe;if(Fe=0,wn=null,ws(a,T,C,L),u&&gs){w=0;break e}break;default:L=Fe,Fe=0,wn=null,ws(a,T,C,L)}}GP(),w=lt;break}catch(F){Tw(a,F)}while(!0);return s&&a.shellSuspendCounter++,Br=hi=null,qe=f,M.H=p,M.A=y,ke===null&&(We=null,Ie=0,Wl()),w}function GP(){for(;ke!==null;)Ow(ke)}function YP(a,s){var u=qe;qe|=2;var f=Ew(),p=xw();We!==a||Ie!==s?(Pc=null,Cc=gr()+500,vs(a,s)):gs=vo(a,s);e:do try{if(Fe!==0&&ke!==null){s=ke;var y=wn;t:switch(Fe){case 1:Fe=0,wn=null,ws(a,s,y,1);break;case 2:case 9:if(Uv(y)){Fe=0,wn=null,Rw(s);break}s=function(){Fe!==2&&Fe!==9||We!==a||(Fe=7),wr(a)},y.then(s,s);break e;case 3:Fe=7;break e;case 4:Fe=5;break e;case 7:Uv(y)?(Fe=0,wn=null,Rw(s)):(Fe=0,wn=null,ws(a,s,y,7));break;case 5:var w=null;switch(ke.tag){case 26:w=ke.memoizedState;case 5:case 27:var T=ke;if(!w||lS(w)){Fe=0,wn=null;var C=T.sibling;if(C!==null)ke=C;else{var L=T.return;L!==null?(ke=L,jc(L)):ke=null}break t}}Fe=0,wn=null,ws(a,s,y,5);break;case 6:Fe=0,wn=null,ws(a,s,y,6);break;case 8:xm(),lt=6;break e;default:throw Error(r(462))}}XP();break}catch(F){Tw(a,F)}while(!0);return Br=hi=null,M.H=f,M.A=p,qe=u,ke!==null?0:(We=null,Ie=0,Wl(),lt)}function XP(){for(;ke!==null&&!yC();)Ow(ke)}function Ow(a){var s=ew(a.alternate,a,Yr);a.memoizedProps=a.pendingProps,s===null?jc(a):ke=s}function Rw(a){var s=a,u=s.alternate;switch(s.tag){case 15:case 0:s=Y0(u,s,s.pendingProps,s.type,void 0,Ie);break;case 11:s=Y0(u,s,s.pendingProps,s.type.render,s.ref,Ie);break;case 5:qh(s);default:nw(u,s),s=ke=Cv(s,Yr),s=ew(u,s,Yr)}a.memoizedProps=a.pendingProps,s===null?jc(a):ke=s}function ws(a,s,u,f){Br=hi=null,qh(s),ds=null,Yo=0;var p=s.return;try{if($P(a,p,s,u,Ie)){lt=1,Ac(a,In(u,a.current)),ke=null;return}}catch(y){if(p!==null)throw ke=p,y;lt=1,Ac(a,In(u,a.current)),ke=null;return}s.flags&32768?(Be||f===1?a=!0:gs||(Ie&536870912)!==0?a=!1:(va=a=!0,(f===2||f===9||f===3||f===6)&&(f=Un.current,f!==null&&f.tag===13&&(f.flags|=16384))),Cw(s,a)):jc(s)}function jc(a){var s=a;do{if((s.flags&32768)!==0){Cw(s,va);return}a=s.return;var u=BP(s.alternate,s,Yr);if(u!==null){ke=u;return}if(s=s.sibling,s!==null){ke=s;return}ke=s=a}while(s!==null);lt===0&&(lt=5)}function Cw(a,s){do{var u=zP(a.alternate,a);if(u!==null){u.flags&=32767,ke=u;return}if(u=a.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!s&&(a=a.sibling,a!==null)){ke=a;return}ke=a=u}while(a!==null);lt=6,ke=null}function Pw(a,s,u,f,p,y,w,T,C){a.cancelPendingCommit=null;do kc();while(Mt!==0);if((qe&6)!==0)throw Error(r(327));if(s!==null){if(s===a.current)throw Error(r(177));if(y=s.lanes|s.childLanes,y|=bh,OC(a,u,y,w,T,C),a===We&&(ke=We=null,Ie=0),bs=s,Aa=a,_s=u,Am=y,Tm=p,vw=f,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,WP($l,function(){return Iw(),null})):(a.callbackNode=null,a.callbackPriority=0),f=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||f){f=M.T,M.T=null,p=U.p,U.p=2,w=qe,qe|=4;try{VP(a,s,u)}finally{qe=w,U.p=p,M.T=f}}Mt=1,Nw(),jw(),kw()}}function Nw(){if(Mt===1){Mt=0;var a=Aa,s=bs,u=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||u){u=M.T,M.T=null;var f=U.p;U.p=2;var p=qe;qe|=4;try{hw(s,a);var y=Bm,w=_v(a.containerInfo),T=y.focusedElem,C=y.selectionRange;if(w!==T&&T&&T.ownerDocument&&bv(T.ownerDocument.documentElement,T)){if(C!==null&&hh(T)){var L=C.start,F=C.end;if(F===void 0&&(F=L),"selectionStart"in T)T.selectionStart=L,T.selectionEnd=Math.min(F,T.value.length);else{var Y=T.ownerDocument||document,D=Y&&Y.defaultView||window;if(D.getSelection){var $=D.getSelection(),_e=T.textContent.length,ge=Math.min(C.start,_e),Xe=C.end===void 0?ge:Math.min(C.end,_e);!$.extend&&ge>Xe&&(w=Xe,Xe=ge,ge=w);var k=yv(T,ge),N=yv(T,Xe);if(k&&N&&($.rangeCount!==1||$.anchorNode!==k.node||$.anchorOffset!==k.offset||$.focusNode!==N.node||$.focusOffset!==N.offset)){var I=Y.createRange();I.setStart(k.node,k.offset),$.removeAllRanges(),ge>Xe?($.addRange(I),$.extend(N.node,N.offset)):(I.setEnd(N.node,N.offset),$.addRange(I))}}}}for(Y=[],$=T;$=$.parentNode;)$.nodeType===1&&Y.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<Y.length;T++){var Z=Y[T];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}Hc=!!Um,Bm=Um=null}finally{qe=p,U.p=f,M.T=u}}a.current=s,Mt=2}}function jw(){if(Mt===2){Mt=0;var a=Aa,s=bs,u=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||u){u=M.T,M.T=null;var f=U.p;U.p=2;var p=qe;qe|=4;try{lw(a,s.alternate,s)}finally{qe=p,U.p=f,M.T=u}}Mt=3}}function kw(){if(Mt===4||Mt===3){Mt=0,bC();var a=Aa,s=bs,u=_s,f=vw;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Mt=5:(Mt=0,bs=Aa=null,Mw(a,a.pendingLanes));var p=a.pendingLanes;if(p===0&&(Sa=null),Zd(u),s=s.stateNode,pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(_o,s,void 0,(s.current.flags&128)===128)}catch{}if(f!==null){s=M.T,p=U.p,U.p=2,M.T=null;try{for(var y=a.onRecoverableError,w=0;w<f.length;w++){var T=f[w];y(T.value,{componentStack:T.stack})}}finally{M.T=s,U.p=p}}(_s&3)!==0&&kc(),wr(a),p=a.pendingLanes,(u&4194090)!==0&&(p&42)!==0?a===Em?ru++:(ru=0,Em=a):ru=0,au(0)}}function Mw(a,s){(a.pooledCacheLanes&=s)===0&&(s=a.pooledCache,s!=null&&(a.pooledCache=null,Do(s)))}function kc(a){return Nw(),jw(),kw(),Iw()}function Iw(){if(Mt!==5)return!1;var a=Aa,s=Am;Am=0;var u=Zd(_s),f=M.T,p=U.p;try{U.p=32>u?32:u,M.T=null,u=Tm,Tm=null;var y=Aa,w=_s;if(Mt=0,bs=Aa=null,_s=0,(qe&6)!==0)throw Error(r(331));var T=qe;if(qe|=4,bw(y.current),pw(y,y.current,w,u),qe=T,au(0,!1),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(_o,y)}catch{}return!0}finally{U.p=p,M.T=f,Mw(a,s)}}function Lw(a,s,u){s=In(u,s),s=rm(a.stateNode,s,2),a=ha(a,s,2),a!==null&&(wo(a,2),wr(a))}function Qe(a,s,u){if(a.tag===3)Lw(a,a,u);else for(;s!==null;){if(s.tag===3){Lw(s,a,u);break}else if(s.tag===1){var f=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Sa===null||!Sa.has(f))){a=In(u,a),u=B0(2),f=ha(s,u,2),f!==null&&(z0(u,f,s,a),wo(f,2),wr(f));break}}s=s.return}}function Cm(a,s,u){var f=a.pingCache;if(f===null){f=a.pingCache=new HP;var p=new Set;f.set(s,p)}else p=f.get(s),p===void 0&&(p=new Set,f.set(s,p));p.has(u)||(_m=!0,p.add(u),a=KP.bind(null,a,s,u),s.then(a,a))}function KP(a,s,u){var f=a.pingCache;f!==null&&f.delete(s),a.pingedLanes|=a.suspendedLanes&u,a.warmLanes&=~u,We===a&&(Ie&u)===u&&(lt===4||lt===3&&(Ie&62914560)===Ie&&300>gr()-Sm?(qe&2)===0&&vs(a,0):vm|=u,ys===Ie&&(ys=0)),wr(a)}function Dw(a,s){s===0&&(s=k_()),a=ns(a,s),a!==null&&(wo(a,s),wr(a))}function JP(a){var s=a.memoizedState,u=0;s!==null&&(u=s.retryLane),Dw(a,u)}function QP(a,s){var u=0;switch(a.tag){case 13:var f=a.stateNode,p=a.memoizedState;p!==null&&(u=p.retryLane);break;case 19:f=a.stateNode;break;case 22:f=a.stateNode._retryCache;break;default:throw Error(r(314))}f!==null&&f.delete(s),Dw(a,u)}function WP(a,s){return Vd(a,s)}var Mc=null,Ss=null,Pm=!1,Ic=!1,Nm=!1,vi=0;function wr(a){a!==Ss&&a.next===null&&(Ss===null?Mc=Ss=a:Ss=Ss.next=a),Ic=!0,Pm||(Pm=!0,tN())}function au(a,s){if(!Nm&&Ic){Nm=!0;do for(var u=!1,f=Mc;f!==null;){if(a!==0){var p=f.pendingLanes;if(p===0)var y=0;else{var w=f.suspendedLanes,T=f.pingedLanes;y=(1<<31-gn(42|a)+1)-1,y&=p&~(w&~T),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(u=!0,zw(f,y))}else y=Ie,y=zl(f,f===We?y:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(y&3)===0||vo(f,y)||(u=!0,zw(f,y));f=f.next}while(u);Nm=!1}}function eN(){$w()}function $w(){Ic=Pm=!1;var a=0;vi!==0&&(lN()&&(a=vi),vi=0);for(var s=gr(),u=null,f=Mc;f!==null;){var p=f.next,y=Uw(f,s);y===0?(f.next=null,u===null?Mc=p:u.next=p,p===null&&(Ss=u)):(u=f,(a!==0||(y&3)!==0)&&(Ic=!0)),f=p}au(a)}function Uw(a,s){for(var u=a.suspendedLanes,f=a.pingedLanes,p=a.expirationTimes,y=a.pendingLanes&-62914561;0<y;){var w=31-gn(y),T=1<<w,C=p[w];C===-1?((T&u)===0||(T&f)!==0)&&(p[w]=xC(T,s)):C<=s&&(a.expiredLanes|=T),y&=~T}if(s=We,u=Ie,u=zl(a,a===s?u:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),f=a.callbackNode,u===0||a===s&&(Fe===2||Fe===9)||a.cancelPendingCommit!==null)return f!==null&&f!==null&&qd(f),a.callbackNode=null,a.callbackPriority=0;if((u&3)===0||vo(a,u)){if(s=u&-u,s===a.callbackPriority)return s;switch(f!==null&&qd(f),Zd(u)){case 2:case 8:u=P_;break;case 32:u=$l;break;case 268435456:u=N_;break;default:u=$l}return f=Bw.bind(null,a),u=Vd(u,f),a.callbackPriority=s,a.callbackNode=u,s}return f!==null&&f!==null&&qd(f),a.callbackPriority=2,a.callbackNode=null,2}function Bw(a,s){if(Mt!==0&&Mt!==5)return a.callbackNode=null,a.callbackPriority=0,null;var u=a.callbackNode;if(kc()&&a.callbackNode!==u)return null;var f=Ie;return f=zl(a,a===We?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),f===0?null:(Sw(a,f,s),Uw(a,gr()),a.callbackNode!=null&&a.callbackNode===u?Bw.bind(null,a):null)}function zw(a,s){if(kc())return null;Sw(a,s,!0)}function tN(){fN(function(){(qe&6)!==0?Vd(C_,eN):$w()})}function jm(){return vi===0&&(vi=j_()),vi}function Vw(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Zl(""+a)}function qw(a,s){var u=s.ownerDocument.createElement("input");return u.name=s.name,u.value=s.value,a.id&&u.setAttribute("form",a.id),s.parentNode.insertBefore(u,s),a=new FormData(a),u.parentNode.removeChild(u),a}function nN(a,s,u,f,p){if(s==="submit"&&u&&u.stateNode===p){var y=Vw((p[an]||null).action),w=f.submitter;w&&(s=(s=w[an]||null)?Vw(s.formAction):w.getAttribute("formAction"),s!==null&&(y=s,w=null));var T=new Kl("action","action",null,f,p);a.push({event:T,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(vi!==0){var C=w?qw(p,w):new FormData(p);Qh(u,{pending:!0,data:C,method:p.method,action:y},null,C)}}else typeof y=="function"&&(T.preventDefault(),C=w?qw(p,w):new FormData(p),Qh(u,{pending:!0,data:C,method:p.method,action:y},y,C))},currentTarget:p}]})}}for(var km=0;km<yh.length;km++){var Mm=yh[km],rN=Mm.toLowerCase(),aN=Mm[0].toUpperCase()+Mm.slice(1);Gn(rN,"on"+aN)}Gn(Sv,"onAnimationEnd"),Gn(Av,"onAnimationIteration"),Gn(Tv,"onAnimationStart"),Gn("dblclick","onDoubleClick"),Gn("focusin","onFocus"),Gn("focusout","onBlur"),Gn(wP,"onTransitionRun"),Gn(SP,"onTransitionStart"),Gn(AP,"onTransitionCancel"),Gn(Ev,"onTransitionEnd"),Zi("onMouseEnter",["mouseout","mouseover"]),Zi("onMouseLeave",["mouseout","mouseover"]),Zi("onPointerEnter",["pointerout","pointerover"]),Zi("onPointerLeave",["pointerout","pointerover"]),ai("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ai("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ai("onBeforeInput",["compositionend","keypress","textInput","paste"]),ai("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ai("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ai("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var iu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(iu));function Fw(a,s){s=(s&4)!==0;for(var u=0;u<a.length;u++){var f=a[u],p=f.event;f=f.listeners;e:{var y=void 0;if(s)for(var w=f.length-1;0<=w;w--){var T=f[w],C=T.instance,L=T.currentTarget;if(T=T.listener,C!==y&&p.isPropagationStopped())break e;y=T,p.currentTarget=L;try{y(p)}catch(F){Sc(F)}p.currentTarget=null,y=C}else for(w=0;w<f.length;w++){if(T=f[w],C=T.instance,L=T.currentTarget,T=T.listener,C!==y&&p.isPropagationStopped())break e;y=T,p.currentTarget=L;try{y(p)}catch(F){Sc(F)}p.currentTarget=null,y=C}}}}function Me(a,s){var u=s[Gd];u===void 0&&(u=s[Gd]=new Set);var f=a+"__bubble";u.has(f)||(Hw(s,a,2,!1),u.add(f))}function Im(a,s,u){var f=0;s&&(f|=4),Hw(u,a,f,s)}var Lc="_reactListening"+Math.random().toString(36).slice(2);function Lm(a){if(!a[Lc]){a[Lc]=!0,$_.forEach(function(u){u!=="selectionchange"&&(iN.has(u)||Im(u,!1,a),Im(u,!0,a))});var s=a.nodeType===9?a:a.ownerDocument;s===null||s[Lc]||(s[Lc]=!0,Im("selectionchange",!1,s))}}function Hw(a,s,u,f){switch(pS(s)){case 2:var p=jN;break;case 8:p=kN;break;default:p=Km}u=p.bind(null,s,u,a),p=void 0,!ah||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(p=!0),f?p!==void 0?a.addEventListener(s,u,{capture:!0,passive:p}):a.addEventListener(s,u,!0):p!==void 0?a.addEventListener(s,u,{passive:p}):a.addEventListener(s,u,!1)}function Dm(a,s,u,f,p){var y=f;if((s&1)===0&&(s&2)===0&&f!==null)e:for(;;){if(f===null)return;var w=f.tag;if(w===3||w===4){var T=f.stateNode.containerInfo;if(T===p)break;if(w===4)for(w=f.return;w!==null;){var C=w.tag;if((C===3||C===4)&&w.stateNode.containerInfo===p)return;w=w.return}for(;T!==null;){if(w=qi(T),w===null)return;if(C=w.tag,C===5||C===6||C===26||C===27){f=y=w;continue e}T=T.parentNode}}f=f.return}Q_(function(){var L=y,F=nh(u),Y=[];e:{var D=xv.get(a);if(D!==void 0){var $=Kl,_e=a;switch(a){case"keypress":if(Yl(u)===0)break e;case"keydown":case"keyup":$=WC;break;case"focusin":_e="focus",$=uh;break;case"focusout":_e="blur",$=uh;break;case"beforeblur":case"afterblur":$=uh;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=tv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=zC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=nP;break;case Sv:case Av:case Tv:$=FC;break;case Ev:$=aP;break;case"scroll":case"scrollend":$=UC;break;case"wheel":$=sP;break;case"copy":case"cut":case"paste":$=ZC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=rv;break;case"toggle":case"beforetoggle":$=uP}var ge=(s&4)!==0,Xe=!ge&&(a==="scroll"||a==="scrollend"),k=ge?D!==null?D+"Capture":null:D;ge=[];for(var N=L,I;N!==null;){var Z=N;if(I=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||I===null||k===null||(Z=To(N,k),Z!=null&&ge.push(su(N,Z,I))),Xe)break;N=N.return}0<ge.length&&(D=new $(D,_e,null,u,F),Y.push({event:D,listeners:ge}))}}if((s&7)===0){e:{if(D=a==="mouseover"||a==="pointerover",$=a==="mouseout"||a==="pointerout",D&&u!==th&&(_e=u.relatedTarget||u.fromElement)&&(qi(_e)||_e[Vi]))break e;if(($||D)&&(D=F.window===F?F:(D=F.ownerDocument)?D.defaultView||D.parentWindow:window,$?(_e=u.relatedTarget||u.toElement,$=L,_e=_e?qi(_e):null,_e!==null&&(Xe=o(_e),ge=_e.tag,_e!==Xe||ge!==5&&ge!==27&&ge!==6)&&(_e=null)):($=null,_e=L),$!==_e)){if(ge=tv,Z="onMouseLeave",k="onMouseEnter",N="mouse",(a==="pointerout"||a==="pointerover")&&(ge=rv,Z="onPointerLeave",k="onPointerEnter",N="pointer"),Xe=$==null?D:Ao($),I=_e==null?D:Ao(_e),D=new ge(Z,N+"leave",$,u,F),D.target=Xe,D.relatedTarget=I,Z=null,qi(F)===L&&(ge=new ge(k,N+"enter",_e,u,F),ge.target=I,ge.relatedTarget=Xe,Z=ge),Xe=Z,$&&_e)t:{for(ge=$,k=_e,N=0,I=ge;I;I=As(I))N++;for(I=0,Z=k;Z;Z=As(Z))I++;for(;0<N-I;)ge=As(ge),N--;for(;0<I-N;)k=As(k),I--;for(;N--;){if(ge===k||k!==null&&ge===k.alternate)break t;ge=As(ge),k=As(k)}ge=null}else ge=null;$!==null&&Zw(Y,D,$,ge,!1),_e!==null&&Xe!==null&&Zw(Y,Xe,_e,ge,!0)}}e:{if(D=L?Ao(L):window,$=D.nodeName&&D.nodeName.toLowerCase(),$==="select"||$==="input"&&D.type==="file")var se=fv;else if(lv(D))if(dv)se=bP;else{se=gP;var je=pP}else $=D.nodeName,!$||$.toLowerCase()!=="input"||D.type!=="checkbox"&&D.type!=="radio"?L&&eh(L.elementType)&&(se=fv):se=yP;if(se&&(se=se(a,L))){cv(Y,se,u,F);break e}je&&je(a,D,L),a==="focusout"&&L&&D.type==="number"&&L.memoizedProps.value!=null&&Wd(D,"number",D.value)}switch(je=L?Ao(L):window,a){case"focusin":(lv(je)||je.contentEditable==="true")&&(Wi=je,mh=L,jo=null);break;case"focusout":jo=mh=Wi=null;break;case"mousedown":ph=!0;break;case"contextmenu":case"mouseup":case"dragend":ph=!1,vv(Y,u,F);break;case"selectionchange":if(vP)break;case"keydown":case"keyup":vv(Y,u,F)}var le;if(ch)e:{switch(a){case"compositionstart":var ye="onCompositionStart";break e;case"compositionend":ye="onCompositionEnd";break e;case"compositionupdate":ye="onCompositionUpdate";break e}ye=void 0}else Qi?ov(a,u)&&(ye="onCompositionEnd"):a==="keydown"&&u.keyCode===229&&(ye="onCompositionStart");ye&&(av&&u.locale!=="ko"&&(Qi||ye!=="onCompositionStart"?ye==="onCompositionEnd"&&Qi&&(le=W_()):(la=F,ih="value"in la?la.value:la.textContent,Qi=!0)),je=Dc(L,ye),0<je.length&&(ye=new nv(ye,a,null,u,F),Y.push({event:ye,listeners:je}),le?ye.data=le:(le=uv(u),le!==null&&(ye.data=le)))),(le=cP?fP(a,u):dP(a,u))&&(ye=Dc(L,"onBeforeInput"),0<ye.length&&(je=new nv("onBeforeInput","beforeinput",null,u,F),Y.push({event:je,listeners:ye}),je.data=le)),nN(Y,a,L,u,F)}Fw(Y,s)})}function su(a,s,u){return{instance:a,listener:s,currentTarget:u}}function Dc(a,s){for(var u=s+"Capture",f=[];a!==null;){var p=a,y=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=To(a,u),p!=null&&f.unshift(su(a,p,y)),p=To(a,s),p!=null&&f.push(su(a,p,y))),a.tag===3)return f;a=a.return}return[]}function As(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function Zw(a,s,u,f,p){for(var y=s._reactName,w=[];u!==null&&u!==f;){var T=u,C=T.alternate,L=T.stateNode;if(T=T.tag,C!==null&&C===f)break;T!==5&&T!==26&&T!==27||L===null||(C=L,p?(L=To(u,y),L!=null&&w.unshift(su(u,L,C))):p||(L=To(u,y),L!=null&&w.push(su(u,L,C)))),u=u.return}w.length!==0&&a.push({event:s,listeners:w})}var sN=/\r\n?/g,oN=/\u0000|\uFFFD/g;function Gw(a){return(typeof a=="string"?a:""+a).replace(sN,`
`).replace(oN,"")}function Yw(a,s){return s=Gw(s),Gw(a)===s}function $c(){}function Ye(a,s,u,f,p,y){switch(u){case"children":typeof f=="string"?s==="body"||s==="textarea"&&f===""||Xi(a,f):(typeof f=="number"||typeof f=="bigint")&&s!=="body"&&Xi(a,""+f);break;case"className":ql(a,"class",f);break;case"tabIndex":ql(a,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":ql(a,u,f);break;case"style":K_(a,f,y);break;case"data":if(s!=="object"){ql(a,"data",f);break}case"src":case"href":if(f===""&&(s!=="a"||u!=="href")){a.removeAttribute(u);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){a.removeAttribute(u);break}f=Zl(""+f),a.setAttribute(u,f);break;case"action":case"formAction":if(typeof f=="function"){a.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(u==="formAction"?(s!=="input"&&Ye(a,s,"name",p.name,p,null),Ye(a,s,"formEncType",p.formEncType,p,null),Ye(a,s,"formMethod",p.formMethod,p,null),Ye(a,s,"formTarget",p.formTarget,p,null)):(Ye(a,s,"encType",p.encType,p,null),Ye(a,s,"method",p.method,p,null),Ye(a,s,"target",p.target,p,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){a.removeAttribute(u);break}f=Zl(""+f),a.setAttribute(u,f);break;case"onClick":f!=null&&(a.onclick=$c);break;case"onScroll":f!=null&&Me("scroll",a);break;case"onScrollEnd":f!=null&&Me("scrollend",a);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(u=f.__html,u!=null){if(p.children!=null)throw Error(r(60));a.innerHTML=u}}break;case"multiple":a.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":a.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){a.removeAttribute("xlink:href");break}u=Zl(""+f),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(u,""+f):a.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(u,""):a.removeAttribute(u);break;case"capture":case"download":f===!0?a.setAttribute(u,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(u,f):a.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?a.setAttribute(u,f):a.removeAttribute(u);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?a.removeAttribute(u):a.setAttribute(u,f);break;case"popover":Me("beforetoggle",a),Me("toggle",a),Vl(a,"popover",f);break;case"xlinkActuate":Ir(a,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Ir(a,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Ir(a,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Ir(a,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Ir(a,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Ir(a,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Ir(a,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Ir(a,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Ir(a,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Vl(a,"is",f);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=DC.get(u)||u,Vl(a,u,f))}}function $m(a,s,u,f,p,y){switch(u){case"style":K_(a,f,y);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(u=f.__html,u!=null){if(p.children!=null)throw Error(r(60));a.innerHTML=u}}break;case"children":typeof f=="string"?Xi(a,f):(typeof f=="number"||typeof f=="bigint")&&Xi(a,""+f);break;case"onScroll":f!=null&&Me("scroll",a);break;case"onScrollEnd":f!=null&&Me("scrollend",a);break;case"onClick":f!=null&&(a.onclick=$c);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!U_.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(p=u.endsWith("Capture"),s=u.slice(2,p?u.length-7:void 0),y=a[an]||null,y=y!=null?y[u]:null,typeof y=="function"&&a.removeEventListener(s,y,p),typeof f=="function")){typeof y!="function"&&y!==null&&(u in a?a[u]=null:a.hasAttribute(u)&&a.removeAttribute(u)),a.addEventListener(s,f,p);break e}u in a?a[u]=f:f===!0?a.setAttribute(u,""):Vl(a,u,f)}}}function It(a,s,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Me("error",a),Me("load",a);var f=!1,p=!1,y;for(y in u)if(u.hasOwnProperty(y)){var w=u[y];if(w!=null)switch(y){case"src":f=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Ye(a,s,y,w,u,null)}}p&&Ye(a,s,"srcSet",u.srcSet,u,null),f&&Ye(a,s,"src",u.src,u,null);return;case"input":Me("invalid",a);var T=y=w=p=null,C=null,L=null;for(f in u)if(u.hasOwnProperty(f)){var F=u[f];if(F!=null)switch(f){case"name":p=F;break;case"type":w=F;break;case"checked":C=F;break;case"defaultChecked":L=F;break;case"value":y=F;break;case"defaultValue":T=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(137,s));break;default:Ye(a,s,f,F,u,null)}}Z_(a,y,T,C,L,w,p,!1),Fl(a);return;case"select":Me("invalid",a),f=w=y=null;for(p in u)if(u.hasOwnProperty(p)&&(T=u[p],T!=null))switch(p){case"value":y=T;break;case"defaultValue":w=T;break;case"multiple":f=T;default:Ye(a,s,p,T,u,null)}s=y,u=w,a.multiple=!!f,s!=null?Yi(a,!!f,s,!1):u!=null&&Yi(a,!!f,u,!0);return;case"textarea":Me("invalid",a),y=p=f=null;for(w in u)if(u.hasOwnProperty(w)&&(T=u[w],T!=null))switch(w){case"value":f=T;break;case"defaultValue":p=T;break;case"children":y=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:Ye(a,s,w,T,u,null)}Y_(a,f,p,y),Fl(a);return;case"option":for(C in u)if(u.hasOwnProperty(C)&&(f=u[C],f!=null))switch(C){case"selected":a.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Ye(a,s,C,f,u,null)}return;case"dialog":Me("beforetoggle",a),Me("toggle",a),Me("cancel",a),Me("close",a);break;case"iframe":case"object":Me("load",a);break;case"video":case"audio":for(f=0;f<iu.length;f++)Me(iu[f],a);break;case"image":Me("error",a),Me("load",a);break;case"details":Me("toggle",a);break;case"embed":case"source":case"link":Me("error",a),Me("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in u)if(u.hasOwnProperty(L)&&(f=u[L],f!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Ye(a,s,L,f,u,null)}return;default:if(eh(s)){for(F in u)u.hasOwnProperty(F)&&(f=u[F],f!==void 0&&$m(a,s,F,f,u,void 0));return}}for(T in u)u.hasOwnProperty(T)&&(f=u[T],f!=null&&Ye(a,s,T,f,u,null))}function uN(a,s,u,f){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,w=null,T=null,C=null,L=null,F=null;for($ in u){var Y=u[$];if(u.hasOwnProperty($)&&Y!=null)switch($){case"checked":break;case"value":break;case"defaultValue":C=Y;default:f.hasOwnProperty($)||Ye(a,s,$,null,f,Y)}}for(var D in f){var $=f[D];if(Y=u[D],f.hasOwnProperty(D)&&($!=null||Y!=null))switch(D){case"type":y=$;break;case"name":p=$;break;case"checked":L=$;break;case"defaultChecked":F=$;break;case"value":w=$;break;case"defaultValue":T=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,s));break;default:$!==Y&&Ye(a,s,D,$,f,Y)}}Qd(a,w,T,C,L,F,y,p);return;case"select":$=w=T=D=null;for(y in u)if(C=u[y],u.hasOwnProperty(y)&&C!=null)switch(y){case"value":break;case"multiple":$=C;default:f.hasOwnProperty(y)||Ye(a,s,y,null,f,C)}for(p in f)if(y=f[p],C=u[p],f.hasOwnProperty(p)&&(y!=null||C!=null))switch(p){case"value":D=y;break;case"defaultValue":T=y;break;case"multiple":w=y;default:y!==C&&Ye(a,s,p,y,f,C)}s=T,u=w,f=$,D!=null?Yi(a,!!u,D,!1):!!f!=!!u&&(s!=null?Yi(a,!!u,s,!0):Yi(a,!!u,u?[]:"",!1));return;case"textarea":$=D=null;for(T in u)if(p=u[T],u.hasOwnProperty(T)&&p!=null&&!f.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Ye(a,s,T,null,f,p)}for(w in f)if(p=f[w],y=u[w],f.hasOwnProperty(w)&&(p!=null||y!=null))switch(w){case"value":D=p;break;case"defaultValue":$=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(r(91));break;default:p!==y&&Ye(a,s,w,p,f,y)}G_(a,D,$);return;case"option":for(var _e in u)if(D=u[_e],u.hasOwnProperty(_e)&&D!=null&&!f.hasOwnProperty(_e))switch(_e){case"selected":a.selected=!1;break;default:Ye(a,s,_e,null,f,D)}for(C in f)if(D=f[C],$=u[C],f.hasOwnProperty(C)&&D!==$&&(D!=null||$!=null))switch(C){case"selected":a.selected=D&&typeof D!="function"&&typeof D!="symbol";break;default:Ye(a,s,C,D,f,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ge in u)D=u[ge],u.hasOwnProperty(ge)&&D!=null&&!f.hasOwnProperty(ge)&&Ye(a,s,ge,null,f,D);for(L in f)if(D=f[L],$=u[L],f.hasOwnProperty(L)&&D!==$&&(D!=null||$!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(D!=null)throw Error(r(137,s));break;default:Ye(a,s,L,D,f,$)}return;default:if(eh(s)){for(var Xe in u)D=u[Xe],u.hasOwnProperty(Xe)&&D!==void 0&&!f.hasOwnProperty(Xe)&&$m(a,s,Xe,void 0,f,D);for(F in f)D=f[F],$=u[F],!f.hasOwnProperty(F)||D===$||D===void 0&&$===void 0||$m(a,s,F,D,f,$);return}}for(var k in u)D=u[k],u.hasOwnProperty(k)&&D!=null&&!f.hasOwnProperty(k)&&Ye(a,s,k,null,f,D);for(Y in f)D=f[Y],$=u[Y],!f.hasOwnProperty(Y)||D===$||D==null&&$==null||Ye(a,s,Y,D,f,$)}var Um=null,Bm=null;function Uc(a){return a.nodeType===9?a:a.ownerDocument}function Xw(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Kw(a,s){if(a===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&s==="foreignObject"?0:a}function zm(a,s){return a==="textarea"||a==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Vm=null;function lN(){var a=window.event;return a&&a.type==="popstate"?a===Vm?!1:(Vm=a,!0):(Vm=null,!1)}var Jw=typeof setTimeout=="function"?setTimeout:void 0,cN=typeof clearTimeout=="function"?clearTimeout:void 0,Qw=typeof Promise=="function"?Promise:void 0,fN=typeof queueMicrotask=="function"?queueMicrotask:typeof Qw<"u"?function(a){return Qw.resolve(null).then(a).catch(dN)}:Jw;function dN(a){setTimeout(function(){throw a})}function Ea(a){return a==="head"}function Ww(a,s){var u=s,f=0,p=0;do{var y=u.nextSibling;if(a.removeChild(u),y&&y.nodeType===8)if(u=y.data,u==="/$"){if(0<f&&8>f){u=f;var w=a.ownerDocument;if(u&1&&ou(w.documentElement),u&2&&ou(w.body),u&4)for(u=w.head,ou(u),w=u.firstChild;w;){var T=w.nextSibling,C=w.nodeName;w[So]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&w.rel.toLowerCase()==="stylesheet"||u.removeChild(w),w=T}}if(p===0){a.removeChild(y),pu(s);return}p--}else u==="$"||u==="$?"||u==="$!"?p++:f=u.charCodeAt(0)-48;else f=0;u=y}while(u);pu(s)}function qm(a){var s=a.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var u=s;switch(s=s.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":qm(u),Yd(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}a.removeChild(u)}}function hN(a,s,u,f){for(;a.nodeType===1;){var p=u;if(a.nodeName.toLowerCase()!==s.toLowerCase()){if(!f&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(f){if(!a[So])switch(s){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(y=a.getAttribute("rel"),y==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(y!==p.rel||a.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||a.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||a.getAttribute("title")!==(p.title==null?null:p.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(y=a.getAttribute("src"),(y!==(p.src==null?null:p.src)||a.getAttribute("type")!==(p.type==null?null:p.type)||a.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(s==="input"&&a.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&a.getAttribute("name")===y)return a}else return a;if(a=Xn(a.nextSibling),a===null)break}return null}function mN(a,s,u){if(s==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!u||(a=Xn(a.nextSibling),a===null))return null;return a}function Fm(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function pN(a,s){var u=a.ownerDocument;if(a.data!=="$?"||u.readyState==="complete")s();else{var f=function(){s(),u.removeEventListener("DOMContentLoaded",f)};u.addEventListener("DOMContentLoaded",f),a._reactRetry=f}}function Xn(a){for(;a!=null;a=a.nextSibling){var s=a.nodeType;if(s===1||s===3)break;if(s===8){if(s=a.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return a}var Hm=null;function eS(a){a=a.previousSibling;for(var s=0;a;){if(a.nodeType===8){var u=a.data;if(u==="$"||u==="$!"||u==="$?"){if(s===0)return a;s--}else u==="/$"&&s++}a=a.previousSibling}return null}function tS(a,s,u){switch(s=Uc(u),a){case"html":if(a=s.documentElement,!a)throw Error(r(452));return a;case"head":if(a=s.head,!a)throw Error(r(453));return a;case"body":if(a=s.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function ou(a){for(var s=a.attributes;s.length;)a.removeAttributeNode(s[0]);Yd(a)}var zn=new Map,nS=new Set;function Bc(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Xr=U.d;U.d={f:gN,r:yN,D:bN,C:_N,L:vN,m:wN,X:AN,S:SN,M:TN};function gN(){var a=Xr.f(),s=Nc();return a||s}function yN(a){var s=Fi(a);s!==null&&s.tag===5&&s.type==="form"?S0(s):Xr.r(a)}var Ts=typeof document>"u"?null:document;function rS(a,s,u){var f=Ts;if(f&&typeof s=="string"&&s){var p=Mn(s);p='link[rel="'+a+'"][href="'+p+'"]',typeof u=="string"&&(p+='[crossorigin="'+u+'"]'),nS.has(p)||(nS.add(p),a={rel:a,crossOrigin:u,href:s},f.querySelector(p)===null&&(s=f.createElement("link"),It(s,"link",a),Et(s),f.head.appendChild(s)))}}function bN(a){Xr.D(a),rS("dns-prefetch",a,null)}function _N(a,s){Xr.C(a,s),rS("preconnect",a,s)}function vN(a,s,u){Xr.L(a,s,u);var f=Ts;if(f&&a&&s){var p='link[rel="preload"][as="'+Mn(s)+'"]';s==="image"&&u&&u.imageSrcSet?(p+='[imagesrcset="'+Mn(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(p+='[imagesizes="'+Mn(u.imageSizes)+'"]')):p+='[href="'+Mn(a)+'"]';var y=p;switch(s){case"style":y=Es(a);break;case"script":y=xs(a)}zn.has(y)||(a=m({rel:"preload",href:s==="image"&&u&&u.imageSrcSet?void 0:a,as:s},u),zn.set(y,a),f.querySelector(p)!==null||s==="style"&&f.querySelector(uu(y))||s==="script"&&f.querySelector(lu(y))||(s=f.createElement("link"),It(s,"link",a),Et(s),f.head.appendChild(s)))}}function wN(a,s){Xr.m(a,s);var u=Ts;if(u&&a){var f=s&&typeof s.as=="string"?s.as:"script",p='link[rel="modulepreload"][as="'+Mn(f)+'"][href="'+Mn(a)+'"]',y=p;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=xs(a)}if(!zn.has(y)&&(a=m({rel:"modulepreload",href:a},s),zn.set(y,a),u.querySelector(p)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(lu(y)))return}f=u.createElement("link"),It(f,"link",a),Et(f),u.head.appendChild(f)}}}function SN(a,s,u){Xr.S(a,s,u);var f=Ts;if(f&&a){var p=Hi(f).hoistableStyles,y=Es(a);s=s||"default";var w=p.get(y);if(!w){var T={loading:0,preload:null};if(w=f.querySelector(uu(y)))T.loading=5;else{a=m({rel:"stylesheet",href:a,"data-precedence":s},u),(u=zn.get(y))&&Zm(a,u);var C=w=f.createElement("link");Et(C),It(C,"link",a),C._p=new Promise(function(L,F){C.onload=L,C.onerror=F}),C.addEventListener("load",function(){T.loading|=1}),C.addEventListener("error",function(){T.loading|=2}),T.loading|=4,zc(w,s,f)}w={type:"stylesheet",instance:w,count:1,state:T},p.set(y,w)}}}function AN(a,s){Xr.X(a,s);var u=Ts;if(u&&a){var f=Hi(u).hoistableScripts,p=xs(a),y=f.get(p);y||(y=u.querySelector(lu(p)),y||(a=m({src:a,async:!0},s),(s=zn.get(p))&&Gm(a,s),y=u.createElement("script"),Et(y),It(y,"link",a),u.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},f.set(p,y))}}function TN(a,s){Xr.M(a,s);var u=Ts;if(u&&a){var f=Hi(u).hoistableScripts,p=xs(a),y=f.get(p);y||(y=u.querySelector(lu(p)),y||(a=m({src:a,async:!0,type:"module"},s),(s=zn.get(p))&&Gm(a,s),y=u.createElement("script"),Et(y),It(y,"link",a),u.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},f.set(p,y))}}function aS(a,s,u,f){var p=(p=pe.current)?Bc(p):null;if(!p)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(s=Es(u.href),u=Hi(p).hoistableStyles,f=u.get(s),f||(f={type:"style",instance:null,count:0,state:null},u.set(s,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){a=Es(u.href);var y=Hi(p).hoistableStyles,w=y.get(a);if(w||(p=p.ownerDocument||p,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(a,w),(y=p.querySelector(uu(a)))&&!y._p&&(w.instance=y,w.state.loading=5),zn.has(a)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},zn.set(a,u),y||EN(p,a,u,w.state))),s&&f===null)throw Error(r(528,""));return w}if(s&&f!==null)throw Error(r(529,""));return null;case"script":return s=u.async,u=u.src,typeof u=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=xs(u),u=Hi(p).hoistableScripts,f=u.get(s),f||(f={type:"script",instance:null,count:0,state:null},u.set(s,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function Es(a){return'href="'+Mn(a)+'"'}function uu(a){return'link[rel="stylesheet"]['+a+"]"}function iS(a){return m({},a,{"data-precedence":a.precedence,precedence:null})}function EN(a,s,u,f){a.querySelector('link[rel="preload"][as="style"]['+s+"]")?f.loading=1:(s=a.createElement("link"),f.preload=s,s.addEventListener("load",function(){return f.loading|=1}),s.addEventListener("error",function(){return f.loading|=2}),It(s,"link",u),Et(s),a.head.appendChild(s))}function xs(a){return'[src="'+Mn(a)+'"]'}function lu(a){return"script[async]"+a}function sS(a,s,u){if(s.count++,s.instance===null)switch(s.type){case"style":var f=a.querySelector('style[data-href~="'+Mn(u.href)+'"]');if(f)return s.instance=f,Et(f),f;var p=m({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return f=(a.ownerDocument||a).createElement("style"),Et(f),It(f,"style",p),zc(f,u.precedence,a),s.instance=f;case"stylesheet":p=Es(u.href);var y=a.querySelector(uu(p));if(y)return s.state.loading|=4,s.instance=y,Et(y),y;f=iS(u),(p=zn.get(p))&&Zm(f,p),y=(a.ownerDocument||a).createElement("link"),Et(y);var w=y;return w._p=new Promise(function(T,C){w.onload=T,w.onerror=C}),It(y,"link",f),s.state.loading|=4,zc(y,u.precedence,a),s.instance=y;case"script":return y=xs(u.src),(p=a.querySelector(lu(y)))?(s.instance=p,Et(p),p):(f=u,(p=zn.get(y))&&(f=m({},u),Gm(f,p)),a=a.ownerDocument||a,p=a.createElement("script"),Et(p),It(p,"link",f),a.head.appendChild(p),s.instance=p);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(f=s.instance,s.state.loading|=4,zc(f,u.precedence,a));return s.instance}function zc(a,s,u){for(var f=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=f.length?f[f.length-1]:null,y=p,w=0;w<f.length;w++){var T=f[w];if(T.dataset.precedence===s)y=T;else if(y!==p)break}y?y.parentNode.insertBefore(a,y.nextSibling):(s=u.nodeType===9?u.head:u,s.insertBefore(a,s.firstChild))}function Zm(a,s){a.crossOrigin==null&&(a.crossOrigin=s.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=s.referrerPolicy),a.title==null&&(a.title=s.title)}function Gm(a,s){a.crossOrigin==null&&(a.crossOrigin=s.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=s.referrerPolicy),a.integrity==null&&(a.integrity=s.integrity)}var Vc=null;function oS(a,s,u){if(Vc===null){var f=new Map,p=Vc=new Map;p.set(u,f)}else p=Vc,f=p.get(u),f||(f=new Map,p.set(u,f));if(f.has(a))return f;for(f.set(a,null),u=u.getElementsByTagName(a),p=0;p<u.length;p++){var y=u[p];if(!(y[So]||y[zt]||a==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var w=y.getAttribute(s)||"";w=a+w;var T=f.get(w);T?T.push(y):f.set(w,[y])}}return f}function uS(a,s,u){a=a.ownerDocument||a,a.head.insertBefore(u,s==="title"?a.querySelector("head > title"):null)}function xN(a,s,u){if(u===1||s.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return a=s.disabled,typeof s.precedence=="string"&&a==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function lS(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var cu=null;function ON(){}function RN(a,s,u){if(cu===null)throw Error(r(475));var f=cu;if(s.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var p=Es(u.href),y=a.querySelector(uu(p));if(y){a=y._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(f.count++,f=qc.bind(f),a.then(f,f)),s.state.loading|=4,s.instance=y,Et(y);return}y=a.ownerDocument||a,u=iS(u),(p=zn.get(p))&&Zm(u,p),y=y.createElement("link"),Et(y);var w=y;w._p=new Promise(function(T,C){w.onload=T,w.onerror=C}),It(y,"link",u),s.instance=y}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(s,a),(a=s.state.preload)&&(s.state.loading&3)===0&&(f.count++,s=qc.bind(f),a.addEventListener("load",s),a.addEventListener("error",s))}}function CN(){if(cu===null)throw Error(r(475));var a=cu;return a.stylesheets&&a.count===0&&Ym(a,a.stylesheets),0<a.count?function(s){var u=setTimeout(function(){if(a.stylesheets&&Ym(a,a.stylesheets),a.unsuspend){var f=a.unsuspend;a.unsuspend=null,f()}},6e4);return a.unsuspend=s,function(){a.unsuspend=null,clearTimeout(u)}}:null}function qc(){if(this.count--,this.count===0){if(this.stylesheets)Ym(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Fc=null;function Ym(a,s){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Fc=new Map,s.forEach(PN,a),Fc=null,qc.call(a))}function PN(a,s){if(!(s.state.loading&4)){var u=Fc.get(a);if(u)var f=u.get(null);else{u=new Map,Fc.set(a,u);for(var p=a.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var w=p[y];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(u.set(w.dataset.precedence,w),f=w)}f&&u.set(null,f)}p=s.instance,w=p.getAttribute("data-precedence"),y=u.get(w)||f,y===f&&u.set(null,p),u.set(w,p),this.count++,f=qc.bind(this),p.addEventListener("load",f),p.addEventListener("error",f),y?y.parentNode.insertBefore(p,y.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(p,a.firstChild)),s.state.loading|=4}}var fu={$$typeof:x,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function NN(a,s,u,f,p,y,w,T){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Fd(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fd(0),this.hiddenUpdates=Fd(null),this.identifierPrefix=f,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function cS(a,s,u,f,p,y,w,T,C,L,F,Y){return a=new NN(a,s,u,w,T,C,L,Y),s=1,y===!0&&(s|=24),y=bn(3,null,null,s),a.current=y,y.stateNode=a,s=Ch(),s.refCount++,a.pooledCache=s,s.refCount++,y.memoizedState={element:f,isDehydrated:u,cache:s},kh(y),a}function fS(a){return a?(a=rs,a):rs}function dS(a,s,u,f,p,y){p=fS(p),f.context===null?f.context=p:f.pendingContext=p,f=da(s),f.payload={element:u},y=y===void 0?null:y,y!==null&&(f.callback=y),u=ha(a,f,s),u!==null&&(An(u,a,s),zo(u,a,s))}function hS(a,s){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var u=a.retryLane;a.retryLane=u!==0&&u<s?u:s}}function Xm(a,s){hS(a,s),(a=a.alternate)&&hS(a,s)}function mS(a){if(a.tag===13){var s=ns(a,67108864);s!==null&&An(s,a,67108864),Xm(a,67108864)}}var Hc=!0;function jN(a,s,u,f){var p=M.T;M.T=null;var y=U.p;try{U.p=2,Km(a,s,u,f)}finally{U.p=y,M.T=p}}function kN(a,s,u,f){var p=M.T;M.T=null;var y=U.p;try{U.p=8,Km(a,s,u,f)}finally{U.p=y,M.T=p}}function Km(a,s,u,f){if(Hc){var p=Jm(f);if(p===null)Dm(a,s,f,Zc,u),gS(a,f);else if(IN(p,a,s,u,f))f.stopPropagation();else if(gS(a,f),s&4&&-1<MN.indexOf(a)){for(;p!==null;){var y=Fi(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var w=ri(y.pendingLanes);if(w!==0){var T=y;for(T.pendingLanes|=2,T.entangledLanes|=2;w;){var C=1<<31-gn(w);T.entanglements[1]|=C,w&=~C}wr(y),(qe&6)===0&&(Cc=gr()+500,au(0))}}break;case 13:T=ns(y,2),T!==null&&An(T,y,2),Nc(),Xm(y,2)}if(y=Jm(f),y===null&&Dm(a,s,f,Zc,u),y===p)break;p=y}p!==null&&f.stopPropagation()}else Dm(a,s,f,null,u)}}function Jm(a){return a=nh(a),Qm(a)}var Zc=null;function Qm(a){if(Zc=null,a=qi(a),a!==null){var s=o(a);if(s===null)a=null;else{var u=s.tag;if(u===13){if(a=l(s),a!==null)return a;a=null}else if(u===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;a=null}else s!==a&&(a=null)}}return Zc=a,null}function pS(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_C()){case C_:return 2;case P_:return 8;case $l:case vC:return 32;case N_:return 268435456;default:return 32}default:return 32}}var Wm=!1,xa=null,Oa=null,Ra=null,du=new Map,hu=new Map,Ca=[],MN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function gS(a,s){switch(a){case"focusin":case"focusout":xa=null;break;case"dragenter":case"dragleave":Oa=null;break;case"mouseover":case"mouseout":Ra=null;break;case"pointerover":case"pointerout":du.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":hu.delete(s.pointerId)}}function mu(a,s,u,f,p,y){return a===null||a.nativeEvent!==y?(a={blockedOn:s,domEventName:u,eventSystemFlags:f,nativeEvent:y,targetContainers:[p]},s!==null&&(s=Fi(s),s!==null&&mS(s)),a):(a.eventSystemFlags|=f,s=a.targetContainers,p!==null&&s.indexOf(p)===-1&&s.push(p),a)}function IN(a,s,u,f,p){switch(s){case"focusin":return xa=mu(xa,a,s,u,f,p),!0;case"dragenter":return Oa=mu(Oa,a,s,u,f,p),!0;case"mouseover":return Ra=mu(Ra,a,s,u,f,p),!0;case"pointerover":var y=p.pointerId;return du.set(y,mu(du.get(y)||null,a,s,u,f,p)),!0;case"gotpointercapture":return y=p.pointerId,hu.set(y,mu(hu.get(y)||null,a,s,u,f,p)),!0}return!1}function yS(a){var s=qi(a.target);if(s!==null){var u=o(s);if(u!==null){if(s=u.tag,s===13){if(s=l(u),s!==null){a.blockedOn=s,RC(a.priority,function(){if(u.tag===13){var f=Sn();f=Hd(f);var p=ns(u,f);p!==null&&An(p,u,f),Xm(u,f)}});return}}else if(s===3&&u.stateNode.current.memoizedState.isDehydrated){a.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Gc(a){if(a.blockedOn!==null)return!1;for(var s=a.targetContainers;0<s.length;){var u=Jm(a.nativeEvent);if(u===null){u=a.nativeEvent;var f=new u.constructor(u.type,u);th=f,u.target.dispatchEvent(f),th=null}else return s=Fi(u),s!==null&&mS(s),a.blockedOn=u,!1;s.shift()}return!0}function bS(a,s,u){Gc(a)&&u.delete(s)}function LN(){Wm=!1,xa!==null&&Gc(xa)&&(xa=null),Oa!==null&&Gc(Oa)&&(Oa=null),Ra!==null&&Gc(Ra)&&(Ra=null),du.forEach(bS),hu.forEach(bS)}function Yc(a,s){a.blockedOn===s&&(a.blockedOn=null,Wm||(Wm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,LN)))}var Xc=null;function _S(a){Xc!==a&&(Xc=a,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Xc===a&&(Xc=null);for(var s=0;s<a.length;s+=3){var u=a[s],f=a[s+1],p=a[s+2];if(typeof f!="function"){if(Qm(f||u)===null)continue;break}var y=Fi(u);y!==null&&(a.splice(s,3),s-=3,Qh(y,{pending:!0,data:p,method:u.method,action:f},f,p))}}))}function pu(a){function s(C){return Yc(C,a)}xa!==null&&Yc(xa,a),Oa!==null&&Yc(Oa,a),Ra!==null&&Yc(Ra,a),du.forEach(s),hu.forEach(s);for(var u=0;u<Ca.length;u++){var f=Ca[u];f.blockedOn===a&&(f.blockedOn=null)}for(;0<Ca.length&&(u=Ca[0],u.blockedOn===null);)yS(u),u.blockedOn===null&&Ca.shift();if(u=(a.ownerDocument||a).$$reactFormReplay,u!=null)for(f=0;f<u.length;f+=3){var p=u[f],y=u[f+1],w=p[an]||null;if(typeof y=="function")w||_S(u);else if(w){var T=null;if(y&&y.hasAttribute("formAction")){if(p=y,w=y[an]||null)T=w.formAction;else if(Qm(p)!==null)continue}else T=w.action;typeof T=="function"?u[f+1]=T:(u.splice(f,3),f-=3),_S(u)}}}function ep(a){this._internalRoot=a}Kc.prototype.render=ep.prototype.render=function(a){var s=this._internalRoot;if(s===null)throw Error(r(409));var u=s.current,f=Sn();dS(u,f,a,s,null,null)},Kc.prototype.unmount=ep.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var s=a.containerInfo;dS(a.current,2,null,a,null,null),Nc(),s[Vi]=null}};function Kc(a){this._internalRoot=a}Kc.prototype.unstable_scheduleHydration=function(a){if(a){var s=L_();a={blockedOn:null,target:a,priority:s};for(var u=0;u<Ca.length&&s!==0&&s<Ca[u].priority;u++);Ca.splice(u,0,a),u===0&&yS(a)}};var vS=e.version;if(vS!=="19.1.0")throw Error(r(527,vS,"19.1.0"));U.findDOMNode=function(a){var s=a._reactInternals;if(s===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=d(s),a=a!==null?h(a):null,a=a===null?null:a.stateNode,a};var DN={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jc.isDisabled&&Jc.supportsFiber)try{_o=Jc.inject(DN),pn=Jc}catch{}}return yu.createRoot=function(a,s){if(!i(a))throw Error(r(299));var u=!1,f="",p=L0,y=D0,w=$0,T=null;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onUncaughtError!==void 0&&(p=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(w=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(T=s.unstable_transitionCallbacks)),s=cS(a,1,!1,null,null,u,f,p,y,w,T,null),a[Vi]=s.current,Lm(a),new ep(s)},yu.hydrateRoot=function(a,s,u){if(!i(a))throw Error(r(299));var f=!1,p="",y=L0,w=D0,T=$0,C=null,L=null;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(p=u.identifierPrefix),u.onUncaughtError!==void 0&&(y=u.onUncaughtError),u.onCaughtError!==void 0&&(w=u.onCaughtError),u.onRecoverableError!==void 0&&(T=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(C=u.unstable_transitionCallbacks),u.formState!==void 0&&(L=u.formState)),s=cS(a,1,!0,s,u??null,f,p,y,w,T,C,L),s.context=fS(null),u=s.current,f=Sn(),f=Hd(f),p=da(f),p.callback=null,ha(u,p,f),u=f,s.current.lanes=u,wo(s,u),wr(s),a[Vi]=s.current,Lm(a),new Kc(s)},yu.version="19.1.0",yu}var PS;function XN(){if(PS)return rp.exports;PS=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),rp.exports=YN(),rp.exports}var KN=XN();const Sx=oe.createContext({});function JN(n){const e=oe.useRef(null);return e.current===null&&(e.current=n()),e.current}const Qy=typeof window<"u",QN=Qy?oe.useLayoutEffect:oe.useEffect,Wy=oe.createContext(null),Ax=oe.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function WN(n=!0){const e=oe.useContext(Wy);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:i}=e,o=oe.useId();oe.useEffect(()=>{if(n)return i(o)},[n]);const l=oe.useCallback(()=>n&&r&&r(o),[o,r,n]);return!t&&r?[!1,l]:[!0]}function eb(n,e){n.indexOf(e)===-1&&n.push(e)}function tb(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const aa=(n,e,t)=>t>e?e:t<n?n:t;let nb=()=>{};const ia={},Tx=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),Ex=n=>/^0[^.\s]+$/u.test(n);function rb(n){let e;return()=>(e===void 0&&(e=n()),e)}const Zn=n=>n,ej=(n,e)=>t=>e(n(t)),wl=(...n)=>n.reduce(ej),Gu=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class ab{constructor(){this.subscriptions=[]}add(e){return eb(this.subscriptions,e),()=>tb(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let o=0;o<i;o++){const l=this.subscriptions[o];l&&l(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Rr=n=>n*1e3,Cr=n=>n/1e3;function xx(n,e){return e?n*(1e3/e):0}const Ox=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,tj=1e-7,nj=12;function rj(n,e,t,r,i){let o,l,c=0;do l=e+(t-e)/2,o=Ox(l,r,i)-n,o>0?t=l:e=l;while(Math.abs(o)>tj&&++c<nj);return l}function Sl(n,e,t,r){if(n===e&&t===r)return Zn;const i=o=>rj(o,0,1,n,t);return o=>o===0||o===1?o:Ox(i(o),e,r)}const Rx=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,Cx=n=>e=>1-n(1-e),Px=Sl(.33,1.53,.69,.99),ib=Cx(Px),Nx=Rx(ib),jx=n=>(n*=2)<1?.5*ib(n):.5*(2-Math.pow(2,-10*(n-1))),sb=n=>1-Math.sin(Math.acos(n)),kx=Cx(sb),Mx=Rx(sb),aj=Sl(.42,0,1,1),ij=Sl(0,0,.58,1),Ix=Sl(.42,0,.58,1),sj=n=>Array.isArray(n)&&typeof n[0]!="number",Lx=n=>Array.isArray(n)&&typeof n[0]=="number",oj={linear:Zn,easeIn:aj,easeInOut:Ix,easeOut:ij,circIn:sb,circInOut:Mx,circOut:kx,backIn:ib,backInOut:Nx,backOut:Px,anticipate:jx},uj=n=>typeof n=="string",NS=n=>{if(Lx(n)){nb(n.length===4);const[e,t,r,i]=n;return Sl(e,t,r,i)}else if(uj(n))return oj[n];return n},Qc=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],jS={value:null};function lj(n,e){let t=new Set,r=new Set,i=!1,o=!1;const l=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1},d=0;function h(g){l.has(g)&&(m.schedule(g),n()),d++,g(c)}const m={schedule:(g,b=!1,_=!1)=>{const S=_&&i?t:r;return b&&l.add(g),S.has(g)||S.add(g),g},cancel:g=>{r.delete(g),l.delete(g)},process:g=>{if(c=g,i){o=!0;return}i=!0,[t,r]=[r,t],t.forEach(h),e&&jS.value&&jS.value.frameloop[e].push(d),d=0,t.clear(),i=!1,o&&(o=!1,m.process(g))}};return m}const cj=40;function Dx(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>t=!0,l=Qc.reduce((x,j)=>(x[j]=lj(o,e?j:void 0),x),{}),{setup:c,read:d,resolveKeyframes:h,preUpdate:m,update:g,preRender:b,render:_,postRender:v}=l,S=()=>{const x=ia.useManualTiming?i.timestamp:performance.now();t=!1,ia.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(x-i.timestamp,cj),1)),i.timestamp=x,i.isProcessing=!0,c.process(i),d.process(i),h.process(i),m.process(i),g.process(i),b.process(i),_.process(i),v.process(i),i.isProcessing=!1,t&&e&&(r=!1,n(S))},A=()=>{t=!0,r=!0,i.isProcessing||n(S)};return{schedule:Qc.reduce((x,j)=>{const P=l[j];return x[j]=(z,H=!1,V=!1)=>(t||A(),P.schedule(z,H,V)),x},{}),cancel:x=>{for(let j=0;j<Qc.length;j++)l[Qc[j]].cancel(x)},state:i,steps:l}}const{schedule:ot,cancel:Fa,state:Dt,steps:op}=Dx(typeof requestAnimationFrame<"u"?requestAnimationFrame:Zn,!0);let Sf;function fj(){Sf=void 0}const hn={now:()=>(Sf===void 0&&hn.set(Dt.isProcessing||ia.useManualTiming?Dt.timestamp:performance.now()),Sf),set:n=>{Sf=n,queueMicrotask(fj)}},$x=n=>e=>typeof e=="string"&&e.startsWith(n),ob=$x("--"),dj=$x("var(--"),ub=n=>dj(n)?hj.test(n.split("/*")[0].trim()):!1,hj=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,io={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Yu={...io,transform:n=>aa(0,1,n)},Wc={...io,default:1},Iu=n=>Math.round(n*1e5)/1e5,lb=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function mj(n){return n==null}const pj=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,cb=(n,e)=>t=>!!(typeof t=="string"&&pj.test(t)&&t.startsWith(n)||e&&!mj(t)&&Object.prototype.hasOwnProperty.call(t,e)),Ux=(n,e,t)=>r=>{if(typeof r!="string")return r;const[i,o,l,c]=r.match(lb);return{[n]:parseFloat(i),[e]:parseFloat(o),[t]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},gj=n=>aa(0,255,n),up={...io,transform:n=>Math.round(gj(n))},xi={test:cb("rgb","red"),parse:Ux("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+up.transform(n)+", "+up.transform(e)+", "+up.transform(t)+", "+Iu(Yu.transform(r))+")"};function yj(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Wg={test:cb("#"),parse:yj,transform:xi.transform},Al=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Da=Al("deg"),Pr=Al("%"),ve=Al("px"),bj=Al("vh"),_j=Al("vw"),kS={...Pr,parse:n=>Pr.parse(n)/100,transform:n=>Pr.transform(n*100)},Ls={test:cb("hsl","hue"),parse:Ux("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Pr.transform(Iu(e))+", "+Pr.transform(Iu(t))+", "+Iu(Yu.transform(r))+")"},Zt={test:n=>xi.test(n)||Wg.test(n)||Ls.test(n),parse:n=>xi.test(n)?xi.parse(n):Ls.test(n)?Ls.parse(n):Wg.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?xi.transform(n):Ls.transform(n)},vj=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function wj(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(lb))==null?void 0:e.length)||0)+(((t=n.match(vj))==null?void 0:t.length)||0)>0}const Bx="number",zx="color",Sj="var",Aj="var(",MS="${}",Tj=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Xu(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},i=[];let o=0;const c=e.replace(Tj,d=>(Zt.test(d)?(r.color.push(o),i.push(zx),t.push(Zt.parse(d))):d.startsWith(Aj)?(r.var.push(o),i.push(Sj),t.push(d)):(r.number.push(o),i.push(Bx),t.push(parseFloat(d))),++o,MS)).split(MS);return{values:t,split:c,indexes:r,types:i}}function Vx(n){return Xu(n).values}function qx(n){const{split:e,types:t}=Xu(n),r=e.length;return i=>{let o="";for(let l=0;l<r;l++)if(o+=e[l],i[l]!==void 0){const c=t[l];c===Bx?o+=Iu(i[l]):c===zx?o+=Zt.transform(i[l]):o+=i[l]}return o}}const Ej=n=>typeof n=="number"?0:n;function xj(n){const e=Vx(n);return qx(n)(e.map(Ej))}const Ha={test:wj,parse:Vx,createTransformer:qx,getAnimatableNone:xj};function lp(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function Oj({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,o=0,l=0;if(!e)i=o=l=t;else{const c=t<.5?t*(1+e):t+e-t*e,d=2*t-c;i=lp(d,c,n+1/3),o=lp(d,c,n),l=lp(d,c,n-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:r}}function Mf(n,e){return t=>t>0?e:n}const st=(n,e,t)=>n+(e-n)*t,cp=(n,e,t)=>{const r=n*n,i=t*(e*e-r)+r;return i<0?0:Math.sqrt(i)},Rj=[Wg,xi,Ls],Cj=n=>Rj.find(e=>e.test(n));function IS(n){const e=Cj(n);if(!e)return!1;let t=e.parse(n);return e===Ls&&(t=Oj(t)),t}const LS=(n,e)=>{const t=IS(n),r=IS(e);if(!t||!r)return Mf(n,e);const i={...t};return o=>(i.red=cp(t.red,r.red,o),i.green=cp(t.green,r.green,o),i.blue=cp(t.blue,r.blue,o),i.alpha=st(t.alpha,r.alpha,o),xi.transform(i))},ey=new Set(["none","hidden"]);function Pj(n,e){return ey.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function Nj(n,e){return t=>st(n,e,t)}function fb(n){return typeof n=="number"?Nj:typeof n=="string"?ub(n)?Mf:Zt.test(n)?LS:Mj:Array.isArray(n)?Fx:typeof n=="object"?Zt.test(n)?LS:jj:Mf}function Fx(n,e){const t=[...n],r=t.length,i=n.map((o,l)=>fb(o)(o,e[l]));return o=>{for(let l=0;l<r;l++)t[l]=i[l](o);return t}}function jj(n,e){const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=fb(n[i])(n[i],e[i]));return i=>{for(const o in r)t[o]=r[o](i);return t}}function kj(n,e){const t=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],l=n.indexes[o][r[o]],c=n.values[l]??0;t[i]=c,r[o]++}return t}const Mj=(n,e)=>{const t=Ha.createTransformer(e),r=Xu(n),i=Xu(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?ey.has(n)&&!i.values.length||ey.has(e)&&!r.values.length?Pj(n,e):wl(Fx(kj(r,i),i.values),t):Mf(n,e)};function Hx(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?st(n,e,t):fb(n)(n,e)}const Ij=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>ot.update(e,t),stop:()=>Fa(e),now:()=>Dt.isProcessing?Dt.timestamp:hn.now()}},Zx=(n,e,t=10)=>{let r="";const i=Math.max(Math.round(e/t),2);for(let o=0;o<i;o++)r+=n(o/(i-1))+", ";return`linear(${r.substring(0,r.length-2)})`},If=2e4;function db(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<If;)e+=t,r=n.next(e);return e>=If?1/0:e}function Lj(n,e=100,t){const r=t({...n,keyframes:[0,e]}),i=Math.min(db(r),If);return{type:"keyframes",ease:o=>r.next(i*o).value/e,duration:Cr(i)}}const Dj=5;function Gx(n,e,t){const r=Math.max(e-Dj,0);return xx(t-n(r),e-r)}const ct={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},DS=.001;function $j({duration:n=ct.duration,bounce:e=ct.bounce,velocity:t=ct.velocity,mass:r=ct.mass}){let i,o,l=1-e;l=aa(ct.minDamping,ct.maxDamping,l),n=aa(ct.minDuration,ct.maxDuration,Cr(n)),l<1?(i=h=>{const m=h*l,g=m*n,b=m-t,_=ty(h,l),v=Math.exp(-g);return DS-b/_*v},o=h=>{const g=h*l*n,b=g*t+t,_=Math.pow(l,2)*Math.pow(h,2)*n,v=Math.exp(-g),S=ty(Math.pow(h,2),l);return(-i(h)+DS>0?-1:1)*((b-_)*v)/S}):(i=h=>{const m=Math.exp(-h*n),g=(h-t)*n+1;return-.001+m*g},o=h=>{const m=Math.exp(-h*n),g=(t-h)*(n*n);return m*g});const c=5/n,d=Bj(i,o,c);if(n=Rr(n),isNaN(d))return{stiffness:ct.stiffness,damping:ct.damping,duration:n};{const h=Math.pow(d,2)*r;return{stiffness:h,damping:l*2*Math.sqrt(r*h),duration:n}}}const Uj=12;function Bj(n,e,t){let r=t;for(let i=1;i<Uj;i++)r=r-n(r)/e(r);return r}function ty(n,e){return n*Math.sqrt(1-e*e)}const zj=["duration","bounce"],Vj=["stiffness","damping","mass"];function $S(n,e){return e.some(t=>n[t]!==void 0)}function qj(n){let e={velocity:ct.velocity,stiffness:ct.stiffness,damping:ct.damping,mass:ct.mass,isResolvedFromDuration:!1,...n};if(!$S(n,Vj)&&$S(n,zj))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),i=r*r,o=2*aa(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:ct.mass,stiffness:i,damping:o}}else{const t=$j(n);e={...e,...t,mass:ct.mass},e.isResolvedFromDuration=!0}return e}function Lf(n=ct.visualDuration,e=ct.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:i}=t;const o=t.keyframes[0],l=t.keyframes[t.keyframes.length-1],c={done:!1,value:o},{stiffness:d,damping:h,mass:m,duration:g,velocity:b,isResolvedFromDuration:_}=qj({...t,velocity:-Cr(t.velocity||0)}),v=b||0,S=h/(2*Math.sqrt(d*m)),A=l-o,E=Cr(Math.sqrt(d/m)),O=Math.abs(A)<5;r||(r=O?ct.restSpeed.granular:ct.restSpeed.default),i||(i=O?ct.restDelta.granular:ct.restDelta.default);let x;if(S<1){const P=ty(E,S);x=z=>{const H=Math.exp(-S*E*z);return l-H*((v+S*E*A)/P*Math.sin(P*z)+A*Math.cos(P*z))}}else if(S===1)x=P=>l-Math.exp(-E*P)*(A+(v+E*A)*P);else{const P=E*Math.sqrt(S*S-1);x=z=>{const H=Math.exp(-S*E*z),V=Math.min(P*z,300);return l-H*((v+S*E*A)*Math.sinh(V)+P*A*Math.cosh(V))/P}}const j={calculatedDuration:_&&g||null,next:P=>{const z=x(P);if(_)c.done=P>=g;else{let H=P===0?v:0;S<1&&(H=P===0?Rr(v):Gx(x,P,z));const V=Math.abs(H)<=r,ie=Math.abs(l-z)<=i;c.done=V&&ie}return c.value=c.done?l:z,c},toString:()=>{const P=Math.min(db(j),If),z=Zx(H=>j.next(P*H).value,P,30);return P+"ms "+z},toTransition:()=>{}};return j}Lf.applyToOptions=n=>{const e=Lj(n,100,Lf);return n.ease=e.ease,n.duration=Rr(e.duration),n.type="keyframes",n};function ny({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:l,min:c,max:d,restDelta:h=.5,restSpeed:m}){const g=n[0],b={done:!1,value:g},_=V=>c!==void 0&&V<c||d!==void 0&&V>d,v=V=>c===void 0?d:d===void 0||Math.abs(c-V)<Math.abs(d-V)?c:d;let S=t*e;const A=g+S,E=l===void 0?A:l(A);E!==A&&(S=E-g);const O=V=>-S*Math.exp(-V/r),x=V=>E+O(V),j=V=>{const ie=O(V),he=x(V);b.done=Math.abs(ie)<=h,b.value=b.done?E:he};let P,z;const H=V=>{_(b.value)&&(P=V,z=Lf({keyframes:[b.value,v(b.value)],velocity:Gx(x,V,b.value),damping:i,stiffness:o,restDelta:h,restSpeed:m}))};return H(0),{calculatedDuration:null,next:V=>{let ie=!1;return!z&&P===void 0&&(ie=!0,j(V),H(V)),P!==void 0&&V>=P?z.next(V-P):(!ie&&j(V),b)}}}function Fj(n,e,t){const r=[],i=t||ia.mix||Hx,o=n.length-1;for(let l=0;l<o;l++){let c=i(n[l],n[l+1]);if(e){const d=Array.isArray(e)?e[l]||Zn:e;c=wl(d,c)}r.push(c)}return r}function Hj(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const o=n.length;if(nb(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=n[0]===n[1];n[0]>n[o-1]&&(n=[...n].reverse(),e=[...e].reverse());const c=Fj(e,r,i),d=c.length,h=m=>{if(l&&m<n[0])return e[0];let g=0;if(d>1)for(;g<n.length-2&&!(m<n[g+1]);g++);const b=Gu(n[g],n[g+1],m);return c[g](b)};return t?m=>h(aa(n[0],n[o-1],m)):h}function Zj(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=Gu(0,e,r);n.push(st(t,1,i))}}function Gj(n){const e=[0];return Zj(e,n.length-1),e}function Yj(n,e){return n.map(t=>t*e)}function Xj(n,e){return n.map(()=>e||Ix).splice(0,n.length-1)}function Lu({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=sj(r)?r.map(NS):NS(r),o={done:!1,value:e[0]},l=Yj(t&&t.length===e.length?t:Gj(e),n),c=Hj(l,e,{ease:Array.isArray(i)?i:Xj(e,i)});return{calculatedDuration:n,next:d=>(o.value=c(d),o.done=d>=n,o)}}const Kj=n=>n!==null;function hb(n,{repeat:e,repeatType:t="loop"},r,i=1){const o=n.filter(Kj),c=i<0||e&&t!=="loop"&&e%2===1?0:o.length-1;return!c||r===void 0?o[c]:r}const Jj={decay:ny,inertia:ny,tween:Lu,keyframes:Lu,spring:Lf};function Yx(n){typeof n.type=="string"&&(n.type=Jj[n.type])}class mb{constructor(){this.count=0,this.updateFinished()}get finished(){return this._finished}updateFinished(){this.count++,this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const Qj=n=>n/100;class pb extends mb{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=(t=!0)=>{if(t){const{motionValue:i}=this.options;i&&i.updatedAt!==hn.now()&&this.tick(hn.now())}if(this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:r}=this.options;r&&r()},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;Yx(e);const{type:t=Lu,repeat:r=0,repeatDelay:i=0,repeatType:o,velocity:l=0}=e;let{keyframes:c}=e;const d=t||Lu;d!==Lu&&typeof c[0]!="number"&&(this.mixKeyframes=wl(Qj,Hx(c[0],c[1])),c=[0,100]);const h=d({...e,keyframes:c});o==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...c].reverse(),velocity:-l})),h.calculatedDuration===null&&(h.calculatedDuration=db(h));const{calculatedDuration:m}=h;this.calculatedDuration=m,this.resolvedDuration=m+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=h}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:i,mixKeyframes:o,mirroredGenerator:l,resolvedDuration:c,calculatedDuration:d}=this;if(this.startTime===null)return r.next(0);const{delay:h=0,keyframes:m,repeat:g,repeatType:b,repeatDelay:_,type:v,onUpdate:S,finalKeyframe:A}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const E=this.currentTime-h*(this.playbackSpeed>=0?1:-1),O=this.playbackSpeed>=0?E<0:E>i;this.currentTime=Math.max(E,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let x=this.currentTime,j=r;if(g){const V=Math.min(this.currentTime,i)/c;let ie=Math.floor(V),he=V%1;!he&&V>=1&&(he=1),he===1&&ie--,ie=Math.min(ie,g+1),!!(ie%2)&&(b==="reverse"?(he=1-he,_&&(he-=_/c)):b==="mirror"&&(j=l)),x=aa(0,1,he)*c}const P=O?{done:!1,value:m[0]}:j.next(x);o&&(P.value=o(P.value));let{done:z}=P;!O&&d!==null&&(z=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const H=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&z);return H&&v!==ny&&(P.value=hb(m,this.options,A,this.speed)),S&&S(P.value),H&&this.finish(),P}then(e,t){return this.finished.then(e,t)}get duration(){return Cr(this.calculatedDuration)}get time(){return Cr(this.currentTime)}set time(e){var t;e=Rr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(hn.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Cr(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=Ij,onPlay:t,startTime:r}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),t&&t();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=r??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(hn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown()}teardown(){this.notifyFinished(),this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function Wj(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const Oi=n=>n*180/Math.PI,ry=n=>{const e=Oi(Math.atan2(n[1],n[0]));return ay(e)},e2={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:ry,rotateZ:ry,skewX:n=>Oi(Math.atan(n[1])),skewY:n=>Oi(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},ay=n=>(n=n%360,n<0&&(n+=360),n),US=ry,BS=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),zS=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),t2={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:BS,scaleY:zS,scale:n=>(BS(n)+zS(n))/2,rotateX:n=>ay(Oi(Math.atan2(n[6],n[5]))),rotateY:n=>ay(Oi(Math.atan2(-n[2],n[0]))),rotateZ:US,rotate:US,skewX:n=>Oi(Math.atan(n[4])),skewY:n=>Oi(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function VS(n){return n.includes("scale")?1:0}function iy(n,e){if(!n||n==="none")return VS(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(t)r=t2,i=t;else{const c=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=e2,i=c}if(!i)return VS(e);const o=r[e],l=i[1].split(",").map(r2);return typeof o=="function"?o(l):l[o]}const n2=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return iy(t,e)};function r2(n){return parseFloat(n.trim())}const so=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],oo=new Set(so),qS=n=>n===io||n===ve,a2=new Set(["x","y","z"]),i2=so.filter(n=>!a2.has(n));function s2(n){const e=[];return i2.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const Pi={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>iy(e,"x"),y:(n,{transform:e})=>iy(e,"y")};Pi.translateX=Pi.x;Pi.translateY=Pi.y;const Ni=new Set;let sy=!1,oy=!1,uy=!1;function Xx(){if(oy){const n=Array.from(Ni).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const i=s2(r);i.length&&(t.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=t.get(r);i&&i.forEach(([o,l])=>{var c;(c=r.getValue(o))==null||c.set(l)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}oy=!1,sy=!1,Ni.forEach(n=>n.complete(uy)),Ni.clear()}function Kx(){Ni.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(oy=!0)})}function o2(){uy=!0,Kx(),Xx(),uy=!1}class gb{constructor(e,t,r,i,o,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=o,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(Ni.add(this),sy||(sy=!0,ot.read(Kx),ot.resolveKeyframes(Xx))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;if(e[0]===null){const o=i==null?void 0:i.get(),l=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&t){const c=r.readValue(t,l);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=l),i&&o===void 0&&i.set(e[0])}Wj(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ni.delete(this)}cancel(){this.state==="scheduled"&&(Ni.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const u2=n=>n.startsWith("--");function l2(n,e,t){u2(e)?n.style.setProperty(e,t):n.style[e]=t}const c2=rb(()=>window.ScrollTimeline!==void 0),f2={};function d2(n,e){const t=rb(n);return()=>f2[e]??t()}const Jx=d2(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Eu=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,FS={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Eu([0,.65,.55,1]),circOut:Eu([.55,0,1,.45]),backIn:Eu([.31,.01,.66,-.59]),backOut:Eu([.33,1.53,.69,.99])};function Qx(n,e){if(n)return typeof n=="function"?Jx()?Zx(n,e):"ease-out":Lx(n)?Eu(n):Array.isArray(n)?n.map(t=>Qx(t,e)||FS.easeOut):FS[n]}function h2(n,e,t,{delay:r=0,duration:i=300,repeat:o=0,repeatType:l="loop",ease:c="easeOut",times:d}={},h=void 0){const m={[e]:t};d&&(m.offset=d);const g=Qx(c,i);Array.isArray(g)&&(m.easing=g);const b={delay:r,duration:i,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"};return h&&(b.pseudoElement=h),n.animate(m,b)}function Wx(n){return typeof n=="function"&&"applyToOptions"in n}function m2({type:n,...e}){return Wx(n)&&Jx()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class p2 extends mb{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:r,keyframes:i,pseudoElement:o,allowFlatten:l=!1,finalKeyframe:c,onComplete:d}=e;this.isPseudoElement=!!o,this.allowFlatten=l,this.options=e,nb(typeof e.type!="string");const h=m2(e);this.animation=h2(t,r,i,h,o),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const m=hb(i,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(m):l2(t,r,m),this.animation.cancel()}d==null||d(),this.notifyFinished()},this.animation.oncancel=()=>this.notifyFinished()}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,r;const e=((r=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:r.call(t).duration)||0;return Cr(Number(e))}get time(){return Cr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Rr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&c2()?(this.animation.timeline=e,Zn):t(this)}}const e1={anticipate:jx,backInOut:Nx,circInOut:Mx};function g2(n){return n in e1}function y2(n){typeof n.ease=="string"&&g2(n.ease)&&(n.ease=e1[n.ease])}const HS=10;class b2 extends p2{constructor(e){y2(e),Yx(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:i,element:o,...l}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const c=new pb({...l,autoplay:!1}),d=Rr(this.finishedTime??this.time);t.setWithVelocity(c.sample(d-HS).value,c.sample(d).value,HS),c.stop()}}const ZS=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Ha.test(n)||n==="0")&&!n.startsWith("url("));function _2(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function v2(n,e,t,r){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const o=n[n.length-1],l=ZS(i,e),c=ZS(o,e);return!l||!c?!1:_2(n)||(t==="spring"||Wx(t))&&r}const w2=new Set(["opacity","clipPath","filter","transform"]),S2=rb(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function A2(n){const{motionValue:e,name:t,repeatDelay:r,repeatType:i,damping:o,type:l}=n;if(!e||!e.owner||!(e.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:d}=e.owner.getProps();return S2()&&t&&w2.has(t)&&(t!=="transform"||!d)&&!c&&!r&&i!=="mirror"&&o!==0&&l!=="inertia"}const T2=40;class E2 extends mb{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:l="loop",keyframes:c,name:d,motionValue:h,element:m,...g}){var v;super(),this.stop=()=>{var S,A;this._animation&&(this._animation.stop(),(S=this.stopTimeline)==null||S.call(this)),(A=this.keyframeResolver)==null||A.cancel()},this.createdAt=hn.now();const b={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:o,repeatType:l,name:d,motionValue:h,element:m,...g},_=(m==null?void 0:m.KeyframeResolver)||gb;this.keyframeResolver=new _(c,(S,A,E)=>this.onKeyframesResolved(S,A,b,!E),d,h,m),(v=this.keyframeResolver)==null||v.scheduleResolve()}onKeyframesResolved(e,t,r,i){this.keyframeResolver=void 0;const{name:o,type:l,velocity:c,delay:d,isHandoff:h,onUpdate:m}=r;this.resolvedAt=hn.now(),v2(e,o,l,c)||((ia.instantAnimations||!d)&&(m==null||m(hb(e,r,t))),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const b={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>T2?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},_=!h&&A2(b)?new b2({...b,element:b.motionValue.owner.current}):new pb(b);_.finished.then(()=>this.notifyFinished()).catch(Zn),this.pendingTimeline&&(this.stopTimeline=_.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=_}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),o2()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const x2=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function O2(n){const e=x2.exec(n);if(!e)return[,];const[,t,r,i]=e;return[`--${t??r}`,i]}function t1(n,e,t=1){const[r,i]=O2(n);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const l=o.trim();return Tx(l)?parseFloat(l):l}return ub(i)?t1(i,e,t+1):i}function yb(n,e){return(n==null?void 0:n[e])??(n==null?void 0:n.default)??n}const n1=new Set(["width","height","top","left","right","bottom",...so]),R2={test:n=>n==="auto",parse:n=>n},r1=n=>e=>e.test(n),a1=[io,ve,Pr,Da,_j,bj,R2],GS=n=>a1.find(r1(n));function C2(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||Ex(n):!0}const P2=new Set(["brightness","contrast","saturate","opacity"]);function N2(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(lb)||[];if(!r)return n;const i=t.replace(r,"");let o=P2.has(e)?1:0;return r!==t&&(o*=100),e+"("+o+i+")"}const j2=/\b([a-z-]*)\(.*?\)/gu,ly={...Ha,getAnimatableNone:n=>{const e=n.match(j2);return e?e.map(N2).join(" "):n}},YS={...io,transform:Math.round},k2={rotate:Da,rotateX:Da,rotateY:Da,rotateZ:Da,scale:Wc,scaleX:Wc,scaleY:Wc,scaleZ:Wc,skew:Da,skewX:Da,skewY:Da,distance:ve,translateX:ve,translateY:ve,translateZ:ve,x:ve,y:ve,z:ve,perspective:ve,transformPerspective:ve,opacity:Yu,originX:kS,originY:kS,originZ:ve},bb={borderWidth:ve,borderTopWidth:ve,borderRightWidth:ve,borderBottomWidth:ve,borderLeftWidth:ve,borderRadius:ve,radius:ve,borderTopLeftRadius:ve,borderTopRightRadius:ve,borderBottomRightRadius:ve,borderBottomLeftRadius:ve,width:ve,maxWidth:ve,height:ve,maxHeight:ve,top:ve,right:ve,bottom:ve,left:ve,padding:ve,paddingTop:ve,paddingRight:ve,paddingBottom:ve,paddingLeft:ve,margin:ve,marginTop:ve,marginRight:ve,marginBottom:ve,marginLeft:ve,backgroundPositionX:ve,backgroundPositionY:ve,...k2,zIndex:YS,fillOpacity:Yu,strokeOpacity:Yu,numOctaves:YS},M2={...bb,color:Zt,backgroundColor:Zt,outlineColor:Zt,fill:Zt,stroke:Zt,borderColor:Zt,borderTopColor:Zt,borderRightColor:Zt,borderBottomColor:Zt,borderLeftColor:Zt,filter:ly,WebkitFilter:ly},i1=n=>M2[n];function s1(n,e){let t=i1(n);return t!==ly&&(t=Ha),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const I2=new Set(["auto","none","0"]);function L2(n,e,t){let r=0,i;for(;r<n.length&&!i;){const o=n[r];typeof o=="string"&&!I2.has(o)&&Xu(o).values.length&&(i=n[r]),r++}if(i&&t)for(const o of e)n[o]=s1(t,i)}class D2 extends gb{constructor(e,t,r,i,o){super(e,t,r,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let h=e[d];if(typeof h=="string"&&(h=h.trim(),ub(h))){const m=t1(h,t.current);m!==void 0&&(e[d]=m),d===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!n1.has(r)||e.length!==2)return;const[i,o]=e,l=GS(i),c=GS(o);if(l!==c)if(qS(l)&&qS(c))for(let d=0;d<e.length;d++){const h=e[d];typeof h=="string"&&(e[d]=parseFloat(h))}else Pi[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||C2(e[i]))&&r.push(i);r.length&&L2(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Pi[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var c;const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(t);i&&i.jump(this.measuredOrigin,!1);const o=r.length-1,l=r[o];r[o]=Pi[t](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),(c=this.removedTransforms)!=null&&c.length&&this.removedTransforms.forEach(([d,h])=>{e.getValue(d).set(h)}),this.resolveNoneKeyframes()}}function $2(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const i=(t==null?void 0:t[n])??r.querySelectorAll(n);return i?Array.from(i):[]}return Array.from(n)}const XS=30,U2=n=>!isNaN(parseFloat(n));class B2{constructor(e,t={}){this.version="__VERSION__",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{var l,c;const o=hn.now();if(this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((l=this.events.change)==null||l.notify(this.current),this.dependents))for(const d of this.dependents)d.dirty();i&&((c=this.events.renderRequest)==null||c.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=hn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=U2(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new ab);const r=this.events[e].add(t);return e==="change"?()=>{r(),ot.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=hn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>XS)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,XS);return xx(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Js(n,e){return new B2(n,e)}const o1=(n,e)=>e&&typeof n=="number"?e.transform(n):n,{schedule:_b}=Dx(queueMicrotask,!1),nr={x:!1,y:!1};function u1(){return nr.x||nr.y}function z2(n){return n==="x"||n==="y"?nr[n]?null:(nr[n]=!0,()=>{nr[n]=!1}):nr.x||nr.y?null:(nr.x=nr.y=!0,()=>{nr.x=nr.y=!1})}function l1(n,e){const t=$2(n),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[t,i,()=>r.abort()]}function KS(n){return!(n.pointerType==="touch"||u1())}function V2(n,e,t={}){const[r,i,o]=l1(n,t),l=c=>{if(!KS(c))return;const{target:d}=c,h=e(d,c);if(typeof h!="function"||!d)return;const m=g=>{KS(g)&&(h(g),d.removeEventListener("pointerleave",m))};d.addEventListener("pointerleave",m,i)};return r.forEach(c=>{c.addEventListener("pointerenter",l,i)}),o}const c1=(n,e)=>e?n===e?!0:c1(n,e.parentElement):!1,vb=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,q2=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function F2(n){return q2.has(n.tagName)||n.tabIndex!==-1}const Af=new WeakSet;function JS(n){return e=>{e.key==="Enter"&&n(e)}}function fp(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const H2=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=JS(()=>{if(Af.has(t))return;fp(t,"down");const i=JS(()=>{fp(t,"up")}),o=()=>fp(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",o,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function QS(n){return vb(n)&&!u1()}function Z2(n,e,t={}){const[r,i,o]=l1(n,t),l=c=>{const d=c.currentTarget;if(!QS(c))return;Af.add(d);const h=e(d,c),m=(_,v)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",b),Af.has(d)&&Af.delete(d),QS(_)&&typeof h=="function"&&h(_,{success:v})},g=_=>{m(_,d===window||d===document||t.useGlobalTarget||c1(d,_.target))},b=_=>{m(_,!1)};window.addEventListener("pointerup",g,i),window.addEventListener("pointercancel",b,i)};return r.forEach(c=>{(t.useGlobalTarget?window:c).addEventListener("pointerdown",l,i),c instanceof HTMLElement&&(c.addEventListener("focus",h=>H2(h,i)),!F2(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),o}const G2=[...a1,Zt,Ha],Y2=n=>G2.find(r1(n)),f1=oe.createContext({strict:!1}),WS={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Qs={};for(const n in WS)Qs[n]={isEnabled:e=>WS[n].some(t=>!!e[t])};function X2(n){for(const e in n)Qs[e]={...Qs[e],...n[e]}}const K2=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Df(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||K2.has(n)}let d1=n=>!Df(n);function J2(n){n&&(d1=e=>e.startsWith("on")?!Df(e):n(e))}try{J2(require("@emotion/is-prop-valid").default)}catch{}function Q2(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(d1(i)||t===!0&&Df(i)||!e&&!Df(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}function W2(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...r)=>n(...r);return new Proxy(t,{get:(r,i)=>i==="create"?n:(e.has(i)||e.set(i,n(i)),e.get(i))})}const dd=oe.createContext({});function hd(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Ku(n){return typeof n=="string"||Array.isArray(n)}const wb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Sb=["initial",...wb];function md(n){return hd(n.animate)||Sb.some(e=>Ku(n[e]))}function h1(n){return!!(md(n)||n.variants)}function ek(n,e){if(md(n)){const{initial:t,animate:r}=n;return{initial:t===!1||Ku(t)?t:void 0,animate:Ku(r)?r:void 0}}return n.inherit!==!1?e:{}}function tk(n){const{initial:e,animate:t}=ek(n,oe.useContext(dd));return oe.useMemo(()=>({initial:e,animate:t}),[eA(e),eA(t)])}function eA(n){return Array.isArray(n)?n.join(" "):n}const nk=Symbol.for("motionComponentSymbol");function Ds(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function rk(n,e,t){return oe.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):Ds(t)&&(t.current=r))},[e])}const Ab=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),ak="framerAppearId",m1="data-"+Ab(ak),p1=oe.createContext({});function ik(n,e,t,r,i){var S,A;const{visualElement:o}=oe.useContext(dd),l=oe.useContext(f1),c=oe.useContext(Wy),d=oe.useContext(Ax).reducedMotion,h=oe.useRef(null);r=r||l.renderer,!h.current&&r&&(h.current=r(n,{visualState:e,parent:o,props:t,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d}));const m=h.current,g=oe.useContext(p1);m&&!m.projection&&i&&(m.type==="html"||m.type==="svg")&&sk(h.current,t,i,g);const b=oe.useRef(!1);oe.useInsertionEffect(()=>{m&&b.current&&m.update(t,c)});const _=t[m1],v=oe.useRef(!!_&&!((S=window.MotionHandoffIsComplete)!=null&&S.call(window,_))&&((A=window.MotionHasOptimisedAnimation)==null?void 0:A.call(window,_)));return QN(()=>{m&&(b.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),_b.render(m.render),v.current&&m.animationState&&m.animationState.animateChanges())}),oe.useEffect(()=>{m&&(!v.current&&m.animationState&&m.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var E;(E=window.MotionHandoffMarkAsComplete)==null||E.call(window,_)}),v.current=!1))}),m}function sk(n,e,t,r){const{layoutId:i,layout:o,drag:l,dragConstraints:c,layoutScroll:d,layoutRoot:h,layoutCrossfade:m}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:g1(n.parent)),n.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!l||c&&Ds(c),visualElement:n,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:m,layoutScroll:d,layoutRoot:h})}function g1(n){if(n)return n.options.allowProjection!==!1?n.projection:g1(n.parent)}function ok({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:i}){n&&X2(n);function o(c,d){let h;const m={...oe.useContext(Ax),...c,layoutId:uk(c)},{isStatic:g}=m,b=tk(c),_=r(c,g);if(!g&&Qy){lk();const v=ck(m);h=v.MeasureLayout,b.visualElement=ik(i,_,m,e,v.ProjectionNode)}return K.jsxs(dd.Provider,{value:b,children:[h&&b.visualElement?K.jsx(h,{visualElement:b.visualElement,...m}):null,t(i,c,rk(_,b.visualElement,d),_,g,b.visualElement)]})}o.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const l=oe.forwardRef(o);return l[nk]=i,l}function uk({layoutId:n}){const e=oe.useContext(Sx).id;return e&&n!==void 0?e+"-"+n:n}function lk(n,e){oe.useContext(f1).strict}function ck(n){const{drag:e,layout:t}=Qs;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Ju={};function fk(n){for(const e in n)Ju[e]=n[e],ob(e)&&(Ju[e].isCSSVariable=!0)}function y1(n,{layout:e,layoutId:t}){return oo.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Ju[n]||n==="opacity")}const Yt=n=>!!(n&&n.getVelocity),dk={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},hk=so.length;function mk(n,e,t){let r="",i=!0;for(let o=0;o<hk;o++){const l=so[o],c=n[l];if(c===void 0)continue;let d=!0;if(typeof c=="number"?d=c===(l.startsWith("scale")?1:0):d=parseFloat(c)===0,!d||t){const h=o1(c,bb[l]);if(!d){i=!1;const m=dk[l]||l;r+=`${m}(${h}) `}t&&(e[l]=h)}}return r=r.trim(),t?r=t(e,i?"":r):i&&(r="none"),r}function Tb(n,e,t){const{style:r,vars:i,transformOrigin:o}=n;let l=!1,c=!1;for(const d in e){const h=e[d];if(oo.has(d)){l=!0;continue}else if(ob(d)){i[d]=h;continue}else{const m=o1(h,bb[d]);d.startsWith("origin")?(c=!0,o[d]=m):r[d]=m}}if(e.transform||(l||t?r.transform=mk(e,n.transform,t):r.transform&&(r.transform="none")),c){const{originX:d="50%",originY:h="50%",originZ:m=0}=o;r.transformOrigin=`${d} ${h} ${m}`}}const Eb=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function b1(n,e,t){for(const r in e)!Yt(e[r])&&!y1(r,t)&&(n[r]=e[r])}function pk({transformTemplate:n},e){return oe.useMemo(()=>{const t=Eb();return Tb(t,e,n),Object.assign({},t.vars,t.style)},[e])}function gk(n,e){const t=n.style||{},r={};return b1(r,t,n),Object.assign(r,pk(n,e)),r}function yk(n,e){const t={},r=gk(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const bk=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function xb(n){return typeof n!="string"||n.includes("-")?!1:!!(bk.indexOf(n)>-1||/[A-Z]/u.test(n))}const _k={offset:"stroke-dashoffset",array:"stroke-dasharray"},vk={offset:"strokeDashoffset",array:"strokeDasharray"};function wk(n,e,t=1,r=0,i=!0){n.pathLength=1;const o=i?_k:vk;n[o.offset]=ve.transform(-r);const l=ve.transform(e),c=ve.transform(t);n[o.array]=`${l} ${c}`}function _1(n,{attrX:e,attrY:t,attrScale:r,pathLength:i,pathSpacing:o=1,pathOffset:l=0,...c},d,h,m){if(Tb(n,c,h),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:g,style:b}=n;g.transform&&(b.transform=g.transform,delete g.transform),(b.transform||g.transformOrigin)&&(b.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),b.transform&&(b.transformBox=(m==null?void 0:m.transformBox)??"fill-box",delete g.transformBox),e!==void 0&&(g.x=e),t!==void 0&&(g.y=t),r!==void 0&&(g.scale=r),i!==void 0&&wk(g,i,o,l,!1)}const v1=()=>({...Eb(),attrs:{}}),w1=n=>typeof n=="string"&&n.toLowerCase()==="svg";function Sk(n,e,t,r){const i=oe.useMemo(()=>{const o=v1();return _1(o,e,w1(r),n.transformTemplate,n.style),{...o.attrs,style:{...o.style}}},[e]);if(n.style){const o={};b1(o,n.style,n),i.style={...o,...i.style}}return i}function Ak(n=!1){return(t,r,i,{latestValues:o},l)=>{const d=(xb(t)?Sk:yk)(r,o,l,t),h=Q2(r,typeof t=="string",n),m=t!==oe.Fragment?{...h,...d,ref:i}:{},{children:g}=r,b=oe.useMemo(()=>Yt(g)?g.get():g,[g]);return oe.createElement(t,{...m,children:b})}}function tA(n){const e=[{},{}];return n==null||n.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function Ob(n,e,t,r){if(typeof e=="function"){const[i,o]=tA(r);e=e(t!==void 0?t:n.custom,i,o)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,o]=tA(r);e=e(t!==void 0?t:n.custom,i,o)}return e}function Tf(n){return Yt(n)?n.get():n}function Tk({scrapeMotionValuesFromProps:n,createRenderState:e},t,r,i){return{latestValues:Ek(t,r,i,n),renderState:e()}}const S1=n=>(e,t)=>{const r=oe.useContext(dd),i=oe.useContext(Wy),o=()=>Tk(n,e,r,i);return t?o():JN(o)};function Ek(n,e,t,r){const i={},o=r(n,{});for(const b in o)i[b]=Tf(o[b]);let{initial:l,animate:c}=n;const d=md(n),h=h1(n);e&&h&&!d&&n.inherit!==!1&&(l===void 0&&(l=e.initial),c===void 0&&(c=e.animate));let m=t?t.initial===!1:!1;m=m||l===!1;const g=m?c:l;if(g&&typeof g!="boolean"&&!hd(g)){const b=Array.isArray(g)?g:[g];for(let _=0;_<b.length;_++){const v=Ob(n,b[_]);if(v){const{transitionEnd:S,transition:A,...E}=v;for(const O in E){let x=E[O];if(Array.isArray(x)){const j=m?x.length-1:0;x=x[j]}x!==null&&(i[O]=x)}for(const O in S)i[O]=S[O]}}}return i}function Rb(n,e,t){var o;const{style:r}=n,i={};for(const l in r)(Yt(r[l])||e.style&&Yt(e.style[l])||y1(l,n)||((o=t==null?void 0:t.getValue(l))==null?void 0:o.liveStyle)!==void 0)&&(i[l]=r[l]);return i}const xk={useVisualState:S1({scrapeMotionValuesFromProps:Rb,createRenderState:Eb})};function A1(n,e,t){const r=Rb(n,e,t);for(const i in n)if(Yt(n[i])||Yt(e[i])){const o=so.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[o]=n[i]}return r}const Ok={useVisualState:S1({scrapeMotionValuesFromProps:A1,createRenderState:v1})};function Rk(n,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const l={...xb(r)?Ok:xk,preloadedFeatures:n,useRender:Ak(i),createVisualElement:e,Component:r};return ok(l)}}function Qu(n,e,t){const r=n.getProps();return Ob(r,e,t!==void 0?t:r.custom,n)}const cy=n=>Array.isArray(n);function Ck(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Js(t))}function Pk(n){return cy(n)?n[n.length-1]||0:n}function Nk(n,e){const t=Qu(n,e);let{transitionEnd:r={},transition:i={},...o}=t||{};o={...o,...r};for(const l in o){const c=Pk(o[l]);Ck(n,l,c)}}function jk(n){return!!(Yt(n)&&n.add)}function fy(n,e){const t=n.getValue("willChange");if(jk(t))return t.add(e);if(!t&&ia.WillChange){const r=new ia.WillChange("auto");n.addValue("willChange",r),r.add(e)}}function T1(n){return n.props[m1]}const kk=n=>n!==null;function Mk(n,{repeat:e,repeatType:t="loop"},r){const i=n.filter(kk),o=e&&t!=="loop"&&e%2===1?0:i.length-1;return i[o]}const Ik={type:"spring",stiffness:500,damping:25,restSpeed:10},Lk=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),Dk={type:"keyframes",duration:.8},$k={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Uk=(n,{keyframes:e})=>e.length>2?Dk:oo.has(n)?n.startsWith("scale")?Lk(e[1]):Ik:$k;function Bk({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:l,repeatDelay:c,from:d,elapsed:h,...m}){return!!Object.keys(m).length}const Cb=(n,e,t,r={},i,o)=>l=>{const c=yb(r,n)||{},d=c.delay||r.delay||0;let{elapsed:h=0}=r;h=h-Rr(d);const m={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-h,onUpdate:b=>{e.set(b),c.onUpdate&&c.onUpdate(b)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:n,motionValue:e,element:o?void 0:i};Bk(c)||Object.assign(m,Uk(n,m)),m.duration&&(m.duration=Rr(m.duration)),m.repeatDelay&&(m.repeatDelay=Rr(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let g=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(m.duration=0,m.delay===0&&(g=!0)),(ia.instantAnimations||ia.skipAnimations)&&(g=!0,m.duration=0,m.delay=0),m.allowFlatten=!c.type&&!c.ease,g&&!o&&e.get()!==void 0){const b=Mk(m.keyframes,c);if(b!==void 0){ot.update(()=>{m.onUpdate(b),m.onComplete()});return}}return c.isSync?new pb(m):new E2(m)};function zk({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function E1(n,e,{delay:t=0,transitionOverride:r,type:i}={}){let{transition:o=n.getDefaultTransition(),transitionEnd:l,...c}=e;r&&(o=r);const d=[],h=i&&n.animationState&&n.animationState.getState()[i];for(const m in c){const g=n.getValue(m,n.latestValues[m]??null),b=c[m];if(b===void 0||h&&zk(h,m))continue;const _={delay:t,...yb(o||{},m)},v=g.get();if(v!==void 0&&!g.isAnimating&&!Array.isArray(b)&&b===v&&!_.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const E=T1(n);if(E){const O=window.MotionHandoffAnimation(E,m,ot);O!==null&&(_.startTime=O,S=!0)}}fy(n,m),g.start(Cb(m,g,b,n.shouldReduceMotion&&n1.has(m)?{type:!1}:_,n,S));const A=g.animation;A&&d.push(A)}return l&&Promise.all(d).then(()=>{ot.update(()=>{l&&Nk(n,l)})}),d}function dy(n,e,t={}){var d;const r=Qu(n,e,t.type==="exit"?(d=n.presenceContext)==null?void 0:d.custom:void 0);let{transition:i=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(i=t.transitionOverride);const o=r?()=>Promise.all(E1(n,r,t)):()=>Promise.resolve(),l=n.variantChildren&&n.variantChildren.size?(h=0)=>{const{delayChildren:m=0,staggerChildren:g,staggerDirection:b}=i;return Vk(n,e,m+h,g,b,t)}:()=>Promise.resolve(),{when:c}=i;if(c){const[h,m]=c==="beforeChildren"?[o,l]:[l,o];return h().then(()=>m())}else return Promise.all([o(),l(t.delay)])}function Vk(n,e,t=0,r=0,i=1,o){const l=[],c=(n.variantChildren.size-1)*r,d=i===1?(h=0)=>h*r:(h=0)=>c-h*r;return Array.from(n.variantChildren).sort(qk).forEach((h,m)=>{h.notify("AnimationStart",e),l.push(dy(h,e,{...o,delay:t+d(m)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(l)}function qk(n,e){return n.sortNodePosition(e)}function Fk(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(o=>dy(n,o,t));r=Promise.all(i)}else if(typeof e=="string")r=dy(n,e,t);else{const i=typeof e=="function"?Qu(n,e,t.custom):e;r=Promise.all(E1(n,i,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}function x1(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const Hk=Sb.length;function O1(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?O1(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<Hk;t++){const r=Sb[t],i=n.props[r];(Ku(i)||i===!1)&&(e[r]=i)}return e}const Zk=[...wb].reverse(),Gk=wb.length;function Yk(n){return e=>Promise.all(e.map(({animation:t,options:r})=>Fk(n,t,r)))}function Xk(n){let e=Yk(n),t=nA(),r=!0;const i=d=>(h,m)=>{var b;const g=Qu(n,m,d==="exit"?(b=n.presenceContext)==null?void 0:b.custom:void 0);if(g){const{transition:_,transitionEnd:v,...S}=g;h={...h,...S,...v}}return h};function o(d){e=d(n)}function l(d){const{props:h}=n,m=O1(n.parent)||{},g=[],b=new Set;let _={},v=1/0;for(let A=0;A<Gk;A++){const E=Zk[A],O=t[E],x=h[E]!==void 0?h[E]:m[E],j=Ku(x),P=E===d?O.isActive:null;P===!1&&(v=A);let z=x===m[E]&&x!==h[E]&&j;if(z&&r&&n.manuallyAnimateOnMount&&(z=!1),O.protectedKeys={..._},!O.isActive&&P===null||!x&&!O.prevProp||hd(x)||typeof x=="boolean")continue;const H=Kk(O.prevProp,x);let V=H||E===d&&O.isActive&&!z&&j||A>v&&j,ie=!1;const he=Array.isArray(x)?x:[x];let me=he.reduce(i(E),{});P===!1&&(me={});const{prevResolvedValues:De={}}=O,pt={...De,...me},te=U=>{V=!0,b.has(U)&&(ie=!0,b.delete(U)),O.needsAnimating[U]=!0;const G=n.getValue(U);G&&(G.liveStyle=!1)};for(const U in pt){const G=me[U],ee=De[U];if(_.hasOwnProperty(U))continue;let R=!1;cy(G)&&cy(ee)?R=!x1(G,ee):R=G!==ee,R?G!=null?te(U):b.add(U):G!==void 0&&b.has(U)?te(U):O.protectedKeys[U]=!0}O.prevProp=x,O.prevResolvedValues=me,O.isActive&&(_={..._,...me}),r&&n.blockInitialAnimation&&(V=!1),V&&(!(z&&H)||ie)&&g.push(...he.map(U=>({animation:U,options:{type:E}})))}if(b.size){const A={};if(typeof h.initial!="boolean"){const E=Qu(n,Array.isArray(h.initial)?h.initial[0]:h.initial);E&&E.transition&&(A.transition=E.transition)}b.forEach(E=>{const O=n.getBaseTarget(E),x=n.getValue(E);x&&(x.liveStyle=!0),A[E]=O??null}),g.push({animation:A})}let S=!!g.length;return r&&(h.initial===!1||h.initial===h.animate)&&!n.manuallyAnimateOnMount&&(S=!1),r=!1,S?e(g):Promise.resolve()}function c(d,h){var g;if(t[d].isActive===h)return Promise.resolve();(g=n.variantChildren)==null||g.forEach(b=>{var _;return(_=b.animationState)==null?void 0:_.setActive(d,h)}),t[d].isActive=h;const m=l(d);for(const b in t)t[b].protectedKeys={};return m}return{animateChanges:l,setActive:c,setAnimateFunction:o,getState:()=>t,reset:()=>{t=nA(),r=!0}}}function Kk(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!x1(e,n):!1}function wi(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function nA(){return{animate:wi(!0),whileInView:wi(),whileHover:wi(),whileTap:wi(),whileDrag:wi(),whileFocus:wi(),exit:wi()}}class Wa{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Jk extends Wa{constructor(e){super(e),e.animationState||(e.animationState=Xk(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();hd(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let Qk=0;class Wk extends Wa{constructor(){super(...arguments),this.id=Qk++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const eM={animation:{Feature:Jk},exit:{Feature:Wk}};function Wu(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function Tl(n){return{point:{x:n.pageX,y:n.pageY}}}const tM=n=>e=>vb(e)&&n(e,Tl(e));function Du(n,e,t,r){return Wu(n,e,tM(t),r)}function R1({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function nM({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function rM(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}const C1=1e-4,aM=1-C1,iM=1+C1,P1=.01,sM=0-P1,oM=0+P1;function en(n){return n.max-n.min}function uM(n,e,t){return Math.abs(n-e)<=t}function rA(n,e,t,r=.5){n.origin=r,n.originPoint=st(e.min,e.max,n.origin),n.scale=en(t)/en(e),n.translate=st(t.min,t.max,n.origin)-n.originPoint,(n.scale>=aM&&n.scale<=iM||isNaN(n.scale))&&(n.scale=1),(n.translate>=sM&&n.translate<=oM||isNaN(n.translate))&&(n.translate=0)}function $u(n,e,t,r){rA(n.x,e.x,t.x,r?r.originX:void 0),rA(n.y,e.y,t.y,r?r.originY:void 0)}function aA(n,e,t){n.min=t.min+e.min,n.max=n.min+en(e)}function lM(n,e,t){aA(n.x,e.x,t.x),aA(n.y,e.y,t.y)}function iA(n,e,t){n.min=e.min-t.min,n.max=n.min+en(e)}function Uu(n,e,t){iA(n.x,e.x,t.x),iA(n.y,e.y,t.y)}const sA=()=>({translate:0,scale:1,origin:0,originPoint:0}),$s=()=>({x:sA(),y:sA()}),oA=()=>({min:0,max:0}),mt=()=>({x:oA(),y:oA()});function Fn(n){return[n("x"),n("y")]}function dp(n){return n===void 0||n===1}function hy({scale:n,scaleX:e,scaleY:t}){return!dp(n)||!dp(e)||!dp(t)}function Ti(n){return hy(n)||N1(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function N1(n){return uA(n.x)||uA(n.y)}function uA(n){return n&&n!=="0%"}function $f(n,e,t){const r=n-t,i=e*r;return t+i}function lA(n,e,t,r,i){return i!==void 0&&(n=$f(n,i,r)),$f(n,t,r)+e}function my(n,e=0,t=1,r,i){n.min=lA(n.min,e,t,r,i),n.max=lA(n.max,e,t,r,i)}function j1(n,{x:e,y:t}){my(n.x,e.translate,e.scale,e.originPoint),my(n.y,t.translate,t.scale,t.originPoint)}const cA=.999999999999,fA=1.0000000000001;function cM(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let o,l;for(let c=0;c<i;c++){o=t[c],l=o.projectionDelta;const{visualElement:d}=o.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Bs(n,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,j1(n,l)),r&&Ti(o.latestValues)&&Bs(n,o.latestValues))}e.x<fA&&e.x>cA&&(e.x=1),e.y<fA&&e.y>cA&&(e.y=1)}function Us(n,e){n.min=n.min+e,n.max=n.max+e}function dA(n,e,t,r,i=.5){const o=st(n.min,n.max,i);my(n,e,t,o,r)}function Bs(n,e){dA(n.x,e.x,e.scaleX,e.scale,e.originX),dA(n.y,e.y,e.scaleY,e.scale,e.originY)}function k1(n,e){return R1(rM(n.getBoundingClientRect(),e))}function fM(n,e,t){const r=k1(n,t),{scroll:i}=e;return i&&(Us(r.x,i.offset.x),Us(r.y,i.offset.y)),r}const M1=({current:n})=>n?n.ownerDocument.defaultView:null,hA=(n,e)=>Math.abs(n-e);function dM(n,e){const t=hA(n.x,e.x),r=hA(n.y,e.y);return Math.sqrt(t**2+r**2)}class I1{constructor(e,t,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=mp(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,_=dM(g.offset,{x:0,y:0})>=3;if(!b&&!_)return;const{point:v}=g,{timestamp:S}=Dt;this.history.push({...v,timestamp:S});const{onStart:A,onMove:E}=this.handlers;b||(A&&A(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),E&&E(this.lastMoveEvent,g)},this.handlePointerMove=(g,b)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=hp(b,this.transformPagePoint),ot.update(this.updatePoint,!0)},this.handlePointerUp=(g,b)=>{this.end();const{onEnd:_,onSessionEnd:v,resumeAnimation:S}=this.handlers;if(this.dragSnapToOrigin&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=mp(g.type==="pointercancel"?this.lastMoveEventInfo:hp(b,this.transformPagePoint),this.history);this.startEvent&&_&&_(g,A),v&&v(g,A)},!vb(e))return;this.dragSnapToOrigin=o,this.handlers=t,this.transformPagePoint=r,this.contextWindow=i||window;const l=Tl(e),c=hp(l,this.transformPagePoint),{point:d}=c,{timestamp:h}=Dt;this.history=[{...d,timestamp:h}];const{onSessionStart:m}=t;m&&m(e,mp(c,this.history)),this.removeListeners=wl(Du(this.contextWindow,"pointermove",this.handlePointerMove),Du(this.contextWindow,"pointerup",this.handlePointerUp),Du(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Fa(this.updatePoint)}}function hp(n,e){return e?{point:e(n.point)}:n}function mA(n,e){return{x:n.x-e.x,y:n.y-e.y}}function mp({point:n},e){return{point:n,delta:mA(n,L1(e)),offset:mA(n,hM(e)),velocity:mM(e,.1)}}function hM(n){return n[0]}function L1(n){return n[n.length-1]}function mM(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=L1(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>Rr(e)));)t--;if(!r)return{x:0,y:0};const o=Cr(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const l={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function pM(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?st(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?st(t,n,r.max):Math.min(n,t)),n}function pA(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function gM(n,{top:e,left:t,bottom:r,right:i}){return{x:pA(n.x,t,i),y:pA(n.y,e,r)}}function gA(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function yM(n,e){return{x:gA(n.x,e.x),y:gA(n.y,e.y)}}function bM(n,e){let t=.5;const r=en(n),i=en(e);return i>r?t=Gu(e.min,e.max-r,n.min):r>i&&(t=Gu(n.min,n.max-i,e.min)),aa(0,1,t)}function _M(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const py=.35;function vM(n=py){return n===!1?n=0:n===!0&&(n=py),{x:yA(n,"left","right"),y:yA(n,"top","bottom")}}function yA(n,e,t){return{min:bA(n,e),max:bA(n,t)}}function bA(n,e){return typeof n=="number"?n:n[e]||0}const wM=new WeakMap;class SM{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=mt(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Tl(m).point)},o=(m,g)=>{const{drag:b,dragPropagation:_,onDragStart:v}=this.getProps();if(b&&!_&&(this.openDragLock&&this.openDragLock(),this.openDragLock=z2(b),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Fn(A=>{let E=this.getAxisMotionValue(A).get()||0;if(Pr.test(E)){const{projection:O}=this.visualElement;if(O&&O.layout){const x=O.layout.layoutBox[A];x&&(E=en(x)*(parseFloat(E)/100))}}this.originPoint[A]=E}),v&&ot.postRender(()=>v(m,g)),fy(this.visualElement,"transform");const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},l=(m,g)=>{const{dragPropagation:b,dragDirectionLock:_,onDirectionLock:v,onDrag:S}=this.getProps();if(!b&&!this.openDragLock)return;const{offset:A}=g;if(_&&this.currentDirection===null){this.currentDirection=AM(A),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",g.point,A),this.updateAxis("y",g.point,A),this.visualElement.render(),S&&S(m,g)},c=(m,g)=>this.stop(m,g),d=()=>Fn(m=>{var g;return this.getAnimationState(m)==="paused"&&((g=this.getAxisMotionValue(m).animation)==null?void 0:g.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new I1(e,{onSessionStart:i,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:M1(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&ot.postRender(()=>o(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!ef(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=pM(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){var o;const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(o=this.visualElement.projection)==null?void 0:o.layout,i=this.constraints;e&&Ds(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=gM(r.layoutBox,e):this.constraints=!1,this.elastic=vM(t),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Fn(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=_M(r.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Ds(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=fM(r,i.root,this.visualElement.getTransformPagePoint());let l=yM(i.layout.layoutBox,o);if(t){const c=t(nM(l));this.hasMutatedConstraints=!!c,c&&(l=R1(c))}return l}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),d=this.constraints||{},h=Fn(m=>{if(!ef(m,t,this.currentDirection))return;let g=d&&d[m]||{};l&&(g={min:0,max:0});const b=i?200:1e6,_=i?40:1e7,v={type:"inertia",velocity:r?e[m]:0,bounceStiffness:b,bounceDamping:_,timeConstant:750,restDelta:1,restSpeed:10,...o,...g};return this.startAxisValueAnimation(m,v)});return Promise.all(h).then(c)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return fy(this.visualElement,e),r.start(Cb(e,r,0,t,this.visualElement,!1))}stopAnimation(){Fn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Fn(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Fn(t=>{const{drag:r}=this.getProps();if(!ef(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(t);if(i&&i.layout){const{min:l,max:c}=i.layout.layoutBox[t];o.set(e[t]-st(l,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Ds(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Fn(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const d=c.get();i[l]=bM({min:d,max:d},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Fn(l=>{if(!ef(l,e,null))return;const c=this.getAxisMotionValue(l),{min:d,max:h}=this.constraints[l];c.set(st(d,h,i[l]))})}addListeners(){if(!this.visualElement.current)return;wM.set(this.visualElement,this);const e=this.visualElement.current,t=Du(e,"pointerdown",d=>{const{drag:h,dragListener:m=!0}=this.getProps();h&&m&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();Ds(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),ot.read(r);const l=Wu(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h})=>{this.isDragging&&h&&(Fn(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=d[m].translate,g.set(g.get()+d[m].translate))}),this.visualElement.render())});return()=>{l(),t(),o(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:l=py,dragMomentum:c=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:l,dragMomentum:c}}}function ef(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function AM(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class TM extends Wa{constructor(e){super(e),this.removeGroupControls=Zn,this.removeListeners=Zn,this.controls=new SM(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Zn}unmount(){this.removeGroupControls(),this.removeListeners()}}const _A=n=>(e,t)=>{n&&ot.postRender(()=>n(e,t))};class EM extends Wa{constructor(){super(...arguments),this.removePointerDownListener=Zn}onPointerDown(e){this.session=new I1(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:M1(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:_A(e),onStart:_A(t),onMove:r,onEnd:(o,l)=>{delete this.session,i&&ot.postRender(()=>i(o,l))}}}mount(){this.removePointerDownListener=Du(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ef={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function vA(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const bu={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(ve.test(n))n=parseFloat(n);else return n;const t=vA(n,e.target.x),r=vA(n,e.target.y);return`${t}% ${r}%`}},xM={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=Ha.parse(n);if(i.length>5)return r;const o=Ha.createTransformer(n),l=typeof i[0]!="number"?1:0,c=t.x.scale*e.x,d=t.y.scale*e.y;i[0+l]/=c,i[1+l]/=d;const h=st(c,d,.5);return typeof i[2+l]=="number"&&(i[2+l]/=h),typeof i[3+l]=="number"&&(i[3+l]/=h),o(i)}};class OM extends oe.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=e;fk(RM),o&&(t.group&&t.group.add(o),r&&r.register&&i&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Ef.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:o}=this.props,{projection:l}=r;return l&&(l.isPresent=o,i||e.layoutDependency!==t||t===void 0||e.isPresent!==o?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||ot.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),_b.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function D1(n){const[e,t]=WN(),r=oe.useContext(Sx);return K.jsx(OM,{...n,layoutGroup:r,switchLayoutGroup:oe.useContext(p1),isPresent:e,safeToRemove:t})}const RM={borderRadius:{...bu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:bu,borderTopRightRadius:bu,borderBottomLeftRadius:bu,borderBottomRightRadius:bu,boxShadow:xM};function CM(n,e,t){const r=Yt(n)?n:Js(n);return r.start(Cb("",r,e,t)),r.animation}function PM(n){return n instanceof SVGElement&&n.tagName!=="svg"}const NM=(n,e)=>n.depth-e.depth;class jM{constructor(){this.children=[],this.isDirty=!1}add(e){eb(this.children,e),this.isDirty=!0}remove(e){tb(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(NM),this.isDirty=!1,this.children.forEach(e)}}function kM(n,e){const t=hn.now(),r=({timestamp:i})=>{const o=i-t;o>=e&&(Fa(r),n(o-e))};return ot.setup(r,!0),()=>Fa(r)}const $1=["TopLeft","TopRight","BottomLeft","BottomRight"],MM=$1.length,wA=n=>typeof n=="string"?parseFloat(n):n,SA=n=>typeof n=="number"||ve.test(n);function IM(n,e,t,r,i,o){i?(n.opacity=st(0,t.opacity??1,LM(r)),n.opacityExit=st(e.opacity??1,0,DM(r))):o&&(n.opacity=st(e.opacity??1,t.opacity??1,r));for(let l=0;l<MM;l++){const c=`border${$1[l]}Radius`;let d=AA(e,c),h=AA(t,c);if(d===void 0&&h===void 0)continue;d||(d=0),h||(h=0),d===0||h===0||SA(d)===SA(h)?(n[c]=Math.max(st(wA(d),wA(h),r),0),(Pr.test(h)||Pr.test(d))&&(n[c]+="%")):n[c]=h}(e.rotate||t.rotate)&&(n.rotate=st(e.rotate||0,t.rotate||0,r))}function AA(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const LM=U1(0,.5,kx),DM=U1(.5,.95,Zn);function U1(n,e,t){return r=>r<n?0:r>e?1:t(Gu(n,e,r))}function TA(n,e){n.min=e.min,n.max=e.max}function Vn(n,e){TA(n.x,e.x),TA(n.y,e.y)}function EA(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function xA(n,e,t,r,i){return n-=e,n=$f(n,1/t,r),i!==void 0&&(n=$f(n,1/i,r)),n}function $M(n,e=0,t=1,r=.5,i,o=n,l=n){if(Pr.test(e)&&(e=parseFloat(e),e=st(l.min,l.max,e/100)-l.min),typeof e!="number")return;let c=st(o.min,o.max,r);n===o&&(c-=e),n.min=xA(n.min,e,t,c,i),n.max=xA(n.max,e,t,c,i)}function OA(n,e,[t,r,i],o,l){$M(n,e[t],e[r],e[i],e.scale,o,l)}const UM=["x","scaleX","originX"],BM=["y","scaleY","originY"];function RA(n,e,t,r){OA(n.x,e,UM,t?t.x:void 0,r?r.x:void 0),OA(n.y,e,BM,t?t.y:void 0,r?r.y:void 0)}function CA(n){return n.translate===0&&n.scale===1}function B1(n){return CA(n.x)&&CA(n.y)}function PA(n,e){return n.min===e.min&&n.max===e.max}function zM(n,e){return PA(n.x,e.x)&&PA(n.y,e.y)}function NA(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function z1(n,e){return NA(n.x,e.x)&&NA(n.y,e.y)}function jA(n){return en(n.x)/en(n.y)}function kA(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class VM{constructor(){this.members=[]}add(e){eb(this.members,e),e.scheduleRender()}remove(e){if(tb(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function qM(n,e,t){let r="";const i=n.x.translate/e.x,o=n.y.translate/e.y,l=(t==null?void 0:t.z)||0;if((i||o||l)&&(r=`translate3d(${i}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:h,rotate:m,rotateX:g,rotateY:b,skewX:_,skewY:v}=t;h&&(r=`perspective(${h}px) ${r}`),m&&(r+=`rotate(${m}deg) `),g&&(r+=`rotateX(${g}deg) `),b&&(r+=`rotateY(${b}deg) `),_&&(r+=`skewX(${_}deg) `),v&&(r+=`skewY(${v}deg) `)}const c=n.x.scale*e.x,d=n.y.scale*e.y;return(c!==1||d!==1)&&(r+=`scale(${c}, ${d})`),r||"none"}const pp=["","X","Y","Z"],FM={visibility:"hidden"},HM=1e3;let ZM=0;function gp(n,e,t,r){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),r&&(r[n]=0))}function V1(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=T1(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:o}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",ot,!(i||o))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&V1(r)}function q1({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(l={},c=e==null?void 0:e()){this.id=ZM++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(XM),this.nodes.forEach(eI),this.nodes.forEach(tI),this.nodes.forEach(KM)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new jM)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new ab),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const d=this.eventHandlers.get(l);d&&d.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=PM(l),this.instance=l;const{layoutId:c,layout:d,visualElement:h}=this.options;if(h&&!h.current&&h.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||c)&&(this.isLayoutDirty=!0),n){let m;const g=()=>this.root.updateBlockedByResize=!1;n(l,()=>{this.root.updateBlockedByResize=!0,m&&m(),m=kM(g,250),Ef.hasAnimatedSinceResize&&(Ef.hasAnimatedSinceResize=!1,this.nodes.forEach(IA))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||d)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:g,hasRelativeLayoutChanged:b,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||h.getDefaultTransition()||sI,{onLayoutAnimationStart:S,onLayoutAnimationComplete:A}=h.getProps(),E=!this.targetLayout||!z1(this.targetLayout,_),O=!g&&b;if(this.options.layoutRoot||this.resumeFrom||O||g&&(E||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(m,O);const x={...yb(v,"layout"),onPlay:S,onComplete:A};(h.shouldReduceMotion||this.options.layoutRoot)&&(x.delay=0,x.type=!1),this.startAnimation(x)}else g||IA(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Fa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(nI),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&V1(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:c,layout:d}=this.options;if(c===void 0&&!d)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(MA);return}this.isUpdating||this.nodes.forEach(QM),this.isUpdating=!1,this.nodes.forEach(WM),this.nodes.forEach(GM),this.nodes.forEach(YM),this.clearAllSnapshots();const c=hn.now();Dt.delta=aa(0,1e3/60,c-Dt.timestamp),Dt.timestamp=c,Dt.isProcessing=!0,op.update.process(Dt),op.preRender.process(Dt),op.render.process(Dt),Dt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,_b.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(JM),this.sharedNodes.forEach(rI)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ot.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ot.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!en(this.snapshot.measuredBox.x)&&!en(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=mt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c&&this.instance){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!i)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!B1(this.projectionDelta),d=this.getTransformTemplate(),h=d?d(this.latestValues,""):void 0,m=h!==this.prevTransformTemplateValue;l&&this.instance&&(c||Ti(this.latestValues)||m)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let d=this.removeElementScroll(c);return l&&(d=this.removeTransform(d)),oI(d),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var h;const{visualElement:l}=this.options;if(!l)return mt();const c=l.measureViewportBox();if(!(((h=this.scroll)==null?void 0:h.wasRoot)||this.path.some(uI))){const{scroll:m}=this.root;m&&(Us(c.x,m.offset.x),Us(c.y,m.offset.y))}return c}removeElementScroll(l){var d;const c=mt();if(Vn(c,l),(d=this.scroll)!=null&&d.wasRoot)return c;for(let h=0;h<this.path.length;h++){const m=this.path[h],{scroll:g,options:b}=m;m!==this.root&&g&&b.layoutScroll&&(g.wasRoot&&Vn(c,l),Us(c.x,g.offset.x),Us(c.y,g.offset.y))}return c}applyTransform(l,c=!1){const d=mt();Vn(d,l);for(let h=0;h<this.path.length;h++){const m=this.path[h];!c&&m.options.layoutScroll&&m.scroll&&m!==m.root&&Bs(d,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),Ti(m.latestValues)&&Bs(d,m.latestValues)}return Ti(this.latestValues)&&Bs(d,this.latestValues),d}removeTransform(l){const c=mt();Vn(c,l);for(let d=0;d<this.path.length;d++){const h=this.path[d];if(!h.instance||!Ti(h.latestValues))continue;hy(h.latestValues)&&h.updateSnapshot();const m=mt(),g=h.measurePageBox();Vn(m,g),RA(c,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,m)}return Ti(this.latestValues)&&RA(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Dt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var b;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(b=this.parent)!=null&&b.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:g}=this.options;if(!(!this.layout||!(m||g))){if(this.resolvedRelativeTargetAt=Dt.timestamp,!this.targetDelta&&!this.relativeTarget){const _=this.getClosestProjectingParent();_&&_.layout&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=mt(),this.relativeTargetOrigin=mt(),Uu(this.relativeTargetOrigin,this.layout.layoutBox,_.layout.layoutBox),Vn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=mt(),this.targetWithTransforms=mt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),lM(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Vn(this.target,this.layout.layoutBox),j1(this.target,this.targetDelta)):Vn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const _=this.getClosestProjectingParent();_&&!!_.resumingFrom==!!this.resumingFrom&&!_.options.layoutScroll&&_.target&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=mt(),this.relativeTargetOrigin=mt(),Uu(this.relativeTargetOrigin,this.target,_.target),Vn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||hy(this.parent.latestValues)||N1(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var v;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Dt.timestamp&&(d=!1),d)return;const{layout:h,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||m))return;Vn(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,b=this.treeScale.y;cM(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=mt());const{target:_}=l;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(EA(this.prevProjectionDelta.x,this.projectionDelta.x),EA(this.prevProjectionDelta.y,this.projectionDelta.y)),$u(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==b||!kA(this.projectionDelta.x,this.prevProjectionDelta.x)||!kA(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var c;if((c=this.options.visualElement)==null||c.scheduleRender(),l){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=$s(),this.projectionDelta=$s(),this.projectionDeltaWithTransform=$s()}setAnimationOrigin(l,c=!1){const d=this.snapshot,h=d?d.latestValues:{},m={...this.latestValues},g=$s();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const b=mt(),_=d?d.source:void 0,v=this.layout?this.layout.source:void 0,S=_!==v,A=this.getStack(),E=!A||A.members.length<=1,O=!!(S&&!E&&this.options.crossfade===!0&&!this.path.some(iI));this.animationProgress=0;let x;this.mixTargetDelta=j=>{const P=j/1e3;LA(g.x,l.x,P),LA(g.y,l.y,P),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Uu(b,this.layout.layoutBox,this.relativeParent.layout.layoutBox),aI(this.relativeTarget,this.relativeTargetOrigin,b,P),x&&zM(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=mt()),Vn(x,this.relativeTarget)),S&&(this.animationValues=m,IM(m,h,this.latestValues,P,O,E)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){var c,d,h;this.notifyListeners("animationStart"),(c=this.currentAnimation)==null||c.stop(!1),(h=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||h.stop(!1),this.pendingAnimation&&(Fa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ot.update(()=>{Ef.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Js(0)),this.currentAnimation=CM(this.motionValue,[0,1e3],{...l,isSync:!0,onUpdate:m=>{this.mixTargetDelta(m),l.onUpdate&&l.onUpdate(m)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(HM),this.currentAnimation.stop(!1)),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:d,layout:h,latestValues:m}=l;if(!(!c||!d||!h)){if(this!==l&&this.layout&&h&&F1(this.options.animationType,this.layout.layoutBox,h.layoutBox)){d=this.target||mt();const g=en(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+g;const b=en(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+b}Vn(c,d),Bs(c,m),$u(this.projectionDeltaWithTransform,this.layoutCorrected,c,m)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new VM),this.sharedNodes.get(l).add(c);const h=c.options.initialPromotionConfig;c.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var c;const{layoutId:l}=this.options;return l?((c=this.getStack())==null?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:l}=this.options;return l?(c=this.getStack())==null?void 0:c.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:d}={}){const h=this.getStack();h&&h.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(c=!0),!c)return;const h={};d.z&&gp("z",l,h,this.animationValues);for(let m=0;m<pp.length;m++)gp(`rotate${pp[m]}`,l,h,this.animationValues),gp(`skew${pp[m]}`,l,h,this.animationValues);l.render();for(const m in h)l.setStaticValue(m,h[m]),this.animationValues&&(this.animationValues[m]=h[m]);l.scheduleRender()}getProjectionStyles(l){if(!this.instance||this.isSVG)return;if(!this.isVisible)return FM;const c={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Tf(l==null?void 0:l.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const _={};return this.options.layoutId&&(_.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,_.pointerEvents=Tf(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Ti(this.latestValues)&&(_.transform=d?d({},""):"none",this.hasProjected=!1),_}const m=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=qM(this.projectionDeltaWithTransform,this.treeScale,m),d&&(c.transform=d(m,c.transform));const{x:g,y:b}=this.projectionDelta;c.transformOrigin=`${g.origin*100}% ${b.origin*100}% 0`,h.animationValues?c.opacity=h===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:c.opacity=h===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const _ in Ju){if(m[_]===void 0)continue;const{correct:v,applyTo:S,isCSSVariable:A}=Ju[_],E=c.transform==="none"?m[_]:v(m[_],h);if(S){const O=S.length;for(let x=0;x<O;x++)c[S[x]]=E}else A?this.options.visualElement.renderState.vars[_]=E:c[_]=E}return this.options.layoutId&&(c.pointerEvents=h===this?Tf(l==null?void 0:l.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var c;return(c=l.currentAnimation)==null?void 0:c.stop(!1)}),this.root.nodes.forEach(MA),this.root.sharedNodes.clear()}}}function GM(n){n.updateLayout()}function YM(n){var t;const e=((t=n.resumeFrom)==null?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:o}=n.options,l=e.source!==n.layout.source;o==="size"?Fn(g=>{const b=l?e.measuredBox[g]:e.layoutBox[g],_=en(b);b.min=r[g].min,b.max=b.min+_}):F1(o,e.layoutBox,r)&&Fn(g=>{const b=l?e.measuredBox[g]:e.layoutBox[g],_=en(r[g]);b.max=b.min+_,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[g].max=n.relativeTarget[g].min+_)});const c=$s();$u(c,r,e.layoutBox);const d=$s();l?$u(d,n.applyTransform(i,!0),e.measuredBox):$u(d,r,e.layoutBox);const h=!B1(c);let m=!1;if(!n.resumeFrom){const g=n.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:b,layout:_}=g;if(b&&_){const v=mt();Uu(v,e.layoutBox,b.layoutBox);const S=mt();Uu(S,r,_.layoutBox),z1(v,S)||(m=!0),g.options.layoutRoot&&(n.relativeTarget=S,n.relativeTargetOrigin=v,n.relativeParent=g)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:d,layoutDelta:c,hasLayoutChanged:h,hasRelativeLayoutChanged:m})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function XM(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function KM(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function JM(n){n.clearSnapshot()}function MA(n){n.clearMeasurements()}function QM(n){n.isLayoutDirty=!1}function WM(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function IA(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function eI(n){n.resolveTargetDelta()}function tI(n){n.calcProjection()}function nI(n){n.resetSkewAndRotation()}function rI(n){n.removeLeadSnapshot()}function LA(n,e,t){n.translate=st(e.translate,0,t),n.scale=st(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function DA(n,e,t,r){n.min=st(e.min,t.min,r),n.max=st(e.max,t.max,r)}function aI(n,e,t,r){DA(n.x,e.x,t.x,r),DA(n.y,e.y,t.y,r)}function iI(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const sI={duration:.45,ease:[.4,0,.1,1]},$A=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),UA=$A("applewebkit/")&&!$A("chrome/")?Math.round:Zn;function BA(n){n.min=UA(n.min),n.max=UA(n.max)}function oI(n){BA(n.x),BA(n.y)}function F1(n,e,t){return n==="position"||n==="preserve-aspect"&&!uM(jA(e),jA(t),.2)}function uI(n){var e;return n!==n.root&&((e=n.scroll)==null?void 0:e.wasRoot)}const lI=q1({attachResizeListener:(n,e)=>Wu(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),yp={current:void 0},H1=q1({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!yp.current){const n=new lI({});n.mount(window),n.setOptions({layoutScroll:!0}),yp.current=n}return yp.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),cI={pan:{Feature:EM},drag:{Feature:TM,ProjectionNode:H1,MeasureLayout:D1}};function zA(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,o=r[i];o&&ot.postRender(()=>o(e,Tl(e)))}class fI extends Wa{mount(){const{current:e}=this.node;e&&(this.unmount=V2(e,(t,r)=>(zA(this.node,r,"Start"),i=>zA(this.node,i,"End"))))}unmount(){}}class dI extends Wa{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=wl(Wu(this.node.current,"focus",()=>this.onFocus()),Wu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function VA(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),o=r[i];o&&ot.postRender(()=>o(e,Tl(e)))}class hI extends Wa{mount(){const{current:e}=this.node;e&&(this.unmount=Z2(e,(t,r)=>(VA(this.node,r,"Start"),(i,{success:o})=>VA(this.node,i,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const gy=new WeakMap,bp=new WeakMap,mI=n=>{const e=gy.get(n.target);e&&e(n)},pI=n=>{n.forEach(mI)};function gI({root:n,...e}){const t=n||document;bp.has(t)||bp.set(t,{});const r=bp.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(pI,{root:n,...e})),r[i]}function yI(n,e,t){const r=gI(e);return gy.set(n,t),r.observe(n),()=>{gy.delete(n),r.unobserve(n)}}const bI={some:0,all:1};class _I extends Wa{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:o}=e,l={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:bI[i]},c=d=>{const{isIntersecting:h}=d;if(this.isInView===h||(this.isInView=h,o&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:m,onViewportLeave:g}=this.node.getProps(),b=h?m:g;b&&b(d)};return yI(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(vI(e,t))&&this.startObserver()}unmount(){}}function vI({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const wI={inView:{Feature:_I},tap:{Feature:hI},focus:{Feature:dI},hover:{Feature:fI}},SI={layout:{ProjectionNode:H1,MeasureLayout:D1}},yy={current:null},Z1={current:!1};function AI(){if(Z1.current=!0,!!Qy)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>yy.current=n.matches;n.addListener(e),e()}else yy.current=!1}const TI=new WeakMap;function EI(n,e,t){for(const r in e){const i=e[r],o=t[r];if(Yt(i))n.addValue(r,i);else if(Yt(o))n.addValue(r,Js(i,{owner:n}));else if(o!==i)if(n.hasValue(r)){const l=n.getValue(r);l.liveStyle===!0?l.jump(i):l.hasAnimated||l.set(i)}else{const l=n.getStaticValue(r);n.addValue(r,Js(l!==void 0?l:i,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const qA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class xI{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:o,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=gb,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const b=hn.now();this.renderScheduledAt<b&&(this.renderScheduledAt=b,ot.render(this.render,!1,!0))};const{latestValues:d,renderState:h}=l;this.latestValues=d,this.baseTarget={...d},this.initialValues=t.initial?{...d}:{},this.renderState=h,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=c,this.blockInitialAnimation=!!o,this.isControllingVariants=md(t),this.isVariantNode=h1(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:m,...g}=this.scrapeMotionValuesFromProps(t,{},this);for(const b in g){const _=g[b];d[b]!==void 0&&Yt(_)&&_.set(d[b],!1)}}mount(e){this.current=e,TI.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),Z1.current||AI(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:yy.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Fa(this.notifyUpdate),Fa(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=oo.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=t.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&ot.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=t.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),o(),l&&l(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Qs){const t=Qs[e];if(!t)continue;const{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):mt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<qA.length;r++){const i=qA[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,l=e[o];l&&(this.propEventSubscriptions[i]=this.on(i,l))}this.prevMotionValues=EI(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Js(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(Tx(r)||Ex(r))?r=parseFloat(r):!Y2(r)&&Ha.test(t)&&(r=s1(e,t)),this.setBaseTarget(e,Yt(r)?r.get():r)),Yt(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var o;const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const l=Ob(this.props,t,(o=this.presenceContext)==null?void 0:o.custom);l&&(r=l[e])}if(t&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Yt(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new ab),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class G1 extends xI{constructor(){super(...arguments),this.KeyframeResolver=D2}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Yt(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function Y1(n,{style:e,vars:t},r,i){Object.assign(n.style,e,i&&i.getProjectionStyles(r));for(const o in t)n.style.setProperty(o,t[o])}function OI(n){return window.getComputedStyle(n)}class RI extends G1{constructor(){super(...arguments),this.type="html",this.renderInstance=Y1}readValueFromInstance(e,t){if(oo.has(t))return n2(e,t);{const r=OI(e),i=(ob(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return k1(e,t)}build(e,t,r){Tb(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return Rb(e,t,r)}}const X1=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function CI(n,e,t,r){Y1(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(X1.has(i)?i:Ab(i),e.attrs[i])}class PI extends G1{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=mt}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(oo.has(t)){const r=i1(t);return r&&r.default||0}return t=X1.has(t)?t:Ab(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return A1(e,t,r)}build(e,t,r){_1(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,i){CI(e,t,r,i)}mount(e){this.isSVGTag=w1(e.tagName),super.mount(e)}}const NI=(n,e)=>xb(n)?new PI(e):new RI(e,{allowProjection:n!==oe.Fragment}),jI=Rk({...eM,...wI,...cI,...SI},NI),Ft=W2(jI);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kI=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),MI=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),FA=n=>{const e=MI(n);return e.charAt(0).toUpperCase()+e.slice(1)},K1=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),II=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var LI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DI=oe.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:l,...c},d)=>oe.createElement("svg",{ref:d,...LI,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:K1("lucide",i),...!o&&!II(c)&&{"aria-hidden":"true"},...c},[...l.map(([h,m])=>oe.createElement(h,m)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=(n,e)=>{const t=oe.forwardRef(({className:r,...i},o)=>oe.createElement(DI,{ref:o,iconNode:e,className:K1(`lucide-${kI(FA(n))}`,`lucide-${n}`,r),...i}));return t.displayName=FA(n),t};/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],BI=$I("quote",UI);var J1={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},HA=Hn.createContext&&Hn.createContext(J1),zI=["attr","size","title"];function VI(n,e){if(n==null)return{};var t=qI(n,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function qI(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Uf(){return Uf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Uf.apply(this,arguments)}function ZA(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Bf(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ZA(Object(t),!0).forEach(function(r){FI(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ZA(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function FI(n,e,t){return e=HI(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function HI(n){var e=ZI(n,"string");return typeof e=="symbol"?e:e+""}function ZI(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Q1(n){return n&&n.map((e,t)=>Hn.createElement(e.tag,Bf({key:t},e.attr),Q1(e.child)))}function W1(n){return e=>Hn.createElement(GI,Uf({attr:Bf({},n.attr)},e),Q1(n.child))}function GI(n){var e=t=>{var{attr:r,size:i,title:o}=n,l=VI(n,zI),c=i||t.size||"1em",d;return t.className&&(d=t.className),n.className&&(d=(d?d+" ":"")+n.className),Hn.createElement("svg",Uf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,l,{className:d,style:Bf(Bf({color:n.color||t.color},t.style),n.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),o&&Hn.createElement("title",null,o),n.children)};return HA!==void 0?Hn.createElement(HA.Consumer,null,t=>e(t)):e(J1)}function YI(n){return W1({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"},child:[]}]})(n)}function XI(n){return W1({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"},child:[]}]})(n)}const KI="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMwAAADACAMAAAB/Pny7AAAAaVBMVEX///8dHRsAAAAYGBYaGhjd3d2hoaGYmJfQ0M8WFhMuLi2Pj48TEw62trYPDw3Hx8f4+Pjm5uYICAVCQkHs7OxiYmE8PDs3NzYnJyVra2q9vb1NTUx8fHtbW1tTU1HX19aFhYV0dHSrq6sev7G7AAAFk0lEQVR4nO2da5uqIBCAEcn1Uohk3jK7/P8feaxtT4lYihfweeb9uLu5vDEyFNOEEAAAAAAAAAAA+old1z3HukcxCfGtPCbJ8epEukcyHvdAMd1uKeaHUPdYxlLssW09IDjZ6R7NOMKEWv+haaF7PGMI928ud5sVR1roc6sBzVY7N2EiuFgWX+vchHssuqzWRupiWXiNNmEidalt/NXZdLqsMNI+uNxtVrWmhfvWOrZaGyFXtqHJaiLN/eayIpsw/Rhjz0hbx5rmyvNL+75ZgU1PlzrfmB9pvV1WYON+yi8tG7PvmwHz8rAx+b7p2FuuMtLcz3lfBjfVxj1+zZVt6N5IGyUXQ23c9mvkfhiYPQeuY+/g1NU9+ibuUeZCyPef3G0So2w6XKxM/FFm2abbyGOM8GuZNWaCWNeSSm3MibSz3AXn0c1qythOfOXSSDPFpiPGeB4hR5T5QVEutzFjhXaP0jUZnyIkk0FxLl33uAk2biXNlXjPkFwGsUpqQ4/abc7yvI/Tu4tcBiH56wS613zfdORKnP7+ukMGyR/F9a4CZ+m9b+Ej+/19lww6YeOyp9yF8OrvaLlThh061jRtNh35hR/+nyt3ytRrmln5ptNl8/9PumU6840em408xvCbyyeZ7ux5Xt4lOslXpHeXjzK1jXwVOG7E/zU7ZXfef/FRBsUH+fORL2tyP0j2ZC5Js0Tmswxi0ki1s6WLHy6yxI8z1vyrLzII+TIbXi6m8SA+SKIM+4LLdxnpzoaeli2Bik/tmfndWzb4LiPbddJq2QKotgzhx/bz+V2mvlJrhaanZWVYLoQZ4bIR9JBBUWtnww8LV9oFXnOYzfzyRx+ZdvZcegFAbup9d+kngzbNufGWP+m4vN+4/CTP2v1k6kh7vxheemKa6Rt3LT89ZRp7I1xpqE2Nc/y7CGxx5w3bVwbF1+fFKF44yTxhRYrvZLtWfvmjtwxi4fNiRefF5iYqdsWnJ7K/TE1cX8zkcuFBMqYDMqYCMqYCMqYCMqYCMqYCMqYCMqYCMqYCMqYCMqYCMqYCMqYCMqYCMqYCMqYCMqYCMqYCMvPAwqAsgzFn2VPKxLtLeflRrd8sKt+j1PaP6lWG08mwIMm2lJJUXqTzjR9CbXIfAMUX1SFMJsNOeHv/vBrxlFpWOPhVtoQDxTFMJvNWD879wTZh9l7qhxWLpqaSCRpVTx0lVJ2wxsMt6qsNYiIZ1qzjxLdhDz8nzRpMrFbUsmtWP9vZwGE8cQSZcljhUyjUtA59Mp4IfU62ip8xFyrT6X5YnBWijGJ8XBt1qTRXy1lC6xfbGvZJjp0oo7iehdlbnNmqrdqEUn2y1SNThzsZfxFTZJjzrFe0OA5UN0amyDwanjwY8bF/c2QQ2jhB4Iz5hI9JMqMBmRcgMxsg8wJkZgNkXoDMbIDMC5CZDZB5ATKzATIvQGY2QOYFyMwGyLxovXFukszQN87FIw1ezTTOXmTNDo+eP6wDkihDLI1fIFUI/XqGns+4RGh3SfXFGTsInVRwPuwcb3MSupd4w894p+LHFrqf4MuwMIlLsbeNp+srIxxL7Ao1+Ezy1mrUQ3G+fK8utquw2N91ePeTMN2KNgQvjoVxuyfU0Fvm0UmtdZX7Qf6yeEQyCIXDYmcru5ABeApHcJtKsc333NCBJQ2/U2MZOTWeUmFEbObUULXmR0Uma3qtGZoqtqYJZAuaXghWTt3y1pA6UazhecANs8GjWmwm0iakmvBGdj5jpa30DRkzQHjmjHKpbX7S1k5PC5TuJ9i2h9dMv46H08sk3YLjXU6wtB3xQtTbdf8STtXELSqCqt6Qc2qThfHo/ZXAyQmnfAuCbcJbWfnbpV/QZOnhcgujyVvrsTiKNosTxUxbk0AAAAAAAAAAAAAAAABgEP8ATMBggnodxMMAAAAASUVORK5CYII=",JI="/assets/trusted-CcGghIr6.jpg",QI="/assets/getpaid-DcWYYlby.png",WI="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAflBMVEX///8AAADh4eFfX1/z8/P8/Pzu7u6urq6np6fJycnk5OT6+vro6OihoaFsbGzS0tK9vb2RkZG1tbXKyspAQEDZ2dmampqKiop5eXlTU1N/f38vLy8mJia5ubk3NzceHh5XV1dLS0sTExNwcHBkZGRGRkZ6enosLCwZGRkMDAw4C2qIAAAMEElEQVR4nO2da3eqOhCGO6goigIq4BXR6m77///g4aaSSSbkrErArjxf3FutJpLM5c0kfHwYDAaDwWAwGAwGg8FgMBgMBoPBYDAYDAaDoS2sccakZF4QlQQlu64b+GuuIOftezgDKC5ddRXHJcuCo78EsLtu4W85wqfk1Qj+aWtJW6Swol8cAbj6mtIOQwDJqxNYaGtJW4yllgTA0taStjiDR784hoG+lrSEDT+SV08QamtJW0wgpl/0YauvJW2xll2lRGZm3wQXTvSLDiT6WvJybG+ZP0QQ0O9Zg6OrOa/F9oNtFm4Wkcxe4g08+NLWphfixfsqoM6dhCUbh1s4amvWq1h95l07bJaWXUYyAczJN4eyKdpL3OAn695gXMSZlZM4SKLOK4w1tew1eGnWvfQ4q/5bOokQ1uQfTKXxau9w1gCX6JnouXDIH2KYkH/yKRnAvcPL+pf49WcqJyHJbrOJOsoewnfwF+4g6x9qaFI4CU8SlO3K3yCFQe/zwwDg5KPnLNjnD/9oW5JljcPijRmSmKAHhAeAiHs2KJ8reyEkKLPGBcznmXvpcYIRZ/ZTMNVKJ+HQyd+snKFubk/tLACS5B+dYmcWZil4vnISn3TMEsEmf9iU13oMsO6l4OZQDSudxKi0lkJK/Smzp6X/zH+qHhrViBxcP8UQ9OFK/WmlP8XPD8iGe+/c4wYAm9AKD875w5V6/ePjUjiTWd0S+VAO3P6Q0irZrnASkkG6hDR/CBgVLnMc6asa9wrW8EV5Are8NBKp+1BkViMU8Qy/4EZOXO2sISEas7xBGcnQUrcPt/xhjn+C0VoSqGuGasowC3DgVETgEqk7Ke0mwFT1c7WzFTdklhlEWFT6Ly11r8q8XygG3/ohLy7gSzRE5/lS4GNm0VL3ubSxF5GlGu37sI4RCMPNPEDdPC2HTQ5Sr0wdV1lCIghHZ5fuA3FfMH8Kj32rXxNa6k6rQM+6CbMKl3SzunBF8ZW7B5QokVK39VzHyMLRhI/6nK5XFA+CH97nAtRKxRCwqAkb4nA0Iv9WCxuBsQv4AJWUul12fgrD0bTL+M0RWJksQOWyJFLq3qB8+SgoxZh1mGiIvnsA/JSrVAyeR770IAQ+unMkeVfLbHhvNRAZhkCgbBTEvIl1BV387GqchtwVyNoiEgxPhDmciVypzQ/UmWBcaCHhNItY2EFS6g6EoZzNi1nHblYWl1zDl+IkkZK6cb50x+K9/FooALXNDw41Q8LoUVI3ly/dcbg4KZQWOLTEBCcDo4vYoJBStzDeK+C9/ECy5NEW3IhcED3ZEVK3rHhmi62npX9pimufT0na1PMXiYHMEmYkCehfXjyg9s2oJMCBVPj8UZrd+nBhnwh1h6cONqQ7Sg6lpO69rPwrv2YolL1pLrYZoCs2JZddiJCL+4kQQ2yBfb01b1zOPqACM5/QIRqLZyL8h3qrh+cooAxJU0dI3RacXIuDmdrYmcRahf4E2RnSXc2IQWoLi9jT+ltwNa20GOfVuKh8ySUvISl1rwaI6xlPZTwsvzTqGXNk6GJSEUvVs9crnsoB+tRAY1xzRoOUNKTyqm4Gn3N4+I/DchFLBzP01bQhl1d1M3zz/m6ABgCfj7aFg2wAvTQorepmCAS/EvY0C21OP2BjRHpp0MaxF4kt8nYjNFbG2gTwM5tW4Ev6RFrVzTAQNv7KDlNL20IN+ml3ZAIurequsxJf7CX6hXSlUNNySfPBngqnaKkbcxDPZBs5+RuZM78WnzWQQ/gm3iit6q4zp4bfhXVDO03LNBHreVfkCr2sqrvOkFx9WbC2eKIpNN2w839Ofa2lWpq+IA3SnP0xHU3S8JadDRsqMCOlboRHq/YOux1xqsmYHtjJcaaG2EUxUt7TBW8uG6gNNUkZyGZfiCsgq+quM0Gmuc4IWTE97mKGtg1Q3yqr6mY+TmaP0IeftESmQ9ZJDamlsx811eFTGpzv2RmR0EW4L8RlR5VN5DSyqu4aggWsOmf2Z7ppSYJdtulTSIVvo6RuRCJ/W8ra7a2WHlq4h+LksFReDsl5sNjsgmgyPvqCTGrcIL4McA917BOeKvUwTJLDT+NxCY1rn1wPdQSmaJS6svk2mg1dK/QcfzmJgpi3urumIAUNSz2j1Gb9nK1cQMjrLFajLrFmLc1aiyqM3MNIOc7gbc+t0WUe2HBir8VbfKBsVTnO4BS5I+VKyQ+/6EmBUaCs6oVXeMKOoFGn4saLnh4m7GS4KkoVGyx2xM3FoyG7Zodz/rZAXQoU9+9iq0IvyD05spljSO/ZeCkxqyUc1QQ1btvTViFhj9lfT/Grfs2YzWynamI7XgvmVXwBSLeMNC3me2j+qE1/PEgvKgI2+uirsoT+O3CmPVD5XqzQi1R8Dg+96aTHHXJfNFERDdHahlDF50DraUNtW/Y/2QHmKthwvBacKqlUCRtoO9JDtF4JXiHZN8fDaC3YIVXkOlgzD7RVDVlIO4qaLwhaCiRUfAT+3ETfKVJIbLcbrwhazo0gVfmab3ZsDJXX6n7PBl2CbZPlXzJ5oK22h2KFHO1RYzE0XjGkatcesD/BVS00SdHveNVZs491+IN8hrCD1FMrh7XQ2MfVA+2yQD/vWB4SswULEhW/zhWlx0et+9i4YSkrFkUFCxO1OJYrJDvrLU7EgvZRsvjAFiwMFU8OvKF00tVc6o3rlTJfRXs4pmBBruI/8LHCQdddtQNXfhlKtu7UCxZk76vBKRzU1oX2WOAI6h8ZNDLH0PHbUIRwG4Hm2vfLWlycT+72rNf5Nan4FT53pX/0n/uZ4ovhUeOoVrCguIPJ5lS4CaT/r3kvgN/GEojlz2nt6X9qgdeesyqd7O26ckrSVpi31zIES0FeKz4ZL4UEmkQ2Fpdv7knkCb6eaWyzip+zgxOahIqh+suJOetpC3ac18qzFVT8j2IfMZ7Pg67OVeJVeYvvYu2sxGYVv3g/ZzX9zs7jc/iUNOQ2cn8/roiCil9s0sQdHHW41fnKz7usiwv2//flRRUVPwskeL+36MTMlIg2c7s/sK715FlVo6DiD9dw4UzKUl95t4CV4LpkzazlOY8kREHFzz7txnVmym3U00ssWuP+95yM3iMZbG5oLLzzw6Hr8+nOooA7M36n0mw+VrYbfbZ3Ega2A32bLAhmwt2/dlqdbnIfxW5D8mNnJmYgMEQxXDqchCVTwTkYH7mTyG3iY2Wb3L1XUBy4JMpM5vRuaI14IndVRTL3lW2B53zi7qgzPZdKMUL7+AIjUkUyd0P/TftsPz9xOBZ6ymPnBwzdGfNXkT3Qk1LxZ35xHnYkjgSO+KSiDhnjuVhFMpWsKkoNRlM/Xufdu1JXd9KjDhY/NxOwPA70LAZppeJPtps4mk/mUbxJy5Pafz590lLGYgvWGQ4wVfWX6kDPIkT1ytRgyNYp3nZLmZm89u4I0yxvuj2mE3ugZ7VY+Ak7z19OJpOlv7IaYnA76eEdZ/Jw9G7ay0imWkqpVHzvfyR5+XG2mmoS/hfPcLR+oOddxd+rHzGzg77e1ypzjF+5JLaCNP9vubJdqfhj2cIGAxGg9gP7XFzGMpIpB2ml4isf9TTKRsK5lydBV2SeEY7lMv+4GGqVir9RHHf53/fIC4oYLvK7WuT/2uaGZ1y6/oZdFXecL4BFH00Mi5cUrrpY2b4PzrXKhcnvGZH0ItJupLhxR7GyvSlV/GXzesxofADY99bCiMhXtqta/OZy5zBPoNZv1b9yCXVdCm07eT2aFX3lEfh7jM8n+cp2NTgtybKv7e/ynTXJvP/2BZOfYFMNzhskE8fFnRy5zvzzkMfg66h3IagCeVlhpeKHVTJxOi92QZTfHDfYLc6n6snNsc/uXUIEkf1Qi4er+eaGt3n9rDfz1fuNzQcJuFjFn7mh4y/zO+P6jue+cd8KLFg73Z5w3DYBRId+CIFtcYDFH7hpqgQLLn/g7tMy8rs+qJ0Y8a58g1It/vuS+/ieSYEvJu7ZXXBez6Xr+xm0jdf3+9/9ml0XR1Nrpcdy52vAW13+Hpv+ram8GPXjLt8Up7Pbbehi0HNR/tfM3vke90os/3Tem/PXx+jH6N0VJoPBYDAYDAaDwWAwGAwGg8FgMBgMBoPBYHhn/gNiPX39aozRqAAAAABJRU5ErkJggg==",eL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAeFBMVEX///8AAAC2trYaGhrY2NhfX19kZGSxsbGOjo78/Pzx8fHS0tIwMDBISEjFxcXj4+N2dnakpKRTU1Pg4OA7Ozvr6+s1NTWIiIjw8PCVlZXMzMxQUFBzc3O7u7vGxsapqakmJiYPDw8dHR2bm5t+fn5qamojIyNBQUGjxSU6AAAEw0lEQVR4nO2c2ZayOhBGiQM2iDjgbOPQavv+b3ioCiJI8OqnOVXr21ch9HJld6BSSQDPAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAFKeg6xa0SxyZrpvQKuOHMZoNBwdjNBtOfWM0G26/jdFsGG6MUW24s2q3s1LDufXzV0edfTi6sNZi4Hk/Gg1je2Eu957ty4k2wxX7nWMqB1lpnWoz9LIY2u/Z4i2T2+szDM08LyWZ28HrqTN8QXfgVLMhqd08xYYUZkyg2ZCyUoo4ag3HHGY8xYaUzayooNWQZhZXLik1HFA2Y4tptDx32pZ2oGs06boRbULp2q7rRrTJ8XWN6iQ0nK4pZpEJnrpuRJtcaX7fdSPaZJDno2rhhHvfdSva5KB9oNg8E26t0KLMRfNNSCszZtB1K1qEh/pR161ok6VdmdGLXxvqVzkdNehfQ2H0txJljrp213i/qdJb4VOw31Wb/ilpPYweVBnuySSuVNEmacp5qgZDTrerMyZynnlaDKemlo1us5qICioMec/wbSBcPuOOBkMWvFfrvovbUoEhC/rVOho6vmxRviELDqt1+1J2I96Qg8yiXldkN9INE0cPBpdydiPccOwQ5DA6Lo5kGx4dUdQbVieJog1HJs9bymxeYZSRbMhP523ea7Mu/C4fCzacmWIXtIxvt+8LxBoGtDtRdbH4b0s1Ug2356a1bSWGPEpcnDtoOgxPJLgOnedUGM4cuXaBAsPtsj7fLSHfkFdk3pZkyog3/CK/n1qMSeen05xDq3DDcOK+Be3LFZzfyDaMWWReq7/bdVFOR0Ub3ox794yWfh8P+YYJpzHD2v5nGPEccSfe8Grqq75Eki8lfgk3nPIgGNXztPg5wxBueH3FSseJlEqiDZM1J9rj+pn7K/RINuRB3rV9vaUYE22LvxJquO/zFqCjA/eVhTaphqHfdAfaZZpXAi7U0EaYteuBZt7hPb6ORRoefxuyNC9/8668bS/QcMprTWa4dZ4lw8okX5xhaJPQc9ODlOIN7Q3ovkAZ4YYj6zdzrzUxog1T+wb2wvlKSDoc8gnBhnHEfpHzBrTDI43+Yg1jTkFNP3We7dmrV7Bhavuv4W2J1fMxLrGGvehjALXhNV5KNQzml49+Y85v7oEXyTTcfpmPfiFPBPsUfUQaJvm3ci5NbytdX4uFEg3jifWL3PEz+wO+fg95mi3PMM9fFk0J6ID/AZdCX56hRwLfja+02o2Y0k6TQMON2X3IP2m18F6eQAk0DJve4uH6zHBSqRVo2EBw5ZcI1BoGNEBQQalhYAdAKqo0DJ8JDh0oNFzdjNFsOMi3c+eJTsP4wXo/J/skM1cpMgznvENhlpyg6TOczqr5qT5De//dik1efYZZF/5eS01WaViZ/6o0rKxgwBCGBTD8M2BYAEMYdgYMC2AIw86AYQEMYdgZMCyA4f/W8Pa2TrPKDffvhuv84Xzz9g3PXb5TfH97/zkx5qeF9n4mWQzf8bOuefilCnp8lo4nWReU6/2LMQcqZOcrP5CZr7M/9M/ZD5VPHPIfyn/2b74QPTbd4XjmvwX2HRr+zcdbV6NeV4y0fGEQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIDW+A9JJUQmMzty7gAAAABJRU5ErkJggg==",tL="/assets/getvalidation-Dw44V0c2.jpg",nL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAABHVBMVEX///8VfsIAAAD///3//v8Aa7oAAByqyeIPE0CPkZ7///yMjZoOE0IAaryZvd0OFELExcwAb7sAACgAABkAADEAABQAACAVfcMAd78RFEQAAC4OFT8AZLkAcr0AACsAADgAADSGs9icxOGGotCjvdwAAArb4+4UgMBxoc7x/Pu+v8Gjo6kAXrcIDUGAgYUsLTcAACPv8PDi4ubk8fXa29rO3e++z+TV7fJXi8RMf7/N4/QAVa+MuNofgcwAY690ntGxsLhkY218fHseHje31exAQFMSGT5MTlLW3vBNUF+Hs9UWFisUES3h4OYmJkKlqaaio69Zmc1Og8JhYWI5OUIeHihra3M2N0tSVFmcnKAQExrCxcN3dYBERUfO0NQjeq0kAAALMklEQVR4nO2cDVvayBbHh5kExxjKe14cQGiLqWiwQXSt63bB7W6v7Xa1t61bdlu//8e450zAVkHr60Pgnh/0WUkIO//MmXPOvIUxgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiCIZCKEAS/4r2UYQohpF+cBEAYosyxLMHgzY9rFeQAseGkEVqE13cI8CAZbW13d3tnZXt1am3ZZHoafGrtmpZKBl/misTft0twfltBGKXaCn003lQpSSJD/2dxZA99jWWzmfQ4IBN+5tVvxUJ6rBXqg06vs7lnCANudfYXgORcyXirGTbmui0LdlLfxyMLzs64QHOjafgWqzUVpMfA3/PN+efkrutRZ96pgiPsvocqCuAV61aoXC4XP7ssGWOmsK2TicSW2StetmLtPGo0nv2bMKup13WDjDWYAs4346aUW6Kby1f1VHQjF6uOUiRIDL1V5NfOxf23XiwVuPNmCyIHBAV5RowKuBs01szbr+dtCRTuWVH4BoyLkpjr1ttgeWCo6VbMx61bqxY5lY8GKA4OIAekZtN5fUt7WtIt4A2IJFrYs3bogmdnbQBcTZPbHOxPogdwglXkax3xtwZbQVpzYLEDnKBYGCGhpUa4HRxp5HSPctbHAbkELRRdbDeBWtPrdKMLQCF2rJPc8sBawqqzc+sFvTX7MxNYLbaOZR9j0zmOIV+hl3dTPcN0pbzZ/O1jPWWe/lEywnjrdo983Haf2h88jw1qt6Ewtv8XGqgU0u54bQEx8JVjnbajUspPe/P2oGyVXINBqv+bpUmgr37Y5qPhPRUeKXxn2Is4DXvVZHtQHlX2LRYcr0velvVJK89ft1lTKfjnGsIl1c4ec11ZAmy2V8mUTjj0y0UjNN5MSbCG28axbfQJ1drCibCll1gaVNc4P/+3qn05GbRroIaJWf7NcsrMoTikoqkpzKN6+iUYKnlSMl9UQ2xXthrTCZimrJFwNL+nb9fJmvxWJpHhV8C49zpfrPlSDrULp1+vP+duDAZTuTazw8YSiwlWr3xS21g/+5E6pruwwi0L9+jLnvYQIxFIslX3pS1Doh6pY/trvvYt0v+iNDhaVxxOKCge+KUQPbHR6/a/FogIjh+r0bb+8lBCFFtjpogPmBUWrN/lfRzntDYWhFWLGBgqho3/hMjDB7xSKeDQjyh39xZvgdWz4PWcJLDkZkVGwxTSUyXacg+PzxxvaSkHhxJ78mcJzGMcHbx34NT+9lJgRAFQIPsYZdM6b1e0UQq11jh1ojAlTKO0sPwVjvLtCQ+c42eQplD7PQRi3zh2/jUIMLDnuy2yyFBazWqFg96GQoUKVMIVp8KRaYVwiHEKEzJNB18LVCg1M00bor4D7XNUDHN6TOF8XQwuP6zB5VnpBoZ4/szCncTHis4mRbbUyVKh7JXrqjc2KQuw5rD19uvC+qruAz55OJO48ursL8Pfat6mpmVAIFrf1wjRNT/cAXS9vwusi5nAg3M3DN19sjfq9s6EQPP6rDT3oiwoDfAepy9Bf2VgQZ782CwqhYHHH6dqY+6N54blV+IgUThNS+H+kEBxq4Mbzh+48KvRSQdXMV/M4Y+FdPDkPCiEgVnZfbbGtV7uV0ZKF+VLoQsyD1MzCae+X7lxaqdkYLvcS1rPxk3Og0HPZWebJvHmsw3xjtO4ChD7Lz6HCzPao9wBtcTszhwor26OxDOhbzaVCc+FMIWMLY2fnQKGXisdjQMmalboY8udBoWsunE3xLlx0NHOhMOXl94aeZs+cy2iR+sWDpojs5725zGkCL8i/12e9fDCDmbeUqJBdVYcpt/pUn31WHTt1TiGOedtSOkuTBlmnwjUVuqn8jj7bMMe6h5MUpmdPYZCJFe5k5lVhaqTwmnW4mDiFPfYjK93WZ3fyP1LYSpZCKMZxExQ2j5kxzFouUWj+pM/uTRjC+aYw/j1b2uXjpGweghL1uFJZuOc/qMNqvNJyK5+6YiQKWSzaQ5tIBLiajUulCu2rszbX+298du3FVQrxN9oFpSR/x5Kx3ERHZWg3qt7WyyfjY5Pq0NsdXrI7FvAvKiwpKblxdsemy0ihXPkQjXKQSxS+H17y/sqsTYjowwrmSEyI5OxVwHvuFzujjxMVQtrWeIY0gjGB5zyN9c6xs9na8rTETOSgBK6h2T0biZnsaVLVGPeqdgiW3m1K266dTFPQGK20rez00ajZTFY42hf03QahSVZqsaOirWQ6WctMc7hOa/mQXREP3QDerlYXXDXmbQh2WJNwv3LTFDRG52Mo1cqmxS5XiHPe3rAOxwSej4eboZThx86l/7ep0Edfk+4NPwlL7FQuiricIAgqO9ao/lmvKKUs9aemZTLrTV/Zz9vGqC2Jrd2KmcnA+4eYZsas7K5Z1mhEvO1kpSqvT1POBCIO9z10om/radjCTcArhlYaOTY0ah5NT8xEjM/LtvSbvfiTJYwb58xnOxF7zay0lz8nIZs5xyCtpF0axTAcGtUJjnEdcMkX7omOrz1Zlko6g0QkbN8TfQqlHZZP79ThwZ3Pp2VcUP0paUYKN/ykIJX//AT+Mm579wXenpPnvpKFk6RtY4fidLkvbZ9jFLuLwg4m8T7vJk0hYPRLtsrWvrC7KGTsC5iCvdw3RpMcSSLHMRUpd++ksFuW9nBQK3kK2d+1rJT1zejWCsGtfoROSrb2972W6/7IpTFUF9dvffcNdgwZvExat+I7Tgq+VKp8+5S5+9aHvKFwkjgnM6JTtqER1fq3jWVGvwDXyzvcogdnCYxM+cWjW16+Dj1fpdLtJDqZEa9LUqqQv8MNyze6EL//jofQCEuvH6hs9wGkXI6dVX59s3PTxAYHXTfrEFBt5/SBSncP4I6JQRPS5mzhc3RDSzNY9LkGbko2B0zcOu17aPQmwsMaZl3gDm9opeLkOSQMduEQNzQmVyG8o826tJVfHtzw4kHZV1lV+hglVd03IO8Cjy95+7p7sfVm8DaHq5Qsdx+8fPdADyTidOLgbBfX1eDXBtzH3erF3kMX7n5Y0tmbXWyL67kbIdpFCDLSTtC89pVYxiL28SR0h6+V3IjoxPEl9i0X8clnD128O2Pg8yCwVYHE9IfrSIw+FH38OrTc24xgTQnwjJjc1KCvPmyMY0/+GI5SsS5f9vEZA8Wbet/pYmBb/ENlS84Ax20mBkc9wiYGTkmqP3AF1MxUn8ZiS1yG4G7CJvQ0Llm8ZQnW6TdDiIOhzReTMxl6HXDutleuYxbmFzZ78aEJ9DZ1j9Kul3vG7DRBBB+FxFr/lPBJJ36dtyc8VQc+R21e8uEmhMv/tLBRzlQlaqLfdWBUdoEPIp26CO1h9Fg4iwa8gPogDB7OUu19B+So7T/rNg68yPTrf43RWLHARMD493Ua0jR8Jo3Tjmb10YJgdrly2keNYKqfW3GiqhOd1mde97N6eUMxx6wEjo1eB3A3Fut8KdehU6ykKjmHrUhPu0WtQ6eU1W6oVPzSYUkc/L0WhsChCaPllEMwRui915tfj8E+j782V+ysfipUOd0SCVkWdGvwcRGDZiGEkACtLizzv3kZe7pQg2GhuW4kcmj7hoBjOf3i1NBrQrOT2D+G+lR+If2ly2bXQs8YTpSe9nnN9n18khdGeB8CSP+UWXHmNtvoJoaPger0P6VD3YcAEy1+6ncMbZ8zlchcxuh5nt1FzldCGa5wvtgdJt5JeejcvdE7KfLiQW/axXgosCKN7mnXSMxGkXsGxxrjJTOWSMba3/sGNRnnPs0fYiRyPo2UIAiCIAiCIAiCIAiCIAiCIAiCIAiCIAiCIAiCIAiCIAiCIIg54X+nYRG2gDtQagAAAABJRU5ErkJggg==",rL="/assets/ai_image-CW9plc54.jpg",by="RFC3986",_y={RFC1738:n=>String(n).replace(/%20/g,"+"),RFC3986:n=>String(n)},aL="RFC1738",iL=Array.isArray,Sr=(()=>{const n=[];for(let e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n})(),_p=1024,sL=(n,e,t,r,i)=>{if(n.length===0)return n;let o=n;if(typeof n=="symbol"?o=Symbol.prototype.toString.call(n):typeof n!="string"&&(o=String(n)),t==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(c){return"%26%23"+parseInt(c.slice(2),16)+"%3B"});let l="";for(let c=0;c<o.length;c+=_p){const d=o.length>=_p?o.slice(c,c+_p):o,h=[];for(let m=0;m<d.length;++m){let g=d.charCodeAt(m);if(g===45||g===46||g===95||g===126||g>=48&&g<=57||g>=65&&g<=90||g>=97&&g<=122||i===aL&&(g===40||g===41)){h[h.length]=d.charAt(m);continue}if(g<128){h[h.length]=Sr[g];continue}if(g<2048){h[h.length]=Sr[192|g>>6]+Sr[128|g&63];continue}if(g<55296||g>=57344){h[h.length]=Sr[224|g>>12]+Sr[128|g>>6&63]+Sr[128|g&63];continue}m+=1,g=65536+((g&1023)<<10|d.charCodeAt(m)&1023),h[h.length]=Sr[240|g>>18]+Sr[128|g>>12&63]+Sr[128|g>>6&63]+Sr[128|g&63]}l+=h.join("")}return l};function oL(n){return!n||typeof n!="object"?!1:!!(n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer(n))}function GA(n,e){if(iL(n)){const t=[];for(let r=0;r<n.length;r+=1)t.push(e(n[r]));return t}return e(n)}const uL=Object.prototype.hasOwnProperty,eO={brackets(n){return String(n)+"[]"},comma:"comma",indices(n,e){return String(n)+"["+e+"]"},repeat(n){return String(n)}},Ar=Array.isArray,lL=Array.prototype.push,tO=function(n,e){lL.apply(n,Ar(e)?e:[e])},cL=Date.prototype.toISOString,At={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:sL,encodeValuesOnly:!1,format:by,formatter:_y[by],indices:!1,serializeDate(n){return cL.call(n)},skipNulls:!1,strictNullHandling:!1};function fL(n){return typeof n=="string"||typeof n=="number"||typeof n=="boolean"||typeof n=="symbol"||typeof n=="bigint"}const vp={};function nO(n,e,t,r,i,o,l,c,d,h,m,g,b,_,v,S,A,E){let O=n,x=E,j=0,P=!1;for(;(x=x.get(vp))!==void 0&&!P;){const he=x.get(n);if(j+=1,typeof he<"u"){if(he===j)throw new RangeError("Cyclic object value");P=!0}typeof x.get(vp)>"u"&&(j=0)}if(typeof h=="function"?O=h(e,O):O instanceof Date?O=b==null?void 0:b(O):t==="comma"&&Ar(O)&&(O=GA(O,function(he){return he instanceof Date?b==null?void 0:b(he):he})),O===null){if(o)return d&&!S?d(e,At.encoder,A,"key",_):e;O=""}if(fL(O)||oL(O)){if(d){const he=S?e:d(e,At.encoder,A,"key",_);return[(v==null?void 0:v(he))+"="+(v==null?void 0:v(d(O,At.encoder,A,"value",_)))]}return[(v==null?void 0:v(e))+"="+(v==null?void 0:v(String(O)))]}const z=[];if(typeof O>"u")return z;let H;if(t==="comma"&&Ar(O))S&&d&&(O=GA(O,d)),H=[{value:O.length>0?O.join(",")||null:void 0}];else if(Ar(h))H=h;else{const he=Object.keys(O);H=m?he.sort(m):he}const V=c?String(e).replace(/\./g,"%2E"):String(e),ie=r&&Ar(O)&&O.length===1?V+"[]":V;if(i&&Ar(O)&&O.length===0)return ie+"[]";for(let he=0;he<H.length;++he){const me=H[he],De=typeof me=="object"&&typeof me.value<"u"?me.value:O[me];if(l&&De===null)continue;const pt=g&&c?me.replace(/\./g,"%2E"):me,te=Ar(O)?typeof t=="function"?t(ie,pt):ie:ie+(g?"."+pt:"["+pt+"]");E.set(n,j);const Q=new WeakMap;Q.set(vp,E),tO(z,nO(De,te,t,r,i,o,l,c,t==="comma"&&S&&Ar(O)?null:d,h,m,g,b,_,v,S,A,Q))}return z}function dL(n=At){if(typeof n.allowEmptyArrays<"u"&&typeof n.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof n.encodeDotInKeys<"u"&&typeof n.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(n.encoder!==null&&typeof n.encoder<"u"&&typeof n.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=n.charset||At.charset;if(typeof n.charset<"u"&&n.charset!=="utf-8"&&n.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let t=by;if(typeof n.format<"u"){if(!uL.call(_y,n.format))throw new TypeError("Unknown format option provided.");t=n.format}const r=_y[t];let i=At.filter;(typeof n.filter=="function"||Ar(n.filter))&&(i=n.filter);let o;if(n.arrayFormat&&n.arrayFormat in eO?o=n.arrayFormat:"indices"in n?o=n.indices?"indices":"repeat":o=At.arrayFormat,"commaRoundTrip"in n&&typeof n.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const l=typeof n.allowDots>"u"?n.encodeDotInKeys?!0:At.allowDots:!!n.allowDots;return{addQueryPrefix:typeof n.addQueryPrefix=="boolean"?n.addQueryPrefix:At.addQueryPrefix,allowDots:l,allowEmptyArrays:typeof n.allowEmptyArrays=="boolean"?!!n.allowEmptyArrays:At.allowEmptyArrays,arrayFormat:o,charset:e,charsetSentinel:typeof n.charsetSentinel=="boolean"?n.charsetSentinel:At.charsetSentinel,commaRoundTrip:!!n.commaRoundTrip,delimiter:typeof n.delimiter>"u"?At.delimiter:n.delimiter,encode:typeof n.encode=="boolean"?n.encode:At.encode,encodeDotInKeys:typeof n.encodeDotInKeys=="boolean"?n.encodeDotInKeys:At.encodeDotInKeys,encoder:typeof n.encoder=="function"?n.encoder:At.encoder,encodeValuesOnly:typeof n.encodeValuesOnly=="boolean"?n.encodeValuesOnly:At.encodeValuesOnly,filter:i,format:t,formatter:r,serializeDate:typeof n.serializeDate=="function"?n.serializeDate:At.serializeDate,skipNulls:typeof n.skipNulls=="boolean"?n.skipNulls:At.skipNulls,sort:typeof n.sort=="function"?n.sort:null,strictNullHandling:typeof n.strictNullHandling=="boolean"?n.strictNullHandling:At.strictNullHandling}}function hL(n,e={}){let t=n;const r=dL(e);let i,o;typeof r.filter=="function"?(o=r.filter,t=o("",t)):Ar(r.filter)&&(o=r.filter,i=o);const l=[];if(typeof t!="object"||t===null)return"";const c=eO[r.arrayFormat],d=c==="comma"&&r.commaRoundTrip;i||(i=Object.keys(t)),r.sort&&i.sort(r.sort);const h=new WeakMap;for(let b=0;b<i.length;++b){const _=i[b];r.skipNulls&&t[_]===null||tO(l,nO(t[_],_,c,d,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,h))}const m=l.join(r.delimiter);let g=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?g+="utf8=%26%2310003%3B&":g+="utf8=%E2%9C%93&"),m.length>0?g+m:""}const ks="4.98.0";let YA=!1,Bu,rO,aO,vy,iO,sO,oO,uO,lO;function mL(n,e={auto:!1}){if(YA)throw new Error(`you must \`import 'openai/shims/${n.kind}'\` before importing anything else from openai`);if(Bu)throw new Error(`can't \`import 'openai/shims/${n.kind}'\` after \`import 'openai/shims/${Bu}'\``);YA=e.auto,Bu=n.kind,rO=n.fetch,aO=n.FormData,vy=n.File,iO=n.ReadableStream,sO=n.getMultipartRequestOptions,oO=n.getDefaultAgent,uO=n.fileFromPath,lO=n.isFsReadStream}class pL{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function gL({manuallyImported:n}={}){const e=n?"You may need to use polyfills":"Add one of these imports before your first `import  from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let t,r,i,o;try{t=fetch,r=Request,i=Response,o=Headers}catch(l){throw new Error(`this environment is missing the following Web Fetch API type: ${l.message}. ${e}`)}return{kind:"web",fetch:t,Request:r,Response:i,Headers:o,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(l,c)=>({...c,body:new pL(l)}),getDefaultAgent:l=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:l=>!1}}const cO=()=>{Bu||mL(gL(),{auto:!0})};cO();class be extends Error{}class Ut extends be{constructor(e,t,r,i){super(`${Ut.makeMessage(e,t,r)}`),this.status=e,this.headers=i,this.request_id=i==null?void 0:i["x-request-id"],this.error=t;const o=t;this.code=o==null?void 0:o.code,this.param=o==null?void 0:o.param,this.type=o==null?void 0:o.type}static makeMessage(e,t,r){const i=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,t,r,i){if(!e||!i)return new pd({message:r,cause:Sy(t)});const o=t==null?void 0:t.error;return e===400?new fO(e,o,r,i):e===401?new dO(e,o,r,i):e===403?new hO(e,o,r,i):e===404?new mO(e,o,r,i):e===409?new pO(e,o,r,i):e===422?new gO(e,o,r,i):e===429?new yO(e,o,r,i):e>=500?new bO(e,o,r,i):new Ut(e,o,r,i)}}class Cn extends Ut{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class pd extends Ut{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class gd extends pd{constructor({message:e}={}){super({message:e??"Request timed out."})}}class fO extends Ut{}class dO extends Ut{}class hO extends Ut{}class mO extends Ut{}class pO extends Ut{}class gO extends Ut{}class yO extends Ut{}class bO extends Ut{}class _O extends be{constructor(){super("Could not parse response content as the length limit was reached")}}class vO extends be{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var tf=function(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},Si=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},En;class yd{constructor(){En.set(this,void 0),this.buffer=new Uint8Array,tf(this,En,null,"f")}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?new TextEncoder().encode(e):e;let r=new Uint8Array(this.buffer.length+t.length);r.set(this.buffer),r.set(t,this.buffer.length),this.buffer=r;const i=[];let o;for(;(o=yL(this.buffer,Si(this,En,"f")))!=null;){if(o.carriage&&Si(this,En,"f")==null){tf(this,En,o.index,"f");continue}if(Si(this,En,"f")!=null&&(o.index!==Si(this,En,"f")+1||o.carriage)){i.push(this.decodeText(this.buffer.slice(0,Si(this,En,"f")-1))),this.buffer=this.buffer.slice(Si(this,En,"f")),tf(this,En,null,"f");continue}const l=Si(this,En,"f")!==null?o.preceding-1:o.preceding,c=this.decodeText(this.buffer.slice(0,l));i.push(c),this.buffer=this.buffer.slice(o.index),tf(this,En,null,"f")}return i}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new be(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new be(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new be("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}}En=new WeakMap;yd.NEWLINE_CHARS=new Set([`
`,"\r"]);yd.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function yL(n,e){for(let i=e??0;i<n.length;i++){if(n[i]===10)return{preceding:i,index:i+1,carriage:!1};if(n[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function bL(n){for(let r=0;r<n.length-1;r++){if(n[r]===10&&n[r+1]===10||n[r]===13&&n[r+1]===13)return r+2;if(n[r]===13&&n[r+1]===10&&r+3<n.length&&n[r+2]===13&&n[r+3]===10)return r+4}return-1}function wO(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}class xr{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let r=!1;async function*i(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let o=!1;try{for await(const l of _L(e,t))if(!o){if(l.data.startsWith("[DONE]")){o=!0;continue}if(l.event===null||l.event.startsWith("response.")||l.event.startsWith("transcript.")){let c;try{c=JSON.parse(l.data)}catch(d){throw console.error("Could not parse message into JSON:",l.data),console.error("From chunk:",l.raw),d}if(c&&c.error)throw new Ut(void 0,c.error,void 0,RO(e.headers));yield c}else{let c;try{c=JSON.parse(l.data)}catch(d){throw console.error("Could not parse message into JSON:",l.data),console.error("From chunk:",l.raw),d}if(l.event=="error")throw new Ut(void 0,c.error,c.message,void 0);yield{event:l.event,data:c}}}o=!0}catch(l){if(l instanceof Error&&l.name==="AbortError")return;throw l}finally{o||t.abort()}}return new xr(i,t)}static fromReadableStream(e,t){let r=!1;async function*i(){const l=new yd,c=wO(e);for await(const d of c)for(const h of l.decode(d))yield h;for(const d of l.flush())yield d}async function*o(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let l=!1;try{for await(const c of i())l||c&&(yield JSON.parse(c));l=!0}catch(c){if(c instanceof Error&&c.name==="AbortError")return;throw c}finally{l||t.abort()}}return new xr(o,t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],r=this.iterator(),i=o=>({next:()=>{if(o.length===0){const l=r.next();e.push(l),t.push(l)}return o.shift()}});return[new xr(()=>i(e),this.controller),new xr(()=>i(t),this.controller)]}toReadableStream(){const e=this;let t;const r=new TextEncoder;return new iO({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{const{value:o,done:l}=await t.next();if(l)return i.close();const c=r.encode(JSON.stringify(o)+`
`);i.enqueue(c)}catch(o){i.error(o)}},async cancel(){var i;await((i=t.return)==null?void 0:i.call(t))}})}}async function*_L(n,e){if(!n.body)throw e.abort(),new be("Attempted to iterate over a response with no body");const t=new wL,r=new yd,i=wO(n.body);for await(const o of vL(i))for(const l of r.decode(o)){const c=t.decode(l);c&&(yield c)}for(const o of r.flush()){const l=t.decode(o);l&&(yield l)}}async function*vL(n){let e=new Uint8Array;for await(const t of n){if(t==null)continue;const r=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?new TextEncoder().encode(t):t;let i=new Uint8Array(e.length+r.length);i.set(e),i.set(r,e.length),e=i;let o;for(;(o=bL(e))!==-1;)yield e.slice(0,o),e=e.slice(o)}e.length>0&&(yield e)}class wL{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,r,i]=SL(e,":");return i.startsWith(" ")&&(i=i.substring(1)),t==="event"?this.event=i:t==="data"&&this.data.push(i),null}}function SL(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}const SO=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function",AO=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&bd(n),bd=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",AL=n=>AO(n)||SO(n)||lO(n);async function TO(n,e,t){var i;if(n=await n,AO(n))return n;if(SO(n)){const o=await n.blob();e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()??"unknown_file");const l=bd(o)?[await o.arrayBuffer()]:[o];return new vy(l,e,t)}const r=await TL(n);if(e||(e=xL(n)??"unknown_file"),!(t!=null&&t.type)){const o=(i=r[0])==null?void 0:i.type;typeof o=="string"&&(t={...t,type:o})}return new vy(r,e,t)}async function TL(n){var t;let e=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)e.push(n);else if(bd(n))e.push(await n.arrayBuffer());else if(OL(n))for await(const r of n)e.push(r);else throw new Error(`Unexpected data type: ${typeof n}; constructor: ${(t=n==null?void 0:n.constructor)==null?void 0:t.name}; props: ${EL(n)}`);return e}function EL(n){return`[${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}function xL(n){var e;return wp(n.name)||wp(n.filename)||((e=wp(n.path))==null?void 0:e.split(/[\\/]/).pop())}const wp=n=>{if(typeof n=="string")return n;if(typeof Buffer<"u"&&n instanceof Buffer)return String(n)},OL=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function",XA=n=>n&&typeof n=="object"&&n.body&&n[Symbol.toStringTag]==="MultipartBody",Ws=async n=>{const e=await RL(n.body);return sO(e,n)},RL=async n=>{const e=new aO;return await Promise.all(Object.entries(n||{}).map(([t,r])=>wy(e,t,r))),e},wy=async(n,e,t)=>{if(t!==void 0){if(t==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")n.append(e,String(t));else if(AL(t)){const r=await TO(t);n.append(e,r)}else if(Array.isArray(t))await Promise.all(t.map(r=>wy(n,e+"[]",r)));else if(typeof t=="object")await Promise.all(Object.entries(t).map(([r,i])=>wy(n,`${e}[${r}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${t} instead`)}};var Zs={},CL=function(n,e,t,r,i){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t},PL=function(n,e,t,r){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},nf;cO();async function EO(n){var l;const{response:e}=n;if(n.options.stream)return Ba("response",e.status,e.url,e.headers,e.body),n.options.__streamClass?n.options.__streamClass.fromSSEResponse(e,n.controller):xr.fromSSEResponse(e,n.controller);if(e.status===204)return null;if(n.options.__binaryResponse)return e;const t=e.headers.get("content-type"),r=(l=t==null?void 0:t.split(";")[0])==null?void 0:l.trim();if((r==null?void 0:r.includes("application/json"))||(r==null?void 0:r.endsWith("+json"))){const c=await e.json();return Ba("response",e.status,e.url,e.headers,c),xO(c,e)}const o=await e.text();return Ba("response",e.status,e.url,e.headers,o),o}function xO(n,e){return!n||typeof n!="object"||Array.isArray(n)?n:Object.defineProperty(n,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}class _d extends Promise{constructor(e,t=EO){super(r=>{r(null)}),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new _d(this.responsePromise,async t=>xO(e(await this.parseResponse(t),t),t.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class NL{constructor({baseURL:e,maxRetries:t=2,timeout:r=6e5,httpAgent:i,fetch:o}){this.baseURL=e,this.maxRetries=Sp("maxRetries",t),this.timeout=Sp("timeout",r),this.httpAgent=i,this.fetch=o??rO}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...LL(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${BL()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,r){return this.request(Promise.resolve(r).then(async i=>{const o=i&&bd(i==null?void 0:i.body)?new DataView(await i.body.arrayBuffer()):(i==null?void 0:i.body)instanceof DataView?i.body:(i==null?void 0:i.body)instanceof ArrayBuffer?new DataView(i.body):i&&ArrayBuffer.isView(i==null?void 0:i.body)?new DataView(i.body.buffer):i==null?void 0:i.body;return{method:e,path:t,...i,body:o}}))}getAPIList(e,t,r){return this.requestAPIList(t,{method:"get",path:e,...r})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:t=0}={}){var S;const r={...e},{method:i,path:o,query:l,headers:c={}}=r,d=ArrayBuffer.isView(r.body)||r.__binaryRequest&&typeof r.body=="string"?r.body:XA(r.body)?r.body.body:r.body?JSON.stringify(r.body,null,2):null,h=this.calculateContentLength(d),m=this.buildURL(o,l);"timeout"in r&&Sp("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const g=r.httpAgent??this.httpAgent??oO(m),b=r.timeout+1e3;typeof((S=g==null?void 0:g.options)==null?void 0:S.timeout)=="number"&&b>(g.options.timeout??0)&&(g.options.timeout=b),this.idempotencyHeader&&i!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),c[this.idempotencyHeader]=e.idempotencyKey);const _=this.buildHeaders({options:r,headers:c,contentLength:h,retryCount:t});return{req:{method:i,...d&&{body:d},headers:_,...g&&{agent:g},signal:r.signal??null},url:m,timeout:r.timeout}}buildHeaders({options:e,headers:t,contentLength:r,retryCount:i}){const o={};r&&(o["content-length"]=r);const l=this.defaultHeaders(e);return WA(o,l),WA(o,t),XA(e.body)&&Bu!=="node"&&delete o["content-type"],af(l,"x-stainless-retry-count")===void 0&&af(t,"x-stainless-retry-count")===void 0&&(o["x-stainless-retry-count"]=String(i)),af(l,"x-stainless-timeout")===void 0&&af(t,"x-stainless-timeout")===void 0&&e.timeout&&(o["x-stainless-timeout"]=String(Math.trunc(e.timeout/1e3))),this.validateHeaders(o,t),o}async prepareOptions(e){}async prepareRequest(e,{url:t,options:r}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(t=>[...t])):{...e}:{}}makeStatusError(e,t,r,i){return Ut.generate(e,t,r,i)}request(e,t=null){return new _d(this.makeRequest(e,t))}async makeRequest(e,t){var g,b;const r=await e,i=r.maxRetries??this.maxRetries;t==null&&(t=i),await this.prepareOptions(r);const{req:o,url:l,timeout:c}=this.buildRequest(r,{retryCount:i-t});if(await this.prepareRequest(o,{url:l,options:r}),Ba("request",l,r,o.headers),(g=r.signal)!=null&&g.aborted)throw new Cn;const d=new AbortController,h=await this.fetchWithTimeout(l,o,c,d).catch(Sy);if(h instanceof Error){if((b=r.signal)!=null&&b.aborted)throw new Cn;if(t)return this.retryRequest(r,t);throw h.name==="AbortError"?new gd:new pd({cause:h})}const m=RO(h.headers);if(!h.ok){if(t&&this.shouldRetry(h)){const O=`retrying, ${t} attempts remaining`;return Ba(`response (error; ${O})`,h.status,l,m),this.retryRequest(r,t,m)}const _=await h.text().catch(O=>Sy(O).message),v=DL(_),S=v?void 0:_;throw Ba(`response (error; ${t?"(error; no more retries left)":"(error; not retryable)"})`,h.status,l,m,S),this.makeStatusError(h.status,v,S,m)}return{response:h,options:r,controller:d}}requestAPIList(e,t){const r=this.makeRequest(t,null);return new jL(this,r,e)}buildURL(e,t){const r=UL(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),i=this.defaultQuery();return CO(i)||(t={...i,...t}),typeof t=="object"&&t&&!Array.isArray(t)&&(r.search=this.stringifyQuery(t)),r.toString()}stringifyQuery(e){return Object.entries(e).filter(([t,r])=>typeof r<"u").map(([t,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(t)}=`;throw new be(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,t,r,i){const{signal:o,...l}=t||{};o&&o.addEventListener("abort",()=>i.abort());const c=setTimeout(()=>i.abort(),r),d={signal:i.signal,...l};return d.method&&(d.method=d.method.toUpperCase()),this.fetch.call(void 0,e,d).finally(()=>{clearTimeout(c)})}shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,r){let i;const o=r==null?void 0:r["retry-after-ms"];if(o){const c=parseFloat(o);Number.isNaN(c)||(i=c)}const l=r==null?void 0:r["retry-after"];if(l&&!i){const c=parseFloat(l);Number.isNaN(c)?i=Date.parse(l)-Date.now():i=c*1e3}if(!(i&&0<=i&&i<60*1e3)){const c=e.maxRetries??this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(t,c)}return await El(i),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){const o=t-e,l=Math.min(.5*Math.pow(2,o),8),c=1-Math.random()*.25;return l*c*1e3}getUserAgent(){return`${this.constructor.name}/JS ${ks}`}}class OO{constructor(e,t,r,i){nf.set(this,void 0),CL(this,nf,e),this.options=i,this.response=t,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new be("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const t={...this.options};if("params"in e&&typeof t.query=="object")t.query={...t.query,...e.params};else if("url"in e){const r=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(const[i,o]of r)e.url.searchParams.set(i,o);t.query=void 0,t.path=e.url.toString()}return await PL(this,nf,"f").requestAPIList(this.constructor,t)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(nf=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class jL extends _d{constructor(e,t,r){super(t,async i=>new r(e,i.response,await EO(i),i.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const t of e)yield t}}const RO=n=>new Proxy(Object.fromEntries(n.entries()),{get(e,t){const r=t.toString();return e[r.toLowerCase()]||e[r]}}),kL={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},ft=n=>typeof n=="object"&&n!==null&&!CO(n)&&Object.keys(n).every(e=>PO(kL,e)),ML=()=>{var e;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ks,"X-Stainless-OS":JA(Deno.build.os),"X-Stainless-Arch":KA(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((e=Deno.version)==null?void 0:e.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ks,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ks,"X-Stainless-OS":JA(process.platform),"X-Stainless-Arch":KA(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const n=IL();return n?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ks,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${n.browser}`,"X-Stainless-Runtime-Version":n.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ks,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function IL(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const r=t.exec(navigator.userAgent);if(r){const i=r[1]||0,o=r[2]||0,l=r[3]||0;return{browser:e,version:`${i}.${o}.${l}`}}}return null}const KA=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",JA=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let QA;const LL=()=>QA??(QA=ML()),DL=n=>{try{return JSON.parse(n)}catch{return}},$L=/^[a-z][a-z0-9+.-]*:/i,UL=n=>$L.test(n),El=n=>new Promise(e=>setTimeout(e,n)),Sp=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new be(`${n} must be an integer`);if(e<0)throw new be(`${n} must be a positive integer`);return e},Sy=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null)try{return new Error(JSON.stringify(n))}catch{}return new Error(n)},rf=n=>{var e,t,r,i;if(typeof process<"u")return((e=Zs==null?void 0:Zs[n])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(i=(r=(t=Deno.env)==null?void 0:t.get)==null?void 0:r.call(t,n))==null?void 0:i.trim()};function CO(n){if(!n)return!0;for(const e in n)return!1;return!0}function PO(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function WA(n,e){for(const t in e){if(!PO(e,t))continue;const r=t.toLowerCase();if(!r)continue;const i=e[t];i===null?delete n[r]:i!==void 0&&(n[r]=i)}}const eT=new Set(["authorization","api-key"]);function Ba(n,...e){if(typeof process<"u"&&(Zs==null?void 0:Zs.DEBUG)==="true"){const t=e.map(r=>{if(!r)return r;if(r.headers){const o={...r,headers:{...r.headers}};for(const l in r.headers)eT.has(l.toLowerCase())&&(o.headers[l]="REDACTED");return o}let i=null;for(const o in r)eT.has(o.toLowerCase())&&(i??(i={...r}),i[o]="REDACTED");return i??r});console.log(`OpenAI:DEBUG:${n}`,...t)}}const BL=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)}),zL=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",VL=n=>typeof(n==null?void 0:n.get)=="function",af=(n,e)=>{var r;const t=e.toLowerCase();if(VL(n)){const i=((r=e[0])==null?void 0:r.toUpperCase())+e.substring(1).replace(/([^\w])(\w)/g,(o,l,c)=>l+c.toUpperCase());for(const o of[e,t,e.toUpperCase(),i]){const l=n.get(o);if(l)return l}}for(const[i,o]of Object.entries(n))if(i.toLowerCase()===t)return Array.isArray(o)?(o.length<=1||console.warn(`Received ${o.length} entries for the ${e} header, using the first entry.`),o[0]):o},qL=n=>{if(typeof Buffer<"u"){const e=Buffer.from(n,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(n),t=e.length,r=new Uint8Array(t);for(let i=0;i<t;i++)r[i]=e.charCodeAt(i);return Array.from(new Float32Array(r.buffer))}};function Ap(n){return n!=null&&typeof n=="object"&&!Array.isArray(n)}class vd extends OO{constructor(e,t,r,i){super(e,t,r,i),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class Bt extends OO{constructor(e,t,r,i){super(e,t,r,i),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){var r;const e=this.getPaginatedItems();if(!e.length)return null;const t=(r=e[e.length-1])==null?void 0:r.id;return t?{params:{after:t}}:null}}class Se{constructor(e){this._client=e}}let NO=class extends Se{list(e,t={},r){return ft(t)?this.list(e,{},t):this._client.getAPIList(`/chat/completions/${e}/messages`,FL,{query:t,...r})}},wd=class extends Se{constructor(){super(...arguments),this.messages=new NO(this._client)}create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}retrieve(e,t){return this._client.get(`/chat/completions/${e}`,t)}update(e,t,r){return this._client.post(`/chat/completions/${e}`,{body:t,...r})}list(e={},t){return ft(e)?this.list({},e):this._client.getAPIList("/chat/completions",Sd,{query:e,...t})}del(e,t){return this._client.delete(`/chat/completions/${e}`,t)}};class Sd extends Bt{}class FL extends Bt{}wd.ChatCompletionsPage=Sd;wd.Messages=NO;let Ad=class extends Se{constructor(){super(...arguments),this.completions=new wd(this._client)}};Ad.Completions=wd;Ad.ChatCompletionsPage=Sd;class jO extends Se{create(e,t){return this._client.post("/audio/speech",{body:e,...t,headers:{Accept:"application/octet-stream",...t==null?void 0:t.headers},__binaryResponse:!0})}}class kO extends Se{create(e,t){return this._client.post("/audio/transcriptions",Ws({body:e,...t,stream:e.stream??!1,__metadata:{model:e.model}}))}}class MO extends Se{create(e,t){return this._client.post("/audio/translations",Ws({body:e,...t,__metadata:{model:e.model}}))}}class xl extends Se{constructor(){super(...arguments),this.transcriptions=new kO(this._client),this.translations=new MO(this._client),this.speech=new jO(this._client)}}xl.Transcriptions=kO;xl.Translations=MO;xl.Speech=jO;class Pb extends Se{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(`/batches/${e}`,t)}list(e={},t){return ft(e)?this.list({},e):this._client.getAPIList("/batches",Nb,{query:e,...t})}cancel(e,t){return this._client.post(`/batches/${e}/cancel`,t)}}class Nb extends Bt{}Pb.BatchesPage=Nb;var rr=function(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},at=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},Ay,xf,Of,xu,Ou,Rf,Ru,Wr,Cu,zf,Vf,Ms,IO;class jb{constructor(){Ay.add(this),this.controller=new AbortController,xf.set(this,void 0),Of.set(this,()=>{}),xu.set(this,()=>{}),Ou.set(this,void 0),Rf.set(this,()=>{}),Ru.set(this,()=>{}),Wr.set(this,{}),Cu.set(this,!1),zf.set(this,!1),Vf.set(this,!1),Ms.set(this,!1),rr(this,xf,new Promise((e,t)=>{rr(this,Of,e,"f"),rr(this,xu,t,"f")}),"f"),rr(this,Ou,new Promise((e,t)=>{rr(this,Rf,e,"f"),rr(this,Ru,t,"f")}),"f"),at(this,xf,"f").catch(()=>{}),at(this,Ou,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},at(this,Ay,"m",IO).bind(this))},0)}_connected(){this.ended||(at(this,Of,"f").call(this),this._emit("connect"))}get ended(){return at(this,Cu,"f")}get errored(){return at(this,zf,"f")}get aborted(){return at(this,Vf,"f")}abort(){this.controller.abort()}on(e,t){return(at(this,Wr,"f")[e]||(at(this,Wr,"f")[e]=[])).push({listener:t}),this}off(e,t){const r=at(this,Wr,"f")[e];if(!r)return this;const i=r.findIndex(o=>o.listener===t);return i>=0&&r.splice(i,1),this}once(e,t){return(at(this,Wr,"f")[e]||(at(this,Wr,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,r)=>{rr(this,Ms,!0,"f"),e!=="error"&&this.once("error",r),this.once(e,t)})}async done(){rr(this,Ms,!0,"f"),await at(this,Ou,"f")}_emit(e,...t){if(at(this,Cu,"f"))return;e==="end"&&(rr(this,Cu,!0,"f"),at(this,Rf,"f").call(this));const r=at(this,Wr,"f")[e];if(r&&(at(this,Wr,"f")[e]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...t))),e==="abort"){const i=t[0];!at(this,Ms,"f")&&!(r!=null&&r.length)&&Promise.reject(i),at(this,xu,"f").call(this,i),at(this,Ru,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=t[0];!at(this,Ms,"f")&&!(r!=null&&r.length)&&Promise.reject(i),at(this,xu,"f").call(this,i),at(this,Ru,"f").call(this,i),this._emit("end")}}_emitFinal(){}}xf=new WeakMap,Of=new WeakMap,xu=new WeakMap,Ou=new WeakMap,Rf=new WeakMap,Ru=new WeakMap,Wr=new WeakMap,Cu=new WeakMap,zf=new WeakMap,Vf=new WeakMap,Ms=new WeakMap,Ay=new WeakSet,IO=function(e){if(rr(this,zf,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new Cn),e instanceof Cn)return rr(this,Vf,!0,"f"),this._emit("abort",e);if(e instanceof be)return this._emit("error",e);if(e instanceof Error){const t=new be(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new be(String(e)))};var de=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},Tn=function(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},$t,Ty,Tr,Cf,ar,Ri,zs,Ei,qf,On,Pf,Nf,zu,Pu,Nu,tT,nT,rT,aT,iT,sT,oT;class ir extends jb{constructor(){super(...arguments),$t.add(this),Ty.set(this,[]),Tr.set(this,{}),Cf.set(this,{}),ar.set(this,void 0),Ri.set(this,void 0),zs.set(this,void 0),Ei.set(this,void 0),qf.set(this,void 0),On.set(this,void 0),Pf.set(this,void 0),Nf.set(this,void 0),zu.set(this,void 0)}[(Ty=new WeakMap,Tr=new WeakMap,Cf=new WeakMap,ar=new WeakMap,Ri=new WeakMap,zs=new WeakMap,Ei=new WeakMap,qf=new WeakMap,On=new WeakMap,Pf=new WeakMap,Nf=new WeakMap,zu=new WeakMap,$t=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("event",i=>{const o=t.shift();o?o.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of t)i.resolve(void 0);t.length=0}),this.on("abort",i=>{r=!0;for(const o of t)o.reject(i);t.length=0}),this.on("error",i=>{r=!0;for(const o of t)o.reject(i);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((o,l)=>t.push({resolve:o,reject:l})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new ir;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){var o;const r=t==null?void 0:t.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const i=xr.fromReadableStream(e,this.controller);for await(const l of i)de(this,$t,"m",Pu).call(this,l);if((o=i.controller.signal)!=null&&o.aborted)throw new Cn;return this._addRun(de(this,$t,"m",Nu).call(this))}toReadableStream(){return new xr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,r,i,o){const l=new ir;return l._run(()=>l._runToolAssistantStream(e,t,r,i,{...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"stream"}})),l}async _createToolAssistantStream(e,t,r,i,o){var h;const l=o==null?void 0:o.signal;l&&(l.aborted&&this.controller.abort(),l.addEventListener("abort",()=>this.controller.abort()));const c={...i,stream:!0},d=await e.submitToolOutputs(t,r,c,{...o,signal:this.controller.signal});this._connected();for await(const m of d)de(this,$t,"m",Pu).call(this,m);if((h=d.controller.signal)!=null&&h.aborted)throw new Cn;return this._addRun(de(this,$t,"m",Nu).call(this))}static createThreadAssistantStream(e,t,r){const i=new ir;return i._run(()=>i._threadAssistantStream(e,t,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(e,t,r,i){const o=new ir;return o._run(()=>o._runAssistantStream(e,t,r,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),o}currentEvent(){return de(this,Pf,"f")}currentRun(){return de(this,Nf,"f")}currentMessageSnapshot(){return de(this,ar,"f")}currentRunStepSnapshot(){return de(this,zu,"f")}async finalRunSteps(){return await this.done(),Object.values(de(this,Tr,"f"))}async finalMessages(){return await this.done(),Object.values(de(this,Cf,"f"))}async finalRun(){if(await this.done(),!de(this,Ri,"f"))throw Error("Final run was not received.");return de(this,Ri,"f")}async _createThreadAssistantStream(e,t,r){var c;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const o={...t,stream:!0},l=await e.createAndRun(o,{...r,signal:this.controller.signal});this._connected();for await(const d of l)de(this,$t,"m",Pu).call(this,d);if((c=l.controller.signal)!=null&&c.aborted)throw new Cn;return this._addRun(de(this,$t,"m",Nu).call(this))}async _createAssistantStream(e,t,r,i){var d;const o=i==null?void 0:i.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const l={...r,stream:!0},c=await e.create(t,l,{...i,signal:this.controller.signal});this._connected();for await(const h of c)de(this,$t,"m",Pu).call(this,h);if((d=c.controller.signal)!=null&&d.aborted)throw new Cn;return this._addRun(de(this,$t,"m",Nu).call(this))}static accumulateDelta(e,t){for(const[r,i]of Object.entries(t)){if(!e.hasOwnProperty(r)){e[r]=i;continue}let o=e[r];if(o==null){e[r]=i;continue}if(r==="index"||r==="type"){e[r]=i;continue}if(typeof o=="string"&&typeof i=="string")o+=i;else if(typeof o=="number"&&typeof i=="number")o+=i;else if(Ap(o)&&Ap(i))o=this.accumulateDelta(o,i);else if(Array.isArray(o)&&Array.isArray(i)){if(o.every(l=>typeof l=="string"||typeof l=="number")){o.push(...i);continue}for(const l of i){if(!Ap(l))throw new Error(`Expected array delta entry to be an object but got: ${l}`);const c=l.index;if(c==null)throw console.error(l),new Error("Expected array delta entry to have an `index` property");if(typeof c!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${c}`);const d=o[c];d==null?o.push(l):o[c]=this.accumulateDelta(d,l)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${i}, accValue: ${o}`);e[r]=o}return e}_addRun(e){return e}async _threadAssistantStream(e,t,r){return await this._createThreadAssistantStream(t,e,r)}async _runAssistantStream(e,t,r,i){return await this._createAssistantStream(t,e,r,i)}async _runToolAssistantStream(e,t,r,i,o){return await this._createToolAssistantStream(r,e,t,i,o)}}Pu=function(e){if(!this.ended)switch(Tn(this,Pf,e,"f"),de(this,$t,"m",rT).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":de(this,$t,"m",oT).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":de(this,$t,"m",nT).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":de(this,$t,"m",tT).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Nu=function(){if(this.ended)throw new be("stream has ended, this shouldn't happen");if(!de(this,Ri,"f"))throw Error("Final run has not been received");return de(this,Ri,"f")},tT=function(e){const[t,r]=de(this,$t,"m",iT).call(this,e,de(this,ar,"f"));Tn(this,ar,t,"f"),de(this,Cf,"f")[t.id]=t;for(const i of r){const o=t.content[i.index];(o==null?void 0:o.type)=="text"&&this._emit("textCreated",o.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const i of e.data.delta.content){if(i.type=="text"&&i.text){let o=i.text,l=t.content[i.index];if(l&&l.type=="text")this._emit("textDelta",o,l.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=de(this,zs,"f")){if(de(this,Ei,"f"))switch(de(this,Ei,"f").type){case"text":this._emit("textDone",de(this,Ei,"f").text,de(this,ar,"f"));break;case"image_file":this._emit("imageFileDone",de(this,Ei,"f").image_file,de(this,ar,"f"));break}Tn(this,zs,i.index,"f")}Tn(this,Ei,t.content[i.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(de(this,zs,"f")!==void 0){const i=e.data.content[de(this,zs,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,de(this,ar,"f"));break;case"text":this._emit("textDone",i.text,de(this,ar,"f"));break}}de(this,ar,"f")&&this._emit("messageDone",e.data),Tn(this,ar,void 0,"f")}},nT=function(e){const t=de(this,$t,"m",aT).call(this,e);switch(Tn(this,zu,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&t.step_details.type=="tool_calls")for(const o of r.step_details.tool_calls)o.index==de(this,qf,"f")?this._emit("toolCallDelta",o,t.step_details.tool_calls[o.index]):(de(this,On,"f")&&this._emit("toolCallDone",de(this,On,"f")),Tn(this,qf,o.index,"f"),Tn(this,On,t.step_details.tool_calls[o.index],"f"),de(this,On,"f")&&this._emit("toolCallCreated",de(this,On,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Tn(this,zu,void 0,"f"),e.data.step_details.type=="tool_calls"&&de(this,On,"f")&&(this._emit("toolCallDone",de(this,On,"f")),Tn(this,On,void 0,"f")),this._emit("runStepDone",e.data,t);break}},rT=function(e){de(this,Ty,"f").push(e),this._emit("event",e)},aT=function(e){switch(e.event){case"thread.run.step.created":return de(this,Tr,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=de(this,Tr,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const i=ir.accumulateDelta(t,r.delta);de(this,Tr,"f")[e.data.id]=i}return de(this,Tr,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":de(this,Tr,"f")[e.data.id]=e.data;break}if(de(this,Tr,"f")[e.data.id])return de(this,Tr,"f")[e.data.id];throw new Error("No snapshot available")},iT=function(e,t){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=e.data;if(i.delta.content)for(const o of i.delta.content)if(o.index in t.content){let l=t.content[o.index];t.content[o.index]=de(this,$t,"m",sT).call(this,o,l)}else t.content[o.index]=o,r.push(o);return[t,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},sT=function(e,t){return ir.accumulateDelta(t,e)},oT=function(e){switch(Tn(this,Nf,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":Tn(this,Ri,e.data,"f"),de(this,On,"f")&&(this._emit("toolCallDone",de(this,On,"f")),Tn(this,On,void 0,"f"));break}};class kb extends Se{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,r){return this._client.post(`/assistants/${e}`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e={},t){return ft(e)?this.list({},e):this._client.getAPIList("/assistants",Mb,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}del(e,t){return this._client.delete(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class Mb extends Bt{}kb.AssistantsPage=Mb;function uT(n){return typeof n.parse=="function"}const Gs=n=>(n==null?void 0:n.role)==="assistant",LO=n=>(n==null?void 0:n.role)==="function",DO=n=>(n==null?void 0:n.role)==="tool";function HL(n,e){const t={...n};return Object.defineProperties(t,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:e,enumerable:!1}}),t}function Ib(n){return(n==null?void 0:n.$brand)==="auto-parseable-response-format"}function Ol(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function ZL(n,e){return!e||!$O(e)?{...n,choices:n.choices.map(t=>({...t,message:{...t.message,parsed:null,...t.message.tool_calls?{tool_calls:t.message.tool_calls}:void 0}}))}:Lb(n,e)}function Lb(n,e){const t=n.choices.map(r=>{var i;if(r.finish_reason==="length")throw new _O;if(r.finish_reason==="content_filter")throw new vO;return{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:((i=r.message.tool_calls)==null?void 0:i.map(o=>YL(e,o)))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?GL(e,r.message.content):null}}});return{...n,choices:t}}function GL(n,e){var t,r;return((t=n.response_format)==null?void 0:t.type)!=="json_schema"?null:((r=n.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in n.response_format?n.response_format.$parseRaw(e):JSON.parse(e):null}function YL(n,e){var r;const t=(r=n.tools)==null?void 0:r.find(i=>{var o;return((o=i.function)==null?void 0:o.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:Ol(t)?t.$parseRaw(e.function.arguments):t!=null&&t.function.strict?JSON.parse(e.function.arguments):null}}}function XL(n,e){var r;if(!n)return!1;const t=(r=n.tools)==null?void 0:r.find(i=>{var o;return((o=i.function)==null?void 0:o.name)===e.function.name});return Ol(t)||(t==null?void 0:t.function.strict)||!1}function $O(n){var e;return Ib(n.response_format)?!0:((e=n.tools)==null?void 0:e.some(t=>Ol(t)||t.type==="function"&&t.function.strict===!0))??!1}function KL(n){for(const e of n??[]){if(e.type!=="function")throw new be(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new be(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var fn=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},Ht,Ey,Ff,xy,Oy,Ry,UO,Cy;const lT=10;class BO extends jb{constructor(){super(...arguments),Ht.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var r;this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=(r=e.choices[0])==null?void 0:r.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),(LO(e)||DO(e))&&e.content)this._emit("functionCallResult",e.content);else if(Gs(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(Gs(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new be("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),fn(this,Ht,"m",Ey).call(this)}async finalMessage(){return await this.done(),fn(this,Ht,"m",Ff).call(this)}async finalFunctionCall(){return await this.done(),fn(this,Ht,"m",xy).call(this)}async finalFunctionCallResult(){return await this.done(),fn(this,Ht,"m",Oy).call(this)}async totalUsage(){return await this.done(),fn(this,Ht,"m",Ry).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=fn(this,Ht,"m",Ff).call(this);t&&this._emit("finalMessage",t);const r=fn(this,Ht,"m",Ey).call(this);r&&this._emit("finalContent",r);const i=fn(this,Ht,"m",xy).call(this);i&&this._emit("finalFunctionCall",i);const o=fn(this,Ht,"m",Oy).call(this);o!=null&&this._emit("finalFunctionCallResult",o),this._chatCompletions.some(l=>l.usage)&&this._emit("totalUsage",fn(this,Ht,"m",Ry).call(this))}async _createChatCompletion(e,t,r){const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),fn(this,Ht,"m",UO).call(this,t);const o=await e.chat.completions.create({...t,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Lb(o,t))}async _runChatCompletion(e,t,r){for(const i of t.messages)this._addMessage(i,!1);return await this._createChatCompletion(e,t,r)}async _runFunctions(e,t,r){var b;const i="function",{function_call:o="auto",stream:l,...c}=t,d=typeof o!="string"&&(o==null?void 0:o.name),{maxChatCompletions:h=lT}=r||{},m={};for(const _ of t.functions)m[_.name||_.function.name]=_;const g=t.functions.map(_=>({name:_.name||_.function.name,parameters:_.parameters,description:_.description}));for(const _ of t.messages)this._addMessage(_,!1);for(let _=0;_<h;++_){const S=(b=(await this._createChatCompletion(e,{...c,function_call:o,functions:g,messages:[...this.messages]},r)).choices[0])==null?void 0:b.message;if(!S)throw new be("missing message in ChatCompletion response");if(!S.function_call)return;const{name:A,arguments:E}=S.function_call,O=m[A];if(O){if(d&&d!==A){const z=`Invalid function_call: ${JSON.stringify(A)}. ${JSON.stringify(d)} requested. Please try again`;this._addMessage({role:i,name:A,content:z});continue}}else{const z=`Invalid function_call: ${JSON.stringify(A)}. Available options are: ${g.map(H=>JSON.stringify(H.name)).join(", ")}. Please try again`;this._addMessage({role:i,name:A,content:z});continue}let x;try{x=uT(O)?await O.parse(E):E}catch(z){this._addMessage({role:i,name:A,content:z instanceof Error?z.message:String(z)});continue}const j=await O.function(x,this),P=fn(this,Ht,"m",Cy).call(this,j);if(this._addMessage({role:i,name:A,content:P}),d)return}}async _runTools(e,t,r){var _,v,S;const i="tool",{tool_choice:o="auto",stream:l,...c}=t,d=typeof o!="string"&&((_=o==null?void 0:o.function)==null?void 0:_.name),{maxChatCompletions:h=lT}=r||{},m=t.tools.map(A=>{if(Ol(A)){if(!A.$callback)throw new be("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:A.$callback,name:A.function.name,description:A.function.description||"",parameters:A.function.parameters,parse:A.$parseRaw,strict:!0}}}return A}),g={};for(const A of m)A.type==="function"&&(g[A.function.name||A.function.function.name]=A.function);const b="tools"in t?m.map(A=>A.type==="function"?{type:"function",function:{name:A.function.name||A.function.function.name,parameters:A.function.parameters,description:A.function.description,strict:A.function.strict}}:A):void 0;for(const A of t.messages)this._addMessage(A,!1);for(let A=0;A<h;++A){const O=(v=(await this._createChatCompletion(e,{...c,tool_choice:o,tools:b,messages:[...this.messages]},r)).choices[0])==null?void 0:v.message;if(!O)throw new be("missing message in ChatCompletion response");if(!((S=O.tool_calls)!=null&&S.length))return;for(const x of O.tool_calls){if(x.type!=="function")continue;const j=x.id,{name:P,arguments:z}=x.function,H=g[P];if(H){if(d&&d!==P){const me=`Invalid tool_call: ${JSON.stringify(P)}. ${JSON.stringify(d)} requested. Please try again`;this._addMessage({role:i,tool_call_id:j,content:me});continue}}else{const me=`Invalid tool_call: ${JSON.stringify(P)}. Available options are: ${Object.keys(g).map(De=>JSON.stringify(De)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:j,content:me});continue}let V;try{V=uT(H)?await H.parse(z):z}catch(me){const De=me instanceof Error?me.message:String(me);this._addMessage({role:i,tool_call_id:j,content:De});continue}const ie=await H.function(V,this),he=fn(this,Ht,"m",Cy).call(this,ie);if(this._addMessage({role:i,tool_call_id:j,content:he}),d)return}}}}Ht=new WeakSet,Ey=function(){return fn(this,Ht,"m",Ff).call(this).content??null},Ff=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(Gs(t)){const{function_call:r,...i}=t,o={...i,content:t.content??null,refusal:t.refusal??null};return r&&(o.function_call=r),o}}throw new be("stream ended without producing a ChatCompletionMessage with role=assistant")},xy=function(){var e,t;for(let r=this.messages.length-1;r>=0;r--){const i=this.messages[r];if(Gs(i)&&(i!=null&&i.function_call))return i.function_call;if(Gs(i)&&((e=i==null?void 0:i.tool_calls)!=null&&e.length))return(t=i.tool_calls.at(-1))==null?void 0:t.function}},Oy=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(LO(t)&&t.content!=null||DO(t)&&t.content!=null&&typeof t.content=="string"&&this.messages.some(r=>{var i;return r.role==="assistant"&&((i=r.tool_calls)==null?void 0:i.some(o=>o.type==="function"&&o.id===t.tool_call_id))}))return t.content}},Ry=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},UO=function(e){if(e.n!=null&&e.n>1)throw new be("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},Cy=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class el extends BO{static runFunctions(e,t,r){const i=new el,o={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(e,t,o)),i}static runTools(e,t,r){const i=new el,o={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,t,o)),i}_addMessage(e,t=!0){super._addMessage(e,t),Gs(e)&&e.content&&this._emit("content",e.content)}}const zO=1,VO=2,qO=4,FO=8,HO=16,ZO=32,GO=64,YO=128,XO=256,KO=YO|XO,JO=HO|ZO|KO|GO,QO=zO|VO|JO,WO=qO|FO,JL=QO|WO,Pt={STR:zO,NUM:VO,ARR:qO,OBJ:FO,NULL:HO,BOOL:ZO,NAN:GO,INFINITY:YO,MINUS_INFINITY:XO,INF:KO,SPECIAL:JO,ATOM:QO,COLLECTION:WO,ALL:JL};class QL extends Error{}class WL extends Error{}function eD(n,e=Pt.ALL){if(typeof n!="string")throw new TypeError(`expecting str, got ${typeof n}`);if(!n.trim())throw new Error(`${n} is empty`);return tD(n.trim(),e)}const tD=(n,e)=>{const t=n.length;let r=0;const i=b=>{throw new QL(`${b} at position ${r}`)},o=b=>{throw new WL(`${b} at position ${r}`)},l=()=>(g(),r>=t&&i("Unexpected end of input"),n[r]==='"'?c():n[r]==="{"?d():n[r]==="["?h():n.substring(r,r+4)==="null"||Pt.NULL&e&&t-r<4&&"null".startsWith(n.substring(r))?(r+=4,null):n.substring(r,r+4)==="true"||Pt.BOOL&e&&t-r<4&&"true".startsWith(n.substring(r))?(r+=4,!0):n.substring(r,r+5)==="false"||Pt.BOOL&e&&t-r<5&&"false".startsWith(n.substring(r))?(r+=5,!1):n.substring(r,r+8)==="Infinity"||Pt.INFINITY&e&&t-r<8&&"Infinity".startsWith(n.substring(r))?(r+=8,1/0):n.substring(r,r+9)==="-Infinity"||Pt.MINUS_INFINITY&e&&1<t-r&&t-r<9&&"-Infinity".startsWith(n.substring(r))?(r+=9,-1/0):n.substring(r,r+3)==="NaN"||Pt.NAN&e&&t-r<3&&"NaN".startsWith(n.substring(r))?(r+=3,NaN):m()),c=()=>{const b=r;let _=!1;for(r++;r<t&&(n[r]!=='"'||_&&n[r-1]==="\\");)_=n[r]==="\\"?!_:!1,r++;if(n.charAt(r)=='"')try{return JSON.parse(n.substring(b,++r-Number(_)))}catch(v){o(String(v))}else if(Pt.STR&e)try{return JSON.parse(n.substring(b,r-Number(_))+'"')}catch{return JSON.parse(n.substring(b,n.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},d=()=>{r++,g();const b={};try{for(;n[r]!=="}";){if(g(),r>=t&&Pt.OBJ&e)return b;const _=c();g(),r++;try{const v=l();Object.defineProperty(b,_,{value:v,writable:!0,enumerable:!0,configurable:!0})}catch(v){if(Pt.OBJ&e)return b;throw v}g(),n[r]===","&&r++}}catch{if(Pt.OBJ&e)return b;i("Expected '}' at end of object")}return r++,b},h=()=>{r++;const b=[];try{for(;n[r]!=="]";)b.push(l()),g(),n[r]===","&&r++}catch{if(Pt.ARR&e)return b;i("Expected ']' at end of array")}return r++,b},m=()=>{if(r===0){n==="-"&&Pt.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(n)}catch(_){if(Pt.NUM&e)try{return n[n.length-1]==="."?JSON.parse(n.substring(0,n.lastIndexOf("."))):JSON.parse(n.substring(0,n.lastIndexOf("e")))}catch{}o(String(_))}}const b=r;for(n[r]==="-"&&r++;n[r]&&!",]}".includes(n[r]);)r++;r==t&&!(Pt.NUM&e)&&i("Unterminated number literal");try{return JSON.parse(n.substring(b,r))}catch{n.substring(b,r)==="-"&&Pt.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(n.substring(b,n.lastIndexOf("e")))}catch(v){o(String(v))}}},g=()=>{for(;r<t&&` 
\r	`.includes(n[r]);)r++};return l()},cT=n=>eD(n,Pt.ALL^Pt.NUM);var Os=function(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},Ke=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},St,Kr,Rs,ja,Tp,sf,Ep,xp,Op,of,Rp,fT;class tl extends BO{constructor(e){super(),St.add(this),Kr.set(this,void 0),Rs.set(this,void 0),ja.set(this,void 0),Os(this,Kr,e,"f"),Os(this,Rs,[],"f")}get currentChatCompletionSnapshot(){return Ke(this,ja,"f")}static fromReadableStream(e){const t=new tl(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,r){const i=new tl(t);return i._run(()=>i._runChatCompletion(e,{...t,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(e,t,r){var l;super._createChatCompletion;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Ke(this,St,"m",Tp).call(this);const o=await e.chat.completions.create({...t,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const c of o)Ke(this,St,"m",Ep).call(this,c);if((l=o.controller.signal)!=null&&l.aborted)throw new Cn;return this._addChatCompletion(Ke(this,St,"m",of).call(this))}async _fromReadableStream(e,t){var l;const r=t==null?void 0:t.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),Ke(this,St,"m",Tp).call(this),this._connected();const i=xr.fromReadableStream(e,this.controller);let o;for await(const c of i)o&&o!==c.id&&this._addChatCompletion(Ke(this,St,"m",of).call(this)),Ke(this,St,"m",Ep).call(this,c),o=c.id;if((l=i.controller.signal)!=null&&l.aborted)throw new Cn;return this._addChatCompletion(Ke(this,St,"m",of).call(this))}[(Kr=new WeakMap,Rs=new WeakMap,ja=new WeakMap,St=new WeakSet,Tp=function(){this.ended||Os(this,ja,void 0,"f")},sf=function(t){let r=Ke(this,Rs,"f")[t.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},Ke(this,Rs,"f")[t.index]=r,r)},Ep=function(t){var i,o,l,c,d,h,m,g,b,_,v,S,A,E,O;if(this.ended)return;const r=Ke(this,St,"m",fT).call(this,t);this._emit("chunk",t,r);for(const x of t.choices){const j=r.choices[x.index];x.delta.content!=null&&((i=j.message)==null?void 0:i.role)==="assistant"&&((o=j.message)!=null&&o.content)&&(this._emit("content",x.delta.content,j.message.content),this._emit("content.delta",{delta:x.delta.content,snapshot:j.message.content,parsed:j.message.parsed})),x.delta.refusal!=null&&((l=j.message)==null?void 0:l.role)==="assistant"&&((c=j.message)!=null&&c.refusal)&&this._emit("refusal.delta",{delta:x.delta.refusal,snapshot:j.message.refusal}),((d=x.logprobs)==null?void 0:d.content)!=null&&((h=j.message)==null?void 0:h.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(m=x.logprobs)==null?void 0:m.content,snapshot:((g=j.logprobs)==null?void 0:g.content)??[]}),((b=x.logprobs)==null?void 0:b.refusal)!=null&&((_=j.message)==null?void 0:_.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(v=x.logprobs)==null?void 0:v.refusal,snapshot:((S=j.logprobs)==null?void 0:S.refusal)??[]});const P=Ke(this,St,"m",sf).call(this,j);j.finish_reason&&(Ke(this,St,"m",Op).call(this,j),P.current_tool_call_index!=null&&Ke(this,St,"m",xp).call(this,j,P.current_tool_call_index));for(const z of x.delta.tool_calls??[])P.current_tool_call_index!==z.index&&(Ke(this,St,"m",Op).call(this,j),P.current_tool_call_index!=null&&Ke(this,St,"m",xp).call(this,j,P.current_tool_call_index)),P.current_tool_call_index=z.index;for(const z of x.delta.tool_calls??[]){const H=(A=j.message.tool_calls)==null?void 0:A[z.index];H!=null&&H.type&&((H==null?void 0:H.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(E=H.function)==null?void 0:E.name,index:z.index,arguments:H.function.arguments,parsed_arguments:H.function.parsed_arguments,arguments_delta:((O=z.function)==null?void 0:O.arguments)??""}):(H==null||H.type,void 0))}}},xp=function(t,r){var l,c,d;if(Ke(this,St,"m",sf).call(this,t).done_tool_calls.has(r))return;const o=(l=t.message.tool_calls)==null?void 0:l[r];if(!o)throw new Error("no tool call snapshot");if(!o.type)throw new Error("tool call snapshot missing `type`");if(o.type==="function"){const h=(d=(c=Ke(this,Kr,"f"))==null?void 0:c.tools)==null?void 0:d.find(m=>m.type==="function"&&m.function.name===o.function.name);this._emit("tool_calls.function.arguments.done",{name:o.function.name,index:r,arguments:o.function.arguments,parsed_arguments:Ol(h)?h.$parseRaw(o.function.arguments):h!=null&&h.function.strict?JSON.parse(o.function.arguments):null})}else o.type},Op=function(t){var i,o;const r=Ke(this,St,"m",sf).call(this,t);if(t.message.content&&!r.content_done){r.content_done=!0;const l=Ke(this,St,"m",Rp).call(this);this._emit("content.done",{content:t.message.content,parsed:l?l.$parseRaw(t.message.content):null})}t.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:t.message.refusal})),(i=t.logprobs)!=null&&i.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:t.logprobs.content})),(o=t.logprobs)!=null&&o.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:t.logprobs.refusal}))},of=function(){if(this.ended)throw new be("stream has ended, this shouldn't happen");const t=Ke(this,ja,"f");if(!t)throw new be("request ended without sending any chunks");return Os(this,ja,void 0,"f"),Os(this,Rs,[],"f"),nD(t,Ke(this,Kr,"f"))},Rp=function(){var r;const t=(r=Ke(this,Kr,"f"))==null?void 0:r.response_format;return Ib(t)?t:null},fT=function(t){var r,i,o,l;let c=Ke(this,ja,"f");const{choices:d,...h}=t;c?Object.assign(c,h):c=Os(this,ja,{...h,choices:[]},"f");for(const{delta:m,finish_reason:g,index:b,logprobs:_=null,...v}of t.choices){let S=c.choices[b];if(S||(S=c.choices[b]={finish_reason:g,index:b,message:{},logprobs:_,...v}),_)if(!S.logprobs)S.logprobs=Object.assign({},_);else{const{content:z,refusal:H,...V}=_;Object.assign(S.logprobs,V),z&&((r=S.logprobs).content??(r.content=[]),S.logprobs.content.push(...z)),H&&((i=S.logprobs).refusal??(i.refusal=[]),S.logprobs.refusal.push(...H))}if(g&&(S.finish_reason=g,Ke(this,Kr,"f")&&$O(Ke(this,Kr,"f")))){if(g==="length")throw new _O;if(g==="content_filter")throw new vO}if(Object.assign(S,v),!m)continue;const{content:A,refusal:E,function_call:O,role:x,tool_calls:j,...P}=m;if(Object.assign(S.message,P),E&&(S.message.refusal=(S.message.refusal||"")+E),x&&(S.message.role=x),O&&(S.message.function_call?(O.name&&(S.message.function_call.name=O.name),O.arguments&&((o=S.message.function_call).arguments??(o.arguments=""),S.message.function_call.arguments+=O.arguments)):S.message.function_call=O),A&&(S.message.content=(S.message.content||"")+A,!S.message.refusal&&Ke(this,St,"m",Rp).call(this)&&(S.message.parsed=cT(S.message.content))),j){S.message.tool_calls||(S.message.tool_calls=[]);for(const{index:z,id:H,type:V,function:ie,...he}of j){const me=(l=S.message.tool_calls)[z]??(l[z]={});Object.assign(me,he),H&&(me.id=H),V&&(me.type=V),ie&&(me.function??(me.function={name:ie.name??"",arguments:""})),ie!=null&&ie.name&&(me.function.name=ie.name),ie!=null&&ie.arguments&&(me.function.arguments+=ie.arguments,XL(Ke(this,Kr,"f"),me)&&(me.function.parsed_arguments=cT(me.function.arguments)))}}}return c},Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("chunk",i=>{const o=t.shift();o?o.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of t)i.resolve(void 0);t.length=0}),this.on("abort",i=>{r=!0;for(const o of t)o.reject(i);t.length=0}),this.on("error",i=>{r=!0;for(const o of t)o.reject(i);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((o,l)=>t.push({resolve:o,reject:l})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new xr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function nD(n,e){const{id:t,choices:r,created:i,model:o,system_fingerprint:l,...c}=n,d={...c,id:t,choices:r.map(({message:h,finish_reason:m,index:g,logprobs:b,..._})=>{if(!m)throw new be(`missing finish_reason for choice ${g}`);const{content:v=null,function_call:S,tool_calls:A,...E}=h,O=h.role;if(!O)throw new be(`missing role for choice ${g}`);if(S){const{arguments:x,name:j}=S;if(x==null)throw new be(`missing function_call.arguments for choice ${g}`);if(!j)throw new be(`missing function_call.name for choice ${g}`);return{..._,message:{content:v,function_call:{arguments:x,name:j},role:O,refusal:h.refusal??null},finish_reason:m,index:g,logprobs:b}}return A?{..._,index:g,finish_reason:m,logprobs:b,message:{...E,role:O,content:v,refusal:h.refusal??null,tool_calls:A.map((x,j)=>{const{function:P,type:z,id:H,...V}=x,{arguments:ie,name:he,...me}=P||{};if(H==null)throw new be(`missing choices[${g}].tool_calls[${j}].id
${uf(n)}`);if(z==null)throw new be(`missing choices[${g}].tool_calls[${j}].type
${uf(n)}`);if(he==null)throw new be(`missing choices[${g}].tool_calls[${j}].function.name
${uf(n)}`);if(ie==null)throw new be(`missing choices[${g}].tool_calls[${j}].function.arguments
${uf(n)}`);return{...V,id:H,type:z,function:{...me,name:he,arguments:ie}}})}}:{..._,message:{...E,content:v,role:O,refusal:h.refusal??null},finish_reason:m,index:g,logprobs:b}}),created:i,model:o,object:"chat.completion",...l?{system_fingerprint:l}:{}};return ZL(d,e)}function uf(n){return JSON.stringify(n)}class Ys extends tl{static fromReadableStream(e){const t=new Ys(null);return t._run(()=>t._fromReadableStream(e)),t}static runFunctions(e,t,r){const i=new Ys(null),o={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(e,t,o)),i}static runTools(e,t,r){const i=new Ys(t),o={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,t,o)),i}}let eR=class extends Se{parse(e,t){return KL(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t==null?void 0:t.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(r=>Lb(r,e))}runFunctions(e,t){return e.stream?Ys.runFunctions(this._client,e,t):el.runFunctions(this._client,e,t)}runTools(e,t){return e.stream?Ys.runTools(this._client,e,t):el.runTools(this._client,e,t)}stream(e,t){return tl.createChatCompletion(this._client,e,t)}};class Py extends Se{constructor(){super(...arguments),this.completions=new eR(this._client)}}(function(n){n.Completions=eR})(Py||(Py={}));class tR extends Se{create(e,t){return this._client.post("/realtime/sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class nR extends Se{create(e,t){return this._client.post("/realtime/transcription_sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class Td extends Se{constructor(){super(...arguments),this.sessions=new tR(this._client),this.transcriptionSessions=new nR(this._client)}}Td.Sessions=tR;Td.TranscriptionSessions=nR;class Db extends Se{create(e,t,r){return this._client.post(`/threads/${e}/messages`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,t,r){return this._client.get(`/threads/${e}/messages/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,t,r,i){return this._client.post(`/threads/${e}/messages/${t}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e,t={},r){return ft(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/messages`,$b,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,t,r){return this._client.delete(`/threads/${e}/messages/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class $b extends Bt{}Db.MessagesPage=$b;class Ub extends Se{retrieve(e,t,r,i={},o){return ft(i)?this.retrieve(e,t,r,{},i):this._client.get(`/threads/${e}/runs/${t}/steps/${r}`,{query:i,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}list(e,t,r={},i){return ft(r)?this.list(e,t,{},r):this._client.getAPIList(`/threads/${e}/runs/${t}/steps`,Bb,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}}class Bb extends Bt{}Ub.RunStepsPage=Bb;let Rl=class extends Se{constructor(){super(...arguments),this.steps=new Ub(this._client)}create(e,t,r){const{include:i,...o}=t;return this._client.post(`/threads/${e}/runs`,{query:{include:i},body:o,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers},stream:t.stream??!1})}retrieve(e,t,r){return this._client.get(`/threads/${e}/runs/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,t,r,i){return this._client.post(`/threads/${e}/runs/${t}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e,t={},r){return ft(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/runs`,zb,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(e,t,r){return this._client.post(`/threads/${e}/runs/${t}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,t,r){const i=await this.create(e,t,r);return await this.poll(e,i.id,r)}createAndStream(e,t,r){return ir.createAssistantStream(e,this._client.beta.threads.runs,t,r)}async poll(e,t,r){const i={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:o,response:l}=await this.retrieve(e,t,{...r,headers:{...r==null?void 0:r.headers,...i}}).withResponse();switch(o.status){case"queued":case"in_progress":case"cancelling":let c=5e3;if(r!=null&&r.pollIntervalMs)c=r.pollIntervalMs;else{const d=l.headers.get("openai-poll-after-ms");if(d){const h=parseInt(d);isNaN(h)||(c=h)}}await El(c);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return o}}}stream(e,t,r){return ir.createAssistantStream(e,this._client.beta.threads.runs,t,r)}submitToolOutputs(e,t,r,i){return this._client.post(`/threads/${e}/runs/${t}/submit_tool_outputs`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers},stream:r.stream??!1})}async submitToolOutputsAndPoll(e,t,r,i){const o=await this.submitToolOutputs(e,t,r,i);return await this.poll(e,o.id,i)}submitToolOutputsStream(e,t,r,i){return ir.createToolAssistantStream(e,t,this._client.beta.threads.runs,r,i)}};class zb extends Bt{}Rl.RunsPage=zb;Rl.Steps=Ub;Rl.RunStepsPage=Bb;class uo extends Se{constructor(){super(...arguments),this.runs=new Rl(this._client),this.messages=new Db(this._client)}create(e={},t){return ft(e)?this.create({},e):this._client.post("/threads",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,r){return this._client.post(`/threads/${e}`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,t){return this._client.delete(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers},stream:e.stream??!1})}async createAndRunPoll(e,t){const r=await this.createAndRun(e,t);return await this.runs.poll(r.thread_id,r.id,t)}createAndRunStream(e,t){return ir.createThreadAssistantStream(e,this._client.beta.threads,t)}}uo.Runs=Rl;uo.RunsPage=zb;uo.Messages=Db;uo.MessagesPage=$b;class lo extends Se{constructor(){super(...arguments),this.realtime=new Td(this._client),this.chat=new Py(this._client),this.assistants=new kb(this._client),this.threads=new uo(this._client)}}lo.Realtime=Td;lo.Assistants=kb;lo.AssistantsPage=Mb;lo.Threads=uo;class rR extends Se{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}class aR extends Se{create(e,t){const r=!!e.encoding_format;let i=r?e.encoding_format:"base64";r&&Ba("Request","User defined encoding_format:",e.encoding_format);const o=this._client.post("/embeddings",{body:{...e,encoding_format:i},...t});return r?o:(Ba("response","Decoding base64 embeddings to float32 array"),o._thenUnwrap(l=>(l&&l.data&&l.data.forEach(c=>{const d=c.embedding;c.embedding=qL(d)}),l)))}}class Vb extends Se{retrieve(e,t,r,i){return this._client.get(`/evals/${e}/runs/${t}/output_items/${r}`,i)}list(e,t,r={},i){return ft(r)?this.list(e,t,{},r):this._client.getAPIList(`/evals/${e}/runs/${t}/output_items`,qb,{query:r,...i})}}class qb extends Bt{}Vb.OutputItemListResponsesPage=qb;class Cl extends Se{constructor(){super(...arguments),this.outputItems=new Vb(this._client)}create(e,t,r){return this._client.post(`/evals/${e}/runs`,{body:t,...r})}retrieve(e,t,r){return this._client.get(`/evals/${e}/runs/${t}`,r)}list(e,t={},r){return ft(t)?this.list(e,{},t):this._client.getAPIList(`/evals/${e}/runs`,Fb,{query:t,...r})}del(e,t,r){return this._client.delete(`/evals/${e}/runs/${t}`,r)}cancel(e,t,r){return this._client.post(`/evals/${e}/runs/${t}`,r)}}class Fb extends Bt{}Cl.RunListResponsesPage=Fb;Cl.OutputItems=Vb;Cl.OutputItemListResponsesPage=qb;class Pl extends Se{constructor(){super(...arguments),this.runs=new Cl(this._client)}create(e,t){return this._client.post("/evals",{body:e,...t})}retrieve(e,t){return this._client.get(`/evals/${e}`,t)}update(e,t,r){return this._client.post(`/evals/${e}`,{body:t,...r})}list(e={},t){return ft(e)?this.list({},e):this._client.getAPIList("/evals",Hb,{query:e,...t})}del(e,t){return this._client.delete(`/evals/${e}`,t)}}class Hb extends Bt{}Pl.EvalListResponsesPage=Hb;Pl.Runs=Cl;Pl.RunListResponsesPage=Fb;let Zb=class extends Se{create(e,t){return this._client.post("/files",Ws({body:e,...t}))}retrieve(e,t){return this._client.get(`/files/${e}`,t)}list(e={},t){return ft(e)?this.list({},e):this._client.getAPIList("/files",Gb,{query:e,...t})}del(e,t){return this._client.delete(`/files/${e}`,t)}content(e,t){return this._client.get(`/files/${e}/content`,{...t,headers:{Accept:"application/binary",...t==null?void 0:t.headers},__binaryResponse:!0})}retrieveContent(e,t){return this._client.get(`/files/${e}/content`,t)}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:r=30*60*1e3}={}){const i=new Set(["processed","error","deleted"]),o=Date.now();let l=await this.retrieve(e);for(;!l.status||!i.has(l.status);)if(await El(t),l=await this.retrieve(e),Date.now()-o>r)throw new gd({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return l}};class Gb extends Bt{}Zb.FileObjectsPage=Gb;class iR extends Se{}let sR=class extends Se{run(e,t){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...t})}validate(e,t){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...t})}};class Yb extends Se{constructor(){super(...arguments),this.graders=new sR(this._client)}}Yb.Graders=sR;class Xb extends Se{create(e,t,r){return this._client.getAPIList(`/fine_tuning/checkpoints/${e}/permissions`,Kb,{body:t,method:"post",...r})}retrieve(e,t={},r){return ft(t)?this.retrieve(e,{},t):this._client.get(`/fine_tuning/checkpoints/${e}/permissions`,{query:t,...r})}del(e,t,r){return this._client.delete(`/fine_tuning/checkpoints/${e}/permissions/${t}`,r)}}class Kb extends vd{}Xb.PermissionCreateResponsesPage=Kb;let Ed=class extends Se{constructor(){super(...arguments),this.permissions=new Xb(this._client)}};Ed.Permissions=Xb;Ed.PermissionCreateResponsesPage=Kb;class Jb extends Se{list(e,t={},r){return ft(t)?this.list(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,Qb,{query:t,...r})}}class Qb extends Bt{}Jb.FineTuningJobCheckpointsPage=Qb;class co extends Se{constructor(){super(...arguments),this.checkpoints=new Jb(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(`/fine_tuning/jobs/${e}`,t)}list(e={},t){return ft(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",Wb,{query:e,...t})}cancel(e,t){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},r){return ft(t)?this.listEvents(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,e_,{query:t,...r})}pause(e,t){return this._client.post(`/fine_tuning/jobs/${e}/pause`,t)}resume(e,t){return this._client.post(`/fine_tuning/jobs/${e}/resume`,t)}}class Wb extends Bt{}class e_ extends Bt{}co.FineTuningJobsPage=Wb;co.FineTuningJobEventsPage=e_;co.Checkpoints=Jb;co.FineTuningJobCheckpointsPage=Qb;class ei extends Se{constructor(){super(...arguments),this.methods=new iR(this._client),this.jobs=new co(this._client),this.checkpoints=new Ed(this._client),this.alpha=new Yb(this._client)}}ei.Methods=iR;ei.Jobs=co;ei.FineTuningJobsPage=Wb;ei.FineTuningJobEventsPage=e_;ei.Checkpoints=Ed;ei.Alpha=Yb;class oR extends Se{}class t_ extends Se{constructor(){super(...arguments),this.graderModels=new oR(this._client)}}t_.GraderModels=oR;class uR extends Se{createVariation(e,t){return this._client.post("/images/variations",Ws({body:e,...t}))}edit(e,t){return this._client.post("/images/edits",Ws({body:e,...t}))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}class n_ extends Se{retrieve(e,t){return this._client.get(`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",r_,e)}del(e,t){return this._client.delete(`/models/${e}`,t)}}class r_ extends vd{}n_.ModelsPage=r_;class lR extends Se{create(e,t){return this._client.post("/moderations",{body:e,...t})}}function rD(n,e){return!e||!iD(e)?{...n,output_parsed:null,output:n.output.map(t=>t.type==="function_call"?{...t,parsed_arguments:null}:t.type==="message"?{...t,content:t.content.map(r=>({...r,parsed:null}))}:t)}:cR(n,e)}function cR(n,e){const t=n.output.map(i=>{if(i.type==="function_call")return{...i,parsed_arguments:uD(e,i)};if(i.type==="message"){const o=i.content.map(l=>l.type==="output_text"?{...l,parsed:aD(e,l.text)}:l);return{...i,content:o}}return i}),r=Object.assign({},n,{output:t});return Object.getOwnPropertyDescriptor(n,"output_text")||fR(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const i of r.output)if(i.type==="message"){for(const o of i.content)if(o.type==="output_text"&&o.parsed!==null)return o.parsed}return null}}),r}function aD(n,e){var t,r,i,o;return((r=(t=n.text)==null?void 0:t.format)==null?void 0:r.type)!=="json_schema"?null:"$parseRaw"in((i=n.text)==null?void 0:i.format)?((o=n.text)==null?void 0:o.format).$parseRaw(e):JSON.parse(e)}function iD(n){var e;return!!Ib((e=n.text)==null?void 0:e.format)}function sD(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function oD(n,e){return n.find(t=>t.type==="function"&&t.name===e)}function uD(n,e){const t=oD(n.tools??[],e.name);return{...e,...e,parsed_arguments:sD(t)?t.$parseRaw(e.arguments):t!=null&&t.strict?JSON.parse(e.arguments):null}}function fR(n){const e=[];for(const t of n.output)if(t.type==="message")for(const r of t.content)r.type==="output_text"&&e.push(r.text);n.output_text=e.join("")}class dR extends Se{list(e,t={},r){return ft(t)?this.list(e,{},t):this._client.getAPIList(`/responses/${e}/input_items`,cD,{query:t,...r})}}var Cs=function(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},ka=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},Ps,lf,Ma,cf,dT,hT,mT,pT;class a_ extends jb{constructor(e){super(),Ps.add(this),lf.set(this,void 0),Ma.set(this,void 0),cf.set(this,void 0),Cs(this,lf,e,"f")}static createResponse(e,t,r){const i=new a_(t);return i._run(()=>i._createResponse(e,t,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createResponse(e,t,r){var l;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),ka(this,Ps,"m",dT).call(this);const o=await e.responses.create({...t,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const c of o)ka(this,Ps,"m",hT).call(this,c);if((l=o.controller.signal)!=null&&l.aborted)throw new Cn;return ka(this,Ps,"m",mT).call(this)}[(lf=new WeakMap,Ma=new WeakMap,cf=new WeakMap,Ps=new WeakSet,dT=function(){this.ended||Cs(this,Ma,void 0,"f")},hT=function(t){if(this.ended)return;const r=ka(this,Ps,"m",pT).call(this,t);switch(this._emit("event",t),t.type){case"response.output_text.delta":{const i=r.output[t.output_index];if(!i)throw new be(`missing output at index ${t.output_index}`);if(i.type==="message"){const o=i.content[t.content_index];if(!o)throw new be(`missing content at index ${t.content_index}`);if(o.type!=="output_text")throw new be(`expected content to be 'output_text', got ${o.type}`);this._emit("response.output_text.delta",{...t,snapshot:o.text})}break}case"response.function_call_arguments.delta":{const i=r.output[t.output_index];if(!i)throw new be(`missing output at index ${t.output_index}`);i.type==="function_call"&&this._emit("response.function_call_arguments.delta",{...t,snapshot:i.arguments});break}default:this._emit(t.type,t);break}},mT=function(){if(this.ended)throw new be("stream has ended, this shouldn't happen");const t=ka(this,Ma,"f");if(!t)throw new be("request ended without sending any events");Cs(this,Ma,void 0,"f");const r=lD(t,ka(this,lf,"f"));return Cs(this,cf,r,"f"),r},pT=function(t){let r=ka(this,Ma,"f");if(!r){if(t.type!=="response.created")throw new be(`When snapshot hasn't been set yet, expected 'response.created' event, got ${t.type}`);return r=Cs(this,Ma,t.response,"f"),r}switch(t.type){case"response.output_item.added":{r.output.push(t.item);break}case"response.content_part.added":{const i=r.output[t.output_index];if(!i)throw new be(`missing output at index ${t.output_index}`);i.type==="message"&&i.content.push(t.part);break}case"response.output_text.delta":{const i=r.output[t.output_index];if(!i)throw new be(`missing output at index ${t.output_index}`);if(i.type==="message"){const o=i.content[t.content_index];if(!o)throw new be(`missing content at index ${t.content_index}`);if(o.type!=="output_text")throw new be(`expected content to be 'output_text', got ${o.type}`);o.text+=t.delta}break}case"response.function_call_arguments.delta":{const i=r.output[t.output_index];if(!i)throw new be(`missing output at index ${t.output_index}`);i.type==="function_call"&&(i.arguments+=t.delta);break}case"response.completed":{Cs(this,Ma,t.response,"f");break}}return r},Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("event",i=>{const o=t.shift();o?o.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of t)i.resolve(void 0);t.length=0}),this.on("abort",i=>{r=!0;for(const o of t)o.reject(i);t.length=0}),this.on("error",i=>{r=!0;for(const o of t)o.reject(i);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((o,l)=>t.push({resolve:o,reject:l})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=ka(this,cf,"f");if(!e)throw new be("stream ended without producing a ChatCompletion");return e}}function lD(n,e){return rD(n,e)}class i_ extends Se{constructor(){super(...arguments),this.inputItems=new dR(this._client)}create(e,t){return this._client.post("/responses",{body:e,...t,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&fR(r),r))}retrieve(e,t={},r){return ft(t)?this.retrieve(e,{},t):this._client.get(`/responses/${e}`,{query:t,...r})}del(e,t){return this._client.delete(`/responses/${e}`,{...t,headers:{Accept:"*/*",...t==null?void 0:t.headers}})}parse(e,t){return this._client.responses.create(e,t)._thenUnwrap(r=>cR(r,e))}stream(e,t){return a_.createResponse(this._client,e,t)}}class cD extends Bt{}i_.InputItems=dR;class hR extends Se{create(e,t,r){return this._client.post(`/uploads/${e}/parts`,Ws({body:t,...r}))}}class s_ extends Se{constructor(){super(...arguments),this.parts=new hR(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(`/uploads/${e}/cancel`,t)}complete(e,t,r){return this._client.post(`/uploads/${e}/complete`,{body:t,...r})}}s_.Parts=hR;const fD=async n=>{const e=await Promise.allSettled(n),t=e.filter(i=>i.status==="rejected");if(t.length){for(const i of t)console.error(i.reason);throw new Error(`${t.length} promise(s) failed - see the above errors`)}const r=[];for(const i of e)i.status==="fulfilled"&&r.push(i.value);return r};class xd extends Se{create(e,t,r){return this._client.post(`/vector_stores/${e}/files`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,t,r){return this._client.get(`/vector_stores/${e}/files/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,t,r,i){return this._client.post(`/vector_stores/${e}/files/${t}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e,t={},r){return ft(t)?this.list(e,{},t):this._client.getAPIList(`/vector_stores/${e}/files`,Od,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,t,r){return this._client.delete(`/vector_stores/${e}/files/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,t,r){const i=await this.create(e,t,r);return await this.poll(e,i.id,r)}async poll(e,t,r){const i={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const o=await this.retrieve(e,t,{...r,headers:i}).withResponse(),l=o.data;switch(l.status){case"in_progress":let c=5e3;if(r!=null&&r.pollIntervalMs)c=r.pollIntervalMs;else{const d=o.response.headers.get("openai-poll-after-ms");if(d){const h=parseInt(d);isNaN(h)||(c=h)}}await El(c);break;case"failed":case"completed":return l}}}async upload(e,t,r){const i=await this._client.files.create({file:t,purpose:"assistants"},r);return this.create(e,{file_id:i.id},r)}async uploadAndPoll(e,t,r){const i=await this.upload(e,t,r);return await this.poll(e,i.id,r)}content(e,t,r){return this._client.getAPIList(`/vector_stores/${e}/files/${t}/content`,o_,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class Od extends Bt{}class o_ extends vd{}xd.VectorStoreFilesPage=Od;xd.FileContentResponsesPage=o_;class mR extends Se{create(e,t,r){return this._client.post(`/vector_stores/${e}/file_batches`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,t,r){return this._client.get(`/vector_stores/${e}/file_batches/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(e,t,r){return this._client.post(`/vector_stores/${e}/file_batches/${t}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,t,r){const i=await this.create(e,t);return await this.poll(e,i.id,r)}listFiles(e,t,r={},i){return ft(r)?this.listFiles(e,t,{},r):this._client.getAPIList(`/vector_stores/${e}/file_batches/${t}/files`,Od,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}async poll(e,t,r){const i={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:o,response:l}=await this.retrieve(e,t,{...r,headers:i}).withResponse();switch(o.status){case"in_progress":let c=5e3;if(r!=null&&r.pollIntervalMs)c=r.pollIntervalMs;else{const d=l.headers.get("openai-poll-after-ms");if(d){const h=parseInt(d);isNaN(h)||(c=h)}}await El(c);break;case"failed":case"cancelled":case"completed":return o}}}async uploadAndPoll(e,{files:t,fileIds:r=[]},i){if(t==null||t.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const o=(i==null?void 0:i.maxConcurrency)??5,l=Math.min(o,t.length),c=this._client,d=t.values(),h=[...r];async function m(b){for(let _ of b){const v=await c.files.create({file:_,purpose:"assistants"},i);h.push(v.id)}}const g=Array(l).fill(d).map(m);return await fD(g),await this.createAndPoll(e,{file_ids:h})}}class ti extends Se{constructor(){super(...arguments),this.files=new xd(this._client),this.fileBatches=new mR(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,r){return this._client.post(`/vector_stores/${e}`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e={},t){return ft(e)?this.list({},e):this._client.getAPIList("/vector_stores",u_,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}del(e,t){return this._client.delete(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}search(e,t,r){return this._client.getAPIList(`/vector_stores/${e}/search`,l_,{body:t,method:"post",...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class u_ extends Bt{}class l_ extends vd{}ti.VectorStoresPage=u_;ti.VectorStoreSearchResponsesPage=l_;ti.Files=xd;ti.VectorStoreFilesPage=Od;ti.FileContentResponsesPage=o_;ti.FileBatches=mR;var pR;let xe=class extends NL{constructor({baseURL:e=rf("OPENAI_BASE_URL"),apiKey:t=rf("OPENAI_API_KEY"),organization:r=rf("OPENAI_ORG_ID")??null,project:i=rf("OPENAI_PROJECT_ID")??null,...o}={}){if(t===void 0)throw new be("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const l={apiKey:t,organization:r,project:i,...o,baseURL:e||"https://api.openai.com/v1"};if(!l.dangerouslyAllowBrowser&&zL())throw new be(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:l.baseURL,timeout:l.timeout??6e5,httpAgent:l.httpAgent,maxRetries:l.maxRetries,fetch:l.fetch}),this.completions=new rR(this),this.chat=new Ad(this),this.embeddings=new aR(this),this.files=new Zb(this),this.images=new uR(this),this.audio=new xl(this),this.moderations=new lR(this),this.models=new n_(this),this.fineTuning=new ei(this),this.graders=new t_(this),this.vectorStores=new ti(this),this.beta=new lo(this),this.batches=new Pb(this),this.uploads=new s_(this),this.responses=new i_(this),this.evals=new Pl(this),this._options=l,this.apiKey=t,this.organization=r,this.project=i}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return hL(e,{arrayFormat:"brackets"})}};pR=xe;xe.OpenAI=pR;xe.DEFAULT_TIMEOUT=6e5;xe.OpenAIError=be;xe.APIError=Ut;xe.APIConnectionError=pd;xe.APIConnectionTimeoutError=gd;xe.APIUserAbortError=Cn;xe.NotFoundError=mO;xe.ConflictError=pO;xe.RateLimitError=yO;xe.BadRequestError=fO;xe.AuthenticationError=dO;xe.InternalServerError=bO;xe.PermissionDeniedError=hO;xe.UnprocessableEntityError=gO;xe.toFile=TO;xe.fileFromPath=uO;xe.Completions=rR;xe.Chat=Ad;xe.ChatCompletionsPage=Sd;xe.Embeddings=aR;xe.Files=Zb;xe.FileObjectsPage=Gb;xe.Images=uR;xe.Audio=xl;xe.Moderations=lR;xe.Models=n_;xe.ModelsPage=r_;xe.FineTuning=ei;xe.Graders=t_;xe.VectorStores=ti;xe.VectorStoresPage=u_;xe.VectorStoreSearchResponsesPage=l_;xe.Beta=lo;xe.Batches=Pb;xe.BatchesPage=Nb;xe.Uploads=s_;xe.Responses=i_;xe.Evals=Pl;xe.EvalListResponsesPage=Hb;function gT(n,e=c_){n=n.trim();const t=n.indexOf("```");if(t===-1)return e(n);let r=n.substring(t+3);r.startsWith(`json
`)?r=r.substring(5):r.startsWith("json")?r=r.substring(4):r.startsWith(`
`)&&(r=r.substring(1));const i=r.indexOf("```");let o=r;return i!==-1&&(o=r.substring(0,i)),e(o.trim())}function c_(n){if(typeof n>"u")return null;try{return JSON.parse(n)}catch{}let e="";const t=[];let r=!1,i=!1;for(let o of n){if(r)o==='"'&&!i?r=!1:o===`
`&&!i?o="\\n":o==="\\"?i=!i:i=!1;else if(o==='"')r=!0,i=!1;else if(o==="{")t.push("}");else if(o==="[")t.push("]");else if(o==="}"||o==="]")if(t&&t[t.length-1]===o)t.pop();else return null;e+=o}r&&(e+='"');for(let o=t.length-1;o>=0;o-=1)e+=t[o];try{return JSON.parse(e)}catch{return null}}var Cp,yT;function dD(){return yT||(yT=1,Cp=function(n,e){if(typeof n!="string")throw new TypeError("Expected a string");return e=typeof e>"u"?"_":e,n.replace(/([a-z\d])([A-Z])/g,"$1"+e+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+e+"$2").toLowerCase()}),Cp}var hD=dD();const mD=Mr(hD);var ff={exports:{}},bT;function pD(){if(bT)return ff.exports;bT=1;const n=/[\p{Lu}]/u,e=/[\p{Ll}]/u,t=/^[\p{Lu}](?![\p{Lu}])/gu,r=/([\p{Alpha}\p{N}_]|$)/u,i=/[_.\- ]+/,o=new RegExp("^"+i.source),l=new RegExp(i.source+r.source,"gu"),c=new RegExp("\\d+"+r.source,"gu"),d=(b,_,v)=>{let S=!1,A=!1,E=!1;for(let O=0;O<b.length;O++){const x=b[O];S&&n.test(x)?(b=b.slice(0,O)+"-"+b.slice(O),S=!1,E=A,A=!0,O++):A&&E&&e.test(x)?(b=b.slice(0,O-1)+"-"+b.slice(O-1),E=A,A=!1,S=!0):(S=_(x)===x&&v(x)!==x,E=A,A=v(x)===x&&_(x)!==x)}return b},h=(b,_)=>(t.lastIndex=0,b.replace(t,v=>_(v))),m=(b,_)=>(l.lastIndex=0,c.lastIndex=0,b.replace(l,(v,S)=>_(S)).replace(c,v=>_(v))),g=(b,_)=>{if(!(typeof b=="string"||Array.isArray(b)))throw new TypeError("Expected the input to be `string | string[]`");if(_={pascalCase:!1,preserveConsecutiveUppercase:!1,..._},Array.isArray(b)?b=b.map(E=>E.trim()).filter(E=>E.length).join("-"):b=b.trim(),b.length===0)return"";const v=_.locale===!1?E=>E.toLowerCase():E=>E.toLocaleLowerCase(_.locale),S=_.locale===!1?E=>E.toUpperCase():E=>E.toLocaleUpperCase(_.locale);return b.length===1?_.pascalCase?S(b):v(b):(b!==v(b)&&(b=d(b,v,S)),b=b.replace(o,""),_.preserveConsecutiveUppercase?b=h(b,v):b=v(b),_.pascalCase&&(b=S(b.charAt(0))+b.slice(1)),m(b,S))};return ff.exports=g,ff.exports.default=g,ff.exports}pD();function gD(n,e){return(e==null?void 0:e[n])||mD(n)}function yD(n,e,t){const r={};for(const i in n)Object.hasOwn(n,i)&&(r[e(i,t)]=n[i]);return r}function _T(n){return Array.isArray(n)?[...n]:{...n}}function bD(n,e){const t=_T(n);for(const[r,i]of Object.entries(e)){const[o,...l]=r.split(".").reverse();let c=t;for(const d of l.reverse()){if(c[d]===void 0)break;c[d]=_T(c[d]),c=c[d]}c[o]!==void 0&&(c[o]={lc:1,type:"secret",id:[i]})}return t}function gR(n){const e=Object.getPrototypeOf(n);return typeof n.lc_name=="function"&&(typeof e.lc_name!="function"||n.lc_name()!==e.lc_name())?n.lc_name():n.name}class Ii{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,gR(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}constructor(e,...t){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_serializable_keys!==void 0?this.lc_kwargs=Object.fromEntries(Object.entries(e||{}).filter(([r])=>{var i;return(i=this.lc_serializable_keys)==null?void 0:i.includes(r)})):this.lc_kwargs=e??{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof Ii||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const e={},t={},r=Object.keys(this.lc_kwargs).reduce((i,o)=>(i[o]=o in this?this[o]:this.lc_kwargs[o],i),{});for(let i=Object.getPrototypeOf(this);i;i=Object.getPrototypeOf(i))Object.assign(e,Reflect.get(i,"lc_aliases",this)),Object.assign(t,Reflect.get(i,"lc_secrets",this)),Object.assign(r,Reflect.get(i,"lc_attributes",this));return Object.keys(t).forEach(i=>{let o=this,l=r;const[c,...d]=i.split(".").reverse();for(const h of d.reverse()){if(!(h in o)||o[h]===void 0)return;(!(h in l)||l[h]===void 0)&&(typeof o[h]=="object"&&o[h]!=null?l[h]={}:Array.isArray(o[h])&&(l[h]=[])),o=o[h],l=l[h]}c in o&&o[c]!==void 0&&(l[c]=l[c]||o[c])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:yD(Object.keys(t).length?bD(r,t):r,gD,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}}function Li(n){return typeof n=="object"&&n!==null&&"type"in n&&typeof n.type=="string"&&"source_type"in n&&(n.source_type==="url"||n.source_type==="base64"||n.source_type==="text"||n.source_type==="id")}function _D(n){return Li(n)&&n.source_type==="url"&&"url"in n&&typeof n.url=="string"}function vD(n){return Li(n)&&n.source_type==="base64"&&"data"in n&&typeof n.data=="string"}function wD(n){if(Li(n)){if(n.source_type==="url")return{type:"image_url",image_url:{url:n.url}};if(n.source_type==="base64"){if(!n.mime_type)throw new Error("mime_type key is required for base64 data.");return{type:"image_url",image_url:{url:`data:${n.mime_type};base64,${n.data}`}}}}throw new Error("Unsupported source type. Only 'url' and 'base64' are supported.")}function vT(n){const e=n.split(";")[0].split("/");if(e.length!==2)throw new Error(`Invalid mime type: "${n}" - does not match type/subtype format.`);const t=e[0].trim(),r=e[1].trim();if(t===""||r==="")throw new Error(`Invalid mime type: "${n}" - type or subtype is empty.`);const i={};for(const o of n.split(";").slice(1)){const l=o.split("=");if(l.length!==2)throw new Error(`Invalid parameter syntax in mime type: "${n}".`);const c=l[0].trim(),d=l[1].trim();if(c==="")throw new Error(`Invalid parameter syntax in mime type: "${n}".`);i[c]=d}return{type:t,subtype:r,parameters:i}}function wT({dataUrl:n,asTypedArray:e=!1}){const t=n.match(/^data:(\w+\/\w+);base64,([A-Za-z0-9+/]+=*)$/);let r;if(t){r=t[1].toLowerCase();const i=e?Uint8Array.from(atob(t[2]),o=>o.charCodeAt(0)):t[2];return{mime_type:r,data:i}}}function yR(n,e){if(n.type==="text"){if(!e.fromStandardTextBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardTextBlock\` method.`);return e.fromStandardTextBlock(n)}if(n.type==="image"){if(!e.fromStandardImageBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardImageBlock\` method.`);return e.fromStandardImageBlock(n)}if(n.type==="audio"){if(!e.fromStandardAudioBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardAudioBlock\` method.`);return e.fromStandardAudioBlock(n)}if(n.type==="file"){if(!e.fromStandardFileBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardFileBlock\` method.`);return e.fromStandardFileBlock(n)}throw new Error(`Unable to convert content block type '${n.type}' to provider-specific format: not recognized.`)}function fo(n,e){return typeof n=="string"?n===""?e:typeof e=="string"?n+e:Array.isArray(e)&&e.some(t=>Li(t))?[{type:"text",source_type:"text",text:n},...e]:[{type:"text",text:n},...e]:Array.isArray(e)?Rd(n,e)??[...n,...e]:e===""?n:Array.isArray(n)&&n.some(t=>Li(t))?[...n,{type:"file",source_type:"text",text:e}]:[...n,{type:"text",text:e}]}function SD(n,e){return n==="error"||e==="error"?"error":"success"}function AD(n,e){function t(r,i){if(typeof r!="object"||r===null||r===void 0)return r;if(i>=e)return Array.isArray(r)?"[Array]":"[Object]";if(Array.isArray(r))return r.map(l=>t(l,i+1));const o={};for(const l of Object.keys(r))o[l]=t(r[l],i+1);return o}return JSON.stringify(t(n,0),null,2)}class ho extends Ii{get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}get text(){return typeof this.content=="string"?this.content:Array.isArray(this.content)?this.content.map(e=>typeof e=="string"?e:e.type==="text"?e.text:"").join(""):""}getType(){return this._getType()}constructor(e,t){typeof e=="string"&&(e={content:e,additional_kwargs:t,response_metadata:{}}),e.additional_kwargs||(e.additional_kwargs={}),e.response_metadata||(e.response_metadata={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","messages"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs,this.response_metadata=e.response_metadata,this.id=e.id}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}_updateId(e){this.id=e,this.lc_kwargs.id=e}get[Symbol.toStringTag](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](e){if(e===null)return this;const t=AD(this._printableFields,Math.max(4,e));return`${this.constructor.lc_name()} ${t}`}}function tn(n,e){const t={...n};for(const[r,i]of Object.entries(e))if(t[r]==null)t[r]=i;else{if(i==null)continue;if(typeof t[r]!=typeof i||Array.isArray(t[r])!==Array.isArray(i))throw new Error(`field[${r}] already exists in the message chunk, but with a different type.`);if(typeof t[r]=="string"){if(r==="type")continue;t[r]+=i}else if(typeof t[r]=="object"&&!Array.isArray(t[r]))t[r]=tn(t[r],i);else if(Array.isArray(t[r]))t[r]=Rd(t[r],i);else{if(t[r]===i)continue;console.warn(`field[${r}] already exists in this message chunk and value has unsupported type.`)}}return t}function Rd(n,e){if(!(n===void 0&&e===void 0)){if(n===void 0||e===void 0)return n||e;{const t=[...n];for(const r of e)if(typeof r=="object"&&"index"in r&&typeof r.index=="number"){const i=t.findIndex(o=>o.index===r.index);i!==-1?t[i]=tn(t[i],r):t.push(r)}else{if(typeof r=="object"&&"text"in r&&r.text==="")continue;t.push(r)}return t}}}function TD(n,e){if(!n&&!e)throw new Error("Cannot merge two undefined objects.");if(!n||!e)return n||e;if(typeof n!=typeof e)throw new Error(`Cannot merge objects of different types.
Left ${typeof n}
Right ${typeof e}`);if(typeof n=="string"&&typeof e=="string")return n+e;if(Array.isArray(n)&&Array.isArray(e))return Rd(n,e);if(typeof n=="object"&&typeof e=="object")return tn(n,e);if(n===e)return n;throw new Error(`Can not merge objects of different types.
Left ${n}
Right ${e}`)}class mo extends ho{}function ED(n){return typeof n.role=="string"}function Cd(n){return typeof(n==null?void 0:n._getType)=="function"}function xD(n){return Cd(n)&&typeof n.concat=="function"}class OD extends ho{static lc_name(){return"ToolMessage"}get lc_aliases(){return{tool_call_id:"tool_call_id"}}constructor(e,t,r){typeof e=="string"&&(e={content:e,name:r,tool_call_id:t}),super(e),Object.defineProperty(this,"lc_direct_tool_output",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}_getType(){return"tool"}static isInstance(e){return e._getType()==="tool"}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}}class f_ extends mo{constructor(e){super(e),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}static lc_name(){return"ToolMessageChunk"}_getType(){return"tool"}concat(e){return new f_({content:fo(this.content,e.content),additional_kwargs:tn(this.additional_kwargs,e.additional_kwargs),response_metadata:tn(this.response_metadata,e.response_metadata),artifact:TD(this.artifact,e.artifact),tool_call_id:this.tool_call_id,id:this.id??e.id,status:SD(this.status,e.status)})}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}}function RD(n){const e=[],t=[];for(const r of n)if(r.function){const i=r.function.name;try{const o=JSON.parse(r.function.arguments),l={name:i||"",args:o||{},id:r.id};e.push(l)}catch{t.push({name:i,args:r.function.arguments,id:r.id,error:"Malformed args."})}}else continue;return[e,t]}class nl extends ho{get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls"}}constructor(e,t){var i;let r;if(typeof e=="string")r={content:e,tool_calls:[],invalid_tool_calls:[],additional_kwargs:t??{}};else{r=e;const o=(i=r.additional_kwargs)==null?void 0:i.tool_calls,l=r.tool_calls;o!=null&&o.length>0&&(l===void 0||l.length===0)&&console.warn(["New LangChain packages are available that more efficiently handle",`tool calling.

Please upgrade your packages to versions that set`,"message tool calls. e.g., `yarn add @langchain/anthropic`,","yarn add @langchain/openai`, etc."].join(" "));try{if(o!=null&&l===void 0){const[c,d]=RD(o);r.tool_calls=c??[],r.invalid_tool_calls=d??[]}else r.tool_calls=r.tool_calls??[],r.invalid_tool_calls=r.invalid_tool_calls??[]}catch{r.tool_calls=[],r.invalid_tool_calls=[]}}super(r),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof r!="string"&&(this.tool_calls=r.tool_calls??this.tool_calls,this.invalid_tool_calls=r.invalid_tool_calls??this.invalid_tool_calls),this.usage_metadata=r.usage_metadata}static lc_name(){return"AIMessage"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}}function za(n){return n._getType()==="ai"}function ST(n){return n._getType()==="ai"}class Za extends mo{constructor(e){let t;if(typeof e=="string")t={content:e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(e.tool_call_chunks===void 0)t={...e,tool_calls:e.tool_calls??[],invalid_tool_calls:[],tool_call_chunks:[],usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0};else{const r=[],i=[];for(const o of e.tool_call_chunks){let l={};try{if(l=c_(o.args||"{}"),l===null||typeof l!="object"||Array.isArray(l))throw new Error("Malformed tool call chunk args.");r.push({name:o.name??"",args:l,id:o.id,type:"tool_call"})}catch{i.push({name:o.name,args:o.args,id:o.id,error:"Malformed args.",type:"invalid_tool_call"})}}t={...e,tool_calls:r,invalid_tool_calls:i,usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0}}super(t),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tool_call_chunks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_chunks=t.tool_call_chunks??this.tool_call_chunks,this.tool_calls=t.tool_calls??this.tool_calls,this.invalid_tool_calls=t.invalid_tool_calls??this.invalid_tool_calls,this.usage_metadata=t.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}concat(e){var r,i,o,l,c,d,h,m,g,b,_,v,S,A,E,O,x,j,P,z,H,V,ie,he,me,De,pt,te,Q,M,U,G,ee,R,B,X,J,re,fe,pe;const t={content:fo(this.content,e.content),additional_kwargs:tn(this.additional_kwargs,e.additional_kwargs),response_metadata:tn(this.response_metadata,e.response_metadata),tool_call_chunks:[],id:this.id??e.id};if(this.tool_call_chunks!==void 0||e.tool_call_chunks!==void 0){const gt=Rd(this.tool_call_chunks,e.tool_call_chunks);gt!==void 0&&gt.length>0&&(t.tool_call_chunks=gt)}if(this.usage_metadata!==void 0||e.usage_metadata!==void 0){const gt={...(((i=(r=this.usage_metadata)==null?void 0:r.input_token_details)==null?void 0:i.audio)!==void 0||((l=(o=e.usage_metadata)==null?void 0:o.input_token_details)==null?void 0:l.audio)!==void 0)&&{audio:(((d=(c=this.usage_metadata)==null?void 0:c.input_token_details)==null?void 0:d.audio)??0)+(((m=(h=e.usage_metadata)==null?void 0:h.input_token_details)==null?void 0:m.audio)??0)},...(((b=(g=this.usage_metadata)==null?void 0:g.input_token_details)==null?void 0:b.cache_read)!==void 0||((v=(_=e.usage_metadata)==null?void 0:_.input_token_details)==null?void 0:v.cache_read)!==void 0)&&{cache_read:(((A=(S=this.usage_metadata)==null?void 0:S.input_token_details)==null?void 0:A.cache_read)??0)+(((O=(E=e.usage_metadata)==null?void 0:E.input_token_details)==null?void 0:O.cache_read)??0)},...(((j=(x=this.usage_metadata)==null?void 0:x.input_token_details)==null?void 0:j.cache_creation)!==void 0||((z=(P=e.usage_metadata)==null?void 0:P.input_token_details)==null?void 0:z.cache_creation)!==void 0)&&{cache_creation:(((V=(H=this.usage_metadata)==null?void 0:H.input_token_details)==null?void 0:V.cache_creation)??0)+(((he=(ie=e.usage_metadata)==null?void 0:ie.input_token_details)==null?void 0:he.cache_creation)??0)}},Je={...(((De=(me=this.usage_metadata)==null?void 0:me.output_token_details)==null?void 0:De.audio)!==void 0||((te=(pt=e.usage_metadata)==null?void 0:pt.output_token_details)==null?void 0:te.audio)!==void 0)&&{audio:(((M=(Q=this.usage_metadata)==null?void 0:Q.output_token_details)==null?void 0:M.audio)??0)+(((G=(U=e.usage_metadata)==null?void 0:U.output_token_details)==null?void 0:G.audio)??0)},...(((R=(ee=this.usage_metadata)==null?void 0:ee.output_token_details)==null?void 0:R.reasoning)!==void 0||((X=(B=e.usage_metadata)==null?void 0:B.output_token_details)==null?void 0:X.reasoning)!==void 0)&&{reasoning:(((re=(J=this.usage_metadata)==null?void 0:J.output_token_details)==null?void 0:re.reasoning)??0)+(((pe=(fe=e.usage_metadata)==null?void 0:fe.output_token_details)==null?void 0:pe.reasoning)??0)}},jn=this.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},ni=e.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},zi={input_tokens:jn.input_tokens+ni.input_tokens,output_tokens:jn.output_tokens+ni.output_tokens,total_tokens:jn.total_tokens+ni.total_tokens,...Object.keys(gt).length>0&&{input_token_details:gt},...Object.keys(Je).length>0&&{output_token_details:Je}};t.usage_metadata=zi}return new Za(t)}}class Nl extends ho{static lc_name(){return"ChatMessage"}static _chatMessageClass(){return Nl}constructor(e,t){typeof e=="string"&&(e={content:e,role:t}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}static isInstance(e){return e._getType()==="generic"}get _printableFields(){return{...super._printableFields,role:this.role}}}class Pd extends mo{static lc_name(){return"ChatMessageChunk"}constructor(e,t){typeof e=="string"&&(e={content:e,role:t}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}concat(e){return new Pd({content:fo(this.content,e.content),additional_kwargs:tn(this.additional_kwargs,e.additional_kwargs),response_metadata:tn(this.response_metadata,e.response_metadata),role:this.role,id:this.id??e.id})}get _printableFields(){return{...super._printableFields,role:this.role}}}class Nd extends mo{static lc_name(){return"FunctionMessageChunk"}_getType(){return"function"}concat(e){return new Nd({content:fo(this.content,e.content),additional_kwargs:tn(this.additional_kwargs,e.additional_kwargs),response_metadata:tn(this.response_metadata,e.response_metadata),name:this.name??"",id:this.id??e.id})}}class jl extends ho{static lc_name(){return"HumanMessage"}_getType(){return"human"}constructor(e,t){super(e,t)}}class jd extends mo{static lc_name(){return"HumanMessageChunk"}_getType(){return"human"}constructor(e,t){super(e,t)}concat(e){return new jd({content:fo(this.content,e.content),additional_kwargs:tn(this.additional_kwargs,e.additional_kwargs),response_metadata:tn(this.response_metadata,e.response_metadata),id:this.id??e.id})}}class Ny extends ho{static lc_name(){return"SystemMessage"}_getType(){return"system"}constructor(e,t){super(e,t)}}class rl extends mo{static lc_name(){return"SystemMessageChunk"}_getType(){return"system"}constructor(e,t){super(e,t)}concat(e){return new rl({content:fo(this.content,e.content),additional_kwargs:tn(this.additional_kwargs,e.additional_kwargs),response_metadata:tn(this.response_metadata,e.response_metadata),id:this.id??e.id})}}function bR(n,e){return n.lc_error_code=e,n.message=`${n.message}

Troubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${e}/
`,n}function _R(n){return!!(n&&typeof n=="object"&&"type"in n&&n.type==="tool_call")}class CD extends Error{constructor(e,t){super(e),Object.defineProperty(this,"output",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.output=t}}function PD(n){return _R(n)?n:typeof n.id=="string"&&n.type==="function"&&typeof n.function=="object"&&n.function!==null&&"arguments"in n.function&&typeof n.function.arguments=="string"&&"name"in n.function&&typeof n.function.name=="string"?{id:n.id,args:JSON.parse(n.function.arguments),name:n.function.name,type:"tool_call"}:n}function ND(n){return typeof n=="object"&&n!=null&&n.lc===1&&Array.isArray(n.id)&&n.kwargs!=null&&typeof n.kwargs=="object"}function Pp(n){let e,t;if(ND(n)){const r=n.id.at(-1);r==="HumanMessage"||r==="HumanMessageChunk"?e="user":r==="AIMessage"||r==="AIMessageChunk"?e="assistant":r==="SystemMessage"||r==="SystemMessageChunk"?e="system":r==="FunctionMessage"||r==="FunctionMessageChunk"?e="function":r==="ToolMessage"||r==="ToolMessageChunk"?e="tool":e="unknown",t=n.kwargs}else{const{type:r,...i}=n;e=r,t=i}if(e==="human"||e==="user")return new jl(t);if(e==="ai"||e==="assistant"){const{tool_calls:r,...i}=t;if(!Array.isArray(r))return new nl(t);const o=r.map(PD);return new nl({...i,tool_calls:o})}else{if(e==="system")return new Ny(t);if(e==="developer")return new Ny({...t,additional_kwargs:{...t.additional_kwargs,__openai_role__:"developer"}});if(e==="tool"&&"tool_call_id"in t)return new OD({...t,content:t.content,tool_call_id:t.tool_call_id,name:t.name});throw bR(new Error(`Unable to coerce message from array: only human, AI, system, developer, or tool message coercion is currently supported.

Received: ${JSON.stringify(n,null,2)}`),"MESSAGE_COERCION_FAILURE")}}function ju(n){if(typeof n=="string")return new jl(n);if(Cd(n))return n;if(Array.isArray(n)){const[e,t]=n;return Pp({type:e,content:t})}else if(ED(n)){const{role:e,...t}=n;return Pp({...t,type:e})}else return Pp(n)}function vR(n,e="Human",t="AI"){const r=[];for(const i of n){let o;if(i._getType()==="human")o=e;else if(i._getType()==="ai")o=t;else if(i._getType()==="system")o="System";else if(i._getType()==="function")o="Function";else if(i._getType()==="tool")o="Tool";else if(i._getType()==="generic")o=i.role;else throw new Error(`Got unsupported message type: ${i._getType()}`);const l=i.name?`${i.name}, `:"",c=typeof i.content=="string"?i.content:JSON.stringify(i.content,null,2);r.push(`${o}: ${l}${c}`)}return r.join(`
`)}function jD(n){var t;const e=n._getType();if(e==="human")return new jd({...n});if(e==="ai"){let r={...n};return"tool_calls"in r&&(r={...r,tool_call_chunks:(t=r.tool_calls)==null?void 0:t.map(i=>({...i,type:"tool_call_chunk",index:void 0,args:JSON.stringify(i.args)}))}),new Za({...r})}else{if(e==="system")return new rl({...n});if(e==="function")return new Nd({...n});if(Nl.isInstance(n))return new Pd({...n});throw new Error("Unknown message type.")}}var Le;(function(n){n.assertEqual=i=>i;function e(i){}n.assertIs=e;function t(i){throw new Error}n.assertNever=t,n.arrayToEnum=i=>{const o={};for(const l of i)o[l]=l;return o},n.getValidEnumValues=i=>{const o=n.objectKeys(i).filter(c=>typeof i[i[c]]!="number"),l={};for(const c of o)l[c]=i[c];return n.objectValues(l)},n.objectValues=i=>n.objectKeys(i).map(function(o){return i[o]}),n.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const o=[];for(const l in i)Object.prototype.hasOwnProperty.call(i,l)&&o.push(l);return o},n.find=(i,o)=>{for(const l of i)if(o(l))return l},n.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,o=" | "){return i.map(l=>typeof l=="string"?`'${l}'`:l).join(o)}n.joinValues=r,n.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(Le||(Le={}));var jy;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(jy||(jy={}));const ae=Le.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ta=n=>{switch(typeof n){case"undefined":return ae.undefined;case"string":return ae.string;case"number":return isNaN(n)?ae.nan:ae.number;case"boolean":return ae.boolean;case"function":return ae.function;case"bigint":return ae.bigint;case"symbol":return ae.symbol;case"object":return Array.isArray(n)?ae.array:n===null?ae.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?ae.promise:typeof Map<"u"&&n instanceof Map?ae.map:typeof Set<"u"&&n instanceof Set?ae.set:typeof Date<"u"&&n instanceof Date?ae.date:ae.object;default:return ae.unknown}},W=Le.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),kD=n=>JSON.stringify(n,null,2).replace(/"([^"]+)":/g,"$1:");class Pn extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(o){return o.message},r={_errors:[]},i=o=>{for(const l of o.issues)if(l.code==="invalid_union")l.unionErrors.map(i);else if(l.code==="invalid_return_type")i(l.returnTypeError);else if(l.code==="invalid_arguments")i(l.argumentsError);else if(l.path.length===0)r._errors.push(t(l));else{let c=r,d=0;for(;d<l.path.length;){const h=l.path[d];d===l.path.length-1?(c[h]=c[h]||{_errors:[]},c[h]._errors.push(t(l))):c[h]=c[h]||{_errors:[]},c=c[h],d++}}};return i(this),r}static assert(e){if(!(e instanceof Pn))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Le.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const i of this.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}Pn.create=n=>new Pn(n);const eo=(n,e)=>{let t;switch(n.code){case W.invalid_type:n.received===ae.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case W.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,Le.jsonStringifyReplacer)}`;break;case W.unrecognized_keys:t=`Unrecognized key(s) in object: ${Le.joinValues(n.keys,", ")}`;break;case W.invalid_union:t="Invalid input";break;case W.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${Le.joinValues(n.options)}`;break;case W.invalid_enum_value:t=`Invalid enum value. Expected ${Le.joinValues(n.options)}, received '${n.received}'`;break;case W.invalid_arguments:t="Invalid function arguments";break;case W.invalid_return_type:t="Invalid function return type";break;case W.invalid_date:t="Invalid date";break;case W.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:Le.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case W.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case W.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case W.custom:t="Invalid input";break;case W.invalid_intersection_types:t="Intersection results could not be merged";break;case W.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case W.not_finite:t="Number must be finite";break;default:t=e.defaultError,Le.assertNever(n)}return{message:t}};let wR=eo;function MD(n){wR=n}function Hf(){return wR}const Zf=n=>{const{data:e,path:t,errorMaps:r,issueData:i}=n,o=[...t,...i.path||[]],l={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let c="";const d=r.filter(h=>!!h).slice().reverse();for(const h of d)c=h(l,{data:e,defaultError:c}).message;return{...i,path:o,message:c}},ID=[];function ne(n,e){const t=Hf(),r=Zf({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===eo?void 0:eo].filter(i=>!!i)});n.common.issues.push(r)}class Xt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const i of t){if(i.status==="aborted")return we;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const i of t){const o=await i.key,l=await i.value;r.push({key:o,value:l})}return Xt.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const i of t){const{key:o,value:l}=i;if(o.status==="aborted"||l.status==="aborted")return we;o.status==="dirty"&&e.dirty(),l.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof l.value<"u"||i.alwaysSet)&&(r[o.value]=l.value)}return{status:e.value,value:r}}}const we=Object.freeze({status:"aborted"}),Vs=n=>({status:"dirty",value:n}),nn=n=>({status:"valid",value:n}),ky=n=>n.status==="aborted",My=n=>n.status==="dirty",Di=n=>n.status==="valid",al=n=>typeof Promise<"u"&&n instanceof Promise;function Gf(n,e,t,r){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(n)}function SR(n,e,t,r,i){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t}var ue;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ue||(ue={}));var ku,Mu;class jr{constructor(e,t,r,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const AT=(n,e)=>{if(Di(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Pn(n.common.issues);return this._error=t,this._error}}};function Ee(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:r,description:i}=n;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(l,c)=>{var d,h;const{message:m}=n;return l.code==="invalid_enum_value"?{message:m??c.defaultError}:typeof c.data>"u"?{message:(d=m??r)!==null&&d!==void 0?d:c.defaultError}:l.code!=="invalid_type"?{message:c.defaultError}:{message:(h=m??t)!==null&&h!==void 0?h:c.defaultError}},description:i}}class Pe{get description(){return this._def.description}_getType(e){return ta(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:ta(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Xt,ctx:{common:e.parent.common,data:e.data,parsedType:ta(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(al(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const i={common:{issues:[],async:(r=t==null?void 0:t.async)!==null&&r!==void 0?r:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ta(e)},o=this._parseSync({data:e,path:i.path,parent:i});return AT(i,o)}"~validate"(e){var t,r;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ta(e)};if(!this["~standard"].async)try{const o=this._parseSync({data:e,path:[],parent:i});return Di(o)?{value:o.value}:{issues:i.common.issues}}catch(o){!((r=(t=o==null?void 0:o.message)===null||t===void 0?void 0:t.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(o=>Di(o)?{value:o.value}:{issues:i.common.issues})}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ta(e)},i=this._parse({data:e,path:r.path,parent:r}),o=await(al(i)?i:Promise.resolve(i));return AT(r,o)}refine(e,t){const r=i=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(i):t;return this._refinement((i,o)=>{const l=e(i),c=()=>o.addIssue({code:W.custom,...r(i)});return typeof Promise<"u"&&l instanceof Promise?l.then(d=>d?!0:(c(),!1)):l?!0:(c(),!1)})}refinement(e,t){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof t=="function"?t(r,i):t),!1))}_refinement(e){return new dr({schema:this,typeName:q.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return lr.create(this,this._def)}nullable(){return Ka.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ur.create(this)}promise(){return no.create(this,this._def)}or(e){return ul.create([this,e],this._def)}and(e){return ll.create(this,e,this._def)}transform(e){return new dr({...Ee(this._def),schema:this,typeName:q.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new ml({...Ee(this._def),innerType:this,defaultValue:t,typeName:q.ZodDefault})}brand(){return new d_({typeName:q.ZodBranded,type:this,...Ee(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new pl({...Ee(this._def),innerType:this,catchValue:t,typeName:q.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return kl.create(this,e)}readonly(){return gl.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const LD=/^c[^\s-]{8,}$/i,DD=/^[0-9a-z]+$/,$D=/^[0-9A-HJKMNP-TV-Z]{26}$/i,UD=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,BD=/^[a-z0-9_-]{21}$/i,zD=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,VD=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,qD=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,FD="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Np;const HD=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ZD=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,GD=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,YD=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,XD=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,KD=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,AR="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",JD=new RegExp(`^${AR}$`);function TR(n){let e="[0-5]\\d";n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`);const t=n.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function QD(n){return new RegExp(`^${TR(n)}$`)}function ER(n){let e=`${AR}T${TR(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function WD(n,e){return!!((e==="v4"||!e)&&HD.test(n)||(e==="v6"||!e)&&GD.test(n))}function e4(n,e){if(!zD.test(n))return!1;try{const[t]=n.split("."),r=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}function t4(n,e){return!!((e==="v4"||!e)&&ZD.test(n)||(e==="v6"||!e)&&YD.test(n))}class sr extends Pe{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ae.string){const o=this._getOrReturnCtx(e);return ne(o,{code:W.invalid_type,expected:ae.string,received:o.parsedType}),we}const r=new Xt;let i;for(const o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),ne(i,{code:W.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),ne(i,{code:W.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="length"){const l=e.data.length>o.value,c=e.data.length<o.value;(l||c)&&(i=this._getOrReturnCtx(e,i),l?ne(i,{code:W.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):c&&ne(i,{code:W.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if(o.kind==="email")qD.test(e.data)||(i=this._getOrReturnCtx(e,i),ne(i,{validation:"email",code:W.invalid_string,message:o.message}),r.dirty());else if(o.kind==="emoji")Np||(Np=new RegExp(FD,"u")),Np.test(e.data)||(i=this._getOrReturnCtx(e,i),ne(i,{validation:"emoji",code:W.invalid_string,message:o.message}),r.dirty());else if(o.kind==="uuid")UD.test(e.data)||(i=this._getOrReturnCtx(e,i),ne(i,{validation:"uuid",code:W.invalid_string,message:o.message}),r.dirty());else if(o.kind==="nanoid")BD.test(e.data)||(i=this._getOrReturnCtx(e,i),ne(i,{validation:"nanoid",code:W.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid")LD.test(e.data)||(i=this._getOrReturnCtx(e,i),ne(i,{validation:"cuid",code:W.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid2")DD.test(e.data)||(i=this._getOrReturnCtx(e,i),ne(i,{validation:"cuid2",code:W.invalid_string,message:o.message}),r.dirty());else if(o.kind==="ulid")$D.test(e.data)||(i=this._getOrReturnCtx(e,i),ne(i,{validation:"ulid",code:W.invalid_string,message:o.message}),r.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),ne(i,{validation:"url",code:W.invalid_string,message:o.message}),r.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),ne(i,{validation:"regex",code:W.invalid_string,message:o.message}),r.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),ne(i,{code:W.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),ne(i,{code:W.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),ne(i,{code:W.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty()):o.kind==="datetime"?ER(o).test(e.data)||(i=this._getOrReturnCtx(e,i),ne(i,{code:W.invalid_string,validation:"datetime",message:o.message}),r.dirty()):o.kind==="date"?JD.test(e.data)||(i=this._getOrReturnCtx(e,i),ne(i,{code:W.invalid_string,validation:"date",message:o.message}),r.dirty()):o.kind==="time"?QD(o).test(e.data)||(i=this._getOrReturnCtx(e,i),ne(i,{code:W.invalid_string,validation:"time",message:o.message}),r.dirty()):o.kind==="duration"?VD.test(e.data)||(i=this._getOrReturnCtx(e,i),ne(i,{validation:"duration",code:W.invalid_string,message:o.message}),r.dirty()):o.kind==="ip"?WD(e.data,o.version)||(i=this._getOrReturnCtx(e,i),ne(i,{validation:"ip",code:W.invalid_string,message:o.message}),r.dirty()):o.kind==="jwt"?e4(e.data,o.alg)||(i=this._getOrReturnCtx(e,i),ne(i,{validation:"jwt",code:W.invalid_string,message:o.message}),r.dirty()):o.kind==="cidr"?t4(e.data,o.version)||(i=this._getOrReturnCtx(e,i),ne(i,{validation:"cidr",code:W.invalid_string,message:o.message}),r.dirty()):o.kind==="base64"?XD.test(e.data)||(i=this._getOrReturnCtx(e,i),ne(i,{validation:"base64",code:W.invalid_string,message:o.message}),r.dirty()):o.kind==="base64url"?KD.test(e.data)||(i=this._getOrReturnCtx(e,i),ne(i,{validation:"base64url",code:W.invalid_string,message:o.message}),r.dirty()):Le.assertNever(o);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(i=>e.test(i),{validation:t,code:W.invalid_string,...ue.errToObj(r)})}_addCheck(e){return new sr({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ue.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ue.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ue.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ue.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ue.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ue.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ue.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ue.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ue.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ue.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ue.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ue.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ue.errToObj(e)})}datetime(e){var t,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...ue.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...ue.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ue.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...ue.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...ue.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...ue.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...ue.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...ue.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...ue.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...ue.errToObj(t)})}nonempty(e){return this.min(1,ue.errToObj(e))}trim(){return new sr({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new sr({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new sr({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}sr.create=n=>{var e;return new sr({checks:[],typeName:q.ZodString,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...Ee(n)})};function n4(n,e){const t=(n.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=t>r?t:r,o=parseInt(n.toFixed(i).replace(".","")),l=parseInt(e.toFixed(i).replace(".",""));return o%l/Math.pow(10,i)}class Ga extends Pe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ae.number){const o=this._getOrReturnCtx(e);return ne(o,{code:W.invalid_type,expected:ae.number,received:o.parsedType}),we}let r;const i=new Xt;for(const o of this._def.checks)o.kind==="int"?Le.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),ne(r,{code:W.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),ne(r,{code:W.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),ne(r,{code:W.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?n4(e.data,o.value)!==0&&(r=this._getOrReturnCtx(e,r),ne(r,{code:W.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),ne(r,{code:W.not_finite,message:o.message}),i.dirty()):Le.assertNever(o);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,ue.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ue.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ue.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ue.toString(t))}setLimit(e,t,r,i){return new Ga({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:ue.toString(i)}]})}_addCheck(e){return new Ga({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ue.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ue.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ue.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ue.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ue.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ue.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:ue.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ue.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ue.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Le.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Ga.create=n=>new Ga({checks:[],typeName:q.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...Ee(n)});class Ya extends Pe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ae.bigint)return this._getInvalidInput(e);let r;const i=new Xt;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),ne(r,{code:W.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),ne(r,{code:W.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),ne(r,{code:W.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):Le.assertNever(o);return{status:i.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return ne(t,{code:W.invalid_type,expected:ae.bigint,received:t.parsedType}),we}gte(e,t){return this.setLimit("min",e,!0,ue.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ue.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ue.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ue.toString(t))}setLimit(e,t,r,i){return new Ya({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:ue.toString(i)}]})}_addCheck(e){return new Ya({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ue.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ue.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ue.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ue.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ue.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Ya.create=n=>{var e;return new Ya({checks:[],typeName:q.ZodBigInt,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...Ee(n)})};class il extends Pe{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ae.boolean){const r=this._getOrReturnCtx(e);return ne(r,{code:W.invalid_type,expected:ae.boolean,received:r.parsedType}),we}return nn(e.data)}}il.create=n=>new il({typeName:q.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...Ee(n)});class $i extends Pe{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ae.date){const o=this._getOrReturnCtx(e);return ne(o,{code:W.invalid_type,expected:ae.date,received:o.parsedType}),we}if(isNaN(e.data.getTime())){const o=this._getOrReturnCtx(e);return ne(o,{code:W.invalid_date}),we}const r=new Xt;let i;for(const o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),ne(i,{code:W.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),r.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),ne(i,{code:W.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),r.dirty()):Le.assertNever(o);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new $i({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:ue.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:ue.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}$i.create=n=>new $i({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:q.ZodDate,...Ee(n)});class Yf extends Pe{_parse(e){if(this._getType(e)!==ae.symbol){const r=this._getOrReturnCtx(e);return ne(r,{code:W.invalid_type,expected:ae.symbol,received:r.parsedType}),we}return nn(e.data)}}Yf.create=n=>new Yf({typeName:q.ZodSymbol,...Ee(n)});class sl extends Pe{_parse(e){if(this._getType(e)!==ae.undefined){const r=this._getOrReturnCtx(e);return ne(r,{code:W.invalid_type,expected:ae.undefined,received:r.parsedType}),we}return nn(e.data)}}sl.create=n=>new sl({typeName:q.ZodUndefined,...Ee(n)});class ol extends Pe{_parse(e){if(this._getType(e)!==ae.null){const r=this._getOrReturnCtx(e);return ne(r,{code:W.invalid_type,expected:ae.null,received:r.parsedType}),we}return nn(e.data)}}ol.create=n=>new ol({typeName:q.ZodNull,...Ee(n)});class to extends Pe{constructor(){super(...arguments),this._any=!0}_parse(e){return nn(e.data)}}to.create=n=>new to({typeName:q.ZodAny,...Ee(n)});class ji extends Pe{constructor(){super(...arguments),this._unknown=!0}_parse(e){return nn(e.data)}}ji.create=n=>new ji({typeName:q.ZodUnknown,...Ee(n)});class sa extends Pe{_parse(e){const t=this._getOrReturnCtx(e);return ne(t,{code:W.invalid_type,expected:ae.never,received:t.parsedType}),we}}sa.create=n=>new sa({typeName:q.ZodNever,...Ee(n)});class Xf extends Pe{_parse(e){if(this._getType(e)!==ae.undefined){const r=this._getOrReturnCtx(e);return ne(r,{code:W.invalid_type,expected:ae.void,received:r.parsedType}),we}return nn(e.data)}}Xf.create=n=>new Xf({typeName:q.ZodVoid,...Ee(n)});class ur extends Pe{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),i=this._def;if(t.parsedType!==ae.array)return ne(t,{code:W.invalid_type,expected:ae.array,received:t.parsedType}),we;if(i.exactLength!==null){const l=t.data.length>i.exactLength.value,c=t.data.length<i.exactLength.value;(l||c)&&(ne(t,{code:l?W.too_big:W.too_small,minimum:c?i.exactLength.value:void 0,maximum:l?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&t.data.length<i.minLength.value&&(ne(t,{code:W.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&t.data.length>i.maxLength.value&&(ne(t,{code:W.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((l,c)=>i.type._parseAsync(new jr(t,l,t.path,c)))).then(l=>Xt.mergeArray(r,l));const o=[...t.data].map((l,c)=>i.type._parseSync(new jr(t,l,t.path,c)));return Xt.mergeArray(r,o)}get element(){return this._def.type}min(e,t){return new ur({...this._def,minLength:{value:e,message:ue.toString(t)}})}max(e,t){return new ur({...this._def,maxLength:{value:e,message:ue.toString(t)}})}length(e,t){return new ur({...this._def,exactLength:{value:e,message:ue.toString(t)}})}nonempty(e){return this.min(1,e)}}ur.create=(n,e)=>new ur({type:n,minLength:null,maxLength:null,exactLength:null,typeName:q.ZodArray,...Ee(e)});function Is(n){if(n instanceof it){const e={};for(const t in n.shape){const r=n.shape[t];e[t]=lr.create(Is(r))}return new it({...n._def,shape:()=>e})}else return n instanceof ur?new ur({...n._def,type:Is(n.element)}):n instanceof lr?lr.create(Is(n.unwrap())):n instanceof Ka?Ka.create(Is(n.unwrap())):n instanceof kr?kr.create(n.items.map(e=>Is(e))):n}class it extends Pe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=Le.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==ae.object){const h=this._getOrReturnCtx(e);return ne(h,{code:W.invalid_type,expected:ae.object,received:h.parsedType}),we}const{status:r,ctx:i}=this._processInputParams(e),{shape:o,keys:l}=this._getCached(),c=[];if(!(this._def.catchall instanceof sa&&this._def.unknownKeys==="strip"))for(const h in i.data)l.includes(h)||c.push(h);const d=[];for(const h of l){const m=o[h],g=i.data[h];d.push({key:{status:"valid",value:h},value:m._parse(new jr(i,g,i.path,h)),alwaysSet:h in i.data})}if(this._def.catchall instanceof sa){const h=this._def.unknownKeys;if(h==="passthrough")for(const m of c)d.push({key:{status:"valid",value:m},value:{status:"valid",value:i.data[m]}});else if(h==="strict")c.length>0&&(ne(i,{code:W.unrecognized_keys,keys:c}),r.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const h=this._def.catchall;for(const m of c){const g=i.data[m];d.push({key:{status:"valid",value:m},value:h._parse(new jr(i,g,i.path,m)),alwaysSet:m in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const h=[];for(const m of d){const g=await m.key,b=await m.value;h.push({key:g,value:b,alwaysSet:m.alwaysSet})}return h}).then(h=>Xt.mergeObjectSync(r,h)):Xt.mergeObjectSync(r,d)}get shape(){return this._def.shape()}strict(e){return ue.errToObj,new it({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,r)=>{var i,o,l,c;const d=(l=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,t,r).message)!==null&&l!==void 0?l:r.defaultError;return t.code==="unrecognized_keys"?{message:(c=ue.errToObj(e).message)!==null&&c!==void 0?c:d}:{message:d}}}:{}})}strip(){return new it({...this._def,unknownKeys:"strip"})}passthrough(){return new it({...this._def,unknownKeys:"passthrough"})}extend(e){return new it({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new it({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:q.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new it({...this._def,catchall:e})}pick(e){const t={};return Le.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new it({...this._def,shape:()=>t})}omit(e){const t={};return Le.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new it({...this._def,shape:()=>t})}deepPartial(){return Is(this)}partial(e){const t={};return Le.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?t[r]=i:t[r]=i.optional()}),new it({...this._def,shape:()=>t})}required(e){const t={};return Le.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let o=this.shape[r];for(;o instanceof lr;)o=o._def.innerType;t[r]=o}}),new it({...this._def,shape:()=>t})}keyof(){return xR(Le.objectKeys(this.shape))}}it.create=(n,e)=>new it({shape:()=>n,unknownKeys:"strip",catchall:sa.create(),typeName:q.ZodObject,...Ee(e)});it.strictCreate=(n,e)=>new it({shape:()=>n,unknownKeys:"strict",catchall:sa.create(),typeName:q.ZodObject,...Ee(e)});it.lazycreate=(n,e)=>new it({shape:n,unknownKeys:"strip",catchall:sa.create(),typeName:q.ZodObject,...Ee(e)});class ul extends Pe{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;function i(o){for(const c of o)if(c.result.status==="valid")return c.result;for(const c of o)if(c.result.status==="dirty")return t.common.issues.push(...c.ctx.common.issues),c.result;const l=o.map(c=>new Pn(c.ctx.common.issues));return ne(t,{code:W.invalid_union,unionErrors:l}),we}if(t.common.async)return Promise.all(r.map(async o=>{const l={...t,common:{...t.common,issues:[]},parent:null};return{result:await o._parseAsync({data:t.data,path:t.path,parent:l}),ctx:l}})).then(i);{let o;const l=[];for(const d of r){const h={...t,common:{...t.common,issues:[]},parent:null},m=d._parseSync({data:t.data,path:t.path,parent:h});if(m.status==="valid")return m;m.status==="dirty"&&!o&&(o={result:m,ctx:h}),h.common.issues.length&&l.push(h.common.issues)}if(o)return t.common.issues.push(...o.ctx.common.issues),o.result;const c=l.map(d=>new Pn(d));return ne(t,{code:W.invalid_union,unionErrors:c}),we}}get options(){return this._def.options}}ul.create=(n,e)=>new ul({options:n,typeName:q.ZodUnion,...Ee(e)});const ea=n=>n instanceof fl?ea(n.schema):n instanceof dr?ea(n.innerType()):n instanceof dl?[n.value]:n instanceof Xa?n.options:n instanceof hl?Le.objectValues(n.enum):n instanceof ml?ea(n._def.innerType):n instanceof sl?[void 0]:n instanceof ol?[null]:n instanceof lr?[void 0,...ea(n.unwrap())]:n instanceof Ka?[null,...ea(n.unwrap())]:n instanceof d_||n instanceof gl?ea(n.unwrap()):n instanceof pl?ea(n._def.innerType):[];class kd extends Pe{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==ae.object)return ne(t,{code:W.invalid_type,expected:ae.object,received:t.parsedType}),we;const r=this.discriminator,i=t.data[r],o=this.optionsMap.get(i);return o?t.common.async?o._parseAsync({data:t.data,path:t.path,parent:t}):o._parseSync({data:t.data,path:t.path,parent:t}):(ne(t,{code:W.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),we)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const i=new Map;for(const o of t){const l=ea(o.shape[e]);if(!l.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const c of l){if(i.has(c))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(c)}`);i.set(c,o)}}return new kd({typeName:q.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:i,...Ee(r)})}}function Iy(n,e){const t=ta(n),r=ta(e);if(n===e)return{valid:!0,data:n};if(t===ae.object&&r===ae.object){const i=Le.objectKeys(e),o=Le.objectKeys(n).filter(c=>i.indexOf(c)!==-1),l={...n,...e};for(const c of o){const d=Iy(n[c],e[c]);if(!d.valid)return{valid:!1};l[c]=d.data}return{valid:!0,data:l}}else if(t===ae.array&&r===ae.array){if(n.length!==e.length)return{valid:!1};const i=[];for(let o=0;o<n.length;o++){const l=n[o],c=e[o],d=Iy(l,c);if(!d.valid)return{valid:!1};i.push(d.data)}return{valid:!0,data:i}}else return t===ae.date&&r===ae.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class ll extends Pe{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),i=(o,l)=>{if(ky(o)||ky(l))return we;const c=Iy(o.value,l.value);return c.valid?((My(o)||My(l))&&t.dirty(),{status:t.value,value:c.data}):(ne(r,{code:W.invalid_intersection_types}),we)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([o,l])=>i(o,l)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}ll.create=(n,e,t)=>new ll({left:n,right:e,typeName:q.ZodIntersection,...Ee(t)});class kr extends Pe{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ae.array)return ne(r,{code:W.invalid_type,expected:ae.array,received:r.parsedType}),we;if(r.data.length<this._def.items.length)return ne(r,{code:W.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),we;!this._def.rest&&r.data.length>this._def.items.length&&(ne(r,{code:W.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const o=[...r.data].map((l,c)=>{const d=this._def.items[c]||this._def.rest;return d?d._parse(new jr(r,l,r.path,c)):null}).filter(l=>!!l);return r.common.async?Promise.all(o).then(l=>Xt.mergeArray(t,l)):Xt.mergeArray(t,o)}get items(){return this._def.items}rest(e){return new kr({...this._def,rest:e})}}kr.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new kr({items:n,typeName:q.ZodTuple,rest:null,...Ee(e)})};class cl extends Pe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ae.object)return ne(r,{code:W.invalid_type,expected:ae.object,received:r.parsedType}),we;const i=[],o=this._def.keyType,l=this._def.valueType;for(const c in r.data)i.push({key:o._parse(new jr(r,c,r.path,c)),value:l._parse(new jr(r,r.data[c],r.path,c)),alwaysSet:c in r.data});return r.common.async?Xt.mergeObjectAsync(t,i):Xt.mergeObjectSync(t,i)}get element(){return this._def.valueType}static create(e,t,r){return t instanceof Pe?new cl({keyType:e,valueType:t,typeName:q.ZodRecord,...Ee(r)}):new cl({keyType:sr.create(),valueType:e,typeName:q.ZodRecord,...Ee(t)})}}class Kf extends Pe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ae.map)return ne(r,{code:W.invalid_type,expected:ae.map,received:r.parsedType}),we;const i=this._def.keyType,o=this._def.valueType,l=[...r.data.entries()].map(([c,d],h)=>({key:i._parse(new jr(r,c,r.path,[h,"key"])),value:o._parse(new jr(r,d,r.path,[h,"value"]))}));if(r.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const d of l){const h=await d.key,m=await d.value;if(h.status==="aborted"||m.status==="aborted")return we;(h.status==="dirty"||m.status==="dirty")&&t.dirty(),c.set(h.value,m.value)}return{status:t.value,value:c}})}else{const c=new Map;for(const d of l){const h=d.key,m=d.value;if(h.status==="aborted"||m.status==="aborted")return we;(h.status==="dirty"||m.status==="dirty")&&t.dirty(),c.set(h.value,m.value)}return{status:t.value,value:c}}}}Kf.create=(n,e,t)=>new Kf({valueType:e,keyType:n,typeName:q.ZodMap,...Ee(t)});class Ui extends Pe{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ae.set)return ne(r,{code:W.invalid_type,expected:ae.set,received:r.parsedType}),we;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(ne(r,{code:W.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(ne(r,{code:W.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());const o=this._def.valueType;function l(d){const h=new Set;for(const m of d){if(m.status==="aborted")return we;m.status==="dirty"&&t.dirty(),h.add(m.value)}return{status:t.value,value:h}}const c=[...r.data.values()].map((d,h)=>o._parse(new jr(r,d,r.path,h)));return r.common.async?Promise.all(c).then(d=>l(d)):l(c)}min(e,t){return new Ui({...this._def,minSize:{value:e,message:ue.toString(t)}})}max(e,t){return new Ui({...this._def,maxSize:{value:e,message:ue.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Ui.create=(n,e)=>new Ui({valueType:n,minSize:null,maxSize:null,typeName:q.ZodSet,...Ee(e)});class Xs extends Pe{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==ae.function)return ne(t,{code:W.invalid_type,expected:ae.function,received:t.parsedType}),we;function r(c,d){return Zf({data:c,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Hf(),eo].filter(h=>!!h),issueData:{code:W.invalid_arguments,argumentsError:d}})}function i(c,d){return Zf({data:c,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Hf(),eo].filter(h=>!!h),issueData:{code:W.invalid_return_type,returnTypeError:d}})}const o={errorMap:t.common.contextualErrorMap},l=t.data;if(this._def.returns instanceof no){const c=this;return nn(async function(...d){const h=new Pn([]),m=await c._def.args.parseAsync(d,o).catch(_=>{throw h.addIssue(r(d,_)),h}),g=await Reflect.apply(l,this,m);return await c._def.returns._def.type.parseAsync(g,o).catch(_=>{throw h.addIssue(i(g,_)),h})})}else{const c=this;return nn(function(...d){const h=c._def.args.safeParse(d,o);if(!h.success)throw new Pn([r(d,h.error)]);const m=Reflect.apply(l,this,h.data),g=c._def.returns.safeParse(m,o);if(!g.success)throw new Pn([i(m,g.error)]);return g.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Xs({...this._def,args:kr.create(e).rest(ji.create())})}returns(e){return new Xs({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new Xs({args:e||kr.create([]).rest(ji.create()),returns:t||ji.create(),typeName:q.ZodFunction,...Ee(r)})}}class fl extends Pe{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}fl.create=(n,e)=>new fl({getter:n,typeName:q.ZodLazy,...Ee(e)});class dl extends Pe{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return ne(t,{received:t.data,code:W.invalid_literal,expected:this._def.value}),we}return{status:"valid",value:e.data}}get value(){return this._def.value}}dl.create=(n,e)=>new dl({value:n,typeName:q.ZodLiteral,...Ee(e)});function xR(n,e){return new Xa({values:n,typeName:q.ZodEnum,...Ee(e)})}class Xa extends Pe{constructor(){super(...arguments),ku.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),r=this._def.values;return ne(t,{expected:Le.joinValues(r),received:t.parsedType,code:W.invalid_type}),we}if(Gf(this,ku)||SR(this,ku,new Set(this._def.values)),!Gf(this,ku).has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return ne(t,{received:t.data,code:W.invalid_enum_value,options:r}),we}return nn(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Xa.create(e,{...this._def,...t})}exclude(e,t=this._def){return Xa.create(this.options.filter(r=>!e.includes(r)),{...this._def,...t})}}ku=new WeakMap;Xa.create=xR;class hl extends Pe{constructor(){super(...arguments),Mu.set(this,void 0)}_parse(e){const t=Le.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ae.string&&r.parsedType!==ae.number){const i=Le.objectValues(t);return ne(r,{expected:Le.joinValues(i),received:r.parsedType,code:W.invalid_type}),we}if(Gf(this,Mu)||SR(this,Mu,new Set(Le.getValidEnumValues(this._def.values))),!Gf(this,Mu).has(e.data)){const i=Le.objectValues(t);return ne(r,{received:r.data,code:W.invalid_enum_value,options:i}),we}return nn(e.data)}get enum(){return this._def.values}}Mu=new WeakMap;hl.create=(n,e)=>new hl({values:n,typeName:q.ZodNativeEnum,...Ee(e)});class no extends Pe{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==ae.promise&&t.common.async===!1)return ne(t,{code:W.invalid_type,expected:ae.promise,received:t.parsedType}),we;const r=t.parsedType===ae.promise?t.data:Promise.resolve(t.data);return nn(r.then(i=>this._def.type.parseAsync(i,{path:t.path,errorMap:t.common.contextualErrorMap})))}}no.create=(n,e)=>new no({type:n,typeName:q.ZodPromise,...Ee(e)});class dr extends Pe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===q.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:l=>{ne(r,l),l.fatal?t.abort():t.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){const l=i.transform(r.data,o);if(r.common.async)return Promise.resolve(l).then(async c=>{if(t.value==="aborted")return we;const d=await this._def.schema._parseAsync({data:c,path:r.path,parent:r});return d.status==="aborted"?we:d.status==="dirty"||t.value==="dirty"?Vs(d.value):d});{if(t.value==="aborted")return we;const c=this._def.schema._parseSync({data:l,path:r.path,parent:r});return c.status==="aborted"?we:c.status==="dirty"||t.value==="dirty"?Vs(c.value):c}}if(i.type==="refinement"){const l=c=>{const d=i.refinement(c,o);if(r.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(r.common.async===!1){const c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return c.status==="aborted"?we:(c.status==="dirty"&&t.dirty(),l(c.value),{status:t.value,value:c.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(c=>c.status==="aborted"?we:(c.status==="dirty"&&t.dirty(),l(c.value).then(()=>({status:t.value,value:c.value}))))}if(i.type==="transform")if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Di(l))return l;const c=i.transform(l.value,o);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:c}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>Di(l)?Promise.resolve(i.transform(l.value,o)).then(c=>({status:t.value,value:c})):l);Le.assertNever(i)}}dr.create=(n,e,t)=>new dr({schema:n,typeName:q.ZodEffects,effect:e,...Ee(t)});dr.createWithPreprocess=(n,e,t)=>new dr({schema:e,effect:{type:"preprocess",transform:n},typeName:q.ZodEffects,...Ee(t)});class lr extends Pe{_parse(e){return this._getType(e)===ae.undefined?nn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}lr.create=(n,e)=>new lr({innerType:n,typeName:q.ZodOptional,...Ee(e)});class Ka extends Pe{_parse(e){return this._getType(e)===ae.null?nn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ka.create=(n,e)=>new Ka({innerType:n,typeName:q.ZodNullable,...Ee(e)});class ml extends Pe{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===ae.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}ml.create=(n,e)=>new ml({innerType:n,typeName:q.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ee(e)});class pl extends Pe{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return al(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Pn(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Pn(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}pl.create=(n,e)=>new pl({innerType:n,typeName:q.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ee(e)});class Jf extends Pe{_parse(e){if(this._getType(e)!==ae.nan){const r=this._getOrReturnCtx(e);return ne(r,{code:W.invalid_type,expected:ae.nan,received:r.parsedType}),we}return{status:"valid",value:e.data}}}Jf.create=n=>new Jf({typeName:q.ZodNaN,...Ee(n)});const r4=Symbol("zod_brand");class d_ extends Pe{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class kl extends Pe{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?we:o.status==="dirty"?(t.dirty(),Vs(o.value)):this._def.out._parseAsync({data:o.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?we:i.status==="dirty"?(t.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,t){return new kl({in:e,out:t,typeName:q.ZodPipeline})}}class gl extends Pe{_parse(e){const t=this._def.innerType._parse(e),r=i=>(Di(i)&&(i.value=Object.freeze(i.value)),i);return al(t)?t.then(i=>r(i)):r(t)}unwrap(){return this._def.innerType}}gl.create=(n,e)=>new gl({innerType:n,typeName:q.ZodReadonly,...Ee(e)});function TT(n,e){const t=typeof n=="function"?n(e):typeof n=="string"?{message:n}:n;return typeof t=="string"?{message:t}:t}function OR(n,e={},t){return n?to.create().superRefine((r,i)=>{var o,l;const c=n(r);if(c instanceof Promise)return c.then(d=>{var h,m;if(!d){const g=TT(e,r),b=(m=(h=g.fatal)!==null&&h!==void 0?h:t)!==null&&m!==void 0?m:!0;i.addIssue({code:"custom",...g,fatal:b})}});if(!c){const d=TT(e,r),h=(l=(o=d.fatal)!==null&&o!==void 0?o:t)!==null&&l!==void 0?l:!0;i.addIssue({code:"custom",...d,fatal:h})}}):to.create()}const a4={object:it.lazycreate};var q;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(q||(q={}));const i4=(n,e={message:`Input not instance of ${n.name}`})=>OR(t=>t instanceof n,e),RR=sr.create,CR=Ga.create,s4=Jf.create,o4=Ya.create,PR=il.create,u4=$i.create,l4=Yf.create,c4=sl.create,f4=ol.create,d4=to.create,h4=ji.create,m4=sa.create,p4=Xf.create,g4=ur.create,y4=it.create,b4=it.strictCreate,_4=ul.create,v4=kd.create,w4=ll.create,S4=kr.create,A4=cl.create,T4=Kf.create,E4=Ui.create,x4=Xs.create,O4=fl.create,R4=dl.create,C4=Xa.create,P4=hl.create,N4=no.create,ET=dr.create,j4=lr.create,k4=Ka.create,M4=dr.createWithPreprocess,I4=kl.create,L4=()=>RR().optional(),D4=()=>CR().optional(),$4=()=>PR().optional(),U4={string:n=>sr.create({...n,coerce:!0}),number:n=>Ga.create({...n,coerce:!0}),boolean:n=>il.create({...n,coerce:!0}),bigint:n=>Ya.create({...n,coerce:!0}),date:n=>$i.create({...n,coerce:!0})},B4=we;var Va=Object.freeze({__proto__:null,defaultErrorMap:eo,setErrorMap:MD,getErrorMap:Hf,makeIssue:Zf,EMPTY_PATH:ID,addIssueToContext:ne,ParseStatus:Xt,INVALID:we,DIRTY:Vs,OK:nn,isAborted:ky,isDirty:My,isValid:Di,isAsync:al,get util(){return Le},get objectUtil(){return jy},ZodParsedType:ae,getParsedType:ta,ZodType:Pe,datetimeRegex:ER,ZodString:sr,ZodNumber:Ga,ZodBigInt:Ya,ZodBoolean:il,ZodDate:$i,ZodSymbol:Yf,ZodUndefined:sl,ZodNull:ol,ZodAny:to,ZodUnknown:ji,ZodNever:sa,ZodVoid:Xf,ZodArray:ur,ZodObject:it,ZodUnion:ul,ZodDiscriminatedUnion:kd,ZodIntersection:ll,ZodTuple:kr,ZodRecord:cl,ZodMap:Kf,ZodSet:Ui,ZodFunction:Xs,ZodLazy:fl,ZodLiteral:dl,ZodEnum:Xa,ZodNativeEnum:hl,ZodPromise:no,ZodEffects:dr,ZodTransformer:dr,ZodOptional:lr,ZodNullable:Ka,ZodDefault:ml,ZodCatch:pl,ZodNaN:Jf,BRAND:r4,ZodBranded:d_,ZodPipeline:kl,ZodReadonly:gl,custom:OR,Schema:Pe,ZodSchema:Pe,late:a4,get ZodFirstPartyTypeKind(){return q},coerce:U4,any:d4,array:g4,bigint:o4,boolean:PR,date:u4,discriminatedUnion:v4,effect:ET,enum:C4,function:x4,instanceof:i4,intersection:w4,lazy:O4,literal:R4,map:T4,nan:s4,nativeEnum:P4,never:m4,null:f4,nullable:k4,number:CR,object:y4,oboolean:$4,onumber:D4,optional:j4,ostring:L4,pipeline:I4,preprocess:M4,promise:N4,record:A4,set:E4,strictObject:b4,string:RR,symbol:l4,transformer:ET,tuple:S4,undefined:c4,union:_4,unknown:h4,void:p4,NEVER:B4,ZodIssueCode:W,quotelessJson:kD,ZodError:Pn}),_u={exports:{}},jp={},kp,xT;function z4(){if(xT)return kp;xT=1;function n(e,t){typeof t=="boolean"&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}return kp=n,n.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},n.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},n.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=new Date().getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var r=this._timeouts.shift();if(r===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1);else return!1;var i=this;return this._timer=setTimeout(function(){i._attempts++,i._operationTimeoutCb&&(i._timeout=setTimeout(function(){i._operationTimeoutCb(i._attempts)},i._operationTimeout),i._options.unref&&i._timeout.unref()),i._fn(i._attempts)},r),this._options.unref&&this._timer.unref(),!0},n.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},n.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},n.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},n.prototype.start=n.prototype.try,n.prototype.errors=function(){return this._errors},n.prototype.attempts=function(){return this._attempts},n.prototype.mainError=function(){if(this._errors.length===0)return null;for(var e={},t=null,r=0,i=0;i<this._errors.length;i++){var o=this._errors[i],l=o.message,c=(e[l]||0)+1;e[l]=c,c>=r&&(t=o,r=c)}return t},kp}var OT;function V4(){return OT||(OT=1,function(n){var e=z4();n.operation=function(t){var r=n.timeouts(t);return new e(r,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})},n.timeouts=function(t){if(t instanceof Array)return[].concat(t);var r={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var i in t)r[i]=t[i];if(r.minTimeout>r.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var o=[],l=0;l<r.retries;l++)o.push(this.createTimeout(l,r));return t&&t.forever&&!o.length&&o.push(this.createTimeout(l,r)),o.sort(function(c,d){return c-d}),o},n.createTimeout=function(t,r){var i=r.randomize?Math.random()+1:1,o=Math.round(i*Math.max(r.minTimeout,1)*Math.pow(r.factor,t));return o=Math.min(o,r.maxTimeout),o},n.wrap=function(t,r,i){if(r instanceof Array&&(i=r,r=null),!i){i=[];for(var o in t)typeof t[o]=="function"&&i.push(o)}for(var l=0;l<i.length;l++){var c=i[l],d=t[c];t[c]=(function(m){var g=n.operation(r),b=Array.prototype.slice.call(arguments,1),_=b.pop();b.push(function(v){g.retry(v)||(v&&(arguments[0]=g.mainError()),_.apply(this,arguments))}),g.attempt(function(){m.apply(t,b)})}).bind(t,d),t[c].options=r}}}(jp)),jp}var Mp,RT;function q4(){return RT||(RT=1,Mp=V4()),Mp}var CT;function F4(){if(CT)return _u.exports;CT=1;const n=q4(),e=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class t extends Error{constructor(c){super(),c instanceof Error?(this.originalError=c,{message:c}=c):(this.originalError=new Error(c),this.originalError.stack=this.stack),this.name="AbortError",this.message=c}}const r=(l,c,d)=>{const h=d.retries-(c-1);return l.attemptNumber=c,l.retriesLeft=h,l},i=l=>e.includes(l),o=(l,c)=>new Promise((d,h)=>{c={onFailedAttempt:()=>{},retries:10,...c};const m=n.operation(c);m.attempt(async g=>{try{d(await l(g))}catch(b){if(!(b instanceof Error)){h(new TypeError(`Non-error was thrown: "${b}". You should only throw errors.`));return}if(b instanceof t)m.stop(),h(b.originalError);else if(b instanceof TypeError&&!i(b.message))m.stop(),h(b);else{r(b,g,c);try{await c.onFailedAttempt(b)}catch(_){h(_);return}m.retry(b)||h(m.mainError())}}})});return _u.exports=o,_u.exports.default=o,_u.exports.AbortError=t,_u.exports}var H4=F4();const Qf=Mr(H4),Z4=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function Vu(n){return typeof n=="string"&&Z4.test(n)}var Lt=[];for(var Ip=0;Ip<256;++Ip)Lt.push((Ip+256).toString(16).slice(1));function G4(n,e=0){return(Lt[n[e+0]]+Lt[n[e+1]]+Lt[n[e+2]]+Lt[n[e+3]]+"-"+Lt[n[e+4]]+Lt[n[e+5]]+"-"+Lt[n[e+6]]+Lt[n[e+7]]+"-"+Lt[n[e+8]]+Lt[n[e+9]]+"-"+Lt[n[e+10]]+Lt[n[e+11]]+Lt[n[e+12]]+Lt[n[e+13]]+Lt[n[e+14]]+Lt[n[e+15]]).toLowerCase()}var df,Y4=new Uint8Array(16);function X4(){if(!df&&(df=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!df))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return df(Y4)}var K4=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const PT={randomUUID:K4};function Wt(n,e,t){if(PT.randomUUID&&!n)return PT.randomUUID();n=n||{};var r=n.random||(n.rng||X4)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,G4(r)}var hf={},Lp={exports:{}},NT;function J4(){return NT||(NT=1,function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function i(d,h,m){this.fn=d,this.context=h,this.once=m||!1}function o(d,h,m,g,b){if(typeof m!="function")throw new TypeError("The listener must be a function");var _=new i(m,g||d,b),v=t?t+h:h;return d._events[v]?d._events[v].fn?d._events[v]=[d._events[v],_]:d._events[v].push(_):(d._events[v]=_,d._eventsCount++),d}function l(d,h){--d._eventsCount===0?d._events=new r:delete d._events[h]}function c(){this._events=new r,this._eventsCount=0}c.prototype.eventNames=function(){var h=[],m,g;if(this._eventsCount===0)return h;for(g in m=this._events)e.call(m,g)&&h.push(t?g.slice(1):g);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(m)):h},c.prototype.listeners=function(h){var m=t?t+h:h,g=this._events[m];if(!g)return[];if(g.fn)return[g.fn];for(var b=0,_=g.length,v=new Array(_);b<_;b++)v[b]=g[b].fn;return v},c.prototype.listenerCount=function(h){var m=t?t+h:h,g=this._events[m];return g?g.fn?1:g.length:0},c.prototype.emit=function(h,m,g,b,_,v){var S=t?t+h:h;if(!this._events[S])return!1;var A=this._events[S],E=arguments.length,O,x;if(A.fn){switch(A.once&&this.removeListener(h,A.fn,void 0,!0),E){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,m),!0;case 3:return A.fn.call(A.context,m,g),!0;case 4:return A.fn.call(A.context,m,g,b),!0;case 5:return A.fn.call(A.context,m,g,b,_),!0;case 6:return A.fn.call(A.context,m,g,b,_,v),!0}for(x=1,O=new Array(E-1);x<E;x++)O[x-1]=arguments[x];A.fn.apply(A.context,O)}else{var j=A.length,P;for(x=0;x<j;x++)switch(A[x].once&&this.removeListener(h,A[x].fn,void 0,!0),E){case 1:A[x].fn.call(A[x].context);break;case 2:A[x].fn.call(A[x].context,m);break;case 3:A[x].fn.call(A[x].context,m,g);break;case 4:A[x].fn.call(A[x].context,m,g,b);break;default:if(!O)for(P=1,O=new Array(E-1);P<E;P++)O[P-1]=arguments[P];A[x].fn.apply(A[x].context,O)}}return!0},c.prototype.on=function(h,m,g){return o(this,h,m,g,!1)},c.prototype.once=function(h,m,g){return o(this,h,m,g,!0)},c.prototype.removeListener=function(h,m,g,b){var _=t?t+h:h;if(!this._events[_])return this;if(!m)return l(this,_),this;var v=this._events[_];if(v.fn)v.fn===m&&(!b||v.once)&&(!g||v.context===g)&&l(this,_);else{for(var S=0,A=[],E=v.length;S<E;S++)(v[S].fn!==m||b&&!v[S].once||g&&v[S].context!==g)&&A.push(v[S]);A.length?this._events[_]=A.length===1?A[0]:A:l(this,_)}return this},c.prototype.removeAllListeners=function(h){var m;return h?(m=t?t+h:h,this._events[m]&&l(this,m)):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=t,c.EventEmitter=c,n.exports=c}(Lp)),Lp.exports}var vu={exports:{}},Dp,jT;function Q4(){return jT||(jT=1,Dp=(n,e)=>(e=e||(()=>{}),n.then(t=>new Promise(r=>{r(e())}).then(()=>t),t=>new Promise(r=>{r(e())}).then(()=>{throw t})))),Dp}var kT;function W4(){if(kT)return vu.exports;kT=1;const n=Q4();class e extends Error{constructor(i){super(i),this.name="TimeoutError"}}const t=(r,i,o)=>new Promise((l,c)=>{if(typeof i!="number"||i<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(i===1/0){l(r);return}const d=setTimeout(()=>{if(typeof o=="function"){try{l(o())}catch(g){c(g)}return}const h=typeof o=="string"?o:`Promise timed out after ${i} milliseconds`,m=o instanceof Error?o:new e(h);typeof r.cancel=="function"&&r.cancel(),c(m)},i);n(r.then(l,c),()=>{clearTimeout(d)})});return vu.exports=t,vu.exports.default=t,vu.exports.TimeoutError=e,vu.exports}var mf={},pf={},MT;function e$(){if(MT)return pf;MT=1,Object.defineProperty(pf,"__esModule",{value:!0});function n(e,t,r){let i=0,o=e.length;for(;o>0;){const l=o/2|0;let c=i+l;r(e[c],t)<=0?(i=++c,o-=l+1):o=l}return i}return pf.default=n,pf}var IT;function t$(){if(IT)return mf;IT=1,Object.defineProperty(mf,"__esModule",{value:!0});const n=e$();class e{constructor(){this._queue=[]}enqueue(r,i){i=Object.assign({priority:0},i);const o={priority:i.priority,run:r};if(this.size&&this._queue[this.size-1].priority>=i.priority){this._queue.push(o);return}const l=n.default(this._queue,o,(c,d)=>d.priority-c.priority);this._queue.splice(l,0,o)}dequeue(){const r=this._queue.shift();return r==null?void 0:r.run}filter(r){return this._queue.filter(i=>i.priority===r.priority).map(i=>i.run)}get size(){return this._queue.length}}return mf.default=e,mf}var LT;function n$(){if(LT)return hf;LT=1,Object.defineProperty(hf,"__esModule",{value:!0});const n=J4(),e=W4(),t=t$(),r=()=>{},i=new e.TimeoutError;class o extends n{constructor(c){var d,h,m,g;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=r,this._resolveIdle=r,c=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:t.default},c),!(typeof c.intervalCap=="number"&&c.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(h=(d=c.intervalCap)===null||d===void 0?void 0:d.toString())!==null&&h!==void 0?h:""}\` (${typeof c.intervalCap})`);if(c.interval===void 0||!(Number.isFinite(c.interval)&&c.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(g=(m=c.interval)===null||m===void 0?void 0:m.toString())!==null&&g!==void 0?g:""}\` (${typeof c.interval})`);this._carryoverConcurrencyCount=c.carryoverConcurrencyCount,this._isIntervalIgnored=c.intervalCap===1/0||c.interval===0,this._intervalCap=c.intervalCap,this._interval=c.interval,this._queue=new c.queueClass,this._queueClass=c.queueClass,this.concurrency=c.concurrency,this._timeout=c.timeout,this._throwOnTimeout=c.throwOnTimeout===!0,this._isPaused=c.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=r,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=r,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const c=Date.now();if(this._intervalId===void 0){const d=this._intervalEnd-c;if(d<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},d)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const c=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const d=this._queue.dequeue();return d?(this.emit("active"),d(),c&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(c){if(!(typeof c=="number"&&c>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${c}\` (${typeof c})`);this._concurrency=c,this._processQueue()}async add(c,d={}){return new Promise((h,m)=>{const g=async()=>{this._pendingCount++,this._intervalCount++;try{const b=this._timeout===void 0&&d.timeout===void 0?c():e.default(Promise.resolve(c()),d.timeout===void 0?this._timeout:d.timeout,()=>{(d.throwOnTimeout===void 0?this._throwOnTimeout:d.throwOnTimeout)&&m(i)});h(await b)}catch(b){m(b)}this._next()};this._queue.enqueue(g,d),this._tryToStartAnother(),this.emit("add")})}async addAll(c,d){return Promise.all(c.map(async h=>this.add(h,d)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(c=>{const d=this._resolveEmpty;this._resolveEmpty=()=>{d(),c()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(c=>{const d=this._resolveIdle;this._resolveIdle=()=>{d(),c()}})}get size(){return this._queue.size}sizeBy(c){return this._queue.filter(c).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(c){this._timeout=c}}return hf.default=o,hf}var r$=n$();const ra=Mr(r$),a$=(...n)=>fetch(...n),i$=Symbol.for("ls:fetch_implementation"),ce=n=>async(...e)=>{if(n||Er("DEBUG")==="true"){const[r,i]=e;console.log(` ${(i==null?void 0:i.method)||"GET"} ${r}`)}const t=await(globalThis[i$]??a$)(...e);return(n||Er("DEBUG")==="true")&&console.log(` ${t.status} ${t.statusText} ${t.url}`),t},s$=[400,401,403,404,405,406,407,408],o$=[409];let DT=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.debug=e.debug,"default"in ra?this.queue=new ra.default({concurrency:this.maxConcurrency}):this.queue=new ra({concurrency:this.maxConcurrency}),this.onFailedResponseHook=e==null?void 0:e.onFailedResponseHook}call(e,...t){const r=this.onFailedResponseHook;return this.queue.add(()=>Qf(()=>e(...t).catch(i=>{throw i instanceof Error?i:new Error(i)}),{async onFailedAttempt(i){if(i.message.startsWith("Cancel")||i.message.startsWith("TimeoutError")||i.message.startsWith("AbortError")||(i==null?void 0:i.code)==="ECONNABORTED")throw i;const o=i==null?void 0:i.response,l=o==null?void 0:o.status;if(l){if(s$.includes(+l))throw i;if(o$.includes(+l))return;r&&await r(o)}},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,t,...r){return e.signal?Promise.race([this.call(t,...r),new Promise((i,o)=>{var l;(l=e.signal)==null||l.addEventListener("abort",()=>{o(new Error("AbortError"))})})]):this.call(t,...r)}fetch(...e){return this.call(()=>ce(this.debug)(...e).then(t=>t.ok?t:Promise.reject(t)))}};function $T(n){return typeof(n==null?void 0:n._getType)=="function"}function UT(n){const e={type:n._getType(),data:{content:n.content}};return n!=null&&n.additional_kwargs&&Object.keys(n.additional_kwargs).length>0&&(e.data.additional_kwargs={...n.additional_kwargs}),e}function Te(n,e){if(!Vu(n)){const t=e!==void 0?`Invalid UUID for ${e}: ${n}`:`Invalid UUID: ${n}`;throw new Error(t)}return n}const BT={};function NR(n){BT[n]||(console.warn(n),BT[n]=!0)}var gf={exports:{}},$p,zT;function Md(){if(zT)return $p;zT=1;const n="2.0.0",e=256,t=Number.MAX_SAFE_INTEGER||9007199254740991,r=16,i=e-6;return $p={MAX_LENGTH:e,MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:i,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:n,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},$p}var Up,VT;function Id(){if(VT)return Up;VT=1;var n={};return Up=typeof process=="object"&&n&&n.NODE_DEBUG&&/\bsemver\b/i.test(n.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{},Up}var qT;function Ml(){return qT||(qT=1,function(n,e){const{MAX_SAFE_COMPONENT_LENGTH:t,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=Md(),o=Id();e=n.exports={};const l=e.re=[],c=e.safeRe=[],d=e.src=[],h=e.safeSrc=[],m=e.t={};let g=0;const b="[a-zA-Z0-9-]",_=[["\\s",1],["\\d",i],[b,r]],v=A=>{for(const[E,O]of _)A=A.split(`${E}*`).join(`${E}{0,${O}}`).split(`${E}+`).join(`${E}{1,${O}}`);return A},S=(A,E,O)=>{const x=v(E),j=g++;o(A,j,E),m[A]=j,d[j]=E,h[j]=x,l[j]=new RegExp(E,O?"g":void 0),c[j]=new RegExp(x,O?"g":void 0)};S("NUMERICIDENTIFIER","0|[1-9]\\d*"),S("NUMERICIDENTIFIERLOOSE","\\d+"),S("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${b}*`),S("MAINVERSION",`(${d[m.NUMERICIDENTIFIER]})\\.(${d[m.NUMERICIDENTIFIER]})\\.(${d[m.NUMERICIDENTIFIER]})`),S("MAINVERSIONLOOSE",`(${d[m.NUMERICIDENTIFIERLOOSE]})\\.(${d[m.NUMERICIDENTIFIERLOOSE]})\\.(${d[m.NUMERICIDENTIFIERLOOSE]})`),S("PRERELEASEIDENTIFIER",`(?:${d[m.NUMERICIDENTIFIER]}|${d[m.NONNUMERICIDENTIFIER]})`),S("PRERELEASEIDENTIFIERLOOSE",`(?:${d[m.NUMERICIDENTIFIERLOOSE]}|${d[m.NONNUMERICIDENTIFIER]})`),S("PRERELEASE",`(?:-(${d[m.PRERELEASEIDENTIFIER]}(?:\\.${d[m.PRERELEASEIDENTIFIER]})*))`),S("PRERELEASELOOSE",`(?:-?(${d[m.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${d[m.PRERELEASEIDENTIFIERLOOSE]})*))`),S("BUILDIDENTIFIER",`${b}+`),S("BUILD",`(?:\\+(${d[m.BUILDIDENTIFIER]}(?:\\.${d[m.BUILDIDENTIFIER]})*))`),S("FULLPLAIN",`v?${d[m.MAINVERSION]}${d[m.PRERELEASE]}?${d[m.BUILD]}?`),S("FULL",`^${d[m.FULLPLAIN]}$`),S("LOOSEPLAIN",`[v=\\s]*${d[m.MAINVERSIONLOOSE]}${d[m.PRERELEASELOOSE]}?${d[m.BUILD]}?`),S("LOOSE",`^${d[m.LOOSEPLAIN]}$`),S("GTLT","((?:<|>)?=?)"),S("XRANGEIDENTIFIERLOOSE",`${d[m.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),S("XRANGEIDENTIFIER",`${d[m.NUMERICIDENTIFIER]}|x|X|\\*`),S("XRANGEPLAIN",`[v=\\s]*(${d[m.XRANGEIDENTIFIER]})(?:\\.(${d[m.XRANGEIDENTIFIER]})(?:\\.(${d[m.XRANGEIDENTIFIER]})(?:${d[m.PRERELEASE]})?${d[m.BUILD]}?)?)?`),S("XRANGEPLAINLOOSE",`[v=\\s]*(${d[m.XRANGEIDENTIFIERLOOSE]})(?:\\.(${d[m.XRANGEIDENTIFIERLOOSE]})(?:\\.(${d[m.XRANGEIDENTIFIERLOOSE]})(?:${d[m.PRERELEASELOOSE]})?${d[m.BUILD]}?)?)?`),S("XRANGE",`^${d[m.GTLT]}\\s*${d[m.XRANGEPLAIN]}$`),S("XRANGELOOSE",`^${d[m.GTLT]}\\s*${d[m.XRANGEPLAINLOOSE]}$`),S("COERCEPLAIN",`(^|[^\\d])(\\d{1,${t}})(?:\\.(\\d{1,${t}}))?(?:\\.(\\d{1,${t}}))?`),S("COERCE",`${d[m.COERCEPLAIN]}(?:$|[^\\d])`),S("COERCEFULL",d[m.COERCEPLAIN]+`(?:${d[m.PRERELEASE]})?(?:${d[m.BUILD]})?(?:$|[^\\d])`),S("COERCERTL",d[m.COERCE],!0),S("COERCERTLFULL",d[m.COERCEFULL],!0),S("LONETILDE","(?:~>?)"),S("TILDETRIM",`(\\s*)${d[m.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",S("TILDE",`^${d[m.LONETILDE]}${d[m.XRANGEPLAIN]}$`),S("TILDELOOSE",`^${d[m.LONETILDE]}${d[m.XRANGEPLAINLOOSE]}$`),S("LONECARET","(?:\\^)"),S("CARETTRIM",`(\\s*)${d[m.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",S("CARET",`^${d[m.LONECARET]}${d[m.XRANGEPLAIN]}$`),S("CARETLOOSE",`^${d[m.LONECARET]}${d[m.XRANGEPLAINLOOSE]}$`),S("COMPARATORLOOSE",`^${d[m.GTLT]}\\s*(${d[m.LOOSEPLAIN]})$|^$`),S("COMPARATOR",`^${d[m.GTLT]}\\s*(${d[m.FULLPLAIN]})$|^$`),S("COMPARATORTRIM",`(\\s*)${d[m.GTLT]}\\s*(${d[m.LOOSEPLAIN]}|${d[m.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",S("HYPHENRANGE",`^\\s*(${d[m.XRANGEPLAIN]})\\s+-\\s+(${d[m.XRANGEPLAIN]})\\s*$`),S("HYPHENRANGELOOSE",`^\\s*(${d[m.XRANGEPLAINLOOSE]})\\s+-\\s+(${d[m.XRANGEPLAINLOOSE]})\\s*$`),S("STAR","(<|>)?=?\\s*\\*"),S("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),S("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(gf,gf.exports)),gf.exports}var Bp,FT;function h_(){if(FT)return Bp;FT=1;const n=Object.freeze({loose:!0}),e=Object.freeze({});return Bp=r=>r?typeof r!="object"?n:r:e,Bp}var zp,HT;function jR(){if(HT)return zp;HT=1;const n=/^[0-9]+$/,e=(r,i)=>{const o=n.test(r),l=n.test(i);return o&&l&&(r=+r,i=+i),r===i?0:o&&!l?-1:l&&!o?1:r<i?-1:1};return zp={compareIdentifiers:e,rcompareIdentifiers:(r,i)=>e(i,r)},zp}var Vp,ZT;function rn(){if(ZT)return Vp;ZT=1;const n=Id(),{MAX_LENGTH:e,MAX_SAFE_INTEGER:t}=Md(),{safeRe:r,safeSrc:i,t:o}=Ml(),l=h_(),{compareIdentifiers:c}=jR();class d{constructor(m,g){if(g=l(g),m instanceof d){if(m.loose===!!g.loose&&m.includePrerelease===!!g.includePrerelease)return m;m=m.version}else if(typeof m!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof m}".`);if(m.length>e)throw new TypeError(`version is longer than ${e} characters`);n("SemVer",m,g),this.options=g,this.loose=!!g.loose,this.includePrerelease=!!g.includePrerelease;const b=m.trim().match(g.loose?r[o.LOOSE]:r[o.FULL]);if(!b)throw new TypeError(`Invalid Version: ${m}`);if(this.raw=m,this.major=+b[1],this.minor=+b[2],this.patch=+b[3],this.major>t||this.major<0)throw new TypeError("Invalid major version");if(this.minor>t||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>t||this.patch<0)throw new TypeError("Invalid patch version");b[4]?this.prerelease=b[4].split(".").map(_=>{if(/^[0-9]+$/.test(_)){const v=+_;if(v>=0&&v<t)return v}return _}):this.prerelease=[],this.build=b[5]?b[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(m){if(n("SemVer.compare",this.version,this.options,m),!(m instanceof d)){if(typeof m=="string"&&m===this.version)return 0;m=new d(m,this.options)}return m.version===this.version?0:this.compareMain(m)||this.comparePre(m)}compareMain(m){return m instanceof d||(m=new d(m,this.options)),c(this.major,m.major)||c(this.minor,m.minor)||c(this.patch,m.patch)}comparePre(m){if(m instanceof d||(m=new d(m,this.options)),this.prerelease.length&&!m.prerelease.length)return-1;if(!this.prerelease.length&&m.prerelease.length)return 1;if(!this.prerelease.length&&!m.prerelease.length)return 0;let g=0;do{const b=this.prerelease[g],_=m.prerelease[g];if(n("prerelease compare",g,b,_),b===void 0&&_===void 0)return 0;if(_===void 0)return 1;if(b===void 0)return-1;if(b===_)continue;return c(b,_)}while(++g)}compareBuild(m){m instanceof d||(m=new d(m,this.options));let g=0;do{const b=this.build[g],_=m.build[g];if(n("build compare",g,b,_),b===void 0&&_===void 0)return 0;if(_===void 0)return 1;if(b===void 0)return-1;if(b===_)continue;return c(b,_)}while(++g)}inc(m,g,b){if(m.startsWith("pre")){if(!g&&b===!1)throw new Error("invalid increment argument: identifier is empty");if(g){const _=new RegExp(`^${this.options.loose?i[o.PRERELEASELOOSE]:i[o.PRERELEASE]}$`),v=`-${g}`.match(_);if(!v||v[1]!==g)throw new Error(`invalid identifier: ${g}`)}}switch(m){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",g,b);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",g,b);break;case"prepatch":this.prerelease.length=0,this.inc("patch",g,b),this.inc("pre",g,b);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",g,b),this.inc("pre",g,b);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const _=Number(b)?1:0;if(this.prerelease.length===0)this.prerelease=[_];else{let v=this.prerelease.length;for(;--v>=0;)typeof this.prerelease[v]=="number"&&(this.prerelease[v]++,v=-2);if(v===-1){if(g===this.prerelease.join(".")&&b===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(_)}}if(g){let v=[g,_];b===!1&&(v=[g]),c(this.prerelease[0],g)===0?isNaN(this.prerelease[1])&&(this.prerelease=v):this.prerelease=v}break}default:throw new Error(`invalid increment argument: ${m}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return Vp=d,Vp}var qp,GT;function po(){if(GT)return qp;GT=1;const n=rn();return qp=(t,r,i=!1)=>{if(t instanceof n)return t;try{return new n(t,r)}catch(o){if(!i)return null;throw o}},qp}var Fp,YT;function u$(){if(YT)return Fp;YT=1;const n=po();return Fp=(t,r)=>{const i=n(t,r);return i?i.version:null},Fp}var Hp,XT;function l$(){if(XT)return Hp;XT=1;const n=po();return Hp=(t,r)=>{const i=n(t.trim().replace(/^[=v]+/,""),r);return i?i.version:null},Hp}var Zp,KT;function c$(){if(KT)return Zp;KT=1;const n=rn();return Zp=(t,r,i,o,l)=>{typeof i=="string"&&(l=o,o=i,i=void 0);try{return new n(t instanceof n?t.version:t,i).inc(r,o,l).version}catch{return null}},Zp}var Gp,JT;function f$(){if(JT)return Gp;JT=1;const n=po();return Gp=(t,r)=>{const i=n(t,null,!0),o=n(r,null,!0),l=i.compare(o);if(l===0)return null;const c=l>0,d=c?i:o,h=c?o:i,m=!!d.prerelease.length;if(!!h.prerelease.length&&!m){if(!h.patch&&!h.minor)return"major";if(h.compareMain(d)===0)return h.minor&&!h.patch?"minor":"patch"}const b=m?"pre":"";return i.major!==o.major?b+"major":i.minor!==o.minor?b+"minor":i.patch!==o.patch?b+"patch":"prerelease"},Gp}var Yp,QT;function d$(){if(QT)return Yp;QT=1;const n=rn();return Yp=(t,r)=>new n(t,r).major,Yp}var Xp,WT;function h$(){if(WT)return Xp;WT=1;const n=rn();return Xp=(t,r)=>new n(t,r).minor,Xp}var Kp,eE;function m$(){if(eE)return Kp;eE=1;const n=rn();return Kp=(t,r)=>new n(t,r).patch,Kp}var Jp,tE;function p$(){if(tE)return Jp;tE=1;const n=po();return Jp=(t,r)=>{const i=n(t,r);return i&&i.prerelease.length?i.prerelease:null},Jp}var Qp,nE;function mr(){if(nE)return Qp;nE=1;const n=rn();return Qp=(t,r,i)=>new n(t,i).compare(new n(r,i)),Qp}var Wp,rE;function g$(){if(rE)return Wp;rE=1;const n=mr();return Wp=(t,r,i)=>n(r,t,i),Wp}var eg,aE;function y$(){if(aE)return eg;aE=1;const n=mr();return eg=(t,r)=>n(t,r,!0),eg}var tg,iE;function m_(){if(iE)return tg;iE=1;const n=rn();return tg=(t,r,i)=>{const o=new n(t,i),l=new n(r,i);return o.compare(l)||o.compareBuild(l)},tg}var ng,sE;function b$(){if(sE)return ng;sE=1;const n=m_();return ng=(t,r)=>t.sort((i,o)=>n(i,o,r)),ng}var rg,oE;function _$(){if(oE)return rg;oE=1;const n=m_();return rg=(t,r)=>t.sort((i,o)=>n(o,i,r)),rg}var ag,uE;function Ld(){if(uE)return ag;uE=1;const n=mr();return ag=(t,r,i)=>n(t,r,i)>0,ag}var ig,lE;function p_(){if(lE)return ig;lE=1;const n=mr();return ig=(t,r,i)=>n(t,r,i)<0,ig}var sg,cE;function kR(){if(cE)return sg;cE=1;const n=mr();return sg=(t,r,i)=>n(t,r,i)===0,sg}var og,fE;function MR(){if(fE)return og;fE=1;const n=mr();return og=(t,r,i)=>n(t,r,i)!==0,og}var ug,dE;function g_(){if(dE)return ug;dE=1;const n=mr();return ug=(t,r,i)=>n(t,r,i)>=0,ug}var lg,hE;function y_(){if(hE)return lg;hE=1;const n=mr();return lg=(t,r,i)=>n(t,r,i)<=0,lg}var cg,mE;function IR(){if(mE)return cg;mE=1;const n=kR(),e=MR(),t=Ld(),r=g_(),i=p_(),o=y_();return cg=(c,d,h,m)=>{switch(d){case"===":return typeof c=="object"&&(c=c.version),typeof h=="object"&&(h=h.version),c===h;case"!==":return typeof c=="object"&&(c=c.version),typeof h=="object"&&(h=h.version),c!==h;case"":case"=":case"==":return n(c,h,m);case"!=":return e(c,h,m);case">":return t(c,h,m);case">=":return r(c,h,m);case"<":return i(c,h,m);case"<=":return o(c,h,m);default:throw new TypeError(`Invalid operator: ${d}`)}},cg}var fg,pE;function v$(){if(pE)return fg;pE=1;const n=rn(),e=po(),{safeRe:t,t:r}=Ml();return fg=(o,l)=>{if(o instanceof n)return o;if(typeof o=="number"&&(o=String(o)),typeof o!="string")return null;l=l||{};let c=null;if(!l.rtl)c=o.match(l.includePrerelease?t[r.COERCEFULL]:t[r.COERCE]);else{const _=l.includePrerelease?t[r.COERCERTLFULL]:t[r.COERCERTL];let v;for(;(v=_.exec(o))&&(!c||c.index+c[0].length!==o.length);)(!c||v.index+v[0].length!==c.index+c[0].length)&&(c=v),_.lastIndex=v.index+v[1].length+v[2].length;_.lastIndex=-1}if(c===null)return null;const d=c[2],h=c[3]||"0",m=c[4]||"0",g=l.includePrerelease&&c[5]?`-${c[5]}`:"",b=l.includePrerelease&&c[6]?`+${c[6]}`:"";return e(`${d}.${h}.${m}${g}${b}`,l)},fg}var dg,gE;function w$(){if(gE)return dg;gE=1;class n{constructor(){this.max=1e3,this.map=new Map}get(t){const r=this.map.get(t);if(r!==void 0)return this.map.delete(t),this.map.set(t,r),r}delete(t){return this.map.delete(t)}set(t,r){if(!this.delete(t)&&r!==void 0){if(this.map.size>=this.max){const o=this.map.keys().next().value;this.delete(o)}this.map.set(t,r)}return this}}return dg=n,dg}var hg,yE;function pr(){if(yE)return hg;yE=1;const n=/\s+/g;class e{constructor(Q,M){if(M=i(M),Q instanceof e)return Q.loose===!!M.loose&&Q.includePrerelease===!!M.includePrerelease?Q:new e(Q.raw,M);if(Q instanceof o)return this.raw=Q.value,this.set=[[Q]],this.formatted=void 0,this;if(this.options=M,this.loose=!!M.loose,this.includePrerelease=!!M.includePrerelease,this.raw=Q.trim().replace(n," "),this.set=this.raw.split("||").map(U=>this.parseRange(U.trim())).filter(U=>U.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const U=this.set[0];if(this.set=this.set.filter(G=>!S(G[0])),this.set.length===0)this.set=[U];else if(this.set.length>1){for(const G of this.set)if(G.length===1&&A(G[0])){this.set=[G];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let Q=0;Q<this.set.length;Q++){Q>0&&(this.formatted+="||");const M=this.set[Q];for(let U=0;U<M.length;U++)U>0&&(this.formatted+=" "),this.formatted+=M[U].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(Q){const U=((this.options.includePrerelease&&_)|(this.options.loose&&v))+":"+Q,G=r.get(U);if(G)return G;const ee=this.options.loose,R=ee?d[h.HYPHENRANGELOOSE]:d[h.HYPHENRANGE];Q=Q.replace(R,De(this.options.includePrerelease)),l("hyphen replace",Q),Q=Q.replace(d[h.COMPARATORTRIM],m),l("comparator trim",Q),Q=Q.replace(d[h.TILDETRIM],g),l("tilde trim",Q),Q=Q.replace(d[h.CARETTRIM],b),l("caret trim",Q);let B=Q.split(" ").map(fe=>O(fe,this.options)).join(" ").split(/\s+/).map(fe=>me(fe,this.options));ee&&(B=B.filter(fe=>(l("loose invalid filter",fe,this.options),!!fe.match(d[h.COMPARATORLOOSE])))),l("range list",B);const X=new Map,J=B.map(fe=>new o(fe,this.options));for(const fe of J){if(S(fe))return[fe];X.set(fe.value,fe)}X.size>1&&X.has("")&&X.delete("");const re=[...X.values()];return r.set(U,re),re}intersects(Q,M){if(!(Q instanceof e))throw new TypeError("a Range is required");return this.set.some(U=>E(U,M)&&Q.set.some(G=>E(G,M)&&U.every(ee=>G.every(R=>ee.intersects(R,M)))))}test(Q){if(!Q)return!1;if(typeof Q=="string")try{Q=new c(Q,this.options)}catch{return!1}for(let M=0;M<this.set.length;M++)if(pt(this.set[M],Q,this.options))return!0;return!1}}hg=e;const t=w$(),r=new t,i=h_(),o=Dd(),l=Id(),c=rn(),{safeRe:d,t:h,comparatorTrimReplace:m,tildeTrimReplace:g,caretTrimReplace:b}=Ml(),{FLAG_INCLUDE_PRERELEASE:_,FLAG_LOOSE:v}=Md(),S=te=>te.value==="<0.0.0-0",A=te=>te.value==="",E=(te,Q)=>{let M=!0;const U=te.slice();let G=U.pop();for(;M&&U.length;)M=U.every(ee=>G.intersects(ee,Q)),G=U.pop();return M},O=(te,Q)=>(l("comp",te,Q),te=z(te,Q),l("caret",te),te=j(te,Q),l("tildes",te),te=V(te,Q),l("xrange",te),te=he(te,Q),l("stars",te),te),x=te=>!te||te.toLowerCase()==="x"||te==="*",j=(te,Q)=>te.trim().split(/\s+/).map(M=>P(M,Q)).join(" "),P=(te,Q)=>{const M=Q.loose?d[h.TILDELOOSE]:d[h.TILDE];return te.replace(M,(U,G,ee,R,B)=>{l("tilde",te,U,G,ee,R,B);let X;return x(G)?X="":x(ee)?X=`>=${G}.0.0 <${+G+1}.0.0-0`:x(R)?X=`>=${G}.${ee}.0 <${G}.${+ee+1}.0-0`:B?(l("replaceTilde pr",B),X=`>=${G}.${ee}.${R}-${B} <${G}.${+ee+1}.0-0`):X=`>=${G}.${ee}.${R} <${G}.${+ee+1}.0-0`,l("tilde return",X),X})},z=(te,Q)=>te.trim().split(/\s+/).map(M=>H(M,Q)).join(" "),H=(te,Q)=>{l("caret",te,Q);const M=Q.loose?d[h.CARETLOOSE]:d[h.CARET],U=Q.includePrerelease?"-0":"";return te.replace(M,(G,ee,R,B,X)=>{l("caret",te,G,ee,R,B,X);let J;return x(ee)?J="":x(R)?J=`>=${ee}.0.0${U} <${+ee+1}.0.0-0`:x(B)?ee==="0"?J=`>=${ee}.${R}.0${U} <${ee}.${+R+1}.0-0`:J=`>=${ee}.${R}.0${U} <${+ee+1}.0.0-0`:X?(l("replaceCaret pr",X),ee==="0"?R==="0"?J=`>=${ee}.${R}.${B}-${X} <${ee}.${R}.${+B+1}-0`:J=`>=${ee}.${R}.${B}-${X} <${ee}.${+R+1}.0-0`:J=`>=${ee}.${R}.${B}-${X} <${+ee+1}.0.0-0`):(l("no pr"),ee==="0"?R==="0"?J=`>=${ee}.${R}.${B}${U} <${ee}.${R}.${+B+1}-0`:J=`>=${ee}.${R}.${B}${U} <${ee}.${+R+1}.0-0`:J=`>=${ee}.${R}.${B} <${+ee+1}.0.0-0`),l("caret return",J),J})},V=(te,Q)=>(l("replaceXRanges",te,Q),te.split(/\s+/).map(M=>ie(M,Q)).join(" ")),ie=(te,Q)=>{te=te.trim();const M=Q.loose?d[h.XRANGELOOSE]:d[h.XRANGE];return te.replace(M,(U,G,ee,R,B,X)=>{l("xRange",te,U,G,ee,R,B,X);const J=x(ee),re=J||x(R),fe=re||x(B),pe=fe;return G==="="&&pe&&(G=""),X=Q.includePrerelease?"-0":"",J?G===">"||G==="<"?U="<0.0.0-0":U="*":G&&pe?(re&&(R=0),B=0,G===">"?(G=">=",re?(ee=+ee+1,R=0,B=0):(R=+R+1,B=0)):G==="<="&&(G="<",re?ee=+ee+1:R=+R+1),G==="<"&&(X="-0"),U=`${G+ee}.${R}.${B}${X}`):re?U=`>=${ee}.0.0${X} <${+ee+1}.0.0-0`:fe&&(U=`>=${ee}.${R}.0${X} <${ee}.${+R+1}.0-0`),l("xRange return",U),U})},he=(te,Q)=>(l("replaceStars",te,Q),te.trim().replace(d[h.STAR],"")),me=(te,Q)=>(l("replaceGTE0",te,Q),te.trim().replace(d[Q.includePrerelease?h.GTE0PRE:h.GTE0],"")),De=te=>(Q,M,U,G,ee,R,B,X,J,re,fe,pe)=>(x(U)?M="":x(G)?M=`>=${U}.0.0${te?"-0":""}`:x(ee)?M=`>=${U}.${G}.0${te?"-0":""}`:R?M=`>=${M}`:M=`>=${M}${te?"-0":""}`,x(J)?X="":x(re)?X=`<${+J+1}.0.0-0`:x(fe)?X=`<${J}.${+re+1}.0-0`:pe?X=`<=${J}.${re}.${fe}-${pe}`:te?X=`<${J}.${re}.${+fe+1}-0`:X=`<=${X}`,`${M} ${X}`.trim()),pt=(te,Q,M)=>{for(let U=0;U<te.length;U++)if(!te[U].test(Q))return!1;if(Q.prerelease.length&&!M.includePrerelease){for(let U=0;U<te.length;U++)if(l(te[U].semver),te[U].semver!==o.ANY&&te[U].semver.prerelease.length>0){const G=te[U].semver;if(G.major===Q.major&&G.minor===Q.minor&&G.patch===Q.patch)return!0}return!1}return!0};return hg}var mg,bE;function Dd(){if(bE)return mg;bE=1;const n=Symbol("SemVer ANY");class e{static get ANY(){return n}constructor(m,g){if(g=t(g),m instanceof e){if(m.loose===!!g.loose)return m;m=m.value}m=m.trim().split(/\s+/).join(" "),l("comparator",m,g),this.options=g,this.loose=!!g.loose,this.parse(m),this.semver===n?this.value="":this.value=this.operator+this.semver.version,l("comp",this)}parse(m){const g=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],b=m.match(g);if(!b)throw new TypeError(`Invalid comparator: ${m}`);this.operator=b[1]!==void 0?b[1]:"",this.operator==="="&&(this.operator=""),b[2]?this.semver=new c(b[2],this.options.loose):this.semver=n}toString(){return this.value}test(m){if(l("Comparator.test",m,this.options.loose),this.semver===n||m===n)return!0;if(typeof m=="string")try{m=new c(m,this.options)}catch{return!1}return o(m,this.operator,this.semver,this.options)}intersects(m,g){if(!(m instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new d(m.value,g).test(this.value):m.operator===""?m.value===""?!0:new d(this.value,g).test(m.semver):(g=t(g),g.includePrerelease&&(this.value==="<0.0.0-0"||m.value==="<0.0.0-0")||!g.includePrerelease&&(this.value.startsWith("<0.0.0")||m.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&m.operator.startsWith(">")||this.operator.startsWith("<")&&m.operator.startsWith("<")||this.semver.version===m.semver.version&&this.operator.includes("=")&&m.operator.includes("=")||o(this.semver,"<",m.semver,g)&&this.operator.startsWith(">")&&m.operator.startsWith("<")||o(this.semver,">",m.semver,g)&&this.operator.startsWith("<")&&m.operator.startsWith(">")))}}mg=e;const t=h_(),{safeRe:r,t:i}=Ml(),o=IR(),l=Id(),c=rn(),d=pr();return mg}var pg,_E;function $d(){if(_E)return pg;_E=1;const n=pr();return pg=(t,r,i)=>{try{r=new n(r,i)}catch{return!1}return r.test(t)},pg}var gg,vE;function S$(){if(vE)return gg;vE=1;const n=pr();return gg=(t,r)=>new n(t,r).set.map(i=>i.map(o=>o.value).join(" ").trim().split(" ")),gg}var yg,wE;function A$(){if(wE)return yg;wE=1;const n=rn(),e=pr();return yg=(r,i,o)=>{let l=null,c=null,d=null;try{d=new e(i,o)}catch{return null}return r.forEach(h=>{d.test(h)&&(!l||c.compare(h)===-1)&&(l=h,c=new n(l,o))}),l},yg}var bg,SE;function T$(){if(SE)return bg;SE=1;const n=rn(),e=pr();return bg=(r,i,o)=>{let l=null,c=null,d=null;try{d=new e(i,o)}catch{return null}return r.forEach(h=>{d.test(h)&&(!l||c.compare(h)===1)&&(l=h,c=new n(l,o))}),l},bg}var _g,AE;function E$(){if(AE)return _g;AE=1;const n=rn(),e=pr(),t=Ld();return _g=(i,o)=>{i=new e(i,o);let l=new n("0.0.0");if(i.test(l)||(l=new n("0.0.0-0"),i.test(l)))return l;l=null;for(let c=0;c<i.set.length;++c){const d=i.set[c];let h=null;d.forEach(m=>{const g=new n(m.semver.version);switch(m.operator){case">":g.prerelease.length===0?g.patch++:g.prerelease.push(0),g.raw=g.format();case"":case">=":(!h||t(g,h))&&(h=g);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${m.operator}`)}}),h&&(!l||t(l,h))&&(l=h)}return l&&i.test(l)?l:null},_g}var vg,TE;function x$(){if(TE)return vg;TE=1;const n=pr();return vg=(t,r)=>{try{return new n(t,r).range||"*"}catch{return null}},vg}var wg,EE;function b_(){if(EE)return wg;EE=1;const n=rn(),e=Dd(),{ANY:t}=e,r=pr(),i=$d(),o=Ld(),l=p_(),c=y_(),d=g_();return wg=(m,g,b,_)=>{m=new n(m,_),g=new r(g,_);let v,S,A,E,O;switch(b){case">":v=o,S=c,A=l,E=">",O=">=";break;case"<":v=l,S=d,A=o,E="<",O="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(i(m,g,_))return!1;for(let x=0;x<g.set.length;++x){const j=g.set[x];let P=null,z=null;if(j.forEach(H=>{H.semver===t&&(H=new e(">=0.0.0")),P=P||H,z=z||H,v(H.semver,P.semver,_)?P=H:A(H.semver,z.semver,_)&&(z=H)}),P.operator===E||P.operator===O||(!z.operator||z.operator===E)&&S(m,z.semver))return!1;if(z.operator===O&&A(m,z.semver))return!1}return!0},wg}var Sg,xE;function O$(){if(xE)return Sg;xE=1;const n=b_();return Sg=(t,r,i)=>n(t,r,">",i),Sg}var Ag,OE;function R$(){if(OE)return Ag;OE=1;const n=b_();return Ag=(t,r,i)=>n(t,r,"<",i),Ag}var Tg,RE;function C$(){if(RE)return Tg;RE=1;const n=pr();return Tg=(t,r,i)=>(t=new n(t,i),r=new n(r,i),t.intersects(r,i)),Tg}var Eg,CE;function P$(){if(CE)return Eg;CE=1;const n=$d(),e=mr();return Eg=(t,r,i)=>{const o=[];let l=null,c=null;const d=t.sort((b,_)=>e(b,_,i));for(const b of d)n(b,r,i)?(c=b,l||(l=b)):(c&&o.push([l,c]),c=null,l=null);l&&o.push([l,null]);const h=[];for(const[b,_]of o)b===_?h.push(b):!_&&b===d[0]?h.push("*"):_?b===d[0]?h.push(`<=${_}`):h.push(`${b} - ${_}`):h.push(`>=${b}`);const m=h.join(" || "),g=typeof r.raw=="string"?r.raw:String(r);return m.length<g.length?m:r},Eg}var xg,PE;function N$(){if(PE)return xg;PE=1;const n=pr(),e=Dd(),{ANY:t}=e,r=$d(),i=mr(),o=(g,b,_={})=>{if(g===b)return!0;g=new n(g,_),b=new n(b,_);let v=!1;e:for(const S of g.set){for(const A of b.set){const E=d(S,A,_);if(v=v||E!==null,E)continue e}if(v)return!1}return!0},l=[new e(">=0.0.0-0")],c=[new e(">=0.0.0")],d=(g,b,_)=>{if(g===b)return!0;if(g.length===1&&g[0].semver===t){if(b.length===1&&b[0].semver===t)return!0;_.includePrerelease?g=l:g=c}if(b.length===1&&b[0].semver===t){if(_.includePrerelease)return!0;b=c}const v=new Set;let S,A;for(const V of g)V.operator===">"||V.operator===">="?S=h(S,V,_):V.operator==="<"||V.operator==="<="?A=m(A,V,_):v.add(V.semver);if(v.size>1)return null;let E;if(S&&A){if(E=i(S.semver,A.semver,_),E>0)return null;if(E===0&&(S.operator!==">="||A.operator!=="<="))return null}for(const V of v){if(S&&!r(V,String(S),_)||A&&!r(V,String(A),_))return null;for(const ie of b)if(!r(V,String(ie),_))return!1;return!0}let O,x,j,P,z=A&&!_.includePrerelease&&A.semver.prerelease.length?A.semver:!1,H=S&&!_.includePrerelease&&S.semver.prerelease.length?S.semver:!1;z&&z.prerelease.length===1&&A.operator==="<"&&z.prerelease[0]===0&&(z=!1);for(const V of b){if(P=P||V.operator===">"||V.operator===">=",j=j||V.operator==="<"||V.operator==="<=",S){if(H&&V.semver.prerelease&&V.semver.prerelease.length&&V.semver.major===H.major&&V.semver.minor===H.minor&&V.semver.patch===H.patch&&(H=!1),V.operator===">"||V.operator===">="){if(O=h(S,V,_),O===V&&O!==S)return!1}else if(S.operator===">="&&!r(S.semver,String(V),_))return!1}if(A){if(z&&V.semver.prerelease&&V.semver.prerelease.length&&V.semver.major===z.major&&V.semver.minor===z.minor&&V.semver.patch===z.patch&&(z=!1),V.operator==="<"||V.operator==="<="){if(x=m(A,V,_),x===V&&x!==A)return!1}else if(A.operator==="<="&&!r(A.semver,String(V),_))return!1}if(!V.operator&&(A||S)&&E!==0)return!1}return!(S&&j&&!A&&E!==0||A&&P&&!S&&E!==0||H||z)},h=(g,b,_)=>{if(!g)return b;const v=i(g.semver,b.semver,_);return v>0?g:v<0||b.operator===">"&&g.operator===">="?b:g},m=(g,b,_)=>{if(!g)return b;const v=i(g.semver,b.semver,_);return v<0?g:v>0||b.operator==="<"&&g.operator==="<="?b:g};return xg=o,xg}var Og,NE;function j$(){if(NE)return Og;NE=1;const n=Ml(),e=Md(),t=rn(),r=jR(),i=po(),o=u$(),l=l$(),c=c$(),d=f$(),h=d$(),m=h$(),g=m$(),b=p$(),_=mr(),v=g$(),S=y$(),A=m_(),E=b$(),O=_$(),x=Ld(),j=p_(),P=kR(),z=MR(),H=g_(),V=y_(),ie=IR(),he=v$(),me=Dd(),De=pr(),pt=$d(),te=S$(),Q=A$(),M=T$(),U=E$(),G=x$(),ee=b_(),R=O$(),B=R$(),X=C$(),J=P$(),re=N$();return Og={parse:i,valid:o,clean:l,inc:c,diff:d,major:h,minor:m,patch:g,prerelease:b,compare:_,rcompare:v,compareLoose:S,compareBuild:A,sort:E,rsort:O,gt:x,lt:j,eq:P,neq:z,gte:H,lte:V,cmp:ie,coerce:he,Comparator:me,Range:De,satisfies:pt,toComparators:te,maxSatisfying:Q,minSatisfying:M,minVersion:U,validRange:G,outside:ee,gtr:R,ltr:B,intersects:X,simplifyRange:J,subset:re,SemVer:t,re:n.re,src:n.src,tokens:n.t,SEMVER_SPEC_VERSION:e.SEMVER_SPEC_VERSION,RELEASE_TYPES:e.RELEASE_TYPES,compareIdentifiers:r.compareIdentifiers,rcompareIdentifiers:r.rcompareIdentifiers},Og}j$();function Ia(n){if(!n||n.split("/").length>2||n.startsWith("/")||n.endsWith("/")||n.split(":").length>2)throw new Error(`Invalid identifier format: ${n}`);const[e,t]=n.split(":"),r=t||"latest";if(e.includes("/")){const[i,o]=e.split("/",2);if(!i||!o)throw new Error(`Invalid identifier format: ${n}`);return[i,o,r]}else{if(!e)throw new Error(`Invalid identifier format: ${n}`);return["-",e,r]}}class k$ extends Error{constructor(e){super(e),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="LangSmithConflictError",this.status=409}}async function Re(n,e,t){let r;if(n.ok){t&&(r=await n.text());return}r=await n.text();const i=`Failed to ${e}. Received status [${n.status}]: ${n.statusText}. Server response: ${r}`;if(n.status===409)throw new k$(i);const o=new Error(i);throw o.status=n.status,o}var jE="[...]",M$={result:"[Circular]"},Wf=[],qs=[];const I$=new TextEncoder;function L$(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function yf(n){return I$.encode(n)}function xn(n,e,t,r){var i;try{const o=JSON.stringify(n,e,t);return yf(o)}catch(o){if(!((i=o.message)!=null&&i.includes("Converting circular structure to JSON")))return console.warn("[WARNING]: LangSmith received unserializable value."),yf("[Unserializable]");console.warn("[WARNING]: LangSmith received circular JSON. This will decrease tracer performance."),typeof r>"u"&&(r=L$()),Ly(n,"",0,[],void 0,0,r);let l;try{qs.length===0?l=JSON.stringify(n,e,t):l=JSON.stringify(n,D$(e),t)}catch{return yf("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Wf.length!==0;){const c=Wf.pop();c.length===4?Object.defineProperty(c[0],c[1],c[3]):c[0][c[1]]=c[2]}}return yf(l)}}function Rg(n,e,t,r){var i=Object.getOwnPropertyDescriptor(r,t);i.get!==void 0?i.configurable?(Object.defineProperty(r,t,{value:n}),Wf.push([r,t,e,i])):qs.push([e,t,n]):(r[t]=n,Wf.push([r,t,e]))}function Ly(n,e,t,r,i,o,l){o+=1;var c;if(typeof n=="object"&&n!==null){for(c=0;c<r.length;c++)if(r[c]===n){Rg(M$,n,e,i);return}if(typeof l.depthLimit<"u"&&o>l.depthLimit){Rg(jE,n,e,i);return}if(typeof l.edgesLimit<"u"&&t+1>l.edgesLimit){Rg(jE,n,e,i);return}if(r.push(n),Array.isArray(n))for(c=0;c<n.length;c++)Ly(n[c],c,c,r,n,o,l);else{var d=Object.keys(n);for(c=0;c<d.length;c++){var h=d[c];Ly(n[h],h,c,r,n,o,l)}}r.pop()}}function D$(n){return n=typeof n<"u"?n:function(e,t){return t},function(e,t){if(qs.length>0)for(var r=0;r<qs.length;r++){var i=qs[r];if(i[1]===e&&i[0]===t){t=i[2],qs.splice(r,1);break}}return n.call(this,e,t)}}function kE(n){const e=$R(),t=K$(),r=n.extra??{},i=r.metadata;return n.extra={...r,runtime:{...e,...r==null?void 0:r.runtime},metadata:{...t,...t.revision_id||n.revision_id?{revision_id:n.revision_id??t.revision_id}:{},...i}},n}const $$=n=>{const e=(n==null?void 0:n.toString())??Er("TRACING_SAMPLING_RATE");if(e===void 0)return;const t=parseFloat(e);if(t<0||t>1)throw new Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${t}`);return t},U$=n=>{const t=n.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return t==="localhost"||t==="127.0.0.1"||t==="::1"};async function B$(n){const e=[];for await(const t of n)e.push(t);return e}function Cg(n){if(n!==void 0)return n.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}const z$=async n=>{if((n==null?void 0:n.status)===429){const e=parseInt(n.headers.get("retry-after")??"30",10)*1e3;if(e>0)return await new Promise(t=>setTimeout(t,e)),!0}return!1};function ME(n){return typeof n=="number"?Number(n.toFixed(4)):n}class V${constructor(){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"sizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0})}peek(){return this.items[0]}push(e){let t;const r=new Promise(o=>{t=o}),i=xn(e.item).length;return this.items.push({action:e.action,payload:e.item,itemPromiseResolve:t,itemPromise:r,size:i}),this.sizeBytes+=i,r}pop(e){var i;if(e<1)throw new Error("Number of bytes to pop off may not be less than 1.");const t=[];let r=0;for(;r+(((i=this.peek())==null?void 0:i.size)??0)<e&&this.items.length>0;){const o=this.items.shift();o&&(t.push(o),r+=o.size,this.sizeBytes-=o.size)}if(t.length===0&&this.items.length>0){const o=this.items.shift();t.push(o),r+=o.size,this.sizeBytes-=o.size}return[t.map(o=>({action:o.action,item:o.payload})),()=>t.forEach(o=>o.itemPromiseResolve())]}}const q$=20971520,F$=2500;class yl{constructor(e={}){var r;Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:new V$}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"batchSizeBytesLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blockOnRootRunFinalization",{enumerable:!0,configurable:!0,writable:!0,value:qa("LANGSMITH_TRACING_BACKGROUND")==="false"}),Object.defineProperty(this,"traceBatchConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:5}),Object.defineProperty(this,"_serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_getServerInfoPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"manualFlushMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:qa("LANGSMITH_DEBUG")==="true"});const t=yl.getDefaultClientConfig();if(this.tracingSampleRate=$$(e.tracingSamplingRate),this.apiUrl=Cg(e.apiUrl??t.apiUrl)??"",this.apiUrl.endsWith("/")&&(this.apiUrl=this.apiUrl.slice(0,-1)),this.apiKey=Cg(e.apiKey??t.apiKey),this.webUrl=Cg(e.webUrl??t.webUrl),(r=this.webUrl)!=null&&r.endsWith("/")&&(this.webUrl=this.webUrl.slice(0,-1)),this.timeout_ms=e.timeout_ms??9e4,this.caller=new DT({...e.callerOptions??{},debug:e.debug??this.debug}),this.traceBatchConcurrency=e.traceBatchConcurrency??this.traceBatchConcurrency,this.traceBatchConcurrency<1)throw new Error("Trace batch concurrency must be positive.");this.debug=e.debug??this.debug,this.batchIngestCaller=new DT({maxRetries:2,maxConcurrency:this.traceBatchConcurrency,...e.callerOptions??{},onFailedResponseHook:z$,debug:e.debug??this.debug}),this.hideInputs=e.hideInputs??e.anonymizer??t.hideInputs,this.hideOutputs=e.hideOutputs??e.anonymizer??t.hideOutputs,this.autoBatchTracing=e.autoBatchTracing??this.autoBatchTracing,this.blockOnRootRunFinalization=e.blockOnRootRunFinalization??this.blockOnRootRunFinalization,this.batchSizeBytesLimit=e.batchSizeBytesLimit,this.fetchOptions=e.fetchOptions||{},this.manualFlushMode=e.manualFlushMode??this.manualFlushMode}static getDefaultClientConfig(){const e=Er("API_KEY"),t=Er("ENDPOINT")??"https://api.smith.langchain.com",r=Er("HIDE_INPUTS")==="true",i=Er("HIDE_OUTPUTS")==="true";return{apiUrl:t,apiKey:e,webUrl:void 0,hideInputs:r,hideOutputs:i}}getHostUrl(){return this.webUrl?this.webUrl:U$(this.apiUrl)?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.endsWith("/api/v1")?(this.webUrl=this.apiUrl.replace("/api/v1",""),this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("eu")?(this.webUrl="https://eu.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("beta")?(this.webUrl="https://beta.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){const e={"User-Agent":`langsmith-js/${LR}`};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),e}async processInputs(e){return this.hideInputs===!1?e:this.hideInputs===!0?{}:typeof this.hideInputs=="function"?this.hideInputs(e):e}async processOutputs(e){return this.hideOutputs===!1?e:this.hideOutputs===!0?{}:typeof this.hideOutputs=="function"?this.hideOutputs(e):e}async prepareRunCreateOrUpdateInputs(e){const t={...e};return t.inputs!==void 0&&(t.inputs=await this.processInputs(t.inputs)),t.outputs!==void 0&&(t.outputs=await this.processOutputs(t.outputs)),t}async _getResponse(e,t){const r=(t==null?void 0:t.toString())??"",i=`${this.apiUrl}${e}?${r}`,o=await this.caller.call(ce(this.debug),i,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Re(o,`Failed to fetch ${e}`),o}async _get(e,t){return(await this._getResponse(e,t)).json()}async*_getPaginated(e,t=new URLSearchParams,r){let i=Number(t.get("offset"))||0;const o=Number(t.get("limit"))||100;for(;;){t.set("offset",String(i)),t.set("limit",String(o));const l=`${this.apiUrl}${e}?${t}`,c=await this.caller.call(ce(this.debug),l,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Re(c,`Failed to fetch ${e}`);const d=r?r(await c.json()):await c.json();if(d.length===0||(yield d,d.length<o))break;i+=d.length}}async*_getCursorPaginatedList(e,t=null,r="POST",i="runs"){const o=t?{...t}:{};for(;;){const c=await(await this.caller.call(ce(this.debug),`${this.apiUrl}${e}`,{method:r,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:JSON.stringify(o)})).json();if(!c||!c[i])break;yield c[i];const d=c.cursors;if(!d||!d.next)break;o.cursor=d.next}}_shouldSample(){return this.tracingSampleRate===void 0?!0:Math.random()<this.tracingSampleRate}_filterForSampling(e,t=!1){if(this.tracingSampleRate===void 0)return e;if(t){const r=[];for(const i of e)this.filteredPostUuids.has(i.id)?this.filteredPostUuids.delete(i.id):r.push(i);return r}else{const r=[];for(const i of e){const o=i.trace_id??i.id;this.filteredPostUuids.has(o)||(i.id===o?this._shouldSample()?r.push(i):this.filteredPostUuids.add(o):r.push(i))}return r}}async _getBatchSizeLimitBytes(){var t;const e=await this._ensureServerInfo();return this.batchSizeBytesLimit??((t=e.batch_ingest_config)==null?void 0:t.size_limit_bytes)??q$}async _getMultiPartSupport(){var t;return((t=(await this._ensureServerInfo()).instance_flags)==null?void 0:t.dataset_examples_multipart_enabled)??!1}drainAutoBatchQueue(e){const t=[];for(;this.autoBatchQueue.items.length>0;){const[r,i]=this.autoBatchQueue.pop(e);if(!r.length){i();break}const o=this._processBatch(r,i).catch(console.error);t.push(o)}return Promise.all(t)}async _processBatch(e,t){var r;if(!e.length){t();return}try{const i={runCreates:e.filter(l=>l.action==="create").map(l=>l.item),runUpdates:e.filter(l=>l.action==="update").map(l=>l.item)},o=await this._ensureServerInfo();(r=o==null?void 0:o.batch_ingest_config)!=null&&r.use_multipart_endpoint?await this.multipartIngestRuns(i):await this.batchIngestRuns(i)}finally{t()}}async processRunOperation(e){clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0,e.action==="create"&&(e.item=kE(e.item));const t=this.autoBatchQueue.push(e);if(this.manualFlushMode)return t;const r=await this._getBatchSizeLimitBytes();return this.autoBatchQueue.sizeBytes>r&&this.drainAutoBatchQueue(r),this.autoBatchQueue.items.length>0&&(this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue(r)},this.autoBatchAggregationDelayMs)),t}async _getServerInfo(){const e=await this.caller.call(ce(this.debug),`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(F$),...this.fetchOptions});await Re(e,"get server info");const t=await e.json();return this.debug&&console.log(`
=== LangSmith Server Configuration ===
`+JSON.stringify(t,null,2)+`
`),t}async _ensureServerInfo(){return this._getServerInfoPromise===void 0&&(this._getServerInfoPromise=(async()=>{if(this._serverInfo===void 0)try{this._serverInfo=await this._getServerInfo()}catch(e){console.warn(`[WARNING]: LangSmith failed to fetch info on supported operations with status code ${e.status}. Falling back to batch operations and default limits.`)}return this._serverInfo??{}})()),this._getServerInfoPromise.then(e=>(this._serverInfo===void 0&&(this._getServerInfoPromise=void 0),e))}async _getSettings(){return this.settings||(this.settings=this._get("/settings")),await this.settings}async flush(){const e=await this._getBatchSizeLimitBytes();await this.drainAutoBatchQueue(e)}async createRun(e){if(!this._filterForSampling([e]).length)return;const t={...this.headers,"Content-Type":"application/json"},r=e.project_name;delete e.project_name;const i=await this.prepareRunCreateOrUpdateInputs({session_name:r,...e,start_time:e.start_time??Date.now()});if(this.autoBatchTracing&&i.trace_id!==void 0&&i.dotted_order!==void 0){this.processRunOperation({action:"create",item:i}).catch(console.error);return}const o=kE(i),l=await this.caller.call(ce(this.debug),`${this.apiUrl}/runs`,{method:"POST",headers:t,body:xn(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Re(l,"create run",!0)}async batchIngestRuns({runCreates:e,runUpdates:t}){if(e===void 0&&t===void 0)return;let r=await Promise.all((e==null?void 0:e.map(c=>this.prepareRunCreateOrUpdateInputs(c)))??[]),i=await Promise.all((t==null?void 0:t.map(c=>this.prepareRunCreateOrUpdateInputs(c)))??[]);if(r.length>0&&i.length>0){const c=r.reduce((h,m)=>(m.id&&(h[m.id]=m),h),{}),d=[];for(const h of i)h.id!==void 0&&c[h.id]?c[h.id]={...c[h.id],...h}:d.push(h);r=Object.values(c),i=d}const o={post:r,patch:i};if(!o.post.length&&!o.patch.length)return;const l={post:[],patch:[]};for(const c of["post","patch"]){const d=c,h=o[d].reverse();let m=h.pop();for(;m!==void 0;)l[d].push(m),m=h.pop()}(l.post.length>0||l.patch.length>0)&&await this._postBatchIngestRuns(xn(l))}async _postBatchIngestRuns(e){const t={...this.headers,"Content-Type":"application/json",Accept:"application/json"},r=await this.batchIngestCaller.call(ce(this.debug),`${this.apiUrl}/runs/batch`,{method:"POST",headers:t,body:e,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Re(r,"batch create run",!0)}async multipartIngestRuns({runCreates:e,runUpdates:t}){if(e===void 0&&t===void 0)return;const r={};let i=[];for(const m of e??[]){const g=await this.prepareRunCreateOrUpdateInputs(m);g.id!==void 0&&g.attachments!==void 0&&(r[g.id]=g.attachments),delete g.attachments,i.push(g)}let o=[];for(const m of t??[])o.push(await this.prepareRunCreateOrUpdateInputs(m));if(i.find(m=>m.trace_id===void 0||m.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when creating a run');if(o.find(m=>m.trace_id===void 0||m.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when updating a run');if(i.length>0&&o.length>0){const m=i.reduce((b,_)=>(_.id&&(b[_.id]=_),b),{}),g=[];for(const b of o)b.id!==void 0&&m[b.id]?m[b.id]={...m[b.id],...b}:g.push(b);i=Object.values(m),o=g}if(i.length===0&&o.length===0)return;const d=[],h=[];for(const[m,g]of[["post",i],["patch",o]])for(const b of g){const{inputs:_,outputs:v,events:S,attachments:A,...E}=b,O={inputs:_,outputs:v,events:S},x=xn(E);h.push({name:`${m}.${E.id}`,payload:new Blob([x],{type:`application/json; length=${x.length}`})});for(const[j,P]of Object.entries(O)){if(P===void 0)continue;const z=xn(P);h.push({name:`${m}.${E.id}.${j}`,payload:new Blob([z],{type:`application/json; length=${z.length}`})})}if(E.id!==void 0){const j=r[E.id];if(j){delete r[E.id];for(const[P,z]of Object.entries(j)){let H,V;if(Array.isArray(z)?[H,V]=z:(H=z.mimeType,V=z.data),P.includes(".")){console.warn(`Skipping attachment '${P}' for run ${E.id}: Invalid attachment name. Attachment names must not contain periods ('.'). Please rename the attachment and try again.`);continue}h.push({name:`attachment.${E.id}.${P}`,payload:new Blob([V],{type:`${H}; length=${V.byteLength}`})})}}}d.push(`trace=${E.trace_id},id=${E.id}`)}await this._sendMultipartRequest(h,d.join("; "))}async _sendMultipartRequest(e,t){try{const r="----LangSmithFormBoundary"+Math.random().toString(36).slice(2),i=[];for(const d of e)i.push(new Blob([`--${r}\r
`])),i.push(new Blob([`Content-Disposition: form-data; name="${d.name}"\r
`,`Content-Type: ${d.payload.type}\r
\r
`])),i.push(d.payload),i.push(new Blob([`\r
`]));i.push(new Blob([`--${r}--\r
`]));const l=await new Blob(i).arrayBuffer(),c=await this.batchIngestCaller.call(ce(this.debug),`${this.apiUrl}/runs/multipart`,{method:"POST",headers:{...this.headers,"Content-Type":`multipart/form-data; boundary=${r}`},body:l,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Re(c,"ingest multipart runs",!0)}catch(r){console.warn(`${r.message.trim()}

Context: ${t}`)}}async updateRun(e,t){Te(e),t.inputs&&(t.inputs=await this.processInputs(t.inputs)),t.outputs&&(t.outputs=await this.processOutputs(t.outputs));const r={...t,id:e};if(!this._filterForSampling([r],!0).length)return;if(this.autoBatchTracing&&r.trace_id!==void 0&&r.dotted_order!==void 0){if(t.end_time!==void 0&&r.parent_run_id===void 0&&this.blockOnRootRunFinalization&&!this.manualFlushMode){await this.processRunOperation({action:"update",item:r}).catch(console.error);return}else this.processRunOperation({action:"update",item:r}).catch(console.error);return}const i={...this.headers,"Content-Type":"application/json"},o=await this.caller.call(ce(this.debug),`${this.apiUrl}/runs/${e}`,{method:"PATCH",headers:i,body:xn(t),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Re(o,"update run",!0)}async readRun(e,{loadChildRuns:t}={loadChildRuns:!1}){Te(e);let r=await this._get(`/runs/${e}`);return t&&r.child_run_ids&&(r=await this._loadChildRuns(r)),r}async getRunUrl({runId:e,run:t,projectOpts:r}){if(t!==void 0){let i;t.session_id?i=t.session_id:r!=null&&r.projectName?i=(await this.readProject({projectName:r==null?void 0:r.projectName})).id:r!=null&&r.projectId?i=r==null?void 0:r.projectId:i=(await this.readProject({projectName:Er("PROJECT")||"default"})).id;const o=await this._getTenantId();return`${this.getHostUrl()}/o/${o}/projects/p/${i}/r/${t.id}?poll=true`}else if(e!==void 0){const i=await this.readRun(e);if(!i.app_path)throw new Error(`Run ${e} has no app_path`);return`${this.getHostUrl()}${i.app_path}`}else throw new Error("Must provide either runId or run")}async _loadChildRuns(e){const t=await B$(this.listRuns({id:e.child_run_ids})),r={},i={};t.sort((o,l)=>((o==null?void 0:o.dotted_order)??"").localeCompare((l==null?void 0:l.dotted_order)??""));for(const o of t){if(o.parent_run_id===null||o.parent_run_id===void 0)throw new Error(`Child run ${o.id} has no parent`);o.parent_run_id in r||(r[o.parent_run_id]=[]),r[o.parent_run_id].push(o),i[o.id]=o}e.child_runs=r[e.id]||[];for(const o in r)o!==e.id&&(i[o].child_runs=r[o]);return e}async*listRuns(e){const{projectId:t,projectName:r,parentRunId:i,traceId:o,referenceExampleId:l,startTime:c,executionOrder:d,isRoot:h,runType:m,error:g,id:b,query:_,filter:v,traceFilter:S,treeFilter:A,limit:E,select:O,order:x}=e;let j=[];if(t&&(j=Array.isArray(t)?t:[t]),r){const V=Array.isArray(r)?r:[r],ie=await Promise.all(V.map(he=>this.readProject({projectName:he}).then(me=>me.id)));j.push(...ie)}const P=["app_path","child_run_ids","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],z={session:j.length?j:null,run_type:m,reference_example:l,query:_,filter:v,trace_filter:S,tree_filter:A,execution_order:d,parent_run:i,start_time:c?c.toISOString():null,error:g,id:b,limit:E,trace:o,select:O||P,is_root:h,order:x};let H=0;for await(const V of this._getCursorPaginatedList("/runs/query",z))if(E){if(H>=E)break;if(V.length+H>E){yield*V.slice(0,E-H);break}H+=V.length,yield*V}else yield*V}async*listGroupRuns(e){const{projectId:t,projectName:r,groupBy:i,filter:o,startTime:l,endTime:c,limit:d,offset:h}=e,g={session_id:t||(await this.readProject({projectName:r})).id,group_by:i,filter:o,start_time:l?l.toISOString():null,end_time:c?c.toISOString():null,limit:Number(d)||100};let b=Number(h)||0;const _="/runs/group",v=`${this.apiUrl}${_}`;for(;;){const S={...g,offset:b},A=Object.fromEntries(Object.entries(S).filter(([P,z])=>z!==void 0)),E=await this.caller.call(ce(),v,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(A),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Re(E,`Failed to fetch ${_}`);const O=await E.json(),{groups:x,total:j}=O;if(x.length===0)break;for(const P of x)yield P;if(b+=x.length,b>=j)break}}async getRunStats({id:e,trace:t,parentRun:r,runType:i,projectNames:o,projectIds:l,referenceExampleIds:c,startTime:d,endTime:h,error:m,query:g,filter:b,traceFilter:_,treeFilter:v,isRoot:S,dataSourceType:A}){let E=l||[];o&&(E=[...l||[],...await Promise.all(o.map(z=>this.readProject({projectName:z}).then(H=>H.id)))]);const x=Object.fromEntries(Object.entries({id:e,trace:t,parent_run:r,run_type:i,session:E,reference_example:c,start_time:d,end_time:h,error:m,query:g,filter:b,trace_filter:_,tree_filter:v,is_root:S,data_source_type:A}).filter(([z,H])=>H!==void 0));return await(await this.caller.call(ce(this.debug),`${this.apiUrl}/runs/stats`,{method:"POST",headers:this.headers,body:JSON.stringify(x),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async shareRun(e,{shareId:t}={}){const r={run_id:e,share_token:t||Wt()};Te(e);const o=await(await this.caller.call(ce(this.debug),`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();if(o===null||!("share_token"in o))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${o.share_token}/r`}async unshareRun(e){Te(e);const t=await this.caller.call(ce(this.debug),`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Re(t,"unshare run",!0)}async readRunSharedLink(e){Te(e);const r=await(await this.caller.call(ce(this.debug),`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();if(!(r===null||!("share_token"in r)))return`${this.getHostUrl()}/public/${r.share_token}/r`}async listSharedRuns(e,{runIds:t}={}){const r=new URLSearchParams({share_token:e});if(t!==void 0)for(const l of t)r.append("id",l);return Te(e),await(await this.caller.call(ce(this.debug),`${this.apiUrl}/public/${e}/runs${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async readDatasetSharedSchema(e,t){if(!e&&!t)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:t})).id),Te(e);const i=await(await this.caller.call(ce(this.debug),`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();return i.url=`${this.getHostUrl()}/public/${i.share_token}/d`,i}async shareDataset(e,t){if(!e&&!t)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:t})).id);const r={dataset_id:e};Te(e);const o=await(await this.caller.call(ce(this.debug),`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();return o.url=`${this.getHostUrl()}/public/${o.share_token}/d`,o}async unshareDataset(e){Te(e);const t=await this.caller.call(ce(this.debug),`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Re(t,"unshare dataset",!0)}async readSharedDataset(e){return Te(e),await(await this.caller.call(ce(this.debug),`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async listSharedExamples(e,t){const r={};t!=null&&t.exampleIds&&(r.id=t.exampleIds);const i=new URLSearchParams;Object.entries(r).forEach(([c,d])=>{Array.isArray(d)?d.forEach(h=>i.append(c,h)):i.append(c,d)});const o=await this.caller.call(ce(this.debug),`${this.apiUrl}/public/${e}/examples?${i.toString()}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),l=await o.json();if(!o.ok)throw"detail"in l?new Error(`Failed to list shared examples.
Status: ${o.status}
Message: ${l.detail.join(`
`)}`):new Error(`Failed to list shared examples: ${o.status} ${o.statusText}`);return l.map(c=>({...c,_hostUrl:this.getHostUrl()}))}async createProject({projectName:e,description:t=null,metadata:r=null,upsert:i=!1,projectExtra:o=null,referenceDatasetId:l=null}){const c=i?"?upsert=true":"",d=`${this.apiUrl}/sessions${c}`,h=o||{};r&&(h.metadata=r);const m={name:e,extra:h,description:t};l!==null&&(m.reference_dataset_id=l);const g=await this.caller.call(ce(this.debug),d,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(m),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Re(g,"create project"),await g.json()}async updateProject(e,{name:t=null,description:r=null,metadata:i=null,projectExtra:o=null,endTime:l=null}){const c=`${this.apiUrl}/sessions/${e}`;let d=o;i&&(d={...d||{},metadata:i});const h={name:t,extra:d,description:r,end_time:l?new Date(l).toISOString():null},m=await this.caller.call(ce(this.debug),c,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(h),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Re(m,"update project"),await m.json()}async hasProject({projectId:e,projectName:t}){let r="/sessions";const i=new URLSearchParams;if(e!==void 0&&t!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)Te(e),r+=`/${e}`;else if(t!==void 0)i.append("name",t);else throw new Error("Must provide projectName or projectId");const o=await this.caller.call(ce(this.debug),`${this.apiUrl}${r}?${i}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});try{const l=await o.json();return o.ok?Array.isArray(l)?l.length>0:!0:!1}catch{return!1}}async readProject({projectId:e,projectName:t,includeStats:r}){let i="/sessions";const o=new URLSearchParams;if(e!==void 0&&t!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)Te(e),i+=`/${e}`;else if(t!==void 0)o.append("name",t);else throw new Error("Must provide projectName or projectId");r!==void 0&&o.append("include_stats",r.toString());const l=await this._get(i,o);let c;if(Array.isArray(l)){if(l.length===0)throw new Error(`Project[id=${e}, name=${t}] not found`);c=l[0]}else c=l;return c}async getProjectUrl({projectId:e,projectName:t}){if(e===void 0&&t===void 0)throw new Error("Must provide either projectName or projectId");const r=await this.readProject({projectId:e,projectName:t}),i=await this._getTenantId();return`${this.getHostUrl()}/o/${i}/projects/p/${r.id}`}async getDatasetUrl({datasetId:e,datasetName:t}){if(e===void 0&&t===void 0)throw new Error("Must provide either datasetName or datasetId");const r=await this.readDataset({datasetId:e,datasetName:t}),i=await this._getTenantId();return`${this.getHostUrl()}/o/${i}/datasets/${r.id}`}async _getTenantId(){if(this._tenantId!==null)return this._tenantId;const e=new URLSearchParams({limit:"1"});for await(const t of this._getPaginated("/sessions",e))return this._tenantId=t[0].tenant_id,t[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:e,name:t,nameContains:r,referenceDatasetId:i,referenceDatasetName:o,referenceFree:l,metadata:c}={}){const d=new URLSearchParams;if(e!==void 0)for(const h of e)d.append("id",h);if(t!==void 0&&d.append("name",t),r!==void 0&&d.append("name_contains",r),i!==void 0)d.append("reference_dataset",i);else if(o!==void 0){const h=await this.readDataset({datasetName:o});d.append("reference_dataset",h.id)}l!==void 0&&d.append("reference_free",l.toString()),c!==void 0&&d.append("metadata",JSON.stringify(c));for await(const h of this._getPaginated("/sessions",d))yield*h}async deleteProject({projectId:e,projectName:t}){let r;if(e===void 0&&t===void 0)throw new Error("Must provide projectName or projectId");if(e!==void 0&&t!==void 0)throw new Error("Must provide either projectName or projectId, not both");e===void 0?r=(await this.readProject({projectName:t})).id:r=e,Te(r);const i=await this.caller.call(ce(this.debug),`${this.apiUrl}/sessions/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Re(i,`delete session ${r} (${t})`,!0)}async uploadCsv({csvFile:e,fileName:t,inputKeys:r,outputKeys:i,description:o,dataType:l,name:c}){const d=`${this.apiUrl}/datasets/upload`,h=new FormData;h.append("file",e,t),r.forEach(b=>{h.append("input_keys",b)}),i.forEach(b=>{h.append("output_keys",b)}),o&&h.append("description",o),l&&h.append("data_type",l),c&&h.append("name",c);const m=await this.caller.call(ce(this.debug),d,{method:"POST",headers:this.headers,body:h,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Re(m,"upload CSV"),await m.json()}async createDataset(e,{description:t,dataType:r,inputsSchema:i,outputsSchema:o,metadata:l}={}){const c={name:e,description:t,extra:l?{metadata:l}:void 0};r&&(c.data_type=r),i&&(c.inputs_schema_definition=i),o&&(c.outputs_schema_definition=o);const d=await this.caller.call(ce(this.debug),`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Re(d,"create dataset"),await d.json()}async readDataset({datasetId:e,datasetName:t}){let r="/datasets";const i=new URLSearchParams({limit:"1"});if(e!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)Te(e),r+=`/${e}`;else if(t!==void 0)i.append("name",t);else throw new Error("Must provide datasetName or datasetId");const o=await this._get(r,i);let l;if(Array.isArray(o)){if(o.length===0)throw new Error(`Dataset[id=${e}, name=${t}] not found`);l=o[0]}else l=o;return l}async hasDataset({datasetId:e,datasetName:t}){try{return await this.readDataset({datasetId:e,datasetName:t}),!0}catch(r){if(r instanceof Error&&r.message.toLocaleLowerCase().includes("not found"))return!1;throw r}}async diffDatasetVersions({datasetId:e,datasetName:t,fromVersion:r,toVersion:i}){let o=e;if(o===void 0&&t===void 0)throw new Error("Must provide either datasetName or datasetId");if(o!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");o===void 0&&(o=(await this.readDataset({datasetName:t})).id);const l=new URLSearchParams({from_version:typeof r=="string"?r:r.toISOString(),to_version:typeof i=="string"?i:i.toISOString()});return await this._get(`/datasets/${o}/versions/diff`,l)}async readDatasetOpenaiFinetuning({datasetId:e,datasetName:t}){const r="/datasets";if(e===void 0)if(t!==void 0)e=(await this.readDataset({datasetName:t})).id;else throw new Error("Must provide either datasetName or datasetId");return(await(await this._getResponse(`${r}/${e}/openai_ft`)).text()).trim().split(`
`).map(c=>JSON.parse(c))}async*listDatasets({limit:e=100,offset:t=0,datasetIds:r,datasetName:i,datasetNameContains:o,metadata:l}={}){const c="/datasets",d=new URLSearchParams({limit:e.toString(),offset:t.toString()});if(r!==void 0)for(const h of r)d.append("id",h);i!==void 0&&d.append("name",i),o!==void 0&&d.append("name_contains",o),l!==void 0&&d.append("metadata",JSON.stringify(l));for await(const h of this._getPaginated(c,d))yield*h}async updateDataset(e){const{datasetId:t,datasetName:r,...i}=e;if(!t&&!r)throw new Error("Must provide either datasetName or datasetId");const o=t??(await this.readDataset({datasetName:r})).id;Te(o);const l=await this.caller.call(ce(this.debug),`${this.apiUrl}/datasets/${o}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(i),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Re(l,"update dataset"),await l.json()}async updateDatasetTag(e){const{datasetId:t,datasetName:r,asOf:i,tag:o}=e;if(!t&&!r)throw new Error("Must provide either datasetName or datasetId");const l=t??(await this.readDataset({datasetName:r})).id;Te(l);const c=await this.caller.call(ce(this.debug),`${this.apiUrl}/datasets/${l}/tags`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({as_of:typeof i=="string"?i:i.toISOString(),tag:o}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Re(c,"update dataset tags")}async deleteDataset({datasetId:e,datasetName:t}){let r="/datasets",i=e;if(e!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(t!==void 0&&(i=(await this.readDataset({datasetName:t})).id),i!==void 0)Te(i),r+=`/${i}`;else throw new Error("Must provide datasetName or datasetId");const o=await this.caller.call(ce(this.debug),this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Re(o,`delete ${r}`),await o.json()}async indexDataset({datasetId:e,datasetName:t,tag:r}){let i=e;if(!i&&!t)throw new Error("Must provide either datasetName or datasetId");if(i&&t)throw new Error("Must provide either datasetName or datasetId, not both");i||(i=(await this.readDataset({datasetName:t})).id),Te(i);const o={tag:r},l=await this.caller.call(ce(this.debug),`${this.apiUrl}/datasets/${i}/index`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Re(l,"index dataset"),await l.json()}async similarExamples(e,t,r,{filter:i}={}){const o={limit:r,inputs:e};i!==void 0&&(o.filter=i),Te(t);const l=await this.caller.call(ce(this.debug),`${this.apiUrl}/datasets/${t}/search`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Re(l,"fetch similar examples"),(await l.json()).examples}async createExample(e,t,r){var m;if(IE(e)&&(t!==void 0||r!==void 0))throw new Error("Cannot provide outputs or options when using ExampleCreate object");let i=t?r==null?void 0:r.datasetId:e.dataset_id;const o=t?r==null?void 0:r.datasetName:e.dataset_name;if(i===void 0&&o===void 0)throw new Error("Must provide either datasetName or datasetId");if(i!==void 0&&o!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");i===void 0&&(i=(await this.readDataset({datasetName:o})).id);const l=(t?r==null?void 0:r.createdAt:e.created_at)||new Date;let c;IE(e)?c=e:c={inputs:e,outputs:t,created_at:l==null?void 0:l.toISOString(),id:r==null?void 0:r.exampleId,metadata:r==null?void 0:r.metadata,split:r==null?void 0:r.split,source_run_id:r==null?void 0:r.sourceRunId,use_source_run_io:r==null?void 0:r.useSourceRunIO,use_source_run_attachments:r==null?void 0:r.useSourceRunAttachments,attachments:r==null?void 0:r.attachments};const d=await this._uploadExamplesMultipart(i,[c]);return await this.readExample(((m=d.example_ids)==null?void 0:m[0])??Wt())}async createExamples(e){if(Array.isArray(e)){if(e.length===0)return[];const O=e;let x=O[0].dataset_id;const j=O[0].dataset_name;if(x===void 0&&j===void 0)throw new Error("Must provide either datasetName or datasetId");if(x!==void 0&&j!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");x===void 0&&(x=(await this.readDataset({datasetName:j})).id);const P=await this._uploadExamplesMultipart(x,O);return await Promise.all(P.example_ids.map(H=>this.readExample(H)))}const{inputs:t,outputs:r,metadata:i,splits:o,sourceRunIds:l,useSourceRunIOs:c,useSourceRunAttachments:d,attachments:h,exampleIds:m,datasetId:g,datasetName:b}=e;if(t===void 0)throw new Error("Must provide inputs when using legacy parameters");let _=g;const v=b;if(_===void 0&&v===void 0)throw new Error("Must provide either datasetName or datasetId");if(_!==void 0&&v!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");_===void 0&&(_=(await this.readDataset({datasetName:v})).id);const S=t.map((O,x)=>({dataset_id:_,inputs:O,outputs:r==null?void 0:r[x],metadata:i==null?void 0:i[x],split:o==null?void 0:o[x],id:m==null?void 0:m[x],attachments:h==null?void 0:h[x],source_run_id:l==null?void 0:l[x],use_source_run_io:c==null?void 0:c[x],use_source_run_attachments:d==null?void 0:d[x]})),A=await this._uploadExamplesMultipart(_,S);return await Promise.all(A.example_ids.map(O=>this.readExample(O)))}async createLLMExample(e,t,r){return this.createExample({input:e},{output:t},r)}async createChatExample(e,t,r){const i=e.map(l=>$T(l)?UT(l):l),o=$T(t)?UT(t):t;return this.createExample({input:i},{output:o},r)}async readExample(e){Te(e);const t=`/examples/${e}`,r=await this._get(t),{attachment_urls:i,...o}=r,l=o;return i&&(l.attachments=Object.entries(i).reduce((c,[d,h])=>(c[d.slice(11)]={presigned_url:h.presigned_url,mime_type:h.mime_type},c),{})),l}async*listExamples({datasetId:e,datasetName:t,exampleIds:r,asOf:i,splits:o,inlineS3Urls:l,metadata:c,limit:d,offset:h,filter:m,includeAttachments:g}={}){let b;if(e!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)b=e;else if(t!==void 0)b=(await this.readDataset({datasetName:t})).id;else throw new Error("Must provide a datasetName or datasetId");const _=new URLSearchParams({dataset:b}),v=i?typeof i=="string"?i:i==null?void 0:i.toISOString():void 0;v&&_.append("as_of",v);const S=l??!0;if(_.append("inline_s3_urls",S.toString()),r!==void 0)for(const E of r)_.append("id",E);if(o!==void 0)for(const E of o)_.append("splits",E);if(c!==void 0){const E=JSON.stringify(c);_.append("metadata",E)}d!==void 0&&_.append("limit",d.toString()),h!==void 0&&_.append("offset",h.toString()),m!==void 0&&_.append("filter",m),g===!0&&["attachment_urls","outputs","metadata"].forEach(E=>_.append("select",E));let A=0;for await(const E of this._getPaginated("/examples",_)){for(const O of E){const{attachment_urls:x,...j}=O,P=j;x&&(P.attachments=Object.entries(x).reduce((z,[H,V])=>(z[H.slice(11)]={presigned_url:V.presigned_url,mime_type:V.mime_type||void 0},z),{})),yield P,A++}if(d!==void 0&&A>=d)break}}async deleteExample(e){Te(e);const t=`/examples/${e}`,r=await this.caller.call(ce(this.debug),this.apiUrl+t,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Re(r,`delete ${t}`),await r.json()}async updateExample(e,t){let r;t?r=e:r=e.id,Te(r);let i;t?i={id:r,...t}:i=e;let o;return i.dataset_id!==void 0?o=i.dataset_id:o=(await this.readExample(r)).dataset_id,this._updateExamplesMultipart(o,[i])}async updateExamples(e){let t;return e[0].dataset_id===void 0?t=(await this.readExample(e[0].id)).dataset_id:t=e[0].dataset_id,this._updateExamplesMultipart(t,e)}async readDatasetVersion({datasetId:e,datasetName:t,asOf:r,tag:i}){let o;if(e?o=e:o=(await this.readDataset({datasetName:t})).id,Te(o),r&&i||!r&&!i)throw new Error("Exactly one of asOf and tag must be specified.");const l=new URLSearchParams;r!==void 0&&l.append("as_of",typeof r=="string"?r:r.toISOString()),i!==void 0&&l.append("tag",i);const c=await this.caller.call(ce(this.debug),`${this.apiUrl}/datasets/${o}/version?${l.toString()}`,{method:"GET",headers:{...this.headers},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Re(c,"read dataset version"),await c.json()}async listDatasetSplits({datasetId:e,datasetName:t,asOf:r}){let i;if(e===void 0&&t===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?i=(await this.readDataset({datasetName:t})).id:i=e,Te(i);const o=new URLSearchParams,l=r?typeof r=="string"?r:r==null?void 0:r.toISOString():void 0;return l&&o.append("as_of",l),await this._get(`/datasets/${i}/splits`,o)}async updateDatasetSplits({datasetId:e,datasetName:t,splitName:r,exampleIds:i,remove:o=!1}){let l;if(e===void 0&&t===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?l=(await this.readDataset({datasetName:t})).id:l=e,Te(l);const c={split_name:r,examples:i.map(h=>(Te(h),h)),remove:o},d=await this.caller.call(ce(this.debug),`${this.apiUrl}/datasets/${l}/splits`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Re(d,"update dataset splits",!0)}async evaluateRun(e,t,{sourceInfo:r,loadChildRuns:i,referenceExample:o}={loadChildRuns:!1}){NR("This method is deprecated and will be removed in future LangSmith versions, use `evaluate` from `langsmith/evaluation` instead.");let l;if(typeof e=="string")l=await this.readRun(e,{loadChildRuns:i});else if(typeof e=="object"&&"id"in e)l=e;else throw new Error(`Invalid run type: ${typeof e}`);l.reference_example_id!==null&&l.reference_example_id!==void 0&&(o=await this.readExample(l.reference_example_id));const c=await t.evaluateRun(l,o),[d,h]=await this._logEvaluationFeedback(c,l,r);return h[0]}async createFeedback(e,t,{score:r,value:i,correction:o,comment:l,sourceInfo:c,feedbackSourceType:d="api",sourceRunId:h,feedbackId:m,feedbackConfig:g,projectId:b,comparativeExperimentId:_}){var O;if(!e&&!b)throw new Error("One of runId or projectId must be provided");if(e&&b)throw new Error("Only one of runId or projectId can be provided");const v={type:d??"api",metadata:c??{}};h!==void 0&&(v==null?void 0:v.metadata)!==void 0&&!v.metadata.__run&&(v.metadata.__run={run_id:h}),(v==null?void 0:v.metadata)!==void 0&&((O=v.metadata.__run)==null?void 0:O.run_id)!==void 0&&Te(v.metadata.__run.run_id);const S={id:m??Wt(),run_id:e,key:t,score:ME(r),value:i,correction:o,comment:l,feedback_source:v,comparative_experiment_id:_,feedbackConfig:g,session_id:b},A=`${this.apiUrl}/feedback`,E=await this.caller.call(ce(this.debug),A,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(S),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Re(E,"create feedback",!0),S}async updateFeedback(e,{score:t,value:r,correction:i,comment:o}){const l={};t!=null&&(l.score=ME(t)),r!=null&&(l.value=r),i!=null&&(l.correction=i),o!=null&&(l.comment=o),Te(e);const c=await this.caller.call(ce(this.debug),`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(l),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Re(c,"update feedback",!0)}async readFeedback(e){Te(e);const t=`/feedback/${e}`;return await this._get(t)}async deleteFeedback(e){Te(e);const t=`/feedback/${e}`,r=await this.caller.call(ce(this.debug),this.apiUrl+t,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Re(r,`delete ${t}`),await r.json()}async*listFeedback({runIds:e,feedbackKeys:t,feedbackSourceTypes:r}={}){const i=new URLSearchParams;if(e&&i.append("run",e.join(",")),t)for(const o of t)i.append("key",o);if(r)for(const o of r)i.append("source",o);for await(const o of this._getPaginated("/feedback",i))yield*o}async createPresignedFeedbackToken(e,t,{expiration:r,feedbackConfig:i}={}){const o={run_id:e,feedback_key:t,feedback_config:i};return r?typeof r=="string"?o.expires_at=r:(r!=null&&r.hours||r!=null&&r.minutes||r!=null&&r.days)&&(o.expires_in=r):o.expires_in={hours:3},await(await this.caller.call(ce(this.debug),`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async createComparativeExperiment({name:e,experimentIds:t,referenceDatasetId:r,createdAt:i,description:o,metadata:l,id:c}){var m;if(t.length===0)throw new Error("At least one experiment is required");if(r||(r=(await this.readProject({projectId:t[0]})).reference_dataset_id),!r==null)throw new Error("A reference dataset is required");const d={id:c,name:e,experiment_ids:t,reference_dataset_id:r,description:o,created_at:(m=i??new Date)==null?void 0:m.toISOString(),extra:{}};return l&&(d.extra.metadata=l),await(await this.caller.call(ce(this.debug),`${this.apiUrl}/datasets/comparative`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(d),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async*listPresignedFeedbackTokens(e){Te(e);const t=new URLSearchParams({run_id:e});for await(const r of this._getPaginated("/feedback/tokens",t))yield*r}_selectEvalResults(e){let t;return"results"in e?t=e.results:Array.isArray(e)?t=e:t=[e],t}async _logEvaluationFeedback(e,t,r){const i=this._selectEvalResults(e),o=[];for(const l of i){let c=r||{};l.evaluatorInfo&&(c={...l.evaluatorInfo,...c});let d=null;l.targetRunId?d=l.targetRunId:t&&(d=t.id),o.push(await this.createFeedback(d,l.key,{score:l.score,value:l.value,comment:l.comment,correction:l.correction,sourceInfo:c,sourceRunId:l.sourceRunId,feedbackConfig:l.feedbackConfig,feedbackSourceType:"model"}))}return[i,o]}async logEvaluationFeedback(e,t,r){const[i]=await this._logEvaluationFeedback(e,t,r);return i}async*listAnnotationQueues(e={}){const{queueIds:t,name:r,nameContains:i,limit:o}=e,l=new URLSearchParams;t&&t.forEach((d,h)=>{Te(d,`queueIds[${h}]`),l.append("ids",d)}),r&&l.append("name",r),i&&l.append("name_contains",i),l.append("limit",(o!==void 0?Math.min(o,100):100).toString());let c=0;for await(const d of this._getPaginated("/annotation-queues",l))if(yield*d,c++,o!==void 0&&c>=o)break}async createAnnotationQueue(e){const{name:t,description:r,queueId:i,rubricInstructions:o}=e,l={name:t,description:r,id:i||Wt(),rubric_instructions:o},c=await this.caller.call(ce(this.debug),`${this.apiUrl}/annotation-queues`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(Object.fromEntries(Object.entries(l).filter(([h,m])=>m!==void 0))),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Re(c,"create annotation queue"),await c.json()}async readAnnotationQueue(e){const t=await this.caller.call(ce(this.debug),`${this.apiUrl}/annotation-queues/${Te(e,"queueId")}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Re(t,"read annotation queue"),await t.json()}async updateAnnotationQueue(e,t){const{name:r,description:i,rubricInstructions:o}=t,l=await this.caller.call(ce(this.debug),`${this.apiUrl}/annotation-queues/${Te(e,"queueId")}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({name:r,description:i,rubric_instructions:o}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Re(l,"update annotation queue")}async deleteAnnotationQueue(e){const t=await this.caller.call(ce(this.debug),`${this.apiUrl}/annotation-queues/${Te(e,"queueId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Re(t,"delete annotation queue")}async addRunsToAnnotationQueue(e,t){const r=await this.caller.call(ce(this.debug),`${this.apiUrl}/annotation-queues/${Te(e,"queueId")}/runs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(t.map((i,o)=>Te(i,`runIds[${o}]`).toString())),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Re(r,"add runs to annotation queue")}async getRunFromAnnotationQueue(e,t){const r=`/annotation-queues/${Te(e,"queueId")}/run`,i=await this.caller.call(ce(this.debug),`${this.apiUrl}${r}/${t}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Re(i,"get run from annotation queue"),await i.json()}async deleteRunFromAnnotationQueue(e,t){const r=await this.caller.call(ce(this.debug),`${this.apiUrl}/annotation-queues/${Te(e,"queueId")}/runs/${Te(t,"queueRunId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Re(r,"delete run from annotation queue")}async getSizeFromAnnotationQueue(e){const t=await this.caller.call(ce(this.debug),`${this.apiUrl}/annotation-queues/${Te(e,"queueId")}/size`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Re(t,"get size from annotation queue"),await t.json()}async _currentTenantIsOwner(e){const t=await this._getSettings();return e=="-"||t.tenant_handle===e}async _ownerConflictError(e,t){const r=await this._getSettings();return new Error(`Cannot ${e} for another tenant.

      Current tenant: ${r.tenant_handle}

      Requested tenant: ${t}`)}async _getLatestCommitHash(e){const t=await this.caller.call(ce(this.debug),`${this.apiUrl}/commits/${e}/?limit=1&offset=0`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),r=await t.json();if(!t.ok){const i=typeof r.detail=="string"?r.detail:JSON.stringify(r.detail),o=new Error(`Error ${t.status}: ${t.statusText}
${i}`);throw o.statusCode=t.status,o}if(r.commits.length!==0)return r.commits[0].commit_hash}async _likeOrUnlikePrompt(e,t){const[r,i,o]=Ia(e),l=await this.caller.call(ce(this.debug),`${this.apiUrl}/likes/${r}/${i}`,{method:"POST",body:JSON.stringify({like:t}),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Re(l,`${t?"like":"unlike"} prompt`),await l.json()}async _getPromptUrl(e){const[t,r,i]=Ia(e);if(await this._currentTenantIsOwner(t)){const o=await this._getSettings();return i!=="latest"?`${this.getHostUrl()}/prompts/${r}/${i.substring(0,8)}?organizationId=${o.id}`:`${this.getHostUrl()}/prompts/${r}?organizationId=${o.id}`}else return i!=="latest"?`${this.getHostUrl()}/hub/${t}/${r}/${i.substring(0,8)}`:`${this.getHostUrl()}/hub/${t}/${r}`}async promptExists(e){return!!await this.getPrompt(e)}async likePrompt(e){return this._likeOrUnlikePrompt(e,!0)}async unlikePrompt(e){return this._likeOrUnlikePrompt(e,!1)}async*listCommits(e){for await(const t of this._getPaginated(`/commits/${e}/`,new URLSearchParams,r=>r.commits))yield*t}async*listPrompts(e){const t=new URLSearchParams;t.append("sort_field",(e==null?void 0:e.sortField)??"updated_at"),t.append("sort_direction","desc"),t.append("is_archived",(!!(e!=null&&e.isArchived)).toString()),(e==null?void 0:e.isPublic)!==void 0&&t.append("is_public",e.isPublic.toString()),e!=null&&e.query&&t.append("query",e.query);for await(const r of this._getPaginated("/repos",t,i=>i.repos))yield*r}async getPrompt(e){const[t,r,i]=Ia(e),o=await this.caller.call(ce(this.debug),`${this.apiUrl}/repos/${t}/${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(o.status===404)return null;await Re(o,"get prompt");const l=await o.json();return l.repo?l.repo:null}async createPrompt(e,t){const r=await this._getSettings();if(t!=null&&t.isPublic&&!r.tenant_handle)throw new Error(`Cannot create a public prompt without first

        creating a LangChain Hub handle. 
        You can add a handle by creating a public prompt at:

        https://smith.langchain.com/prompts`);const[i,o,l]=Ia(e);if(!await this._currentTenantIsOwner(i))throw await this._ownerConflictError("create a prompt",i);const c={repo_handle:o,...(t==null?void 0:t.description)&&{description:t.description},...(t==null?void 0:t.readme)&&{readme:t.readme},...(t==null?void 0:t.tags)&&{tags:t.tags},is_public:!!(t!=null&&t.isPublic)},d=await this.caller.call(ce(this.debug),`${this.apiUrl}/repos/`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Re(d,"create prompt");const{repo:h}=await d.json();return h}async createCommit(e,t,r){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[i,o,l]=Ia(e),c=(r==null?void 0:r.parentCommitHash)==="latest"||!(r!=null&&r.parentCommitHash)?await this._getLatestCommitHash(`${i}/${o}`):r==null?void 0:r.parentCommitHash,d={manifest:JSON.parse(JSON.stringify(t)),parent_commit:c},h=await this.caller.call(ce(this.debug),`${this.apiUrl}/commits/${i}/${o}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(d),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Re(h,"create commit");const m=await h.json();return this._getPromptUrl(`${i}/${o}${m.commit_hash?`:${m.commit_hash}`:""}`)}async updateExamplesMultipart(e,t=[]){return this._updateExamplesMultipart(e,t)}async _updateExamplesMultipart(e,t=[]){var c;if(!await this._getMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const r=new FormData;for(const d of t){const h=d.id,m={...d.metadata&&{metadata:d.metadata},...d.split&&{split:d.split}},g=xn(m),b=new Blob([g],{type:"application/json"});if(r.append(h,b),d.inputs){const _=xn(d.inputs),v=new Blob([_],{type:"application/json"});r.append(`${h}.inputs`,v)}if(d.outputs){const _=xn(d.outputs),v=new Blob([_],{type:"application/json"});r.append(`${h}.outputs`,v)}if(d.attachments)for(const[_,v]of Object.entries(d.attachments)){let S,A;Array.isArray(v)?[S,A]=v:(S=v.mimeType,A=v.data);const E=new Blob([A],{type:`${S}; length=${A.byteLength}`});r.append(`${h}.attachment.${_}`,E)}if(d.attachments_operations){const _=xn(d.attachments_operations),v=new Blob([_],{type:"application/json"});r.append(`${h}.attachments_operations`,v)}}const i=e??((c=t[0])==null?void 0:c.dataset_id);return await(await this.caller.call(ce(this.debug),`${this.apiUrl}/v1/platform/datasets/${i}/examples`,{method:"PATCH",headers:this.headers,body:r})).json()}async uploadExamplesMultipart(e,t=[]){return this._uploadExamplesMultipart(e,t)}async _uploadExamplesMultipart(e,t=[]){if(!await this._getMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const r=new FormData;for(const l of t){const c=(l.id??Wt()).toString(),d={created_at:l.created_at,...l.metadata&&{metadata:l.metadata},...l.split&&{split:l.split},...l.source_run_id&&{source_run_id:l.source_run_id},...l.use_source_run_io&&{use_source_run_io:l.use_source_run_io},...l.use_source_run_attachments&&{use_source_run_attachments:l.use_source_run_attachments}},h=xn(d),m=new Blob([h],{type:"application/json"});if(r.append(c,m),l.inputs){const g=xn(l.inputs),b=new Blob([g],{type:"application/json"});r.append(`${c}.inputs`,b)}if(l.outputs){const g=xn(l.outputs),b=new Blob([g],{type:"application/json"});r.append(`${c}.outputs`,b)}if(l.attachments)for(const[g,b]of Object.entries(l.attachments)){let _,v;Array.isArray(b)?[_,v]=b:(_=b.mimeType,v=b.data);const S=new Blob([v],{type:`${_}; length=${v.byteLength}`});r.append(`${c}.attachment.${g}`,S)}}const i=await this.caller.call(ce(this.debug),`${this.apiUrl}/v1/platform/datasets/${e}/examples`,{method:"POST",headers:this.headers,body:r});return await Re(i,"upload examples"),await i.json()}async updatePrompt(e,t){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[r,i]=Ia(e);if(!await this._currentTenantIsOwner(r))throw await this._ownerConflictError("update a prompt",r);const o={};if((t==null?void 0:t.description)!==void 0&&(o.description=t.description),(t==null?void 0:t.readme)!==void 0&&(o.readme=t.readme),(t==null?void 0:t.tags)!==void 0&&(o.tags=t.tags),(t==null?void 0:t.isPublic)!==void 0&&(o.is_public=t.isPublic),(t==null?void 0:t.isArchived)!==void 0&&(o.is_archived=t.isArchived),Object.keys(o).length===0)throw new Error("No valid update options provided");const l=await this.caller.call(ce(this.debug),`${this.apiUrl}/repos/${r}/${i}`,{method:"PATCH",body:JSON.stringify(o),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Re(l,"update prompt"),l.json()}async deletePrompt(e){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[t,r,i]=Ia(e);if(!await this._currentTenantIsOwner(t))throw await this._ownerConflictError("delete a prompt",t);return await(await this.caller.call(ce(this.debug),`${this.apiUrl}/repos/${t}/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async pullPromptCommit(e,t){const[r,i,o]=Ia(e),l=await this.caller.call(ce(this.debug),`${this.apiUrl}/commits/${r}/${i}/${o}${t!=null&&t.includeModel?"?include_model=true":""}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Re(l,"pull prompt commit");const c=await l.json();return{owner:r,repo:i,commit_hash:c.commit_hash,manifest:c.manifest,examples:c.examples}}async _pullPrompt(e,t){const r=await this.pullPromptCommit(e,{includeModel:t==null?void 0:t.includeModel});return JSON.stringify(r.manifest)}async pushPrompt(e,t){return await this.promptExists(e)?t&&Object.keys(t).some(i=>i!=="object")&&await this.updatePrompt(e,{description:t==null?void 0:t.description,readme:t==null?void 0:t.readme,tags:t==null?void 0:t.tags,isPublic:t==null?void 0:t.isPublic}):await this.createPrompt(e,{description:t==null?void 0:t.description,readme:t==null?void 0:t.readme,tags:t==null?void 0:t.tags,isPublic:t==null?void 0:t.isPublic}),t!=null&&t.object?await this.createCommit(e,t==null?void 0:t.object,{parentCommitHash:t==null?void 0:t.parentCommitHash}):await this._getPromptUrl(e)}async clonePublicDataset(e,t={}){const{sourceApiUrl:r=this.apiUrl,datasetName:i}=t,[o,l]=this.parseTokenOrUrl(e,r),c=new yl({apiUrl:o,apiKey:"placeholder"}),d=await c.readSharedDataset(l),h=i||d.name;try{if(await this.hasDataset({datasetId:h})){console.log(`Dataset ${h} already exists in your tenant. Skipping.`);return}}catch{}const m=await c.listSharedExamples(l),g=await this.createDataset(h,{description:d.description,dataType:d.data_type||"kv",inputsSchema:d.inputs_schema_definition??void 0,outputsSchema:d.outputs_schema_definition??void 0});try{await this.createExamples({inputs:m.map(b=>b.inputs),outputs:m.flatMap(b=>b.outputs?[b.outputs]:[]),datasetId:g.id})}catch(b){throw console.error(`An error occurred while creating dataset ${h}. You should delete it manually.`),b}}parseTokenOrUrl(e,t,r=2,i="dataset"){try{return Te(e),[t,e]}catch{}try{const l=new URL(e).pathname.split("/").filter(c=>c!=="");if(l.length>=r){const c=l[l.length-r];return[t,c]}else throw new Error(`Invalid public ${i} URL: ${e}`)}catch{throw new Error(`Invalid public ${i} URL or token: ${e}`)}}awaitPendingTraceBatches(){return this.manualFlushMode?(console.warn("[WARNING]: When tracing in manual flush mode, you must call `await client.flush()` manually to submit trace batches."),Promise.resolve()):Promise.all([...this.autoBatchQueue.items.map(({itemPromise:e})=>e),this.batchIngestCaller.queue.onIdle()])}}function IE(n){return"dataset_id"in n||"dataset_name"in n}const LR="0.3.28";var qu={};let Jr;const H$=()=>typeof window<"u"&&typeof window.document<"u",Z$=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",G$=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),DR=()=>typeof Deno<"u",Y$=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!DR(),X$=()=>Jr||(H$()?Jr="browser":Y$()?Jr="node":Z$()?Jr="webworker":G$()?Jr="jsdom":DR()?Jr="deno":Jr="other",Jr);let Pg;function $R(){if(Pg===void 0){const n=X$(),e=Q$();Pg={library:"langsmith",runtime:n,sdk:"langsmith-js",sdk_version:LR,...e}}return Pg}function K$(){const n=J$()||{},e={},t=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION","LANGSMITH_API_KEY","LANGSMITH_ENDPOINT","LANGSMITH_TRACING_V2","LANGSMITH_PROJECT","LANGSMITH_SESSION"];for(const[r,i]of Object.entries(n))(r.startsWith("LANGCHAIN_")||r.startsWith("LANGSMITH_"))&&typeof i=="string"&&!t.includes(r)&&!r.toLowerCase().includes("key")&&!r.toLowerCase().includes("secret")&&!r.toLowerCase().includes("token")&&(r==="LANGCHAIN_REVISION_ID"?e.revision_id=i:e[r]=i);return e}function J$(){try{return typeof process<"u"&&qu?Object.entries(qu).reduce((n,[e,t])=>(n[e]=String(t),n),{}):void 0}catch{return}}function qa(n){try{return typeof process<"u"?qu==null?void 0:qu[n]:void 0}catch{return}}function Er(n){return qa(`LANGSMITH_${n}`)||qa(`LANGCHAIN_${n}`)}let Ng;function Q$(){if(Ng!==void 0)return Ng;const n=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],e={};for(const t of n){const r=qa(t);r!==void 0&&(e[t]=r)}return Ng=e,e}const W$=n=>!!["TRACING_V2","TRACING"].find(t=>Er(t)==="true"),jg=Symbol.for("lc:context_variables");function e3(n){return n.replace(/[-:.]/g,"")}function t3(n,e,t=1){const r=t.toFixed(0).slice(0,3).padStart(3,"0");return e3(`${new Date(n).toISOString().slice(0,-1)}${r}Z`)+e}class ed{constructor(e,t,r){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=e,this.tags=t,this.project_name=r}static fromHeader(e){const t=e.split(",");let r={},i=[],o;for(const l of t){const[c,d]=l.split("="),h=decodeURIComponent(d);c==="langsmith-metadata"?r=JSON.parse(h):c==="langsmith-tags"?i=h.split(","):c==="langsmith-project"&&(o=h)}return new ed(r,i,o)}toHeader(){const e=[];return this.metadata&&Object.keys(this.metadata).length>0&&e.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&e.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),this.project_name&&e.push(`langsmith-project=${encodeURIComponent(this.project_name)}`),e.join(",")}}class Rn{constructor(e){var c;if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attachments",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),UR(e)){Object.assign(this,{...e});return}const t=Rn.getDefaultConfig(),{metadata:r,...i}=e,o=i.client??Rn.getSharedClient(),l={...r,...(c=i==null?void 0:i.extra)==null?void 0:c.metadata};if(i.extra={...i.extra,metadata:l},Object.assign(this,{...t,...i,client:o}),this.trace_id||(this.parent_run?this.trace_id=this.parent_run.trace_id??this.id:this.trace_id=this.id),this.execution_order??(this.execution_order=1),this.child_execution_order??(this.child_execution_order=1),!this.dotted_order){const d=t3(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+d:this.dotted_order=d}}static getDefaultConfig(){return{id:Wt(),run_type:"chain",project_name:Er("PROJECT")??qa("LANGCHAIN_SESSION")??"default",child_runs:[],api_url:qa("LANGCHAIN_ENDPOINT")??"http://localhost:1984",api_key:qa("LANGCHAIN_API_KEY"),caller_options:{},start_time:Date.now(),serialized:{},inputs:{},extra:{}}}static getSharedClient(){return Rn.sharedClient||(Rn.sharedClient=new yl),Rn.sharedClient}createChild(e){var d,h,m,g,b,_;const t=this.child_execution_order+1,r=new Rn({...e,parent_run:this,project_name:this.project_name,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:t,child_execution_order:t});jg in this&&(r[jg]=this[jg]);const i=Symbol.for("lc:child_config"),o=((d=e.extra)==null?void 0:d[i])??this.extra[i];if(r3(o)){const v={...o},S=n3(v.callbacks)?(m=(h=v.callbacks).copy)==null?void 0:m.call(h):void 0;S&&(Object.assign(S,{_parentRunId:r.id}),(_=(b=(g=S.handlers)==null?void 0:g.find(BR))==null?void 0:b.updateFromRunTree)==null||_.call(b,r),v.callbacks=S),r.extra[i]=v}const l=new Set;let c=this;for(;c!=null&&!l.has(c.id);)l.add(c.id),c.child_execution_order=Math.max(c.child_execution_order,t),c=c.parent_run;return this.child_runs.push(r),r}async end(e,t,r=Date.now(),i){this.outputs=this.outputs??e,this.error=this.error??t,this.end_time=this.end_time??r,i&&Object.keys(i).length>0&&(this.extra=this.extra?{...this.extra,metadata:{...this.extra.metadata,...i}}:{metadata:i})}_convertToCreate(e,t,r=!0){var d;const i=e.extra??{};if(i.runtime||(i.runtime={}),t)for(const[h,m]of Object.entries(t))i.runtime[h]||(i.runtime[h]=m);let o,l;return r?(l=(d=e.parent_run)==null?void 0:d.id,o=[]):(o=e.child_runs.map(h=>this._convertToCreate(h,t,r)),l=void 0),{id:e.id,name:e.name,start_time:e.start_time,end_time:e.end_time,run_type:e.run_type,reference_example_id:e.reference_example_id,extra:i,serialized:e.serialized,error:e.error,inputs:e.inputs,outputs:e.outputs,session_name:e.project_name,child_runs:o,parent_run_id:l,trace_id:e.trace_id,dotted_order:e.dotted_order,tags:e.tags,attachments:e.attachments}}async postRun(e=!0){try{const t=$R(),r=await this._convertToCreate(this,t,!0);if(await this.client.createRun(r),!e){NR("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(const i of this.child_runs)await i.postRun(!1)}}catch(t){console.error(`Error in postRun for run ${this.id}:`,t)}}async patchRun(){var e;try{const t={end_time:this.end_time,error:this.error,inputs:this.inputs,outputs:this.outputs,parent_run_id:(e=this.parent_run)==null?void 0:e.id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags,attachments:this.attachments,session_name:this.project_name};await this.client.updateRun(this.id,t)}catch(t){console.error(`Error in patchRun for run ${this.id}`,t)}}toJSON(){return this._convertToCreate(this,void 0,!1)}addEvent(e){this.events||(this.events=[]),typeof e=="string"?this.events.push({name:"event",time:new Date().toISOString(),message:e}):this.events.push({...e,time:e.time??new Date().toISOString()})}static fromRunnableConfig(e,t){var h,m,g,b;const r=e==null?void 0:e.callbacks;let i,o,l,c=W$();if(r){const _=((h=r==null?void 0:r.getParentRunId)==null?void 0:h.call(r))??"",v=(m=r==null?void 0:r.handlers)==null?void 0:m.find(S=>(S==null?void 0:S.name)=="langchain_tracer");i=(g=v==null?void 0:v.getRun)==null?void 0:g.call(v,_),o=v==null?void 0:v.projectName,l=v==null?void 0:v.client,c=c||!!v}return i?new Rn({name:i.name,id:i.id,trace_id:i.trace_id,dotted_order:i.dotted_order,client:l,tracingEnabled:c,project_name:o,tags:[...new Set(((i==null?void 0:i.tags)??[]).concat((e==null?void 0:e.tags)??[]))],extra:{metadata:{...(b=i==null?void 0:i.extra)==null?void 0:b.metadata,...e==null?void 0:e.metadata}}}).createChild(t):new Rn({...t,client:l,tracingEnabled:c,project_name:o})}static fromDottedOrder(e){return this.fromHeaders({"langsmith-trace":e})}static fromHeaders(e,t){var h;const r="get"in e&&typeof e.get=="function"?{"langsmith-trace":e.get("langsmith-trace"),baggage:e.get("baggage")}:e,i=r["langsmith-trace"];if(!i||typeof i!="string")return;const o=i.trim(),l=o.split(".").map(m=>{const[g,b]=m.split("Z");return{strTime:g,time:Date.parse(g+"Z"),uuid:b}}),c=l[0].uuid,d={...t,name:(t==null?void 0:t.name)??"parent",run_type:(t==null?void 0:t.run_type)??"chain",start_time:(t==null?void 0:t.start_time)??Date.now(),id:(h=l.at(-1))==null?void 0:h.uuid,trace_id:c,dotted_order:o};if(r.baggage&&typeof r.baggage=="string"){const m=ed.fromHeader(r.baggage);d.metadata=m.metadata,d.tags=m.tags,d.project_name=m.project_name}return new Rn(d)}toHeaders(e){var r;const t={"langsmith-trace":this.dotted_order,baggage:new ed((r=this.extra)==null?void 0:r.metadata,this.tags,this.project_name).toHeader()};if(e)for(const[i,o]of Object.entries(t))e.set(i,o);return t}}Object.defineProperty(Rn,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null});function UR(n){return n!==void 0&&typeof n.createChild=="function"&&typeof n.postRun=="function"}function BR(n){return typeof n=="object"&&n!=null&&typeof n.name=="string"&&n.name==="langchain_tracer"}function LE(n){return Array.isArray(n)&&n.some(e=>BR(e))}function n3(n){return typeof n=="object"&&n!=null&&Array.isArray(n.handlers)}function r3(n){var e;return n!==void 0&&typeof n.callbacks=="object"&&(LE((e=n.callbacks)==null?void 0:e.handlers)||LE(n.callbacks))}let a3=class{getStore(){}run(e,t){return t()}};const kg=Symbol.for("ls:tracing_async_local_storage"),i3=new a3;let s3=class{getInstance(){return globalThis[kg]??i3}initializeGlobalInstance(e){globalThis[kg]===void 0&&(globalThis[kg]=e)}};const o3=new s3,u3=()=>{const n=o3.getInstance().getStore();if(!UR(n))throw new Error(["Could not get the current run tree.","","Please make sure you are calling this method within a traceable function and that tracing is enabled."].join(`
`));return n};function __(n){return typeof n=="function"&&"langsmith:traceable"in n}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */const l3=Object.prototype.hasOwnProperty;function Dy(n,e){return l3.call(n,e)}function $y(n){if(Array.isArray(n)){const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=""+r;return t}if(Object.keys)return Object.keys(n);let e=[];for(let t in n)Dy(n,t)&&e.push(t);return e}function Or(n){switch(typeof n){case"object":return JSON.parse(JSON.stringify(n));case"undefined":return null;default:return n}}function Uy(n){let e=0;const t=n.length;let r;for(;e<t;){if(r=n.charCodeAt(e),r>=48&&r<=57){e++;continue}return!1}return!0}function Ns(n){return n.indexOf("/")===-1&&n.indexOf("~")===-1?n:n.replace(/~/g,"~0").replace(/\//g,"~1")}function c3(n){return n.replace(/~1/g,"/").replace(/~0/g,"~")}function By(n){if(n===void 0)return!0;if(n){if(Array.isArray(n)){for(let t=0,r=n.length;t<r;t++)if(By(n[t]))return!0}else if(typeof n=="object"){const t=$y(n),r=t.length;for(var e=0;e<r;e++)if(By(n[t[e]]))return!0}}return!1}function DE(n,e){const t=[n];for(const r in e){const i=typeof e[r]=="object"?JSON.stringify(e[r],null,2):e[r];typeof i<"u"&&t.push(`${r}: ${i}`)}return t.join(`
`)}class f3 extends Error{constructor(e,t,r,i,o){super(DE(e,{name:t,index:r,operation:i,tree:o})),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"tree",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.setPrototypeOf(this,new.target.prototype),this.message=DE(e,{name:t,index:r,operation:i,tree:o})}}const _t=f3,Fs={add:function(n,e,t){return n[e]=this.value,{newDocument:t}},remove:function(n,e,t){var r=n[e];return delete n[e],{newDocument:t,removed:r}},replace:function(n,e,t){var r=n[e];return n[e]=this.value,{newDocument:t,removed:r}},move:function(n,e,t){let r=zy(t,this.path);r&&(r=Or(r));const i=Fu(t,{op:"remove",path:this.from}).removed;return Fu(t,{op:"add",path:this.path,value:i}),{newDocument:t,removed:r}},copy:function(n,e,t){const r=zy(t,this.from);return Fu(t,{op:"add",path:this.path,value:Or(r)}),{newDocument:t}},test:function(n,e,t){return{newDocument:t,test:nd(n[e],this.value)}},_get:function(n,e,t){return this.value=n[e],{newDocument:t}}};var d3={add:function(n,e,t){return Uy(e)?n.splice(e,0,this.value):n[e]=this.value,{newDocument:t,index:e}},remove:function(n,e,t){var r=n.splice(e,1);return{newDocument:t,removed:r[0]}},replace:function(n,e,t){var r=n[e];return n[e]=this.value,{newDocument:t,removed:r}},move:Fs.move,copy:Fs.copy,test:Fs.test,_get:Fs._get};function zy(n,e){if(e=="")return n;var t={op:"_get",path:e};return Fu(n,t),t.value}function Fu(n,e,t=!1,r=!0,i=!0,o=0){if(t&&(typeof t=="function"?t(e,0,n,e.path):Vy(e,0)),e.path===""){let l={newDocument:n};if(e.op==="add")return l.newDocument=e.value,l;if(e.op==="replace")return l.newDocument=e.value,l.removed=n,l;if(e.op==="move"||e.op==="copy")return l.newDocument=zy(n,e.from),e.op==="move"&&(l.removed=n),l;if(e.op==="test"){if(l.test=nd(n,e.value),l.test===!1)throw new _t("Test operation failed","TEST_OPERATION_FAILED",o,e,n);return l.newDocument=n,l}else{if(e.op==="remove")return l.removed=n,l.newDocument=null,l;if(e.op==="_get")return e.value=n,l;if(t)throw new _t("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,e,n);return l}}else{r||(n=Or(n));const c=(e.path||"").split("/");let d=n,h=1,m=c.length,g,b,_;for(typeof t=="function"?_=t:_=Vy;;){if(b=c[h],b&&b.indexOf("~")!=-1&&(b=c3(b)),i&&(b=="__proto__"||b=="prototype"&&h>0&&c[h-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(t&&g===void 0&&(d[b]===void 0?g=c.slice(0,h).join("/"):h==m-1&&(g=e.path),g!==void 0&&_(e,0,n,g)),h++,Array.isArray(d)){if(b==="-")b=d.length;else{if(t&&!Uy(b))throw new _t("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,e,n);Uy(b)&&(b=~~b)}if(h>=m){if(t&&e.op==="add"&&b>d.length)throw new _t("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,e,n);const v=d3[e.op].call(e,d,b,n);if(v.test===!1)throw new _t("Test operation failed","TEST_OPERATION_FAILED",o,e,n);return v}}else if(h>=m){const v=Fs[e.op].call(e,d,b,n);if(v.test===!1)throw new _t("Test operation failed","TEST_OPERATION_FAILED",o,e,n);return v}if(d=d[b],t&&h<m&&(!d||typeof d!="object"))throw new _t("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,e,n)}}}function td(n,e,t,r=!0,i=!0){if(t&&!Array.isArray(e))throw new _t("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(n=Or(n));const o=new Array(e.length);for(let l=0,c=e.length;l<c;l++)o[l]=Fu(n,e[l],t,!0,i,l),n=o[l].newDocument;return o.newDocument=n,o}function Vy(n,e,t,r){if(typeof n!="object"||n===null||Array.isArray(n))throw new _t("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,n,t);if(Fs[n.op]){if(typeof n.path!="string")throw new _t("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,n,t);if(n.path.indexOf("/")!==0&&n.path.length>0)throw new _t('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,n,t);if((n.op==="move"||n.op==="copy")&&typeof n.from!="string")throw new _t("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,n,t);if((n.op==="add"||n.op==="replace"||n.op==="test")&&n.value===void 0)throw new _t("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,n,t);if((n.op==="add"||n.op==="replace"||n.op==="test")&&By(n.value))throw new _t("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,n,t);if(t){if(n.op=="add"){var i=n.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new _t("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,n,t)}else if(n.op==="replace"||n.op==="remove"||n.op==="_get"){if(n.path!==r)throw new _t("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,n,t)}else if(n.op==="move"||n.op==="copy"){var l={op:"_get",path:n.from,value:void 0},c=h3([l],t);if(c&&c.name==="OPERATION_PATH_UNRESOLVABLE")throw new _t("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,n,t)}}}else throw new _t("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,n,t)}function h3(n,e,t){try{if(!Array.isArray(n))throw new _t("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)td(Or(e),Or(n),t||!0);else{t=t||Vy;for(var r=0;r<n.length;r++)t(n[r],r,e,void 0)}}catch(i){if(i instanceof _t)return i;throw i}}function nd(n,e){if(n===e)return!0;if(n&&e&&typeof n=="object"&&typeof e=="object"){var t=Array.isArray(n),r=Array.isArray(e),i,o,l;if(t&&r){if(o=n.length,o!=e.length)return!1;for(i=o;i--!==0;)if(!nd(n[i],e[i]))return!1;return!0}if(t!=r)return!1;var c=Object.keys(n);if(o=c.length,o!==Object.keys(e).length)return!1;for(i=o;i--!==0;)if(!e.hasOwnProperty(c[i]))return!1;for(i=o;i--!==0;)if(l=c[i],!nd(n[l],e[l]))return!1;return!0}return n!==n&&e!==e}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2013-2021 Joachim Wester
 * MIT license
 */function zR(n,e,t,r,i){if(e!==n){typeof e.toJSON=="function"&&(e=e.toJSON());for(var o=$y(e),l=$y(n),c=!1,d=l.length-1;d>=0;d--){var h=l[d],m=n[h];if(Dy(e,h)&&!(e[h]===void 0&&m!==void 0&&Array.isArray(e)===!1)){var g=e[h];typeof m=="object"&&m!=null&&typeof g=="object"&&g!=null&&Array.isArray(m)===Array.isArray(g)?zR(m,g,t,r+"/"+Ns(h),i):m!==g&&(i&&t.push({op:"test",path:r+"/"+Ns(h),value:Or(m)}),t.push({op:"replace",path:r+"/"+Ns(h),value:Or(g)}))}else Array.isArray(n)===Array.isArray(e)?(i&&t.push({op:"test",path:r+"/"+Ns(h),value:Or(m)}),t.push({op:"remove",path:r+"/"+Ns(h)}),c=!0):(i&&t.push({op:"test",path:r,value:n}),t.push({op:"replace",path:r,value:e}))}if(!(!c&&o.length==l.length))for(var d=0;d<o.length;d++){var h=o[d];!Dy(n,h)&&e[h]!==void 0&&t.push({op:"add",path:r+"/"+Ns(h),value:Or(e[h])})}}}function m3(n,e,t=!1){var r=[];return zR(n,e,r,"",t),r}var Mg={};const p3=()=>typeof window<"u"&&typeof window.document<"u",g3=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",y3=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),v_=()=>typeof Deno<"u",b3=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!v_(),_3=()=>{let n;return p3()?n="browser":b3()?n="node":g3()?n="webworker":y3()?n="jsdom":v_()?n="deno":n="other",n};let Ig;async function v3(){return Ig===void 0&&(Ig={library:"langchain-js",runtime:_3()}),Ig}function Nr(n){try{return typeof process<"u"?Mg==null?void 0:Mg[n]:v_()?Deno==null?void 0:Deno.env.get(n):void 0}catch{return}}class w3{}function S3(n){return"lc_prefer_streaming"in n&&n.lc_prefer_streaming}class Il extends w3{get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,gR(this.constructor)]}constructor(e){super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreCustomEvent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"raiseError",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:Nr("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever,this.ignoreCustomEvent=e.ignoreCustomEvent??this.ignoreCustomEvent,this.raiseError=e.raiseError??this.raiseError,this.awaitHandlers=this.raiseError||(e._awaitHandler??this.awaitHandlers))}copy(){return new this.constructor(this)}toJSON(){return Ii.prototype.toJSON.call(this)}toJSONNotImplemented(){return Ii.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class t extends Il{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Wt()}),Object.assign(this,e)}}return new t}}const A3=n=>{const e=n;return e!==void 0&&typeof e.copy=="function"&&typeof e.name=="string"&&typeof e.awaitHandlers=="boolean"};function Lg(n,e){return n&&!Array.isArray(n)&&typeof n=="object"?n:{[e]:n}}function T3(n){return n.replace(/[-:.]/g,"")}function E3(n,e,t){const r=t.toFixed(0).slice(0,3).padStart(3,"0");return T3(`${new Date(n).toISOString().slice(0,-1)}${r}Z`)+e}function wu(n){return typeof n._addRunToRunMap=="function"}class Ll extends Il{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}stringifyError(e){return e instanceof Error?e.message+(e!=null&&e.stack?`

${e.stack}`:""):typeof e=="string"?e:`${e}`}_addChildRun(e,t){e.child_runs.push(t)}_addRunToRunMap(e){const t=E3(e.start_time,e.id,e.execution_order),r={...e};if(r.parent_run_id!==void 0){const i=this.runMap.get(r.parent_run_id);i&&(this._addChildRun(i,r),i.child_execution_order=Math.max(i.child_execution_order,r.child_execution_order),r.trace_id=i.trace_id,i.dotted_order!==void 0&&(r.dotted_order=[i.dotted_order,t].join(".")))}else r.trace_id=r.id,r.dotted_order=t;return this.runMap.set(r.id,r),r}async _endTrace(e){var r;const t=e.parent_run_id!==void 0&&this.runMap.get(e.parent_run_id);t?t.child_execution_order=Math.max(t.child_execution_order,e.child_execution_order):await this.persistRun(e),this.runMap.delete(e.id),await((r=this.onRunUpdate)==null?void 0:r.call(this,e))}_getExecutionOrder(e){const t=e!==void 0&&this.runMap.get(e);return t?t.child_execution_order+1:1}_createRunForLLMStart(e,t,r,i,o,l,c,d){const h=this._getExecutionOrder(i),m=Date.now(),g=c?{...o,metadata:c}:o,b={id:r,name:d??e.id[e.id.length-1],parent_run_id:i,start_time:m,serialized:e,events:[{name:"start",time:new Date(m).toISOString()}],inputs:{prompts:t},execution_order:h,child_runs:[],child_execution_order:h,run_type:"llm",extra:g??{},tags:l||[]};return this._addRunToRunMap(b)}async handleLLMStart(e,t,r,i,o,l,c,d){var m,g;const h=this.runMap.get(r)??this._createRunForLLMStart(e,t,r,i,o,l,c,d);return await((m=this.onRunCreate)==null?void 0:m.call(this,h)),await((g=this.onLLMStart)==null?void 0:g.call(this,h)),h}_createRunForChatModelStart(e,t,r,i,o,l,c,d){const h=this._getExecutionOrder(i),m=Date.now(),g=c?{...o,metadata:c}:o,b={id:r,name:d??e.id[e.id.length-1],parent_run_id:i,start_time:m,serialized:e,events:[{name:"start",time:new Date(m).toISOString()}],inputs:{messages:t},execution_order:h,child_runs:[],child_execution_order:h,run_type:"llm",extra:g??{},tags:l||[]};return this._addRunToRunMap(b)}async handleChatModelStart(e,t,r,i,o,l,c,d){var m,g;const h=this.runMap.get(r)??this._createRunForChatModelStart(e,t,r,i,o,l,c,d);return await((m=this.onRunCreate)==null?void 0:m.call(this,h)),await((g=this.onLLMStart)==null?void 0:g.call(this,h)),h}async handleLLMEnd(e,t,r,i,o){var c;const l=this.runMap.get(t);if(!l||(l==null?void 0:l.run_type)!=="llm")throw new Error("No LLM run to end.");return l.end_time=Date.now(),l.outputs=e,l.events.push({name:"end",time:new Date(l.end_time).toISOString()}),l.extra={...l.extra,...o},await((c=this.onLLMEnd)==null?void 0:c.call(this,l)),await this._endTrace(l),l}async handleLLMError(e,t,r,i,o){var c;const l=this.runMap.get(t);if(!l||(l==null?void 0:l.run_type)!=="llm")throw new Error("No LLM run to end.");return l.end_time=Date.now(),l.error=this.stringifyError(e),l.events.push({name:"error",time:new Date(l.end_time).toISOString()}),l.extra={...l.extra,...o},await((c=this.onLLMError)==null?void 0:c.call(this,l)),await this._endTrace(l),l}_createRunForChainStart(e,t,r,i,o,l,c,d){const h=this._getExecutionOrder(i),m=Date.now(),g={id:r,name:d??e.id[e.id.length-1],parent_run_id:i,start_time:m,serialized:e,events:[{name:"start",time:new Date(m).toISOString()}],inputs:t,execution_order:h,child_execution_order:h,run_type:c??"chain",child_runs:[],extra:l?{metadata:l}:{},tags:o||[]};return this._addRunToRunMap(g)}async handleChainStart(e,t,r,i,o,l,c,d){var m,g;const h=this.runMap.get(r)??this._createRunForChainStart(e,t,r,i,o,l,c,d);return await((m=this.onRunCreate)==null?void 0:m.call(this,h)),await((g=this.onChainStart)==null?void 0:g.call(this,h)),h}async handleChainEnd(e,t,r,i,o){var c;const l=this.runMap.get(t);if(!l)throw new Error("No chain run to end.");return l.end_time=Date.now(),l.outputs=Lg(e,"output"),l.events.push({name:"end",time:new Date(l.end_time).toISOString()}),(o==null?void 0:o.inputs)!==void 0&&(l.inputs=Lg(o.inputs,"input")),await((c=this.onChainEnd)==null?void 0:c.call(this,l)),await this._endTrace(l),l}async handleChainError(e,t,r,i,o){var c;const l=this.runMap.get(t);if(!l)throw new Error("No chain run to end.");return l.end_time=Date.now(),l.error=this.stringifyError(e),l.events.push({name:"error",time:new Date(l.end_time).toISOString()}),(o==null?void 0:o.inputs)!==void 0&&(l.inputs=Lg(o.inputs,"input")),await((c=this.onChainError)==null?void 0:c.call(this,l)),await this._endTrace(l),l}_createRunForToolStart(e,t,r,i,o,l,c){const d=this._getExecutionOrder(i),h=Date.now(),m={id:r,name:c??e.id[e.id.length-1],parent_run_id:i,start_time:h,serialized:e,events:[{name:"start",time:new Date(h).toISOString()}],inputs:{input:t},execution_order:d,child_execution_order:d,run_type:"tool",child_runs:[],extra:l?{metadata:l}:{},tags:o||[]};return this._addRunToRunMap(m)}async handleToolStart(e,t,r,i,o,l,c){var h,m;const d=this.runMap.get(r)??this._createRunForToolStart(e,t,r,i,o,l,c);return await((h=this.onRunCreate)==null?void 0:h.call(this,d)),await((m=this.onToolStart)==null?void 0:m.call(this,d)),d}async handleToolEnd(e,t){var i;const r=this.runMap.get(t);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.outputs={output:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((i=this.onToolEnd)==null?void 0:i.call(this,r)),await this._endTrace(r),r}async handleToolError(e,t){var i;const r=this.runMap.get(t);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((i=this.onToolError)==null?void 0:i.call(this,r)),await this._endTrace(r),r}async handleAgentAction(e,t){var o;const r=this.runMap.get(t);if(!r||(r==null?void 0:r.run_type)!=="chain")return;const i=r;i.actions=i.actions||[],i.actions.push(e),i.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:e}}),await((o=this.onAgentAction)==null?void 0:o.call(this,r))}async handleAgentEnd(e,t){var i;const r=this.runMap.get(t);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:e}}),await((i=this.onAgentEnd)==null?void 0:i.call(this,r)))}_createRunForRetrieverStart(e,t,r,i,o,l,c){const d=this._getExecutionOrder(i),h=Date.now(),m={id:r,name:c??e.id[e.id.length-1],parent_run_id:i,start_time:h,serialized:e,events:[{name:"start",time:new Date(h).toISOString()}],inputs:{query:t},execution_order:d,child_execution_order:d,run_type:"retriever",child_runs:[],extra:l?{metadata:l}:{},tags:o||[]};return this._addRunToRunMap(m)}async handleRetrieverStart(e,t,r,i,o,l,c){var h,m;const d=this.runMap.get(r)??this._createRunForRetrieverStart(e,t,r,i,o,l,c);return await((h=this.onRunCreate)==null?void 0:h.call(this,d)),await((m=this.onRetrieverStart)==null?void 0:m.call(this,d)),d}async handleRetrieverEnd(e,t){var i;const r=this.runMap.get(t);if(!r||(r==null?void 0:r.run_type)!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.outputs={documents:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((i=this.onRetrieverEnd)==null?void 0:i.call(this,r)),await this._endTrace(r),r}async handleRetrieverError(e,t){var i;const r=this.runMap.get(t);if(!r||(r==null?void 0:r.run_type)!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((i=this.onRetrieverError)==null?void 0:i.call(this,r)),await this._endTrace(r),r}async handleText(e,t){var i;const r=this.runMap.get(t);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:e}}),await((i=this.onText)==null?void 0:i.call(this,r)))}async handleLLMNewToken(e,t,r,i,o,l){var d;const c=this.runMap.get(r);if(!c||(c==null?void 0:c.run_type)!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return c.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:e,idx:t,chunk:l==null?void 0:l.chunk}}),await((d=this.onLLMNewToken)==null?void 0:d.call(this,c,e,{chunk:l==null?void 0:l.chunk})),c}}var jf={exports:{}};jf.exports;var $E;function x3(){return $E||($E=1,function(n){const t=(o=0)=>l=>`\x1B[${38+o};5;${l}m`,r=(o=0)=>(l,c,d)=>`\x1B[${38+o};2;${l};${c};${d}m`;function i(){const o=new Map,l={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};l.color.gray=l.color.blackBright,l.bgColor.bgGray=l.bgColor.bgBlackBright,l.color.grey=l.color.blackBright,l.bgColor.bgGrey=l.bgColor.bgBlackBright;for(const[c,d]of Object.entries(l)){for(const[h,m]of Object.entries(d))l[h]={open:`\x1B[${m[0]}m`,close:`\x1B[${m[1]}m`},d[h]=l[h],o.set(m[0],m[1]);Object.defineProperty(l,c,{value:d,enumerable:!1})}return Object.defineProperty(l,"codes",{value:o,enumerable:!1}),l.color.close="\x1B[39m",l.bgColor.close="\x1B[49m",l.color.ansi256=t(),l.color.ansi16m=r(),l.bgColor.ansi256=t(10),l.bgColor.ansi16m=r(10),Object.defineProperties(l,{rgbToAnsi256:{value:(c,d,h)=>c===d&&d===h?c<8?16:c>248?231:Math.round((c-8)/247*24)+232:16+36*Math.round(c/255*5)+6*Math.round(d/255*5)+Math.round(h/255*5),enumerable:!1},hexToRgb:{value:c=>{const d=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(c.toString(16));if(!d)return[0,0,0];let{colorString:h}=d.groups;h.length===3&&(h=h.split("").map(g=>g+g).join(""));const m=Number.parseInt(h,16);return[m>>16&255,m>>8&255,m&255]},enumerable:!1},hexToAnsi256:{value:c=>l.rgbToAnsi256(...l.hexToRgb(c)),enumerable:!1}}),l}Object.defineProperty(n,"exports",{enumerable:!0,get:i})}(jf)),jf.exports}var O3=x3();const VR=Mr(O3);function Jt(n,e){return`${n.open}${e}${n.close}`}function qn(n,e){try{return JSON.stringify(n,null,2)}catch{return e}}function UE(n){return typeof n=="string"?n.trim():n==null?n:qn(n,n.toString())}function La(n){if(!n.end_time)return"";const e=n.end_time-n.start_time;return e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`}const{color:cn}=VR;class BE extends Ll{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){const t=[];let r=e;for(;r.parent_run_id;){const i=this.runMap.get(r.parent_run_id);if(i)t.push(i),r=i;else break}return t}getBreadcrumbs(e){const r=[...this.getParents(e).reverse(),e].map((i,o,l)=>{const c=`${i.execution_order}:${i.run_type}:${i.name}`;return o===l.length-1?Jt(VR.bold,c):c}).join(" > ");return Jt(cn.grey,r)}onChainStart(e){const t=this.getBreadcrumbs(e);console.log(`${Jt(cn.green,"[chain/start]")} [${t}] Entering Chain run with input: ${qn(e.inputs,"[inputs]")}`)}onChainEnd(e){const t=this.getBreadcrumbs(e);console.log(`${Jt(cn.cyan,"[chain/end]")} [${t}] [${La(e)}] Exiting Chain run with output: ${qn(e.outputs,"[outputs]")}`)}onChainError(e){const t=this.getBreadcrumbs(e);console.log(`${Jt(cn.red,"[chain/error]")} [${t}] [${La(e)}] Chain run errored with error: ${qn(e.error,"[error]")}`)}onLLMStart(e){const t=this.getBreadcrumbs(e),r="prompts"in e.inputs?{prompts:e.inputs.prompts.map(i=>i.trim())}:e.inputs;console.log(`${Jt(cn.green,"[llm/start]")} [${t}] Entering LLM run with input: ${qn(r,"[inputs]")}`)}onLLMEnd(e){const t=this.getBreadcrumbs(e);console.log(`${Jt(cn.cyan,"[llm/end]")} [${t}] [${La(e)}] Exiting LLM run with output: ${qn(e.outputs,"[response]")}`)}onLLMError(e){const t=this.getBreadcrumbs(e);console.log(`${Jt(cn.red,"[llm/error]")} [${t}] [${La(e)}] LLM run errored with error: ${qn(e.error,"[error]")}`)}onToolStart(e){const t=this.getBreadcrumbs(e);console.log(`${Jt(cn.green,"[tool/start]")} [${t}] Entering Tool run with input: "${UE(e.inputs.input)}"`)}onToolEnd(e){var r;const t=this.getBreadcrumbs(e);console.log(`${Jt(cn.cyan,"[tool/end]")} [${t}] [${La(e)}] Exiting Tool run with output: "${UE((r=e.outputs)==null?void 0:r.output)}"`)}onToolError(e){const t=this.getBreadcrumbs(e);console.log(`${Jt(cn.red,"[tool/error]")} [${t}] [${La(e)}] Tool run errored with error: ${qn(e.error,"[error]")}`)}onRetrieverStart(e){const t=this.getBreadcrumbs(e);console.log(`${Jt(cn.green,"[retriever/start]")} [${t}] Entering Retriever run with input: ${qn(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){const t=this.getBreadcrumbs(e);console.log(`${Jt(cn.cyan,"[retriever/end]")} [${t}] [${La(e)}] Exiting Retriever run with output: ${qn(e.outputs,"[outputs]")}`)}onRetrieverError(e){const t=this.getBreadcrumbs(e);console.log(`${Jt(cn.red,"[retriever/error]")} [${t}] [${La(e)}] Retriever run errored with error: ${qn(e.error,"[error]")}`)}onAgentAction(e){const t=e,r=this.getBreadcrumbs(e);console.log(`${Jt(cn.blue,"[agent/action]")} [${r}] Agent selected action: ${qn(t.actions[t.actions.length-1],"[action]")}`)}}let Dg;const R3=()=>{if(Dg===void 0){const n=Nr("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"?{blockOnRootRunFinalization:!0}:{};Dg=new yl(n)}return Dg};class Hu extends Ll{constructor(e={}){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{exampleId:t,projectName:r,client:i}=e;this.projectName=r??Nr("LANGCHAIN_PROJECT")??Nr("LANGCHAIN_SESSION"),this.exampleId=t,this.client=i??R3();const o=Hu.getTraceableRunTree();o&&this.updateFromRunTree(o)}async _convertToCreate(e,t=void 0){return{...e,extra:{...e.extra,runtime:await v3()},child_runs:void 0,session_name:this.projectName,reference_example_id:e.parent_run_id?void 0:t}}async persistRun(e){}async onRunCreate(e){const t=await this._convertToCreate(e,this.exampleId);await this.client.createRun(t)}async onRunUpdate(e){const t={end_time:e.end_time,error:e.error,outputs:e.outputs,events:e.events,inputs:e.inputs,trace_id:e.trace_id,dotted_order:e.dotted_order,parent_run_id:e.parent_run_id,extra:e.extra,session_name:this.projectName};await this.client.updateRun(e.id,t)}getRun(e){return this.runMap.get(e)}updateFromRunTree(e){let t=e;const r=new Set;for(;t.parent_run&&!(r.has(t.id)||(r.add(t.id),!t.parent_run));)t=t.parent_run;r.clear();const i=[t];for(;i.length>0;){const o=i.shift();!o||r.has(o.id)||(r.add(o.id),this.runMap.set(o.id,o),o.child_runs&&i.push(...o.child_runs))}this.client=e.client??this.client,this.projectName=e.project_name??this.projectName,this.exampleId=e.reference_example_id??this.exampleId}convertToRunTree(e){const t={},r=[];for(const[i,o]of this.runMap){const l=new Rn({...o,child_runs:[],parent_run:void 0,client:this.client,project_name:this.projectName,reference_example_id:this.exampleId,tracingEnabled:!0});t[i]=l,r.push([i,o.dotted_order])}r.sort((i,o)=>!i[1]||!o[1]?0:i[1].localeCompare(o[1]));for(const[i]of r){const o=this.runMap.get(i),l=t[i];if(!(!o||!l)&&o.parent_run_id){const c=t[o.parent_run_id];c&&(c.child_runs.push(l),l.parent_run=c)}}return t[e]}static getTraceableRunTree(){try{return u3()}catch{return}}}const qR=Symbol.for("ls:tracing_async_local_storage"),kf=Symbol.for("lc:context_variables"),C3=n=>{globalThis[qR]=n},bl=()=>globalThis[qR];let Zu;function P3(){const n="default"in ra?ra.default:ra;return new n({autoStart:!0,concurrency:1})}function N3(){return typeof Zu>"u"&&(Zu=P3()),Zu}async function Tt(n,e){if(e===!0){const t=bl();t!==void 0?await t.run(void 0,async()=>n()):await n()}else Zu=N3(),Zu.add(async()=>{const t=bl();t!==void 0?await t.run(void 0,async()=>n()):await n()})}const j3=n=>!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find(t=>Nr(t)==="true");function FR(n){var r;const e=bl();if(e===void 0)return;const t=e.getStore();return(r=t==null?void 0:t[kf])==null?void 0:r[n]}const k3=Symbol("lc:configure_hooks"),M3=()=>FR(k3)||[];class I3{setHandler(e){return this.setHandlers([e])}}class Ud{constructor(e,t,r,i,o,l,c,d){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:l}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:c}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:d})}get parentRunId(){return this._parentRunId}async handleText(e){await Promise.all(this.handlers.map(t=>Tt(async()=>{var r;try{await((r=t.handleText)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(i){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleText: ${i}`),t.raiseError)throw i}},t.awaitHandlers)))}async handleCustomEvent(e,t,r,i,o){await Promise.all(this.handlers.map(l=>Tt(async()=>{var c;try{await((c=l.handleCustomEvent)==null?void 0:c.call(l,e,t,this.runId,this.tags,this.metadata))}catch(d){if((l.raiseError?console.error:console.warn)(`Error in handler ${l.constructor.name}, handleCustomEvent: ${d}`),l.raiseError)throw d}},l.awaitHandlers)))}}class L3 extends Ud{getChild(e){const t=new mn(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleRetrieverEnd(e){await Promise.all(this.handlers.map(t=>Tt(async()=>{var r;if(!t.ignoreRetriever)try{await((r=t.handleRetrieverEnd)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(i){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleRetriever`),t.raiseError)throw i}},t.awaitHandlers)))}async handleRetrieverError(e){await Promise.all(this.handlers.map(t=>Tt(async()=>{var r;if(!t.ignoreRetriever)try{await((r=t.handleRetrieverError)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(i){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleRetrieverError: ${i}`),t.raiseError)throw e}},t.awaitHandlers)))}}class zE extends Ud{async handleLLMNewToken(e,t,r,i,o,l){await Promise.all(this.handlers.map(c=>Tt(async()=>{var d;if(!c.ignoreLLM)try{await((d=c.handleLLMNewToken)==null?void 0:d.call(c,e,t??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,l))}catch(h){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleLLMNewToken: ${h}`),c.raiseError)throw h}},c.awaitHandlers)))}async handleLLMError(e,t,r,i,o){await Promise.all(this.handlers.map(l=>Tt(async()=>{var c;if(!l.ignoreLLM)try{await((c=l.handleLLMError)==null?void 0:c.call(l,e,this.runId,this._parentRunId,this.tags,o))}catch(d){if((l.raiseError?console.error:console.warn)(`Error in handler ${l.constructor.name}, handleLLMError: ${d}`),l.raiseError)throw d}},l.awaitHandlers)))}async handleLLMEnd(e,t,r,i,o){await Promise.all(this.handlers.map(l=>Tt(async()=>{var c;if(!l.ignoreLLM)try{await((c=l.handleLLMEnd)==null?void 0:c.call(l,e,this.runId,this._parentRunId,this.tags,o))}catch(d){if((l.raiseError?console.error:console.warn)(`Error in handler ${l.constructor.name}, handleLLMEnd: ${d}`),l.raiseError)throw d}},l.awaitHandlers)))}}class D3 extends Ud{getChild(e){const t=new mn(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleChainError(e,t,r,i,o){await Promise.all(this.handlers.map(l=>Tt(async()=>{var c;if(!l.ignoreChain)try{await((c=l.handleChainError)==null?void 0:c.call(l,e,this.runId,this._parentRunId,this.tags,o))}catch(d){if((l.raiseError?console.error:console.warn)(`Error in handler ${l.constructor.name}, handleChainError: ${d}`),l.raiseError)throw d}},l.awaitHandlers)))}async handleChainEnd(e,t,r,i,o){await Promise.all(this.handlers.map(l=>Tt(async()=>{var c;if(!l.ignoreChain)try{await((c=l.handleChainEnd)==null?void 0:c.call(l,e,this.runId,this._parentRunId,this.tags,o))}catch(d){if((l.raiseError?console.error:console.warn)(`Error in handler ${l.constructor.name}, handleChainEnd: ${d}`),l.raiseError)throw d}},l.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(t=>Tt(async()=>{var r;if(!t.ignoreAgent)try{await((r=t.handleAgentAction)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(i){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleAgentAction: ${i}`),t.raiseError)throw i}},t.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(t=>Tt(async()=>{var r;if(!t.ignoreAgent)try{await((r=t.handleAgentEnd)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(i){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleAgentEnd: ${i}`),t.raiseError)throw i}},t.awaitHandlers)))}}class $3 extends Ud{getChild(e){const t=new mn(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleToolError(e){await Promise.all(this.handlers.map(t=>Tt(async()=>{var r;if(!t.ignoreAgent)try{await((r=t.handleToolError)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(i){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleToolError: ${i}`),t.raiseError)throw i}},t.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(t=>Tt(async()=>{var r;if(!t.ignoreAgent)try{await((r=t.handleToolEnd)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(i){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleToolEnd: ${i}`),t.raiseError)throw i}},t.awaitHandlers)))}}class mn extends I3{constructor(e,t){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=(t==null?void 0:t.handlers)??this.handlers,this.inheritableHandlers=(t==null?void 0:t.inheritableHandlers)??this.inheritableHandlers,this.tags=(t==null?void 0:t.tags)??this.tags,this.inheritableTags=(t==null?void 0:t.inheritableTags)??this.inheritableTags,this.metadata=(t==null?void 0:t.metadata)??this.metadata,this.inheritableMetadata=(t==null?void 0:t.inheritableMetadata)??this.inheritableMetadata,this._parentRunId=e}getParentRunId(){return this._parentRunId}async handleLLMStart(e,t,r=void 0,i=void 0,o=void 0,l=void 0,c=void 0,d=void 0){return Promise.all(t.map(async(h,m)=>{const g=m===0&&r?r:Wt();return await Promise.all(this.handlers.map(b=>{if(!b.ignoreLLM)return wu(b)&&b._createRunForLLMStart(e,[h],g,this._parentRunId,o,this.tags,this.metadata,d),Tt(async()=>{var _;try{await((_=b.handleLLMStart)==null?void 0:_.call(b,e,[h],g,this._parentRunId,o,this.tags,this.metadata,d))}catch(v){if((b.raiseError?console.error:console.warn)(`Error in handler ${b.constructor.name}, handleLLMStart: ${v}`),b.raiseError)throw v}},b.awaitHandlers)})),new zE(g,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(e,t,r=void 0,i=void 0,o=void 0,l=void 0,c=void 0,d=void 0){return Promise.all(t.map(async(h,m)=>{const g=m===0&&r?r:Wt();return await Promise.all(this.handlers.map(b=>{if(!b.ignoreLLM)return wu(b)&&b._createRunForChatModelStart(e,[h],g,this._parentRunId,o,this.tags,this.metadata,d),Tt(async()=>{var _,v;try{if(b.handleChatModelStart)await((_=b.handleChatModelStart)==null?void 0:_.call(b,e,[h],g,this._parentRunId,o,this.tags,this.metadata,d));else if(b.handleLLMStart){const S=vR(h);await((v=b.handleLLMStart)==null?void 0:v.call(b,e,[S],g,this._parentRunId,o,this.tags,this.metadata,d))}}catch(S){if((b.raiseError?console.error:console.warn)(`Error in handler ${b.constructor.name}, handleLLMStart: ${S}`),b.raiseError)throw S}},b.awaitHandlers)})),new zE(g,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(e,t,r=Wt(),i=void 0,o=void 0,l=void 0,c=void 0){return await Promise.all(this.handlers.map(d=>{if(!d.ignoreChain)return wu(d)&&d._createRunForChainStart(e,t,r,this._parentRunId,this.tags,this.metadata,i,c),Tt(async()=>{var h;try{await((h=d.handleChainStart)==null?void 0:h.call(d,e,t,r,this._parentRunId,this.tags,this.metadata,i,c))}catch(m){if((d.raiseError?console.error:console.warn)(`Error in handler ${d.constructor.name}, handleChainStart: ${m}`),d.raiseError)throw m}},d.awaitHandlers)})),new D3(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,t,r=Wt(),i=void 0,o=void 0,l=void 0,c=void 0){return await Promise.all(this.handlers.map(d=>{if(!d.ignoreAgent)return wu(d)&&d._createRunForToolStart(e,t,r,this._parentRunId,this.tags,this.metadata,c),Tt(async()=>{var h;try{await((h=d.handleToolStart)==null?void 0:h.call(d,e,t,r,this._parentRunId,this.tags,this.metadata,c))}catch(m){if((d.raiseError?console.error:console.warn)(`Error in handler ${d.constructor.name}, handleToolStart: ${m}`),d.raiseError)throw m}},d.awaitHandlers)})),new $3(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(e,t,r=Wt(),i=void 0,o=void 0,l=void 0,c=void 0){return await Promise.all(this.handlers.map(d=>{if(!d.ignoreRetriever)return wu(d)&&d._createRunForRetrieverStart(e,t,r,this._parentRunId,this.tags,this.metadata,c),Tt(async()=>{var h;try{await((h=d.handleRetrieverStart)==null?void 0:h.call(d,e,t,r,this._parentRunId,this.tags,this.metadata,c))}catch(m){if((d.raiseError?console.error:console.warn)(`Error in handler ${d.constructor.name}, handleRetrieverStart: ${m}`),d.raiseError)throw m}},d.awaitHandlers)})),new L3(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleCustomEvent(e,t,r,i,o){await Promise.all(this.handlers.map(l=>Tt(async()=>{var c;if(!l.ignoreCustomEvent)try{await((c=l.handleCustomEvent)==null?void 0:c.call(l,e,t,r,this.tags,this.metadata))}catch(d){if((l.raiseError?console.error:console.warn)(`Error in handler ${l.constructor.name}, handleCustomEvent: ${d}`),l.raiseError)throw d}},l.awaitHandlers)))}addHandler(e,t=!0){this.handlers.push(e),t&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(t=>t!==e),this.inheritableHandlers=this.inheritableHandlers.filter(t=>t!==e)}setHandlers(e,t=!0){this.handlers=[],this.inheritableHandlers=[];for(const r of e)this.addHandler(r,t)}addTags(e,t=!0){this.removeTags(e),this.tags.push(...e),t&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter(t=>!e.includes(t)),this.inheritableTags=this.inheritableTags.filter(t=>!e.includes(t))}addMetadata(e,t=!0){this.metadata={...this.metadata,...e},t&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(const t of Object.keys(e))delete this.metadata[t],delete this.inheritableMetadata[t]}copy(e=[],t=!0){const r=new mn(this._parentRunId);for(const i of this.handlers){const o=this.inheritableHandlers.includes(i);r.addHandler(i,o)}for(const i of this.tags){const o=this.inheritableTags.includes(i);r.addTags([i],o)}for(const i of Object.keys(this.metadata)){const o=Object.keys(this.inheritableMetadata).includes(i);r.addMetadata({[i]:this.metadata[i]},o)}for(const i of e)r.handlers.filter(o=>o.name==="console_callback_handler").some(o=>o.name===i.name)||r.addHandler(i,t);return r}static fromHandlers(e){class t extends Il{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Wt()}),Object.assign(this,e)}}const r=new this;return r.addHandler(new t),r}static configure(e,t,r,i,o,l,c){return this._configureSync(e,t,r,i,o,l,c)}static _configureSync(e,t,r,i,o,l,c){var b,_;let d;(e||t)&&(Array.isArray(e)||!e?(d=new mn,d.setHandlers((e==null?void 0:e.map(rd))??[],!0)):d=e,d=d.copy(Array.isArray(t)?t.map(rd):t==null?void 0:t.handlers,!1));const h=Nr("LANGCHAIN_VERBOSE")==="true"||(c==null?void 0:c.verbose),m=((b=Hu.getTraceableRunTree())==null?void 0:b.tracingEnabled)||j3(),g=m||(Nr("LANGCHAIN_TRACING")??!1);if(h||g){if(d||(d=new mn),h&&!d.handlers.some(v=>v.name===BE.prototype.name)){const v=new BE;d.addHandler(v,!0)}if(g&&!d.handlers.some(v=>v.name==="langchain_tracer")&&m){const v=new Hu;d.addHandler(v,!0),d._parentRunId=((_=Hu.getTraceableRunTree())==null?void 0:_.id)??d._parentRunId}}for(const{contextVar:v,inheritable:S=!0,handlerClass:A,envVar:E}of M3()){const O=E&&Nr(E)==="true"&&A;let x;const j=v!==void 0?FR(v):void 0;j&&A3(j)?x=j:O&&(x=new A({})),x!==void 0&&(d||(d=new mn),d.handlers.some(P=>P.name===x.name)||d.addHandler(x,S))}return(r||i)&&d&&(d.addTags(r??[]),d.addTags(i??[],!1)),(o||l)&&d&&(d.addMetadata(o??{}),d.addMetadata(l??{},!1)),d}}function rd(n){return"name"in n?n:Il.fromMethods(n)}class U3{getStore(){}run(e,t){return t()}enterWith(e){}}const B3=new U3,VE=Symbol.for("lc:child_config");class z3{getInstance(){return bl()??B3}getRunnableConfig(){var t,r;return(r=(t=this.getInstance().getStore())==null?void 0:t.extra)==null?void 0:r[VE]}runWithConfig(e,t,r){var m;const i=mn._configureSync(e==null?void 0:e.callbacks,void 0,e==null?void 0:e.tags,void 0,e==null?void 0:e.metadata),o=this.getInstance(),l=o.getStore(),c=i==null?void 0:i.getParentRunId(),d=(m=i==null?void 0:i.handlers)==null?void 0:m.find(g=>(g==null?void 0:g.name)==="langchain_tracer");let h;return d&&c?h=d.convertToRunTree(c):r||(h=new Rn({name:"<runnable_lambda>",tracingEnabled:!1})),h&&(h.extra={...h.extra,[VE]:e}),l!==void 0&&l[kf]!==void 0&&(h===void 0&&(h={}),h[kf]=l[kf]),o.run(h,t)}initializeGlobalInstance(e){bl()===void 0&&C3(e)}}const Ja=new z3,$g=25;async function cr(n){return mn._configureSync(n==null?void 0:n.callbacks,void 0,n==null?void 0:n.tags,void 0,n==null?void 0:n.metadata)}function qE(...n){const e={};for(const t of n.filter(r=>!!r))for(const r of Object.keys(t))if(r==="metadata")e[r]={...e[r],...t[r]};else if(r==="tags"){const i=e[r]??[];e[r]=[...new Set(i.concat(t[r]??[]))]}else if(r==="configurable")e[r]={...e[r],...t[r]};else if(r==="timeout")e.timeout===void 0?e.timeout=t.timeout:t.timeout!==void 0&&(e.timeout=Math.min(e.timeout,t.timeout));else if(r==="signal")e.signal===void 0?e.signal=t.signal:t.signal!==void 0&&("any"in AbortSignal?e.signal=AbortSignal.any([e.signal,t.signal]):e.signal=t.signal);else if(r==="callbacks"){const i=e.callbacks,o=t.callbacks;if(Array.isArray(o))if(!i)e.callbacks=o;else if(Array.isArray(i))e.callbacks=i.concat(o);else{const l=i.copy();for(const c of o)l.addHandler(rd(c),!0);e.callbacks=l}else if(o)if(!i)e.callbacks=o;else if(Array.isArray(i)){const l=o.copy();for(const c of i)l.addHandler(rd(c),!0);e.callbacks=l}else e.callbacks=new mn(o._parentRunId,{handlers:i.handlers.concat(o.handlers),inheritableHandlers:i.inheritableHandlers.concat(o.inheritableHandlers),tags:Array.from(new Set(i.tags.concat(o.tags))),inheritableTags:Array.from(new Set(i.inheritableTags.concat(o.inheritableTags))),metadata:{...i.metadata,...o.metadata}})}else{const i=r;e[i]=t[i]??e[i]}return e}const V3=new Set(["string","number","boolean"]);function ze(n){var r;const e=Ja.getRunnableConfig();let t={tags:[],metadata:{},recursionLimit:25,runId:void 0};if(e){const{runId:i,runName:o,...l}=e;t=Object.entries(l).reduce((c,[d,h])=>(h!==void 0&&(c[d]=h),c),t)}if(n&&(t=Object.entries(n).reduce((i,[o,l])=>(l!==void 0&&(i[o]=l),i),t)),t!=null&&t.configurable)for(const i of Object.keys(t.configurable))V3.has(typeof t.configurable[i])&&!((r=t.metadata)!=null&&r[i])&&(t.metadata||(t.metadata={}),t.metadata[i]=t.configurable[i]);if(t.timeout!==void 0){if(t.timeout<=0)throw new Error("Timeout must be a positive number");const i=AbortSignal.timeout(t.timeout);t.signal!==void 0?"any"in AbortSignal&&(t.signal=AbortSignal.any([t.signal,i])):t.signal=i,delete t.timeout}return t}function Gt(n={},{callbacks:e,maxConcurrency:t,recursionLimit:r,runName:i,configurable:o,runId:l}={}){const c=ze(n);return e!==void 0&&(delete c.runName,c.callbacks=e),r!==void 0&&(c.recursionLimit=r),t!==void 0&&(c.maxConcurrency=t),i!==void 0&&(c.runName=i),o!==void 0&&(c.configurable={...c.configurable,...o}),l!==void 0&&delete c.runId,c}function ro(n){return n?{configurable:n.configurable,recursionLimit:n.recursionLimit,callbacks:n.callbacks,tags:n.tags,metadata:n.metadata,maxConcurrency:n.maxConcurrency,timeout:n.timeout,signal:n.signal}:void 0}async function Qa(n,e){if(e===void 0)return n;let t;return Promise.race([n.catch(r=>{if(!(e!=null&&e.aborted))throw r}),new Promise((r,i)=>{t=()=>{i(new Error("Aborted"))},e.addEventListener("abort",t),e.aborted&&i(new Error("Aborted"))})]).finally(()=>e.removeEventListener("abort",t))}class Nn extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const e=await this.reader.read();return e.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:e.value}}catch(e){throw this.reader.releaseLock(),e}}async return(){if(this.ensureReader(),this.locked){const e=this.reader.cancel();this.reader.releaseLock(),await e}return{done:!0,value:void 0}}async throw(e){if(this.ensureReader(),this.locked){const t=this.reader.cancel();this.reader.releaseLock(),await t}throw e}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}static fromReadableStream(e){const t=e.getReader();return new Nn({start(r){return i();function i(){return t.read().then(({done:o,value:l})=>{if(o){r.close();return}return r.enqueue(l),i()})}},cancel(){t.releaseLock()}})}static fromAsyncGenerator(e){return new Nn({async pull(t){const{value:r,done:i}=await e.next();i&&t.close(),t.enqueue(r)},async cancel(t){await e.return(t)}})}}function HR(n,e=2){const t=Array.from({length:e},()=>[]);return t.map(async function*(i){for(;;)if(i.length===0){const o=await n.next();for(const l of t)l.push(o)}else{if(i[0].done)return;yield i.shift().value}})}function fr(n,e){if(Array.isArray(n)&&Array.isArray(e))return n.concat(e);if(typeof n=="string"&&typeof e=="string")return n+e;if(typeof n=="number"&&typeof e=="number")return n+e;if("concat"in n&&typeof n.concat=="function")return n.concat(e);if(typeof n=="object"&&typeof e=="object"){const t={...n};for(const[r,i]of Object.entries(e))r in t&&!Array.isArray(t[r])?t[r]=fr(t[r],i):t[r]=i;return t}else throw new Error(`Cannot concat ${typeof n} and ${typeof e}`)}class go{constructor(e){var t;Object.defineProperty(this,"generator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResult",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResultUsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.generator=e.generator,this.config=e.config,this.signal=e.signal??((t=this.config)==null?void 0:t.signal),this.setup=new Promise((r,i)=>{Ja.runWithConfig(ro(e.config),async()=>{this.firstResult=e.generator.next(),e.startSetup?this.firstResult.then(e.startSetup).then(r,i):this.firstResult.then(o=>r(void 0),i)},!0)})}async next(...e){var t;return(t=this.signal)==null||t.throwIfAborted(),this.firstResultUsed?Ja.runWithConfig(ro(this.config),this.signal?async()=>Qa(this.generator.next(...e),this.signal):async()=>this.generator.next(...e),!0):(this.firstResultUsed=!0,this.firstResult)}async return(e){return this.generator.return(e)}async throw(e){return this.generator.throw(e)}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}}async function q3(n,e,t,r,...i){const o=new go({generator:e,startSetup:t,signal:r}),l=await o.setup;return{output:n(o,l,...i),setup:l}}class $a{constructor(e){Object.defineProperty(this,"ops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ops=e.ops??[]}concat(e){const t=this.ops.concat(e.ops),r=td({},t);return new _l({ops:t,state:r[r.length-1].newDocument})}}class _l extends $a{constructor(e){super(e),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state=e.state}concat(e){const t=this.ops.concat(e.ops),r=td(this.state,e.ops);return new _l({ops:t,state:r[r.length-1].newDocument})}static fromRunLogPatch(e){const t=td({},e.ops);return new _l({ops:e.ops,state:t[t.length-1].newDocument})}}const F3=n=>n.name==="log_stream_tracer";async function FE(n,e){if(e==="original")throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");const{inputs:t}=n;if(["retriever","llm","prompt"].includes(n.run_type))return t;if(!(Object.keys(t).length===1&&(t==null?void 0:t.input)===""))return t.input}async function HE(n,e){const{outputs:t}=n;return e==="original"||["retriever","llm","prompt"].includes(n.run_type)?t:t!==void 0&&Object.keys(t).length===1&&(t==null?void 0:t.output)!==void 0?t.output:t}function H3(n){return n!==void 0&&n.message!==void 0}class ZE extends Ll{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_schemaFormat",{enumerable:!0,configurable:!0,writable:!0,value:"original"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"keyMapByRunId",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"counterMapByRunName",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"log_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this._schemaFormat=(e==null?void 0:e._schemaFormat)??this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=Nn.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){if(e.id===this.rootId)return!1;const t=e.tags??[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(e.run_type)),this.includeTags!==void 0&&(r=r||t.find(i=>{var o;return(o=this.includeTags)==null?void 0:o.includes(i)})!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(e.run_type)),this.excludeTags!==void 0&&(r=r&&t.every(i=>{var o;return!((o=this.excludeTags)!=null&&o.includes(i))})),r}async*tapOutputIterable(e,t){for await(const r of t){if(e!==this.rootId){const i=this.keyMapByRunId[e];i&&await this.writer.write(new $a({ops:[{op:"add",path:`/logs/${i}/streamed_output/-`,value:r}]}))}yield r}}async onRunCreate(e){var i;if(this.rootId===void 0&&(this.rootId=e.id,await this.writer.write(new $a({ops:[{op:"replace",path:"",value:{id:e.id,name:e.name,type:e.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(e))return;this.counterMapByRunName[e.name]===void 0&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;const t=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=t===1?e.name:`${e.name}:${t}`;const r={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:((i=e.extra)==null?void 0:i.metadata)??{},start_time:new Date(e.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};this._schemaFormat==="streaming_events"&&(r.inputs=await FE(e,this._schemaFormat)),await this.writer.write(new $a({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:r}]}))}async onRunUpdate(e){try{const t=this.keyMapByRunId[e.id];if(t===void 0)return;const r=[];this._schemaFormat==="streaming_events"&&r.push({op:"replace",path:`/logs/${t}/inputs`,value:await FE(e,this._schemaFormat)}),r.push({op:"add",path:`/logs/${t}/final_output`,value:await HE(e,this._schemaFormat)}),e.end_time!==void 0&&r.push({op:"add",path:`/logs/${t}/end_time`,value:new Date(e.end_time).toISOString()});const i=new $a({ops:r});await this.writer.write(i)}finally{if(e.id===this.rootId){const t=new $a({ops:[{op:"replace",path:"/final_output",value:await HE(e,this._schemaFormat)}]});await this.writer.write(t),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,t,r){const i=this.keyMapByRunId[e.id];if(i===void 0)return;const o=e.inputs.messages!==void 0;let l;o?H3(r==null?void 0:r.chunk)?l=r==null?void 0:r.chunk:l=new Za({id:`run-${e.id}`,content:t}):l=t;const c=new $a({ops:[{op:"add",path:`/logs/${i}/streamed_output_str/-`,value:t},{op:"add",path:`/logs/${i}/streamed_output/-`,value:l}]});await this.writer.write(c)}}const GE="__run";class ao{constructor(e){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new ao({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}}class Bi extends ao{constructor(e){super(e),Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.message=e.message}concat(e){return new Bi({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo},message:this.message.concat(e.message)})}}function bf({name:n,serialized:e}){return n!==void 0?n:(e==null?void 0:e.name)!==void 0?e.name:(e==null?void 0:e.id)!==void 0&&Array.isArray(e==null?void 0:e.id)?e.id[e.id.length-1]:"Unnamed"}const Z3=n=>n.name==="event_stream_tracer";class G3 extends Ll{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runInfoMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"tappedPromises",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"event_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=Nn.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){const t=e.tags??[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(e.runType)),this.includeTags!==void 0&&(r=r||t.find(i=>{var o;return(o=this.includeTags)==null?void 0:o.includes(i)})!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(e.runType)),this.excludeTags!==void 0&&(r=r&&t.every(i=>{var o;return!((o=this.excludeTags)!=null&&o.includes(i))})),r}async*tapOutputIterable(e,t){const r=await t.next();if(r.done)return;const i=this.runInfoMap.get(e);if(i===void 0){yield r.value;return}function o(c,d){return c==="llm"&&typeof d=="string"?new ao({text:d}):d}let l=this.tappedPromises.get(e);if(l===void 0){let c;l=new Promise(d=>{c=d}),this.tappedPromises.set(e,l);try{const d={event:`on_${i.runType}_stream`,run_id:e,name:i.name,tags:i.tags,metadata:i.metadata,data:{}};await this.send({...d,data:{chunk:o(i.runType,r.value)}},i),yield r.value;for await(const h of t)i.runType!=="tool"&&i.runType!=="retriever"&&await this.send({...d,data:{chunk:o(i.runType,h)}},i),yield h}finally{c()}}else{yield r.value;for await(const c of t)yield c}}async send(e,t){this._includeRun(t)&&await this.writer.write(e)}async sendEndEvent(e,t){const r=this.tappedPromises.get(e.run_id);r!==void 0?r.then(()=>{this.send(e,t)}):await this.send(e,t)}async onLLMStart(e){var l,c;const t=bf(e),r=e.inputs.messages!==void 0?"chat_model":"llm",i={tags:e.tags??[],metadata:((l=e.extra)==null?void 0:l.metadata)??{},name:t,runType:r,inputs:e.inputs};this.runInfoMap.set(e.id,i);const o=`on_${r}_start`;await this.send({event:o,data:{input:e.inputs},name:t,tags:e.tags??[],run_id:e.id,metadata:((c=e.extra)==null?void 0:c.metadata)??{}},i)}async onLLMNewToken(e,t,r){const i=this.runInfoMap.get(e.id);let o,l;if(i===void 0)throw new Error(`onLLMNewToken: Run ID ${e.id} not found in run map.`);if(this.runInfoMap.size!==1){if(i.runType==="chat_model")l="on_chat_model_stream",(r==null?void 0:r.chunk)===void 0?o=new Za({content:t,id:`run-${e.id}`}):o=r.chunk.message;else if(i.runType==="llm")l="on_llm_stream",(r==null?void 0:r.chunk)===void 0?o=new ao({text:t}):o=r.chunk;else throw new Error(`Unexpected run type ${i.runType}`);await this.send({event:l,data:{chunk:o},run_id:e.id,name:i.name,tags:i.tags,metadata:i.metadata},i)}}async onLLMEnd(e){var l,c,d;const t=this.runInfoMap.get(e.id);this.runInfoMap.delete(e.id);let r;if(t===void 0)throw new Error(`onLLMEnd: Run ID ${e.id} not found in run map.`);const i=(l=e.outputs)==null?void 0:l.generations;let o;if(t.runType==="chat_model"){for(const h of i??[]){if(o!==void 0)break;o=(c=h[0])==null?void 0:c.message}r="on_chat_model_end"}else if(t.runType==="llm")o={generations:i==null?void 0:i.map(h=>h.map(m=>({text:m.text,generationInfo:m.generationInfo}))),llmOutput:((d=e.outputs)==null?void 0:d.llmOutput)??{}},r="on_llm_end";else throw new Error(`onLLMEnd: Unexpected run type: ${t.runType}`);await this.sendEndEvent({event:r,data:{output:o,input:t.inputs},run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata},t)}async onChainStart(e){var l,c;const t=bf(e),r=e.run_type??"chain",i={tags:e.tags??[],metadata:((l=e.extra)==null?void 0:l.metadata)??{},name:t,runType:e.run_type};let o={};e.inputs.input===""&&Object.keys(e.inputs).length===1?(o={},i.inputs={}):e.inputs.input!==void 0?(o.input=e.inputs.input,i.inputs=e.inputs.input):(o.input=e.inputs,i.inputs=e.inputs),this.runInfoMap.set(e.id,i),await this.send({event:`on_${r}_start`,data:o,name:t,tags:e.tags??[],run_id:e.id,metadata:((c=e.extra)==null?void 0:c.metadata)??{}},i)}async onChainEnd(e){var c;const t=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),t===void 0)throw new Error(`onChainEnd: Run ID ${e.id} not found in run map.`);const r=`on_${e.run_type}_end`,i=e.inputs??t.inputs??{},l={output:((c=e.outputs)==null?void 0:c.output)??e.outputs,input:i};i.input&&Object.keys(i).length===1&&(l.input=i.input,t.inputs=i.input),await this.sendEndEvent({event:r,data:l,run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata??{}},t)}async onToolStart(e){var i,o;const t=bf(e),r={tags:e.tags??[],metadata:((i=e.extra)==null?void 0:i.metadata)??{},name:t,runType:"tool",inputs:e.inputs??{}};this.runInfoMap.set(e.id,r),await this.send({event:"on_tool_start",data:{input:e.inputs??{}},name:t,run_id:e.id,tags:e.tags??[],metadata:((o=e.extra)==null?void 0:o.metadata)??{}},r)}async onToolEnd(e){var i;const t=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),t===void 0)throw new Error(`onToolEnd: Run ID ${e.id} not found in run map.`);if(t.inputs===void 0)throw new Error(`onToolEnd: Run ID ${e.id} is a tool call, and is expected to have traced inputs.`);const r=((i=e.outputs)==null?void 0:i.output)===void 0?e.outputs:e.outputs.output;await this.sendEndEvent({event:"on_tool_end",data:{output:r,input:t.inputs},run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata},t)}async onRetrieverStart(e){var o,l;const t=bf(e),i={tags:e.tags??[],metadata:((o=e.extra)==null?void 0:o.metadata)??{},name:t,runType:"retriever",inputs:{query:e.inputs.query}};this.runInfoMap.set(e.id,i),await this.send({event:"on_retriever_start",data:{input:{query:e.inputs.query}},name:t,tags:e.tags??[],run_id:e.id,metadata:((l=e.extra)==null?void 0:l.metadata)??{}},i)}async onRetrieverEnd(e){var r;const t=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),t===void 0)throw new Error(`onRetrieverEnd: Run ID ${e.id} not found in run map.`);await this.sendEndEvent({event:"on_retriever_end",data:{output:((r=e.outputs)==null?void 0:r.documents)??e.outputs,input:t.inputs},run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata},t)}async handleCustomEvent(e,t,r){const i=this.runInfoMap.get(r);if(i===void 0)throw new Error(`handleCustomEvent: Run ID ${r} not found in run map.`);await this.send({event:"on_custom_event",run_id:r,name:e,tags:i.tags,metadata:i.metadata,data:t},i)}async finish(){const e=[...this.tappedPromises.values()];Promise.all(e).finally(()=>{this.writer.close()})}}const Y3=[400,401,402,403,404,405,406,407,409],X3=n=>{var t,r;if(n.message.startsWith("Cancel")||n.message.startsWith("AbortError")||n.name==="AbortError"||(n==null?void 0:n.code)==="ECONNABORTED")throw n;const e=((t=n==null?void 0:n.response)==null?void 0:t.status)??(n==null?void 0:n.status);if(e&&Y3.includes(+e))throw n;if(((r=n==null?void 0:n.error)==null?void 0:r.code)==="insufficient_quota"){const i=new Error(n==null?void 0:n.message);throw i.name="InsufficientQuotaError",i}};class w_{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.onFailedAttempt=e.onFailedAttempt??X3;const t="default"in ra?ra.default:ra;this.queue=new t({concurrency:this.maxConcurrency})}call(e,...t){return this.queue.add(()=>Qf(()=>e(...t).catch(r=>{throw r instanceof Error?r:new Error(r)}),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,t,...r){return e.signal?Promise.race([this.call(t,...r),new Promise((i,o)=>{var l;(l=e.signal)==null||l.addEventListener("abort",()=>{o(new Error("AbortError"))})})]):this.call(t,...r)}fetch(...e){return this.call(()=>fetch(...e).then(t=>t.ok?t:Promise.reject(t)))}}class ZR extends Ll{constructor({config:e,onStart:t,onEnd:r,onError:i}){super({_awaitHandler:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RootListenersTracer"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.config=e,this.argOnStart=t,this.argOnEnd=r,this.argOnError=i}persistRun(e){return Promise.resolve()}async onRunCreate(e){this.rootId||(this.rootId=e.id,this.argOnStart&&await this.argOnStart(e,this.config))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&await this.argOnError(e,this.config):this.argOnEnd&&await this.argOnEnd(e,this.config))}}function S_(n){return n?n.lc_runnable:!1}class K3{constructor(e){Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.includeNames=e.includeNames,this.includeTypes=e.includeTypes,this.includeTags=e.includeTags,this.excludeNames=e.excludeNames,this.excludeTypes=e.excludeTypes,this.excludeTags=e.excludeTags}includeEvent(e,t){let r=this.includeNames===void 0&&this.includeTypes===void 0&&this.includeTags===void 0;const i=e.tags??[];return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(t)),this.includeTags!==void 0&&(r=r||i.some(o=>{var l;return(l=this.includeTags)==null?void 0:l.includes(o)})),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(t)),this.excludeTags!==void 0&&(r=r&&i.every(o=>{var l;return!((l=this.excludeTags)!=null&&l.includes(o))})),r}}const J3=Symbol("Let zodToJsonSchema decide on which parser to use"),Q3={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},W3=n=>({...Q3,...n}),eU=n=>{const e=W3(n),t=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:t,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([r,i])=>[i._def,{def:i._def,path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}};function GR(n,e,t,r){r!=null&&r.errorMessages&&t&&(n.errorMessage={...n.errorMessage,[e]:t})}function He(n,e,t,r,i){n[e]=t,GR(n,e,r,i)}function tU(){return{}}function nU(n,e){var r,i,o;const t={type:"array"};return(r=n.type)!=null&&r._def&&((o=(i=n.type)==null?void 0:i._def)==null?void 0:o.typeName)!==q.ZodAny&&(t.items=Ve(n.type._def,{...e,currentPath:[...e.currentPath,"items"]})),n.minLength&&He(t,"minItems",n.minLength.value,n.minLength.message,e),n.maxLength&&He(t,"maxItems",n.maxLength.value,n.maxLength.message,e),n.exactLength&&(He(t,"minItems",n.exactLength.value,n.exactLength.message,e),He(t,"maxItems",n.exactLength.value,n.exactLength.message,e)),t}function rU(n,e){const t={type:"integer",format:"int64"};if(!n.checks)return t;for(const r of n.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?He(t,"minimum",r.value,r.message,e):He(t,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(t.exclusiveMinimum=!0),He(t,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?He(t,"maximum",r.value,r.message,e):He(t,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(t.exclusiveMaximum=!0),He(t,"maximum",r.value,r.message,e));break;case"multipleOf":He(t,"multipleOf",r.value,r.message,e);break}return t}function aU(){return{type:"boolean"}}function YR(n,e){return Ve(n.type._def,e)}const iU=(n,e)=>Ve(n.innerType._def,e);function XR(n,e,t){const r=t??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((i,o)=>XR(n,e,i))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return sU(n,e)}}const sU=(n,e)=>{const t={type:"integer",format:"unix-time"};if(e.target==="openApi3")return t;for(const r of n.checks)switch(r.kind){case"min":He(t,"minimum",r.value,r.message,e);break;case"max":He(t,"maximum",r.value,r.message,e);break}return t};function oU(n,e){return{...Ve(n.innerType._def,e),default:n.defaultValue()}}function uU(n,e){return e.effectStrategy==="input"?Ve(n.schema._def,e):{}}function lU(n){return{type:"string",enum:Array.from(n.values)}}const cU=n=>"type"in n&&n.type==="string"?!1:"allOf"in n;function fU(n,e){const t=[Ve(n.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),Ve(n.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(o=>!!o);let r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const i=[];return t.forEach(o=>{if(cU(o))i.push(...o.allOf),o.unevaluatedProperties===void 0&&(r=void 0);else{let l=o;if("additionalProperties"in o&&o.additionalProperties===!1){const{additionalProperties:c,...d}=o;l=d}else r=void 0;i.push(l)}}),i.length?{allOf:i,...r}:void 0}function dU(n,e){const t=typeof n.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(n.value)?"array":"object"}:e.target==="openApi3"?{type:t==="bigint"?"integer":t,enum:[n.value]}:{type:t==="bigint"?"integer":t,const:n.value}}let Ug;const Kn={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(Ug===void 0&&(Ug=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Ug),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function KR(n,e){const t={type:"string"};if(n.checks)for(const r of n.checks)switch(r.kind){case"min":He(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,r.value):r.value,r.message,e);break;case"max":He(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,r.value):r.value,r.message,e);break;case"email":switch(e.emailStrategy){case"format:email":Jn(t,"email",r.message,e);break;case"format:idn-email":Jn(t,"idn-email",r.message,e);break;case"pattern:zod":Qt(t,Kn.email,r.message,e);break}break;case"url":Jn(t,"uri",r.message,e);break;case"uuid":Jn(t,"uuid",r.message,e);break;case"regex":Qt(t,r.regex,r.message,e);break;case"cuid":Qt(t,Kn.cuid,r.message,e);break;case"cuid2":Qt(t,Kn.cuid2,r.message,e);break;case"startsWith":Qt(t,RegExp(`^${Bg(r.value,e)}`),r.message,e);break;case"endsWith":Qt(t,RegExp(`${Bg(r.value,e)}$`),r.message,e);break;case"datetime":Jn(t,"date-time",r.message,e);break;case"date":Jn(t,"date",r.message,e);break;case"time":Jn(t,"time",r.message,e);break;case"duration":Jn(t,"duration",r.message,e);break;case"length":He(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,r.value):r.value,r.message,e),He(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,r.value):r.value,r.message,e);break;case"includes":{Qt(t,RegExp(Bg(r.value,e)),r.message,e);break}case"ip":{r.version!=="v6"&&Jn(t,"ipv4",r.message,e),r.version!=="v4"&&Jn(t,"ipv6",r.message,e);break}case"base64url":Qt(t,Kn.base64url,r.message,e);break;case"jwt":Qt(t,Kn.jwt,r.message,e);break;case"cidr":{r.version!=="v6"&&Qt(t,Kn.ipv4Cidr,r.message,e),r.version!=="v4"&&Qt(t,Kn.ipv6Cidr,r.message,e);break}case"emoji":Qt(t,Kn.emoji(),r.message,e);break;case"ulid":{Qt(t,Kn.ulid,r.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{Jn(t,"binary",r.message,e);break}case"contentEncoding:base64":{He(t,"contentEncoding","base64",r.message,e);break}case"pattern:zod":{Qt(t,Kn.base64,r.message,e);break}}break}case"nanoid":Qt(t,Kn.nanoid,r.message,e)}return t}function Bg(n,e){return e.patternStrategy==="escape"?mU(n):n}const hU=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function mU(n){let e="";for(let t=0;t<n.length;t++)hU.has(n[t])||(e+="\\"),e+=n[t];return e}function Jn(n,e,t,r){var i;n.format||(i=n.anyOf)!=null&&i.some(o=>o.format)?(n.anyOf||(n.anyOf=[]),n.format&&(n.anyOf.push({format:n.format,...n.errorMessage&&r.errorMessages&&{errorMessage:{format:n.errorMessage.format}}}),delete n.format,n.errorMessage&&(delete n.errorMessage.format,Object.keys(n.errorMessage).length===0&&delete n.errorMessage)),n.anyOf.push({format:e,...t&&r.errorMessages&&{errorMessage:{format:t}}})):He(n,"format",e,t,r)}function Qt(n,e,t,r){var i;n.pattern||(i=n.allOf)!=null&&i.some(o=>o.pattern)?(n.allOf||(n.allOf=[]),n.pattern&&(n.allOf.push({pattern:n.pattern,...n.errorMessage&&r.errorMessages&&{errorMessage:{pattern:n.errorMessage.pattern}}}),delete n.pattern,n.errorMessage&&(delete n.errorMessage.pattern,Object.keys(n.errorMessage).length===0&&delete n.errorMessage)),n.allOf.push({pattern:YE(e,r),...t&&r.errorMessages&&{errorMessage:{pattern:t}}})):He(n,"pattern",YE(e,r),t,r)}function YE(n,e){var d;if(!e.applyRegexFlags||!n.flags)return n.source;const t={i:n.flags.includes("i"),m:n.flags.includes("m"),s:n.flags.includes("s")},r=t.i?n.source.toLowerCase():n.source;let i="",o=!1,l=!1,c=!1;for(let h=0;h<r.length;h++){if(o){i+=r[h],o=!1;continue}if(t.i){if(l){if(r[h].match(/[a-z]/)){c?(i+=r[h],i+=`${r[h-2]}-${r[h]}`.toUpperCase(),c=!1):r[h+1]==="-"&&((d=r[h+2])!=null&&d.match(/[a-z]/))?(i+=r[h],c=!0):i+=`${r[h]}${r[h].toUpperCase()}`;continue}}else if(r[h].match(/[a-z]/)){i+=`[${r[h]}${r[h].toUpperCase()}]`;continue}}if(t.m){if(r[h]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(r[h]==="$"){i+=`($|(?=[\r
]))`;continue}}if(t.s&&r[h]==="."){i+=l?`${r[h]}\r
`:`[${r[h]}\r
]`;continue}i+=r[h],r[h]==="\\"?o=!0:l&&r[h]==="]"?l=!1:!l&&r[h]==="["&&(l=!0)}try{new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),n.source}return i}function JR(n,e){var r,i,o,l,c,d;if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&((r=n.keyType)==null?void 0:r._def.typeName)===q.ZodEnum)return{type:"object",required:n.keyType._def.values,properties:n.keyType._def.values.reduce((h,m)=>({...h,[m]:Ve(n.valueType._def,{...e,currentPath:[...e.currentPath,"properties",m]})??{}}),{}),additionalProperties:e.rejectedAdditionalProperties};const t={type:"object",additionalProperties:Ve(n.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??e.allowedAdditionalProperties};if(e.target==="openApi3")return t;if(((i=n.keyType)==null?void 0:i._def.typeName)===q.ZodString&&((o=n.keyType._def.checks)!=null&&o.length)){const{type:h,...m}=KR(n.keyType._def,e);return{...t,propertyNames:m}}else{if(((l=n.keyType)==null?void 0:l._def.typeName)===q.ZodEnum)return{...t,propertyNames:{enum:n.keyType._def.values}};if(((c=n.keyType)==null?void 0:c._def.typeName)===q.ZodBranded&&n.keyType._def.type._def.typeName===q.ZodString&&((d=n.keyType._def.type._def.checks)!=null&&d.length)){const{type:h,...m}=YR(n.keyType._def,e);return{...t,propertyNames:m}}}return t}function pU(n,e){if(e.mapStrategy==="record")return JR(n,e);const t=Ve(n.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},r=Ve(n.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[t,r],minItems:2,maxItems:2}}}function gU(n){const e=n.values,r=Object.keys(n.values).filter(o=>typeof e[e[o]]!="number").map(o=>e[o]),i=Array.from(new Set(r.map(o=>typeof o)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:r}}function yU(){return{not:{}}}function bU(n){return n.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const ad={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function _U(n,e){if(e.target==="openApi3")return XE(n,e);const t=n.options instanceof Map?Array.from(n.options.values()):n.options;if(t.every(r=>r._def.typeName in ad&&(!r._def.checks||!r._def.checks.length))){const r=t.reduce((i,o)=>{const l=ad[o._def.typeName];return l&&!i.includes(l)?[...i,l]:i},[]);return{type:r.length>1?r:r[0]}}else if(t.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=t.reduce((i,o)=>{const l=typeof o._def.value;switch(l){case"string":case"number":case"boolean":return[...i,l];case"bigint":return[...i,"integer"];case"object":if(o._def.value===null)return[...i,"null"];case"symbol":case"undefined":case"function":default:return i}},[]);if(r.length===t.length){const i=r.filter((o,l,c)=>c.indexOf(o)===l);return{type:i.length>1?i:i[0],enum:t.reduce((o,l)=>o.includes(l._def.value)?o:[...o,l._def.value],[])}}}else if(t.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:t.reduce((r,i)=>[...r,...i._def.values.filter(o=>!r.includes(o))],[])};return XE(n,e)}const XE=(n,e)=>{const t=(n.options instanceof Map?Array.from(n.options.values()):n.options).map((r,i)=>Ve(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${i}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return t.length?{anyOf:t}:void 0};function vU(n,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(n.innerType._def.typeName)&&(!n.innerType._def.checks||!n.innerType._def.checks.length))return e.target==="openApi3"?{type:ad[n.innerType._def.typeName],nullable:!0}:{type:[ad[n.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const r=Ve(n.innerType._def,{...e,currentPath:[...e.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const t=Ve(n.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return t&&{anyOf:[t,{type:"null"}]}}function wU(n,e){const t={type:"number"};if(!n.checks)return t;for(const r of n.checks)switch(r.kind){case"int":t.type="integer",GR(t,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?He(t,"minimum",r.value,r.message,e):He(t,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(t.exclusiveMinimum=!0),He(t,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?He(t,"maximum",r.value,r.message,e):He(t,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(t.exclusiveMaximum=!0),He(t,"maximum",r.value,r.message,e));break;case"multipleOf":He(t,"multipleOf",r.value,r.message,e);break}return t}function SU(n,e){const t=e.target==="openAi",r={type:"object",properties:{}},i=[],o=n.shape();for(const c in o){let d=o[c];if(d===void 0||d._def===void 0)continue;let h=TU(d);h&&t&&(d instanceof lr&&(d=d._def.innerType),d.isNullable()||(d=d.nullable()),h=!1);const m=Ve(d._def,{...e,currentPath:[...e.currentPath,"properties",c],propertyPath:[...e.currentPath,"properties",c]});m!==void 0&&(r.properties[c]=m,h||i.push(c))}i.length&&(r.required=i);const l=AU(n,e);return l!==void 0&&(r.additionalProperties=l),r}function AU(n,e){if(n.catchall._def.typeName!=="ZodNever")return Ve(n.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(n.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}function TU(n){try{return n.isOptional()}catch{return!0}}const EU=(n,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)==null?void 0:r.toString()))return Ve(n.innerType._def,e);const t=Ve(n.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return t?{anyOf:[{not:{}},t]}:{}},xU=(n,e)=>{if(e.pipeStrategy==="input")return Ve(n.in._def,e);if(e.pipeStrategy==="output")return Ve(n.out._def,e);const t=Ve(n.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),r=Ve(n.out._def,{...e,currentPath:[...e.currentPath,"allOf",t?"1":"0"]});return{allOf:[t,r].filter(i=>i!==void 0)}};function OU(n,e){return Ve(n.type._def,e)}function RU(n,e){const r={type:"array",uniqueItems:!0,items:Ve(n.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return n.minSize&&He(r,"minItems",n.minSize.value,n.minSize.message,e),n.maxSize&&He(r,"maxItems",n.maxSize.value,n.maxSize.message,e),r}function CU(n,e){return n.rest?{type:"array",minItems:n.items.length,items:n.items.map((t,r)=>Ve(t._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((t,r)=>r===void 0?t:[...t,r],[]),additionalItems:Ve(n.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:n.items.length,maxItems:n.items.length,items:n.items.map((t,r)=>Ve(t._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((t,r)=>r===void 0?t:[...t,r],[])}}function PU(){return{not:{}}}function NU(){return{}}const jU=(n,e)=>Ve(n.innerType._def,e),kU=(n,e,t)=>{switch(e){case q.ZodString:return KR(n,t);case q.ZodNumber:return wU(n,t);case q.ZodObject:return SU(n,t);case q.ZodBigInt:return rU(n,t);case q.ZodBoolean:return aU();case q.ZodDate:return XR(n,t);case q.ZodUndefined:return PU();case q.ZodNull:return bU(t);case q.ZodArray:return nU(n,t);case q.ZodUnion:case q.ZodDiscriminatedUnion:return _U(n,t);case q.ZodIntersection:return fU(n,t);case q.ZodTuple:return CU(n,t);case q.ZodRecord:return JR(n,t);case q.ZodLiteral:return dU(n,t);case q.ZodEnum:return lU(n);case q.ZodNativeEnum:return gU(n);case q.ZodNullable:return vU(n,t);case q.ZodOptional:return EU(n,t);case q.ZodMap:return pU(n,t);case q.ZodSet:return RU(n,t);case q.ZodLazy:return()=>n.getter()._def;case q.ZodPromise:return OU(n,t);case q.ZodNaN:case q.ZodNever:return yU();case q.ZodEffects:return uU(n,t);case q.ZodAny:return tU();case q.ZodUnknown:return NU();case q.ZodDefault:return oU(n,t);case q.ZodBranded:return YR(n,t);case q.ZodReadonly:return jU(n,t);case q.ZodCatch:return iU(n,t);case q.ZodPipeline:return xU(n,t);case q.ZodFunction:case q.ZodVoid:case q.ZodSymbol:return;default:return(r=>{})()}};function Ve(n,e,t=!1){var c;const r=e.seen.get(n);if(e.override){const d=(c=e.override)==null?void 0:c.call(e,n,e,r,t);if(d!==J3)return d}if(r&&!t){const d=MU(r,e);if(d!==void 0)return d}const i={def:n,path:e.currentPath,jsonSchema:void 0};e.seen.set(n,i);const o=kU(n,n.typeName,e),l=typeof o=="function"?Ve(o(),e):o;if(l&&LU(n,e,l),e.postProcess){const d=e.postProcess(l,n,e);return i.jsonSchema=l,d}return i.jsonSchema=l,l}const MU=(n,e)=>{switch(e.$refStrategy){case"root":return{$ref:n.path.join("/")};case"relative":return{$ref:IU(e.currentPath,n.path)};case"none":case"seen":return n.path.length<e.currentPath.length&&n.path.every((t,r)=>e.currentPath[r]===t)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},IU=(n,e)=>{let t=0;for(;t<n.length&&t<e.length&&n[t]===e[t];t++);return[(n.length-t).toString(),...e.slice(t)].join("/")},LU=(n,e,t)=>(n.description&&(t.description=n.description,e.markdownDescription&&(t.markdownDescription=n.description)),t),Dl=(n,e)=>{const t=eU(e),r=void 0,i=e==null?void 0:e.name,o=Ve(n._def,t,!1)??{},l=i===void 0?r?{...o,[t.definitionPath]:r}:o:{$ref:[...t.$refStrategy==="relative"?[]:t.basePath,t.definitionPath,i].join("/"),[t.definitionPath]:{...r,[i]:o}};return t.target==="jsonSchema7"?l.$schema="http://json-schema.org/draft-07/schema#":(t.target==="jsonSchema2019-09"||t.target==="openAi")&&(l.$schema="https://json-schema.org/draft/2019-09/schema#"),t.target==="openAi"&&("anyOf"in l||"oneOf"in l||"allOf"in l||"type"in l&&Array.isArray(l.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),l};function zg(n){return n.replace(/[^a-zA-Z-_0-9]/g,"_")}const DU=["*","_","`"];function $U(n){let e="";for(const[t,r]of Object.entries(n))e+=`	classDef ${t} ${r};
`;return e}function UU(n,e,t){const{firstNode:r,lastNode:i,nodeColors:o,withStyles:l=!0,curveStyle:c="linear",wrapLabelNWords:d=9}=t??{};let h=l?`%%{init: {'flowchart': {'curve': '${c}'}}}%%
graph TD;
`:`graph TD;
`;if(l){const _="default",v={[_]:"{0}({1})"};r!==void 0&&(v[r]="{0}([{1}]):::first"),i!==void 0&&(v[i]="{0}([{1}]):::last");for(const[S,A]of Object.entries(n)){const E=A.name.split(":").pop()??"";let x=DU.some(P=>E.startsWith(P)&&E.endsWith(P))?`<p>${E}</p>`:E;Object.keys(A.metadata??{}).length&&(x+=`<hr/><small><em>${Object.entries(A.metadata??{}).map(([P,z])=>`${P} = ${z}`).join(`
`)}</em></small>`);const j=(v[S]??v[_]).replace("{0}",zg(S)).replace("{1}",x);h+=`	${j}
`}}const m={};for(const _ of e){const v=_.source.split(":"),S=_.target.split(":"),A=v.filter((E,O)=>E===S[O]).join(":");m[A]||(m[A]=[]),m[A].push(_)}const g=new Set;function b(_,v){const S=_.length===1&&_[0].source===_[0].target;if(v&&!S){const A=v.split(":").pop();if(g.has(A))throw new Error(`Found duplicate subgraph '${A}' -- this likely means that you're reusing a subgraph node with the same name. Please adjust your graph to have subgraph nodes with unique names.`);g.add(A),h+=`	subgraph ${A}
`}for(const A of _){const{source:E,target:O,data:x,conditional:j}=A;let P="";if(x!==void 0){let z=x;const H=z.split(" ");H.length>d&&(z=Array.from({length:Math.ceil(H.length/d)},(V,ie)=>H.slice(ie*d,(ie+1)*d).join(" ")).join("&nbsp;<br>&nbsp;")),P=j?` -. &nbsp;${z}&nbsp; .-> `:` -- &nbsp;${z}&nbsp; --> `}else P=j?" -.-> ":" --> ";h+=`	${zg(E)}${P}${zg(O)};
`}for(const A in m)A.startsWith(`${v}:`)&&A!==v&&b(m[A],A);v&&!S&&(h+=`	end
`)}b(m[""]??[],"");for(const _ in m)!_.includes(":")&&_!==""&&b(m[_],_);return l&&(h+=$U(o??{})),h}async function BU(n,e){let{backgroundColor:t="white"}=e??{};const r=btoa(n);t!==void 0&&(/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(t)||(t=`!${t}`));const i=`https://mermaid.ink/img/${r}?bgColor=${t}`,o=await fetch(i);if(!o.ok)throw new Error(["Failed to render the graph using the Mermaid.INK API.",`Status code: ${o.status}`,`Status text: ${o.statusText}`].join(`
`));return await o.blob()}function zU(n,e){if(n!==void 0&&!Vu(n))return n;if(S_(e))try{let t=e.getName();return t=t.startsWith("Runnable")?t.slice(8):t,t}catch{return e.getName()}else return e.name??"UnknownSchema"}function VU(n){return S_(n.data)?{type:"runnable",data:{id:n.data.lc_id,name:n.data.getName()}}:{type:"schema",data:{...Dl(n.data.schema),title:n.data.name}}}class Bd{constructor(e){Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"edges",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.nodes=(e==null?void 0:e.nodes)??this.nodes,this.edges=(e==null?void 0:e.edges)??this.edges}toJSON(){const e={};return Object.values(this.nodes).forEach((t,r)=>{e[t.id]=Vu(t.id)?r:t.id}),{nodes:Object.values(this.nodes).map(t=>({id:e[t.id],...VU(t)})),edges:this.edges.map(t=>{const r={source:e[t.source],target:e[t.target]};return typeof t.data<"u"&&(r.data=t.data),typeof t.conditional<"u"&&(r.conditional=t.conditional),r})}}addNode(e,t,r){if(t!==void 0&&this.nodes[t]!==void 0)throw new Error(`Node with id ${t} already exists`);const i=t??Wt(),o={id:i,data:e,name:zU(t,e),metadata:r};return this.nodes[i]=o,o}removeNode(e){delete this.nodes[e.id],this.edges=this.edges.filter(t=>t.source!==e.id&&t.target!==e.id)}addEdge(e,t,r,i){if(this.nodes[e.id]===void 0)throw new Error(`Source node ${e.id} not in graph`);if(this.nodes[t.id]===void 0)throw new Error(`Target node ${t.id} not in graph`);const o={source:e.id,target:t.id,data:r,conditional:i};return this.edges.push(o),o}firstNode(){return KE(this)}lastNode(){return JE(this)}extend(e,t=""){let r=t;Object.values(e.nodes).map(h=>h.id).every(Vu)&&(r="");const o=h=>r?`${r}:${h}`:h;Object.entries(e.nodes).forEach(([h,m])=>{this.nodes[o(h)]={...m,id:o(h)}});const l=e.edges.map(h=>({...h,source:o(h.source),target:o(h.target)}));this.edges=[...this.edges,...l];const c=e.firstNode(),d=e.lastNode();return[c?{id:o(c.id),data:c.data}:void 0,d?{id:o(d.id),data:d.data}:void 0]}trimFirstNode(){const e=this.firstNode();e&&KE(this,[e.id])&&this.removeNode(e)}trimLastNode(){const e=this.lastNode();e&&JE(this,[e.id])&&this.removeNode(e)}reid(){const e=Object.fromEntries(Object.values(this.nodes).map(i=>[i.id,i.name])),t=new Map;Object.values(e).forEach(i=>{t.set(i,(t.get(i)||0)+1)});const r=i=>{const o=e[i];return Vu(i)&&t.get(o)===1?o:i};return new Bd({nodes:Object.fromEntries(Object.entries(this.nodes).map(([i,o])=>[r(i),{...o,id:r(i)}])),edges:this.edges.map(i=>({...i,source:r(i.source),target:r(i.target)}))})}drawMermaid(e){const{withStyles:t,curveStyle:r,nodeColors:i={default:"fill:#f2f0ff,line-height:1.2",first:"fill-opacity:0",last:"fill:#bfb6fc"},wrapLabelNWords:o}=e??{},l=this.reid(),c=l.firstNode(),d=l.lastNode();return UU(l.nodes,l.edges,{firstNode:c==null?void 0:c.id,lastNode:d==null?void 0:d.id,withStyles:t,curveStyle:r,nodeColors:i,wrapLabelNWords:o})}async drawMermaidPng(e){const t=this.drawMermaid(e);return BU(t,{backgroundColor:e==null?void 0:e.backgroundColor})}}function KE(n,e=[]){const t=new Set(n.edges.filter(i=>!e.includes(i.source)).map(i=>i.target)),r=[];for(const i of Object.values(n.nodes))!e.includes(i.id)&&!t.has(i.id)&&r.push(i);return r.length===1?r[0]:void 0}function JE(n,e=[]){const t=new Set(n.edges.filter(i=>!e.includes(i.target)).map(i=>i.source)),r=[];for(const i of Object.values(n.nodes))!e.includes(i.id)&&!t.has(i.id)&&r.push(i);return r.length===1?r[0]:void 0}function qU(n){const e=new TextEncoder,t=new ReadableStream({async start(r){for await(const i of n)r.enqueue(e.encode(`event: data
data: ${JSON.stringify(i)}

`));r.enqueue(e.encode(`event: end

`)),r.close()}});return Nn.fromReadableStream(t)}function QE(n){return typeof n=="object"&&n!==null&&typeof n[Symbol.iterator]=="function"&&typeof n.next=="function"}const FU=n=>n!=null&&typeof n=="object"&&"next"in n&&typeof n.next=="function";function qy(n){return typeof n=="object"&&n!==null&&typeof n[Symbol.asyncIterator]=="function"}function*WE(n,e){for(;;){const{value:t,done:r}=Ja.runWithConfig(ro(n),e.next.bind(e),!0);if(r)break;yield t}}async function*Fy(n,e){const t=e[Symbol.asyncIterator]();for(;;){const{value:r,done:i}=await Ja.runWithConfig(ro(n),t.next.bind(e),!0);if(i)break;yield r}}function Nt(n,e){return n&&!Array.isArray(n)&&!(n instanceof Date)&&typeof n=="object"?n:{[e]:n}}class jt extends Ii{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}getName(e){const t=this.name??this.constructor.lc_name()??this.constructor.name;return e?`${t}${e}`:t}bind(e){return new ki({bound:this,kwargs:e,config:{}})}map(){return new id({bound:this})}withRetry(e){return new HU({bound:this,kwargs:{},config:{},maxAttemptNumber:e==null?void 0:e.stopAfterAttempt,...e})}withConfig(e){return new ki({bound:this,config:e,kwargs:{}})}withFallbacks(e){const t=Array.isArray(e)?e:e.fallbacks;return new GU({runnable:this,fallbacks:t})}_getOptionsList(e,t=0){if(Array.isArray(e)&&e.length!==t)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${t} inputs`);if(Array.isArray(e))return e.map(ze);if(t>1&&!Array.isArray(e)&&e.runId){console.warn("Provided runId will be used only for the first element of the batch.");const r=Object.fromEntries(Object.entries(e).filter(([i])=>i!=="runId"));return Array.from({length:t},(i,o)=>ze(o===0?e:r))}return Array.from({length:t},()=>ze(e))}async batch(e,t,r){var d;const i=this._getOptionsList(t??{},e.length),o=((d=i[0])==null?void 0:d.maxConcurrency)??(r==null?void 0:r.maxConcurrency),l=new w_({maxConcurrency:o,onFailedAttempt:h=>{throw h}}),c=e.map((h,m)=>l.call(async()=>{try{return await this.invoke(h,i[m])}catch(g){if(r!=null&&r.returnExceptions)return g;throw g}}));return Promise.all(c)}async*_streamIterator(e,t){yield this.invoke(e,t)}async stream(e,t){const r=ze(t),i=new go({generator:this._streamIterator(e,r),config:r});return await i.setup,Nn.fromAsyncGenerator(i)}_separateRunnableConfigFromCallOptions(e){let t;e===void 0?t=ze(e):t=ze({callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName,configurable:e.configurable,recursionLimit:e.recursionLimit,maxConcurrency:e.maxConcurrency,runId:e.runId,timeout:e.timeout,signal:e.signal});const r={...e};return delete r.callbacks,delete r.tags,delete r.metadata,delete r.runName,delete r.configurable,delete r.recursionLimit,delete r.maxConcurrency,delete r.runId,delete r.timeout,delete r.signal,[t,r]}async _callWithConfig(e,t,r){const i=ze(r),o=await cr(i),l=await(o==null?void 0:o.handleChainStart(this.toJSON(),Nt(t,"input"),i.runId,i==null?void 0:i.runType,void 0,void 0,(i==null?void 0:i.runName)??this.getName()));delete i.runId;let c;try{const d=e.call(this,t,i,l);c=await Qa(d,r==null?void 0:r.signal)}catch(d){throw await(l==null?void 0:l.handleChainError(d)),d}return await(l==null?void 0:l.handleChainEnd(Nt(c,"output"))),c}async _batchWithConfig(e,t,r,i){var h;const o=this._getOptionsList(r??{},t.length),l=await Promise.all(o.map(cr)),c=await Promise.all(l.map(async(m,g)=>{const b=await(m==null?void 0:m.handleChainStart(this.toJSON(),Nt(t[g],"input"),o[g].runId,o[g].runType,void 0,void 0,o[g].runName??this.getName()));return delete o[g].runId,b}));let d;try{const m=e.call(this,t,o,c,i);d=await Qa(m,(h=o==null?void 0:o[0])==null?void 0:h.signal)}catch(m){throw await Promise.all(c.map(g=>g==null?void 0:g.handleChainError(m))),m}return await Promise.all(c.map(m=>m==null?void 0:m.handleChainEnd(Nt(d,"output")))),d}async*_transformStreamWithConfig(e,t,r){let i,o=!0,l,c=!0;const d=ze(r),h=await cr(d);async function*m(){for await(const b of e){if(o)if(i===void 0)i=b;else try{i=fr(i,b)}catch{i=void 0,o=!1}yield b}}let g;try{const b=await q3(t.bind(this),m(),async()=>h==null?void 0:h.handleChainStart(this.toJSON(),{input:""},d.runId,d.runType,void 0,void 0,d.runName??this.getName()),r==null?void 0:r.signal,d);delete d.runId,g=b.setup;const _=g==null?void 0:g.handlers.find(Z3);let v=b.output;_!==void 0&&g!==void 0&&(v=_.tapOutputIterable(g.runId,v));const S=g==null?void 0:g.handlers.find(F3);S!==void 0&&g!==void 0&&(v=S.tapOutputIterable(g.runId,v));for await(const A of v)if(yield A,c)if(l===void 0)l=A;else try{l=fr(l,A)}catch{l=void 0,c=!1}}catch(b){throw await(g==null?void 0:g.handleChainError(b,void 0,void 0,void 0,{inputs:Nt(i,"input")})),b}await(g==null?void 0:g.handleChainEnd(l??{},void 0,void 0,void 0,{inputs:Nt(i,"input")}))}getGraph(e){const t=new Bd,r=t.addNode({name:`${this.getName()}Input`,schema:Va.any()}),i=t.addNode(this),o=t.addNode({name:`${this.getName()}Output`,schema:Va.any()});return t.addEdge(r,i),t.addEdge(i,o),t}pipe(e){return new na({first:this,last:Ci(e)})}pick(e){return this.pipe(new YU(e))}assign(e){return this.pipe(new QR(new yo({steps:e})))}async*transform(e,t){let r;for await(const i of e)r===void 0?r=i:r=fr(r,i);yield*this._streamIterator(r,ze(t))}async*streamLog(e,t,r){const i=new ZE({...r,autoClose:!1,_schemaFormat:"original"}),o=ze(t);yield*this._streamLog(e,i,o)}async*_streamLog(e,t,r){const{callbacks:i}=r;if(i===void 0)r.callbacks=[t];else if(Array.isArray(i))r.callbacks=i.concat([t]);else{const d=i.copy();d.addHandler(t,!0),r.callbacks=d}const o=this.stream(e,r);async function l(){try{const d=await o;for await(const h of d){const m=new $a({ops:[{op:"add",path:"/streamed_output/-",value:h}]});await t.writer.write(m)}}finally{await t.writer.close()}}const c=l();try{for await(const d of t)yield d}finally{await c}}streamEvents(e,t,r){let i;if(t.version==="v1")i=this._streamEventsV1(e,t,r);else if(t.version==="v2")i=this._streamEventsV2(e,t,r);else throw new Error('Only versions "v1" and "v2" of the schema are currently supported.');return t.encoding==="text/event-stream"?qU(i):Nn.fromAsyncGenerator(i)}async*_streamEventsV2(e,t,r){var v;const i=new G3({...r,autoClose:!1}),o=ze(t),l=o.runId??Wt();o.runId=l;const c=o.callbacks;if(c===void 0)o.callbacks=[i];else if(Array.isArray(c))o.callbacks=c.concat(i);else{const S=c.copy();S.addHandler(i,!0),o.callbacks=S}const d=new AbortController,h=this;async function m(){try{let S;t!=null&&t.signal?"any"in AbortSignal?S=AbortSignal.any([d.signal,t.signal]):(S=t.signal,t.signal.addEventListener("abort",()=>{d.abort()},{once:!0})):S=d.signal;const A=await h.stream(e,{...o,signal:S}),E=i.tapOutputIterable(l,A);for await(const O of E)if(d.signal.aborted)break}finally{await i.finish()}}const g=m();let b=!1,_;try{for await(const S of i){if(!b){S.data.input=e,b=!0,_=S.run_id,yield S;continue}S.run_id===_&&S.event.endsWith("_end")&&(v=S.data)!=null&&v.input&&delete S.data.input,yield S}}finally{d.abort(),await g}}async*_streamEventsV1(e,t,r){let i,o=!1;const l=ze(t),c=l.tags??[],d=l.metadata??{},h=l.runName??this.getName(),m=new ZE({...r,autoClose:!1,_schemaFormat:"streaming_events"}),g=new K3({...r}),b=this._streamLog(e,m,l);for await(const v of b){if(i?i=i.concat(v):i=_l.fromRunLogPatch(v),i.state===void 0)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!o){o=!0;const O={...i.state},x={run_id:O.id,event:`on_${O.type}_start`,name:h,tags:c,metadata:d,data:{input:e}};g.includeEvent(x,O.type)&&(yield x)}const S=v.ops.filter(O=>O.path.startsWith("/logs/")).map(O=>O.path.split("/")[2]),A=[...new Set(S)];for(const O of A){let x,j={};const P=i.state.logs[O];if(P.end_time===void 0?P.streamed_output.length>0?x="stream":x="start":x="end",x==="start")P.inputs!==void 0&&(j.input=P.inputs);else if(x==="end")P.inputs!==void 0&&(j.input=P.inputs),j.output=P.final_output;else if(x==="stream"){const z=P.streamed_output.length;if(z!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${z} instead. Encountered in: "${P.name}"`);j={chunk:P.streamed_output[0]},P.streamed_output=[]}yield{event:`on_${P.type}_${x}`,name:P.name,run_id:P.id,tags:P.tags,metadata:P.metadata,data:j}}const{state:E}=i;if(E.streamed_output.length>0){const O=E.streamed_output.length;if(O!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${O} instead. Encountered in: "${E.name}"`);const x={chunk:E.streamed_output[0]};E.streamed_output=[];const j={event:`on_${E.type}_stream`,run_id:E.id,tags:c,metadata:d,name:h,data:x};g.includeEvent(j,E.type)&&(yield j)}}const _=i==null?void 0:i.state;if(_!==void 0){const v={event:`on_${_.type}_end`,name:h,run_id:_.id,tags:c,metadata:d,data:{output:_.final_output}};g.includeEvent(v,_.type)&&(yield v)}}static isRunnable(e){return S_(e)}withListeners({onStart:e,onEnd:t,onError:r}){return new ki({bound:this,config:{},configFactories:[i=>({callbacks:[new ZR({config:i,onStart:e,onEnd:t,onError:r})]})]})}asTool(e){return XU(this,e)}}class ki extends jt{static lc_name(){return"RunnableBinding"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"configFactories",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound,this.kwargs=e.kwargs,this.config=e.config,this.configFactories=e.configFactories}getName(e){return this.bound.getName(e)}async _mergeConfig(...e){const t=qE(this.config,...e);return qE(t,...this.configFactories?await Promise.all(this.configFactories.map(async r=>await r(t))):[])}bind(e){return new this.constructor({bound:this.bound,kwargs:{...this.kwargs,...e},config:this.config})}withConfig(e){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...e}})}withRetry(e){return new this.constructor({bound:this.bound.withRetry(e),kwargs:this.kwargs,config:this.config})}async invoke(e,t){return this.bound.invoke(e,await this._mergeConfig(ze(t),this.kwargs))}async batch(e,t,r){const i=Array.isArray(t)?await Promise.all(t.map(async o=>this._mergeConfig(ze(o),this.kwargs))):await this._mergeConfig(ze(t),this.kwargs);return this.bound.batch(e,i,r)}async*_streamIterator(e,t){yield*this.bound._streamIterator(e,await this._mergeConfig(ze(t),this.kwargs))}async stream(e,t){return this.bound.stream(e,await this._mergeConfig(ze(t),this.kwargs))}async*transform(e,t){yield*this.bound.transform(e,await this._mergeConfig(ze(t),this.kwargs))}streamEvents(e,t,r){const i=this,o=async function*(){yield*i.bound.streamEvents(e,{...await i._mergeConfig(ze(t),i.kwargs),version:t.version},r)};return Nn.fromAsyncGenerator(o())}static isRunnableBinding(e){return e.bound&&jt.isRunnable(e.bound)}withListeners({onStart:e,onEnd:t,onError:r}){return new ki({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[i=>({callbacks:[new ZR({config:i,onStart:e,onEnd:t,onError:r})]})]})}}class id extends jt{static lc_name(){return"RunnableEach"}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound}bind(e){return new id({bound:this.bound.bind(e)})}async invoke(e,t){return this._callWithConfig(this._invoke.bind(this),e,t)}async _invoke(e,t,r){return this.bound.batch(e,Gt(t,{callbacks:r==null?void 0:r.getChild()}))}withListeners({onStart:e,onEnd:t,onError:r}){return new id({bound:this.bound.withListeners({onStart:e,onEnd:t,onError:r})})}}class HU extends ki{static lc_name(){return"RunnableRetry"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"maxAttemptNumber",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:()=>{}}),this.maxAttemptNumber=e.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=e.onFailedAttempt??this.onFailedAttempt}_patchConfigForRetry(e,t,r){const i=e>1?`retry:attempt:${e}`:void 0;return Gt(t,{callbacks:r==null?void 0:r.getChild(i)})}async _invoke(e,t,r){return Qf(i=>super.invoke(e,this._patchConfigForRetry(i,t,r)),{onFailedAttempt:i=>this.onFailedAttempt(i,e),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,t){return this._callWithConfig(this._invoke.bind(this),e,t)}async _batch(e,t,r,i){const o={};try{await Qf(async l=>{const c=e.map((b,_)=>_).filter(b=>o[b.toString()]===void 0||o[b.toString()]instanceof Error),d=c.map(b=>e[b]),h=c.map(b=>this._patchConfigForRetry(l,t==null?void 0:t[b],r==null?void 0:r[b])),m=await super.batch(d,h,{...i,returnExceptions:!0});let g;for(let b=0;b<m.length;b+=1){const _=m[b],v=c[b];_ instanceof Error&&g===void 0&&(g=_,g.input=d[b]),o[v.toString()]=_}if(g)throw g;return m},{onFailedAttempt:l=>this.onFailedAttempt(l,l.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(l){if((i==null?void 0:i.returnExceptions)!==!0)throw l}return Object.keys(o).sort((l,c)=>parseInt(l,10)-parseInt(c,10)).map(l=>o[parseInt(l,10)])}async batch(e,t,r){return this._batchWithConfig(this._batch.bind(this),e,t,r)}}class na extends jt{static lc_name(){return"RunnableSequence"}constructor(e){super(e),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"omitSequenceTags",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),this.first=e.first,this.middle=e.middle??this.middle,this.last=e.last,this.name=e.name,this.omitSequenceTags=e.omitSequenceTags??this.omitSequenceTags}get steps(){return[this.first,...this.middle,this.last]}async invoke(e,t){var d;const r=ze(t),i=await cr(r),o=await(i==null?void 0:i.handleChainStart(this.toJSON(),Nt(e,"input"),r.runId,void 0,void 0,void 0,r==null?void 0:r.runName));delete r.runId;let l=e,c;try{const h=[this.first,...this.middle];for(let m=0;m<h.length;m+=1){const b=h[m].invoke(l,Gt(r,{callbacks:o==null?void 0:o.getChild(this.omitSequenceTags?void 0:`seq:step:${m+1}`)}));l=await Qa(b,t==null?void 0:t.signal)}if((d=t==null?void 0:t.signal)!=null&&d.aborted)throw new Error("Aborted");c=await this.last.invoke(l,Gt(r,{callbacks:o==null?void 0:o.getChild(this.omitSequenceTags?void 0:`seq:step:${this.steps.length}`)}))}catch(h){throw await(o==null?void 0:o.handleChainError(h)),h}return await(o==null?void 0:o.handleChainEnd(Nt(c,"output"))),c}async batch(e,t,r){var d;const i=this._getOptionsList(t??{},e.length),o=await Promise.all(i.map(cr)),l=await Promise.all(o.map(async(h,m)=>{const g=await(h==null?void 0:h.handleChainStart(this.toJSON(),Nt(e[m],"input"),i[m].runId,void 0,void 0,void 0,i[m].runName));return delete i[m].runId,g}));let c=e;try{for(let h=0;h<this.steps.length;h+=1){const g=this.steps[h].batch(c,l.map((b,_)=>{const v=b==null?void 0:b.getChild(this.omitSequenceTags?void 0:`seq:step:${h+1}`);return Gt(i[_],{callbacks:v})}),r);c=await Qa(g,(d=i[0])==null?void 0:d.signal)}}catch(h){throw await Promise.all(l.map(m=>m==null?void 0:m.handleChainError(h))),h}return await Promise.all(l.map(h=>h==null?void 0:h.handleChainEnd(Nt(c,"output")))),c}async*_streamIterator(e,t){var g;const r=await cr(t),{runId:i,...o}=t??{},l=await(r==null?void 0:r.handleChainStart(this.toJSON(),Nt(e,"input"),i,void 0,void 0,void 0,o==null?void 0:o.runName)),c=[this.first,...this.middle,this.last];let d=!0,h;async function*m(){yield e}try{let b=c[0].transform(m(),Gt(o,{callbacks:l==null?void 0:l.getChild(this.omitSequenceTags?void 0:"seq:step:1")}));for(let _=1;_<c.length;_+=1)b=await c[_].transform(b,Gt(o,{callbacks:l==null?void 0:l.getChild(this.omitSequenceTags?void 0:`seq:step:${_+1}`)}));for await(const _ of b)if((g=t==null?void 0:t.signal)==null||g.throwIfAborted(),yield _,d)if(h===void 0)h=_;else try{h=fr(h,_)}catch{h=void 0,d=!1}}catch(b){throw await(l==null?void 0:l.handleChainError(b)),b}await(l==null?void 0:l.handleChainEnd(Nt(h,"output")))}getGraph(e){const t=new Bd;let r=null;return this.steps.forEach((i,o)=>{const l=i.getGraph(e);o!==0&&l.trimFirstNode(),o!==this.steps.length-1&&l.trimLastNode(),t.extend(l);const c=l.firstNode();if(!c)throw new Error(`Runnable ${i} has no first node`);r&&t.addEdge(r,c),r=l.lastNode()}),t}pipe(e){return na.isRunnableSequence(e)?new na({first:this.first,middle:this.middle.concat([this.last,e.first,...e.middle]),last:e.last,name:this.name??e.name}):new na({first:this.first,middle:[...this.middle,this.last],last:Ci(e),name:this.name})}static isRunnableSequence(e){return Array.isArray(e.middle)&&jt.isRunnable(e)}static from([e,...t],r){let i={};return typeof r=="string"?i.name=r:r!==void 0&&(i=r),new na({...i,first:Ci(e),middle:t.slice(0,-1).map(Ci),last:Ci(t[t.length-1])})}}class yo extends jt{static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(const[t,r]of Object.entries(e.steps))this.steps[t]=Ci(r)}static from(e){return new yo({steps:e})}async invoke(e,t){const r=ze(t),i=await cr(r),o=await(i==null?void 0:i.handleChainStart(this.toJSON(),{input:e},r.runId,void 0,void 0,void 0,r==null?void 0:r.runName));delete r.runId;const l={};try{const c=Object.entries(this.steps).map(async([d,h])=>{l[d]=await h.invoke(e,Gt(r,{callbacks:o==null?void 0:o.getChild(`map:key:${d}`)}))});await Qa(Promise.all(c),t==null?void 0:t.signal)}catch(c){throw await(o==null?void 0:o.handleChainError(c)),c}return await(o==null?void 0:o.handleChainEnd(l)),l}async*_transform(e,t,r){const i={...this.steps},o=HR(e,Object.keys(i).length),l=new Map(Object.entries(i).map(([c,d],h)=>{const m=d.transform(o[h],Gt(r,{callbacks:t==null?void 0:t.getChild(`map:key:${c}`)}));return[c,m.next().then(g=>({key:c,gen:m,result:g}))]}));for(;l.size;){const c=Promise.race(l.values()),{key:d,result:h,gen:m}=await Qa(c,r==null?void 0:r.signal);l.delete(d),h.done||(yield{[d]:h.value},l.set(d,m.next().then(g=>({key:d,gen:m,result:g}))))}}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){async function*r(){yield e}const i=ze(t),o=new go({generator:this.transform(r(),i),config:i});return await o.setup,Nn.fromAsyncGenerator(o)}}class A_ extends jt{constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!__(e.func))throw new Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=e.func}async invoke(e,t){const[r]=this._getOptionsList(t??{},1),i=await cr(r),o=this.func(Gt(r,{callbacks:i}),e);return Qa(o,r==null?void 0:r.signal)}async*_streamIterator(e,t){var o,l;const[r]=this._getOptionsList(t??{},1),i=await this.invoke(e,t);if(qy(i)){for await(const c of i)(o=r==null?void 0:r.signal)==null||o.throwIfAborted(),yield c;return}if(FU(i)){for(;;){(l=r==null?void 0:r.signal)==null||l.throwIfAborted();const c=i.next();if(c.done)break;yield c.value}return}yield i}static from(e){return new A_({func:e})}}function ZU(n){if(__(n))throw new Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}class bo extends jt{static lc_name(){return"RunnableLambda"}constructor(e){if(__(e.func))return A_.from(e.func);super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),ZU(e.func),this.func=e.func}static from(e){return new bo({func:e})}async _invoke(e,t,r){return new Promise((i,o)=>{const l=Gt(t,{callbacks:r==null?void 0:r.getChild(),recursionLimit:((t==null?void 0:t.recursionLimit)??$g)-1});Ja.runWithConfig(ro(l),async()=>{var c,d;try{let h=await this.func(e,{...l});if(h&&jt.isRunnable(h)){if((t==null?void 0:t.recursionLimit)===0)throw new Error("Recursion limit reached.");h=await h.invoke(e,{...l,recursionLimit:(l.recursionLimit??$g)-1})}else if(qy(h)){let m;for await(const g of Fy(l,h))if((c=t==null?void 0:t.signal)==null||c.throwIfAborted(),m===void 0)m=g;else try{m=fr(m,g)}catch{m=g}h=m}else if(QE(h)){let m;for(const g of WE(l,h))if((d=t==null?void 0:t.signal)==null||d.throwIfAborted(),m===void 0)m=g;else try{m=fr(m,g)}catch{m=g}h=m}i(h)}catch(h){o(h)}})})}async invoke(e,t){return this._callWithConfig(this._invoke.bind(this),e,t)}async*_transform(e,t,r){var c,d;let i;for await(const h of e)if(i===void 0)i=h;else try{i=fr(i,h)}catch{i=h}const o=Gt(r,{callbacks:t==null?void 0:t.getChild(),recursionLimit:((r==null?void 0:r.recursionLimit)??$g)-1}),l=await new Promise((h,m)=>{Ja.runWithConfig(ro(o),async()=>{try{const g=await this.func(i,{...o,config:o});h(g)}catch(g){m(g)}})});if(l&&jt.isRunnable(l)){if((r==null?void 0:r.recursionLimit)===0)throw new Error("Recursion limit reached.");const h=await l.stream(i,o);for await(const m of h)yield m}else if(qy(l))for await(const h of Fy(o,l))(c=r==null?void 0:r.signal)==null||c.throwIfAborted(),yield h;else if(QE(l))for(const h of WE(o,l))(d=r==null?void 0:r.signal)==null||d.throwIfAborted(),yield h;else yield l}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){async function*r(){yield e}const i=ze(t),o=new go({generator:this.transform(r(),i),config:i});return await o.setup,Nn.fromAsyncGenerator(o)}}class GU extends jt{static lc_name(){return"RunnableWithFallbacks"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fallbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=e.runnable,this.fallbacks=e.fallbacks}*runnables(){yield this.runnable;for(const e of this.fallbacks)yield e}async invoke(e,t){const r=ze(t),i=await cr(r),{runId:o,...l}=r,c=await(i==null?void 0:i.handleChainStart(this.toJSON(),Nt(e,"input"),o,void 0,void 0,void 0,l==null?void 0:l.runName)),d=Gt(l,{callbacks:c==null?void 0:c.getChild()});return await Ja.runWithConfig(d,async()=>{var g;let m;for(const b of this.runnables()){(g=r==null?void 0:r.signal)==null||g.throwIfAborted();try{const _=await b.invoke(e,d);return await(c==null?void 0:c.handleChainEnd(Nt(_,"output"))),_}catch(_){m===void 0&&(m=_)}}throw m===void 0?new Error("No error stored at end of fallback."):(await(c==null?void 0:c.handleChainError(m)),m)})}async*_streamIterator(e,t){var g;const r=ze(t),i=await cr(r),{runId:o,...l}=r,c=await(i==null?void 0:i.handleChainStart(this.toJSON(),Nt(e,"input"),o,void 0,void 0,void 0,l==null?void 0:l.runName));let d,h;for(const b of this.runnables()){(g=r==null?void 0:r.signal)==null||g.throwIfAborted();const _=Gt(l,{callbacks:c==null?void 0:c.getChild()});try{const v=await b.stream(e,_);h=Fy(_,v);break}catch(v){d===void 0&&(d=v)}}if(h===void 0){const b=d??new Error("No error stored at end of fallback.");throw await(c==null?void 0:c.handleChainError(b)),b}let m;try{for await(const b of h){yield b;try{m=m===void 0?m:fr(m,b)}catch{m=void 0}}}catch(b){throw await(c==null?void 0:c.handleChainError(b)),b}await(c==null?void 0:c.handleChainEnd(Nt(m,"output")))}async batch(e,t,r){var d;if(r!=null&&r.returnExceptions)throw new Error("Not implemented.");const i=this._getOptionsList(t??{},e.length),o=await Promise.all(i.map(h=>cr(h))),l=await Promise.all(o.map(async(h,m)=>{const g=await(h==null?void 0:h.handleChainStart(this.toJSON(),Nt(e[m],"input"),i[m].runId,void 0,void 0,void 0,i[m].runName));return delete i[m].runId,g}));let c;for(const h of this.runnables()){(d=i[0].signal)==null||d.throwIfAborted();try{const m=await h.batch(e,l.map((g,b)=>Gt(i[b],{callbacks:g==null?void 0:g.getChild()})),r);return await Promise.all(l.map((g,b)=>g==null?void 0:g.handleChainEnd(Nt(m[b],"output")))),m}catch(m){c===void 0&&(c=m)}}throw c?(await Promise.all(l.map(h=>h==null?void 0:h.handleChainError(c))),c):new Error("No error stored at end of fallbacks.")}}function Ci(n){if(typeof n=="function")return new bo({func:n});if(jt.isRunnable(n))return n;if(!Array.isArray(n)&&typeof n=="object"){const e={};for(const[t,r]of Object.entries(n))e[t]=Ci(r);return new yo({steps:e})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}class QR extends jt{static lc_name(){return"RunnableAssign"}constructor(e){e instanceof yo&&(e={mapper:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.mapper=e.mapper}async invoke(e,t){const r=await this.mapper.invoke(e,t);return{...e,...r}}async*_transform(e,t,r){const i=this.mapper.getStepsKeys(),[o,l]=HR(e),c=this.mapper.transform(l,Gt(r,{callbacks:t==null?void 0:t.getChild()})),d=c.next();for await(const h of o){if(typeof h!="object"||Array.isArray(h))throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof h}`);const m=Object.fromEntries(Object.entries(h).filter(([g])=>!i.includes(g)));Object.keys(m).length>0&&(yield m)}yield(await d).value;for await(const h of c)yield h}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){async function*r(){yield e}const i=ze(t),o=new go({generator:this.transform(r(),i),config:i});return await o.setup,Nn.fromAsyncGenerator(o)}}class YU extends jt{static lc_name(){return"RunnablePick"}constructor(e){(typeof e=="string"||Array.isArray(e))&&(e={keys:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"keys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keys=e.keys}async _pick(e){if(typeof this.keys=="string")return e[this.keys];{const t=this.keys.map(r=>[r,e[r]]).filter(r=>r[1]!==void 0);return t.length===0?void 0:Object.fromEntries(t)}}async invoke(e,t){return this._callWithConfig(this._pick.bind(this),e,t)}async*_transform(e){for await(const t of e){const r=await this._pick(t);r!==void 0&&(yield r)}}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){async function*r(){yield e}const i=ze(t),o=new go({generator:this.transform(r(),i),config:i});return await o.setup,Nn.fromAsyncGenerator(o)}}class ex extends ki{constructor(e){const t=na.from([bo.from(async r=>{let i;if(_R(r))try{i=await this.schema.parseAsync(r.args)}catch{throw new CD("Received tool input did not match expected schema",JSON.stringify(r.args))}else i=r;return i}).withConfig({runName:`${e.name}:parse_input`}),e.bound]).withConfig({runName:e.name});super({bound:t,config:e.config??{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.description=e.description,this.schema=e.schema}static lc_name(){return"RunnableToolLike"}}function XU(n,e){var i;const t=e.name??n.getName(),r=e.description??((i=e.schema)==null?void 0:i.description);return e.schema.constructor===Va.ZodString?new ex({name:t,description:r,schema:Va.object({input:Va.string()}).transform(o=>o.input),bound:n}):new ex({name:t,description:r,schema:e.schema,bound:n})}/*
 * [js-sha1]{@link https://github.com/emn178/js-sha1}
 *
 * @version 0.6.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */var KU=typeof window=="object"?window:{},Ce="0123456789abcdef".split(""),JU=[-2147483648,8388608,32768,128],Qn=[24,16,8,0],Ct=[];function hr(n){n?(Ct[0]=Ct[16]=Ct[1]=Ct[2]=Ct[3]=Ct[4]=Ct[5]=Ct[6]=Ct[7]=Ct[8]=Ct[9]=Ct[10]=Ct[11]=Ct[12]=Ct[13]=Ct[14]=Ct[15]=0,this.blocks=Ct):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}hr.prototype.update=function(n){if(!this.finalized){var e=typeof n!="string";e&&n.constructor===KU.ArrayBuffer&&(n=new Uint8Array(n));for(var t,r=0,i,o=n.length||0,l=this.blocks;r<o;){if(this.hashed&&(this.hashed=!1,l[0]=this.block,l[16]=l[1]=l[2]=l[3]=l[4]=l[5]=l[6]=l[7]=l[8]=l[9]=l[10]=l[11]=l[12]=l[13]=l[14]=l[15]=0),e)for(i=this.start;r<o&&i<64;++r)l[i>>2]|=n[r]<<Qn[i++&3];else for(i=this.start;r<o&&i<64;++r)t=n.charCodeAt(r),t<128?l[i>>2]|=t<<Qn[i++&3]:t<2048?(l[i>>2]|=(192|t>>6)<<Qn[i++&3],l[i>>2]|=(128|t&63)<<Qn[i++&3]):t<55296||t>=57344?(l[i>>2]|=(224|t>>12)<<Qn[i++&3],l[i>>2]|=(128|t>>6&63)<<Qn[i++&3],l[i>>2]|=(128|t&63)<<Qn[i++&3]):(t=65536+((t&1023)<<10|n.charCodeAt(++r)&1023),l[i>>2]|=(240|t>>18)<<Qn[i++&3],l[i>>2]|=(128|t>>12&63)<<Qn[i++&3],l[i>>2]|=(128|t>>6&63)<<Qn[i++&3],l[i>>2]|=(128|t&63)<<Qn[i++&3]);this.lastByteIndex=i,this.bytes+=i-this.start,i>=64?(this.block=l[16],this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}};hr.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var n=this.blocks,e=this.lastByteIndex;n[16]=this.block,n[e>>2]|=JU[e&3],this.block=n[16],e>=56&&(this.hashed||this.hash(),n[0]=this.block,n[16]=n[1]=n[2]=n[3]=n[4]=n[5]=n[6]=n[7]=n[8]=n[9]=n[10]=n[11]=n[12]=n[13]=n[14]=n[15]=0),n[14]=this.hBytes<<3|this.bytes>>>29,n[15]=this.bytes<<3,this.hash()}};hr.prototype.hash=function(){var n=this.h0,e=this.h1,t=this.h2,r=this.h3,i=this.h4,o,l,c,d=this.blocks;for(l=16;l<80;++l)c=d[l-3]^d[l-8]^d[l-14]^d[l-16],d[l]=c<<1|c>>>31;for(l=0;l<20;l+=5)o=e&t|~e&r,c=n<<5|n>>>27,i=c+o+i+1518500249+d[l]<<0,e=e<<30|e>>>2,o=n&e|~n&t,c=i<<5|i>>>27,r=c+o+r+1518500249+d[l+1]<<0,n=n<<30|n>>>2,o=i&n|~i&e,c=r<<5|r>>>27,t=c+o+t+1518500249+d[l+2]<<0,i=i<<30|i>>>2,o=r&i|~r&n,c=t<<5|t>>>27,e=c+o+e+1518500249+d[l+3]<<0,r=r<<30|r>>>2,o=t&r|~t&i,c=e<<5|e>>>27,n=c+o+n+1518500249+d[l+4]<<0,t=t<<30|t>>>2;for(;l<40;l+=5)o=e^t^r,c=n<<5|n>>>27,i=c+o+i+1859775393+d[l]<<0,e=e<<30|e>>>2,o=n^e^t,c=i<<5|i>>>27,r=c+o+r+1859775393+d[l+1]<<0,n=n<<30|n>>>2,o=i^n^e,c=r<<5|r>>>27,t=c+o+t+1859775393+d[l+2]<<0,i=i<<30|i>>>2,o=r^i^n,c=t<<5|t>>>27,e=c+o+e+1859775393+d[l+3]<<0,r=r<<30|r>>>2,o=t^r^i,c=e<<5|e>>>27,n=c+o+n+1859775393+d[l+4]<<0,t=t<<30|t>>>2;for(;l<60;l+=5)o=e&t|e&r|t&r,c=n<<5|n>>>27,i=c+o+i-1894007588+d[l]<<0,e=e<<30|e>>>2,o=n&e|n&t|e&t,c=i<<5|i>>>27,r=c+o+r-1894007588+d[l+1]<<0,n=n<<30|n>>>2,o=i&n|i&e|n&e,c=r<<5|r>>>27,t=c+o+t-1894007588+d[l+2]<<0,i=i<<30|i>>>2,o=r&i|r&n|i&n,c=t<<5|t>>>27,e=c+o+e-1894007588+d[l+3]<<0,r=r<<30|r>>>2,o=t&r|t&i|r&i,c=e<<5|e>>>27,n=c+o+n-1894007588+d[l+4]<<0,t=t<<30|t>>>2;for(;l<80;l+=5)o=e^t^r,c=n<<5|n>>>27,i=c+o+i-899497514+d[l]<<0,e=e<<30|e>>>2,o=n^e^t,c=i<<5|i>>>27,r=c+o+r-899497514+d[l+1]<<0,n=n<<30|n>>>2,o=i^n^e,c=r<<5|r>>>27,t=c+o+t-899497514+d[l+2]<<0,i=i<<30|i>>>2,o=r^i^n,c=t<<5|t>>>27,e=c+o+e-899497514+d[l+3]<<0,r=r<<30|r>>>2,o=t^r^i,c=e<<5|e>>>27,n=c+o+n-899497514+d[l+4]<<0,t=t<<30|t>>>2;this.h0=this.h0+n<<0,this.h1=this.h1+e<<0,this.h2=this.h2+t<<0,this.h3=this.h3+r<<0,this.h4=this.h4+i<<0};hr.prototype.hex=function(){this.finalize();var n=this.h0,e=this.h1,t=this.h2,r=this.h3,i=this.h4;return Ce[n>>28&15]+Ce[n>>24&15]+Ce[n>>20&15]+Ce[n>>16&15]+Ce[n>>12&15]+Ce[n>>8&15]+Ce[n>>4&15]+Ce[n&15]+Ce[e>>28&15]+Ce[e>>24&15]+Ce[e>>20&15]+Ce[e>>16&15]+Ce[e>>12&15]+Ce[e>>8&15]+Ce[e>>4&15]+Ce[e&15]+Ce[t>>28&15]+Ce[t>>24&15]+Ce[t>>20&15]+Ce[t>>16&15]+Ce[t>>12&15]+Ce[t>>8&15]+Ce[t>>4&15]+Ce[t&15]+Ce[r>>28&15]+Ce[r>>24&15]+Ce[r>>20&15]+Ce[r>>16&15]+Ce[r>>12&15]+Ce[r>>8&15]+Ce[r>>4&15]+Ce[r&15]+Ce[i>>28&15]+Ce[i>>24&15]+Ce[i>>20&15]+Ce[i>>16&15]+Ce[i>>12&15]+Ce[i>>8&15]+Ce[i>>4&15]+Ce[i&15]};hr.prototype.toString=hr.prototype.hex;hr.prototype.digest=function(){this.finalize();var n=this.h0,e=this.h1,t=this.h2,r=this.h3,i=this.h4;return[n>>24&255,n>>16&255,n>>8&255,n&255,e>>24&255,e>>16&255,e>>8&255,e&255,t>>24&255,t>>16&255,t>>8&255,t&255,r>>24&255,r>>16&255,r>>8&255,r&255,i>>24&255,i>>16&255,i>>8&255,i&255]};hr.prototype.array=hr.prototype.digest;hr.prototype.arrayBuffer=function(){this.finalize();var n=new ArrayBuffer(20),e=new DataView(n);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),n};const QU=n=>new hr(!0).update(n).hex(),tx=(...n)=>QU(n.join("_"));class WU{}const eB=new Map;class T_ extends WU{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e??new Map}lookup(e,t){return Promise.resolve(this.cache.get(tx(e,t))??null)}async update(e,t,r){this.cache.set(tx(e,t),r)}static global(){return new T_(eB)}}class WR extends Ii{}class tB extends WR{static lc_name(){return"StringPromptValue"}constructor(e){super({value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new jl(this.value)]}}class nB extends WR{static lc_name(){return"ChatPromptValue"}constructor(e){Array.isArray(e)&&(e={messages:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return vR(this.messages)}toChatMessages(){return this.messages}}var Su={},nx;function rB(){if(nx)return Su;nx=1,Su.byteLength=c,Su.toByteArray=h,Su.fromByteArray=b;for(var n=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=r.length;i<o;++i)n[i]=r[i],e[r.charCodeAt(i)]=i;e[45]=62,e[95]=63;function l(_){var v=_.length;if(v%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var S=_.indexOf("=");S===-1&&(S=v);var A=S===v?0:4-S%4;return[S,A]}function c(_){var v=l(_),S=v[0],A=v[1];return(S+A)*3/4-A}function d(_,v,S){return(v+S)*3/4-S}function h(_){var v,S=l(_),A=S[0],E=S[1],O=new t(d(_,A,E)),x=0,j=E>0?A-4:A,P;for(P=0;P<j;P+=4)v=e[_.charCodeAt(P)]<<18|e[_.charCodeAt(P+1)]<<12|e[_.charCodeAt(P+2)]<<6|e[_.charCodeAt(P+3)],O[x++]=v>>16&255,O[x++]=v>>8&255,O[x++]=v&255;return E===2&&(v=e[_.charCodeAt(P)]<<2|e[_.charCodeAt(P+1)]>>4,O[x++]=v&255),E===1&&(v=e[_.charCodeAt(P)]<<10|e[_.charCodeAt(P+1)]<<4|e[_.charCodeAt(P+2)]>>2,O[x++]=v>>8&255,O[x++]=v&255),O}function m(_){return n[_>>18&63]+n[_>>12&63]+n[_>>6&63]+n[_&63]}function g(_,v,S){for(var A,E=[],O=v;O<S;O+=3)A=(_[O]<<16&16711680)+(_[O+1]<<8&65280)+(_[O+2]&255),E.push(m(A));return E.join("")}function b(_){for(var v,S=_.length,A=S%3,E=[],O=16383,x=0,j=S-A;x<j;x+=O)E.push(g(_,x,x+O>j?j:x+O));return A===1?(v=_[S-1],E.push(n[v>>2]+n[v<<4&63]+"==")):A===2&&(v=(_[S-2]<<8)+_[S-1],E.push(n[v>>10]+n[v>>4&63]+n[v<<2&63]+"=")),E.join("")}return Su}var aB=rB();const iB=Mr(aB);var sB=Object.defineProperty,oB=(n,e,t)=>e in n?sB(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,uB=(n,e,t)=>(oB(n,e+"",t),t);function lB(n,e){let t=Array.from({length:n.length},(r,i)=>({start:i,end:i+1}));for(;t.length>1;){let r=null;for(let i=0;i<t.length-1;i++){const o=n.slice(t[i].start,t[i+1].end),l=e.get(o.join(","));l!=null&&(r==null||l<r[0])&&(r=[l,i])}if(r!=null){const i=r[1];t[i]={start:t[i].start,end:t[i+1].end},t.splice(i+1,1)}else break}return t}function cB(n,e){return n.length===1?[e.get(n.join(","))]:lB(n,e).map(t=>e.get(n.slice(t.start,t.end).join(","))).filter(t=>t!=null)}function fB(n){return n.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var Hy=class{constructor(n,e){Na(this,"specialTokens");Na(this,"inverseSpecialTokens");Na(this,"patStr");Na(this,"textEncoder",new TextEncoder);Na(this,"textDecoder",new TextDecoder("utf-8"));Na(this,"rankMap",new Map);Na(this,"textMap",new Map);this.patStr=n.pat_str;const t=n.bpe_ranks.split(`
`).filter(Boolean).reduce((r,i)=>{const[o,l,...c]=i.split(" "),d=Number.parseInt(l,10);return c.forEach((h,m)=>r[h]=d+m),r},{});for(const[r,i]of Object.entries(t)){const o=iB.toByteArray(r);this.rankMap.set(o.join(","),i),this.textMap.set(i,o)}this.specialTokens={...n.special_tokens,...e},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((r,[i,o])=>(r[o]=this.textEncoder.encode(i),r),{})}encode(n,e=[],t="all"){const r=new RegExp(this.patStr,"ug"),i=Hy.specialTokenRegex(Object.keys(this.specialTokens)),o=[],l=new Set(e==="all"?Object.keys(this.specialTokens):e),c=new Set(t==="all"?Object.keys(this.specialTokens).filter(h=>!l.has(h)):t);if(c.size>0){const h=Hy.specialTokenRegex([...c]),m=n.match(h);if(m!=null)throw new Error(`The text contains a special token that is not allowed: ${m[0]}`)}let d=0;for(;;){let h=null,m=d;for(;i.lastIndex=m,h=i.exec(n),!(h==null||l.has(h[0]));)m=h.index+1;const g=(h==null?void 0:h.index)??n.length;for(const _ of n.substring(d,g).matchAll(r)){const v=this.textEncoder.encode(_[0]),S=this.rankMap.get(v.join(","));if(S!=null){o.push(S);continue}o.push(...cB(v,this.rankMap))}if(h==null)break;let b=this.specialTokens[h[0]];o.push(b),d=h.index+h[0].length}return o}decode(n){const e=[];let t=0;for(let o=0;o<n.length;++o){const l=n[o],c=this.textMap.get(l)??this.inverseSpecialTokens[l];c!=null&&(e.push(c),t+=c.length)}const r=new Uint8Array(t);let i=0;for(const o of e)r.set(o,i),i+=o.length;return this.textDecoder.decode(r)}},eC=Hy;uB(eC,"specialTokenRegex",n=>new RegExp(n.map(e=>fB(e)).join("|"),"g"));function dB(n){switch(n){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":case"text-embedding-3-small":case"text-embedding-3-large":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4o-2024-11-20":case"gpt-4o-mini-2024-07-18":case"gpt-4o-mini":case"gpt-4o-search-preview":case"gpt-4o-search-preview-2025-03-11":case"gpt-4o-mini-search-preview":case"gpt-4o-mini-search-preview-2025-03-11":case"gpt-4o-audio-preview":case"gpt-4o-audio-preview-2024-12-17":case"gpt-4o-audio-preview-2024-10-01":case"gpt-4o-mini-audio-preview":case"gpt-4o-mini-audio-preview-2024-12-17":case"o1":case"o1-2024-12-17":case"o1-mini":case"o1-mini-2024-09-12":case"o1-preview":case"o1-preview-2024-09-12":case"o1-pro":case"o1-pro-2025-03-19":case"o3":case"o3-2025-04-16":case"o3-mini":case"o3-mini-2025-01-31":case"o4-mini":case"o4-mini-2025-04-16":case"chatgpt-4o-latest":case"gpt-4o-realtime":case"gpt-4o-realtime-preview-2024-10-01":case"gpt-4o-realtime-preview-2024-12-17":case"gpt-4o-mini-realtime-preview":case"gpt-4o-mini-realtime-preview-2024-12-17":case"gpt-4.1":case"gpt-4.1-2025-04-14":case"gpt-4.1-mini":case"gpt-4.1-mini-2025-04-14":case"gpt-4.1-nano":case"gpt-4.1-nano-2025-04-14":case"gpt-4.5-preview":case"gpt-4.5-preview-2025-02-27":return"o200k_base";default:throw new Error("Unknown model")}}const _f={},hB=new w_({});async function mB(n){return n in _f||(_f[n]=hB.fetch(`https://tiktoken.pages.dev/js/${n}.json`).then(e=>e.json()).then(e=>new eC(e)).catch(e=>{throw delete _f[n],e})),await _f[n]}async function pB(n){return mB(dB(n))}const gB=n=>n.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":n.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":n.startsWith("gpt-4-32k")?"gpt-4-32k":n.startsWith("gpt-4-")?"gpt-4":n.startsWith("gpt-4o")?"gpt-4o":n;function tC(n){return typeof n!="object"||!n?!1:!!("type"in n&&n.type==="function"&&"function"in n&&typeof n.function=="object"&&n.function&&"name"in n.function&&"parameters"in n.function)}const yB=()=>!1;class bB extends jt{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=e.verbose??yB(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}}class _B extends bB{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor({callbacks:e,callbackManager:t,...r}){const{cache:i,...o}=r;super({callbacks:e??t,...o}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof i=="object"?this.cache=i:i?this.cache=T_.global():this.cache=void 0,this.caller=new w_(r??{})}async getNumTokens(e){if(typeof e!="string")return 0;let t=Math.ceil(e.length/4);if(!this._encoding)try{this._encoding=await pB("modelName"in this?gB(this.modelName):"gpt2")}catch(r){console.warn("Failed to calculate number of tokens, falling back to approximate count",r)}if(this._encoding)try{t=this._encoding.encode(e).length}catch(r){console.warn("Failed to calculate number of tokens, falling back to approximate count",r)}return t}static _convertInputToPromptValue(e){return typeof e=="string"?new tB(e):Array.isArray(e)?new nB(e.map(ju)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall({config:e,...t}){const r={...this._identifyingParams(),...t,_type:this._llmType(),_model:this._modelType()};return Object.entries(r).filter(([l,c])=>c!==void 0).map(([l,c])=>`${l}:${JSON.stringify(c)}`).sort().join(",")}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){throw new Error("Use .toJSON() instead")}}class sd extends jt{static lc_name(){return"RunnablePassthrough"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e&&(this.func=e.func)}async invoke(e,t){const r=ze(t);return this.func&&await this.func(e,r),this._callWithConfig(i=>Promise.resolve(i),e,r)}async*transform(e,t){const r=ze(t);let i,o=!0;for await(const l of this._transformStreamWithConfig(e,c=>c,r))if(yield l,o)if(i===void 0)i=l;else try{i=fr(i,l)}catch{i=void 0,o=!1}this.func&&i!==void 0&&await this.func(i,r)}static assign(e){return new QR(new yo({steps:e}))}}function E_(n){var r;if(!n||typeof n!="object"||Array.isArray(n))return!1;const e=n;return e._def||Object.values(Va.ZodFirstPartyTypeKind).includes(((r=e.constructor)==null?void 0:r.name)??"NOT_INCLUDED")?!0:typeof e.parse=="function"&&typeof e.parseAsync=="function"&&typeof e.safeParse=="function"&&typeof e.safeParseAsync=="function"}function Vg(n){const e=[];for(const t of n){let r=t;if(Array.isArray(t.content))for(let i=0;i<t.content.length;i++){const o=t.content[i];(_D(o)||vD(o))&&r===t&&(r=new t.constructor({...r,content:[...t.content.slice(0,i),wD(o),...t.content.slice(i+1)]}))}e.push(r)}return e}class Ua extends _B{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models",this._llmType()]}),Object.defineProperty(this,"disableStreaming",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_separateRunnableConfigFromCallOptionsCompat(e){const[t,r]=super._separateRunnableConfigFromCallOptions(e);return r.signal=t.signal,[t,r]}async invoke(e,t){const r=Ua._convertInputToPromptValue(e);return(await this.generatePrompt([r],t,t==null?void 0:t.callbacks)).generations[0][0].message}async*_streamResponseChunks(e,t,r){throw new Error("Not implemented.")}async*_streamIterator(e,t){var r;if(this._streamResponseChunks===Ua.prototype._streamResponseChunks||this.disableStreaming)yield this.invoke(e,t);else{const o=Ua._convertInputToPromptValue(e).toChatMessages(),[l,c]=this._separateRunnableConfigFromCallOptionsCompat(t),d={...l.metadata,...this.getLsParams(c)},h=await mn.configure(l.callbacks,this.callbacks,l.tags,this.tags,d,this.metadata,{verbose:this.verbose}),m={options:c,invocation_params:this==null?void 0:this.invocationParams(c),batch_size:1},g=await(h==null?void 0:h.handleChatModelStart(this.toJSON(),[Vg(o)],l.runId,void 0,m,void 0,void 0,l.runName));let b,_;try{for await(const v of this._streamResponseChunks(o,c,g==null?void 0:g[0])){if(v.message.id==null){const S=(r=g==null?void 0:g.at(0))==null?void 0:r.runId;S!=null&&v.message._updateId(`run-${S}`)}v.message.response_metadata={...v.generationInfo,...v.message.response_metadata},yield v.message,b?b=b.concat(v):b=v,ST(v.message)&&v.message.usage_metadata!==void 0&&(_={tokenUsage:{promptTokens:v.message.usage_metadata.input_tokens,completionTokens:v.message.usage_metadata.output_tokens,totalTokens:v.message.usage_metadata.total_tokens}})}}catch(v){throw await Promise.all((g??[]).map(S=>S==null?void 0:S.handleLLMError(v))),v}await Promise.all((g??[]).map(v=>v==null?void 0:v.handleLLMEnd({generations:[[b]],llmOutput:_})))}}getLsParams(e){const t=this.getName().startsWith("Chat")?this.getName().replace("Chat",""):this.getName();return{ls_model_type:"chat",ls_stop:e.stop,ls_provider:t}}async _generateUncached(e,t,r,i){var g,b;const o=e.map(_=>_.map(ju));let l;if(i!==void 0&&i.length===o.length)l=i;else{const _={...r.metadata,...this.getLsParams(t)},v=await mn.configure(r.callbacks,this.callbacks,r.tags,this.tags,_,this.metadata,{verbose:this.verbose}),S={options:t,invocation_params:this==null?void 0:this.invocationParams(t),batch_size:1};l=await(v==null?void 0:v.handleChatModelStart(this.toJSON(),o.map(Vg),r.runId,void 0,S,void 0,void 0,r.runName))}const c=[],d=[];if(!!(l!=null&&l[0].handlers.find(S3))&&!this.disableStreaming&&o.length===1&&this._streamResponseChunks!==Ua.prototype._streamResponseChunks)try{const _=await this._streamResponseChunks(o[0],t,l==null?void 0:l[0]);let v,S;for await(const A of _){if(A.message.id==null){const E=(g=l==null?void 0:l.at(0))==null?void 0:g.runId;E!=null&&A.message._updateId(`run-${E}`)}v===void 0?v=A:v=fr(v,A),ST(A.message)&&A.message.usage_metadata!==void 0&&(S={tokenUsage:{promptTokens:A.message.usage_metadata.input_tokens,completionTokens:A.message.usage_metadata.output_tokens,totalTokens:A.message.usage_metadata.total_tokens}})}if(v===void 0)throw new Error("Received empty response from chat model call.");c.push([v]),await(l==null?void 0:l[0].handleLLMEnd({generations:c,llmOutput:S}))}catch(_){throw await(l==null?void 0:l[0].handleLLMError(_)),_}else{const _=await Promise.allSettled(o.map((v,S)=>this._generate(v,{...t,promptIndex:S},l==null?void 0:l[S])));await Promise.all(_.map(async(v,S)=>{var A,E,O;if(v.status==="fulfilled"){const x=v.value;for(const j of x.generations){if(j.message.id==null){const P=(A=l==null?void 0:l.at(0))==null?void 0:A.runId;P!=null&&j.message._updateId(`run-${P}`)}j.message.response_metadata={...j.generationInfo,...j.message.response_metadata}}return x.generations.length===1&&(x.generations[0].message.response_metadata={...x.llmOutput,...x.generations[0].message.response_metadata}),c[S]=x.generations,d[S]=x.llmOutput,(E=l==null?void 0:l[S])==null?void 0:E.handleLLMEnd({generations:[x.generations],llmOutput:x.llmOutput})}else return await((O=l==null?void 0:l[S])==null?void 0:O.handleLLMError(v.reason)),Promise.reject(v.reason)}))}const m={generations:c,llmOutput:d.length?(b=this._combineLLMOutput)==null?void 0:b.call(this,...d):void 0};return Object.defineProperty(m,GE,{value:l?{runIds:l==null?void 0:l.map(_=>_.runId)}:void 0,configurable:!0}),m}async _generateCached({messages:e,cache:t,llmStringKey:r,parsedOptions:i,handledOptions:o}){const l=e.map(A=>A.map(ju)),c={...o.metadata,...this.getLsParams(i)},d=await mn.configure(o.callbacks,this.callbacks,o.tags,this.tags,c,this.metadata,{verbose:this.verbose}),h={options:i,invocation_params:this==null?void 0:this.invocationParams(i),batch_size:1},m=await(d==null?void 0:d.handleChatModelStart(this.toJSON(),l.map(Vg),o.runId,void 0,h,void 0,void 0,o.runName)),g=[],_=(await Promise.allSettled(l.map(async(A,E)=>{const O=Ua._convertInputToPromptValue(A).toString(),x=await t.lookup(O,r);return x==null&&g.push(E),x}))).map((A,E)=>({result:A,runManager:m==null?void 0:m[E]})).filter(({result:A})=>A.status==="fulfilled"&&A.value!=null||A.status==="rejected"),v=[];await Promise.all(_.map(async({result:A,runManager:E},O)=>{if(A.status==="fulfilled"){const x=A.value;return v[O]=x.map(j=>("message"in j&&Cd(j.message)&&za(j.message)&&(j.message.usage_metadata={input_tokens:0,output_tokens:0,total_tokens:0}),j.generationInfo={...j.generationInfo,tokenUsage:{}},j)),x.length&&await(E==null?void 0:E.handleLLMNewToken(x[0].text)),E==null?void 0:E.handleLLMEnd({generations:[x]},void 0,void 0,void 0,{cached:!0})}else return await(E==null?void 0:E.handleLLMError(A.reason,void 0,void 0,void 0,{cached:!0})),Promise.reject(A.reason)}));const S={generations:v,missingPromptIndices:g,startedRunManagers:m};return Object.defineProperty(S,GE,{value:m?{runIds:m==null?void 0:m.map(A=>A.runId)}:void 0,configurable:!0}),S}async generate(e,t,r){let i;Array.isArray(t)?i={stop:t}:i=t;const o=e.map(v=>v.map(ju)),[l,c]=this._separateRunnableConfigFromCallOptionsCompat(i);if(l.callbacks=l.callbacks??r,!this.cache)return this._generateUncached(o,c,l);const{cache:d}=this,h=this._getSerializedCacheKeyParametersForCall(c),{generations:m,missingPromptIndices:g,startedRunManagers:b}=await this._generateCached({messages:o,cache:d,llmStringKey:h,parsedOptions:c,handledOptions:l});let _={};if(g.length>0){const v=await this._generateUncached(g.map(S=>o[S]),c,l,b!==void 0?g.map(S=>b==null?void 0:b[S]):void 0);await Promise.all(v.generations.map(async(S,A)=>{const E=g[A];m[E]=S;const O=Ua._convertInputToPromptValue(o[E]).toString();return d.update(O,h,S)})),_=v.llmOutput??{}}return{generations:m,llmOutput:_}}invocationParams(e){return{}}_modelType(){return"base_chat_model"}serialize(){return{...this.invocationParams(),_type:this._llmType(),_model:this._modelType()}}async generatePrompt(e,t,r){const i=e.map(o=>o.toChatMessages());return this.generate(i,t,r)}async call(e,t,r){return(await this.generate([e.map(ju)],t,r)).generations[0][0].message}async callPrompt(e,t,r){const i=e.toChatMessages();return this.call(i,t,r)}async predictMessages(e,t,r){return this.call(e,t,r)}async predict(e,t,r){const i=new jl(e),o=await this.call([i],t,r);if(typeof o.content!="string")throw new Error("Cannot use predict when output is not a string.");return o.content}withStructuredOutput(e,t){if(typeof this.bindTools!="function")throw new Error('Chat model must implement ".bindTools()" to use withStructuredOutput.');if(t!=null&&t.strict)throw new Error('"strict" mode is not supported for this model by default.');const r=e,i=t==null?void 0:t.name,o=r.description??"A function available to call.",l=t==null?void 0:t.method,c=t==null?void 0:t.includeRaw;if(l==="jsonMode")throw new Error('Base withStructuredOutput implementation only supports "functionCalling" as a method.');let d=i??"extract",h;E_(r)?h=[{type:"function",function:{name:d,description:o,parameters:Dl(r)}}]:("name"in r&&(d=r.name),h=[{type:"function",function:{name:d,description:o,parameters:r}}]);const m=this.bindTools(h),g=bo.from(S=>{if(!S.tool_calls||S.tool_calls.length===0)throw new Error("No tool calls found in the response.");const A=S.tool_calls.find(E=>E.name===d);if(!A)throw new Error(`No tool call found with name ${d}.`);return A.args});if(!c)return m.pipe(g).withConfig({runName:"StructuredOutput"});const b=sd.assign({parsed:(S,A)=>g.invoke(S.raw,A)}),_=sd.assign({parsed:()=>null}),v=b.withFallbacks({fallbacks:[_]});return na.from([{raw:m},v]).withConfig({runName:"StructuredOutputRunnable"})}}class vB extends jt{parseResultWithPrompt(e,t,r){return this.parseResult(e,r)}_baseMessageToString(e){return typeof e.content=="string"?e.content:this._baseMessageContentToString(e.content)}_baseMessageContentToString(e){return JSON.stringify(e)}async invoke(e,t){return typeof e=="string"?this._callWithConfig(async(r,i)=>this.parseResult([{text:r}],i==null?void 0:i.callbacks),e,{...t,runType:"parser"}):this._callWithConfig(async(r,i)=>this.parseResult([{message:r,text:this._baseMessageToString(r)}],i==null?void 0:i.callbacks),e,{...t,runType:"parser"})}}class nC extends vB{parseResult(e,t){return this.parse(e[0].text,t)}async parseWithPrompt(e,t,r){return this.parse(e,r)}_type(){throw new Error("_type not implemented")}}class x_ extends Error{constructor(e,t,r,i=!1){if(super(e),Object.defineProperty(this,"llmOutput",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"observation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sendToLLM",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.llmOutput=t,this.observation=r,this.sendToLLM=i,i&&(r===void 0||t===void 0))throw new Error("Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true");bR(this,"OUTPUT_PARSING_FAILURE")}}function Zy(n,e){const t=typeof n;if(t!==typeof e)return!1;if(Array.isArray(n)){if(!Array.isArray(e))return!1;const r=n.length;if(r!==e.length)return!1;for(let i=0;i<r;i++)if(!Zy(n[i],e[i]))return!1;return!0}if(t==="object"){if(!n||!e)return n===e;const r=Object.keys(n),i=Object.keys(e);if(r.length!==i.length)return!1;for(const l of r)if(!Zy(n[l],e[l]))return!1;return!0}return n===e}class wB extends nC{async*_transform(e){for await(const t of e)typeof t=="string"?yield this.parseResult([{text:t}]):yield this.parseResult([{message:t,text:this._baseMessageToString(t)}])}async*transform(e,t){yield*this._transformStreamWithConfig(e,this._transform.bind(this),{...t,runType:"parser"})}}class rC extends wB{constructor(e){super(e),Object.defineProperty(this,"diff",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.diff=(e==null?void 0:e.diff)??this.diff}async*_transform(e){let t,r;for await(const i of e){if(typeof i!="string"&&typeof i.content!="string")throw new Error("Cannot handle non-string output.");let o;if(xD(i)){if(typeof i.content!="string")throw new Error("Cannot handle non-string message output.");o=new Bi({message:i,text:i.content})}else if(Cd(i)){if(typeof i.content!="string")throw new Error("Cannot handle non-string message output.");o=new Bi({message:jD(i),text:i.content})}else o=new ao({text:i});r===void 0?r=o:r=r.concat(o);const l=await this.parsePartialResult([r]);l!=null&&!Zy(l,t)&&(this.diff?yield this._diff(t,l):yield l,t=l)}}getFormatInstructions(){return""}}class rx extends nC{static lc_name(){return"StructuredOutputParser"}toJSON(){return this.toJSONNotImplemented()}constructor(e){super(e),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","structured"]})}static fromZodSchema(e){return new this(e)}static fromNamesAndDescriptions(e){const t=Va.object(Object.fromEntries(Object.entries(e).map(([r,i])=>[r,Va.string().describe(i)])));return new this(t)}getFormatInstructions(){return`You must format your output as a JSON value that adheres to a given "JSON Schema" instance.

"JSON Schema" is a declarative language that allows you to annotate and validate JSON documents.

For example, the example "JSON Schema" instance {{"properties": {{"foo": {{"description": "a list of test words", "type": "array", "items": {{"type": "string"}}}}}}, "required": ["foo"]}}
would match an object with one required property, "foo". The "type" property specifies "foo" must be an "array", and the "description" property semantically describes it as "a list of test words". The items within "foo" must be strings.
Thus, the object {{"foo": ["bar", "baz"]}} is a well-formatted instance of this example "JSON Schema". The object {{"properties": {{"foo": ["bar", "baz"]}}}} is not well-formatted.

Your output will be parsed and type-checked according to the provided schema instance, so make sure all fields in your output match the schema exactly and there are no trailing commas!

Here is the JSON Schema instance your output must adhere to. Include the enclosing markdown codeblock:
\`\`\`json
${JSON.stringify(Dl(this.schema))}
\`\`\`
`}async parse(e){try{const r=(e.includes("```")?e.trim().split(/```(?:json)?/)[1]:e.trim()).replace(/"([^"\\]*(\\.[^"\\]*)*)"/g,(i,o)=>`"${o.replace(/\n/g,"\\n")}"`).replace(/\n/g,"");return await this.schema.parseAsync(JSON.parse(r))}catch(t){throw new x_(`Failed to parse. Text: "${e}". Error: ${t}`,e)}}}class ax extends rC{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"JsonOutputParser"}_diff(e,t){if(t)return e?m3(e,t):[{op:"replace",path:"",value:t}]}async parsePartialResult(e){return gT(e[0].text)}async parse(e){return gT(e,JSON.parse)}getFormatInstructions(){return""}}function O_(n,e){if(n.function===void 0)return;let t;if(e!=null&&e.partial)try{t=c_(n.function.arguments??"{}")}catch{return}else try{t=JSON.parse(n.function.arguments)}catch(i){throw new x_([`Function "${n.function.name}" arguments:`,"",n.function.arguments,"","are not valid JSON.",`Error: ${i.message}`].join(`
`))}const r={name:n.function.name,args:t,type:"tool_call"};return e!=null&&e.returnId&&(r.id=n.id),r}function SB(n){if(n.id===void 0)throw new Error('All OpenAI tool calls must have an "id" field.');return{id:n.id,type:"function",function:{name:n.name,arguments:JSON.stringify(n.args)}}}function aC(n,e){var t,r;return{name:(t=n.function)==null?void 0:t.name,args:(r=n.function)==null?void 0:r.arguments,id:n.id,error:e,type:"invalid_tool_call"}}class AB extends rC{static lc_name(){return"JsonOutputToolsParser"}constructor(e){super(e),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.returnId=(e==null?void 0:e.returnId)??this.returnId}_diff(){throw new Error("Not supported.")}async parse(){throw new Error("Not implemented.")}async parseResult(e){return await this.parsePartialResult(e,!1)}async parsePartialResult(e,t=!0){var l;const r=e[0].message;let i;if(za(r)&&((l=r.tool_calls)!=null&&l.length)?i=r.tool_calls.map(c=>{const{id:d,...h}=c;return this.returnId?{id:d,...h}:h}):r.additional_kwargs.tool_calls!==void 0&&(i=JSON.parse(JSON.stringify(r.additional_kwargs.tool_calls)).map(d=>O_(d,{returnId:this.returnId,partial:t}))),!i)return[];const o=[];for(const c of i)if(c!==void 0){const d={type:c.name,args:c.args,id:c.id};o.push(d)}return o}}class ix extends AB{static lc_name(){return"JsonOutputKeyToolsParser"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"keyName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSingle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"zodSchema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keyName=e.keyName,this.returnSingle=e.returnSingle??this.returnSingle,this.zodSchema=e.zodSchema}async _validateResult(e){if(this.zodSchema===void 0)return e;const t=await this.zodSchema.safeParseAsync(e);if(t.success)return t.data;throw new x_(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify(t.error.errors)}`,JSON.stringify(e,null,2))}async parsePartialResult(e){const r=(await super.parsePartialResult(e)).filter(o=>o.type===this.keyName);let i=r;if(r.length)return this.returnId||(i=r.map(o=>o.args)),this.returnSingle?i[0]:i}async parseResult(e){const r=(await super.parsePartialResult(e,!1)).filter(l=>l.type===this.keyName);let i=r;return r.length?(this.returnId||(i=r.map(l=>l.args)),this.returnSingle?this._validateResult(i[0]):await Promise.all(i.map(l=>this._validateResult(l)))):void 0}}const TB=Symbol("Let zodToJsonSchema decide on which parser to use"),sx={name:void 0,$refStrategy:"root",effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",nullableStrategy:"from-target",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},EB=n=>typeof n=="string"?{...sx,basePath:["#"],definitions:{},name:n}:{...sx,basePath:["#"],definitions:{},...n},Gy=n=>"_def"in n?n._def:n;function xB(n){if(!n)return!0;for(const e in n)return!1;return!0}const OB=n=>{const e=EB(n),t=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:t,propertyPath:void 0,seenRefs:new Set,seen:new Map(Object.entries(e.definitions).map(([r,i])=>[Gy(i),{def:Gy(i),path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}};function iC(n,e,t,r){r!=null&&r.errorMessages&&t&&(n.errorMessage={...n.errorMessage,[e]:t})}function Ze(n,e,t,r,i){n[e]=t,iC(n,e,r,i)}function RB(){return{}}function CB(n,e){var r,i;const t={type:"array"};return((i=(r=n.type)==null?void 0:r._def)==null?void 0:i.typeName)!==q.ZodAny&&(t.items=Ue(n.type._def,{...e,currentPath:[...e.currentPath,"items"]})),n.minLength&&Ze(t,"minItems",n.minLength.value,n.minLength.message,e),n.maxLength&&Ze(t,"maxItems",n.maxLength.value,n.maxLength.message,e),n.exactLength&&(Ze(t,"minItems",n.exactLength.value,n.exactLength.message,e),Ze(t,"maxItems",n.exactLength.value,n.exactLength.message,e)),t}function PB(n,e){const t={type:"integer",format:"int64"};if(!n.checks)return t;for(const r of n.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?Ze(t,"minimum",r.value,r.message,e):Ze(t,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(t.exclusiveMinimum=!0),Ze(t,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?Ze(t,"maximum",r.value,r.message,e):Ze(t,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(t.exclusiveMaximum=!0),Ze(t,"maximum",r.value,r.message,e));break;case"multipleOf":Ze(t,"multipleOf",r.value,r.message,e);break}return t}function NB(){return{type:"boolean"}}function jB(n,e){return Ue(n.type._def,e)}const kB=(n,e)=>Ue(n.innerType._def,e);function sC(n,e,t){const r=t??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((i,o)=>sC(n,e,i))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return MB(n,e)}}const MB=(n,e)=>{const t={type:"integer",format:"unix-time"};if(e.target==="openApi3")return t;for(const r of n.checks)switch(r.kind){case"min":Ze(t,"minimum",r.value,r.message,e);break;case"max":Ze(t,"maximum",r.value,r.message,e);break}return t};function IB(n,e){return{...Ue(n.innerType._def,e),default:n.defaultValue()}}function LB(n,e,t){return e.effectStrategy==="input"?Ue(n.schema._def,e,t):{}}function DB(n){return{type:"string",enum:[...n.values]}}const $B=n=>"type"in n&&n.type==="string"?!1:"allOf"in n;function UB(n,e){const t=[Ue(n.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),Ue(n.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(o=>!!o);let r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const i=[];return t.forEach(o=>{if($B(o))i.push(...o.allOf),o.unevaluatedProperties===void 0&&(r=void 0);else{let l=o;if("additionalProperties"in o&&o.additionalProperties===!1){const{additionalProperties:c,...d}=o;l=d}else r=void 0;i.push(l)}}),i.length?{allOf:i,...r}:void 0}function BB(n,e){const t=typeof n.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(n.value)?"array":"object"}:e.target==="openApi3"?{type:t==="bigint"?"integer":t,enum:[n.value]}:{type:t==="bigint"?"integer":t,const:n.value}}let qg;const Ai={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(qg===void 0&&(qg=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),qg),base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/};function oC(n,e){const t={type:"string"};function r(i){return e.patternStrategy==="escape"?zB(i):i}if(n.checks)for(const i of n.checks)switch(i.kind){case"min":Ze(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,i.value):i.value,i.message,e);break;case"max":Ze(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,i.value):i.value,i.message,e);break;case"email":switch(e.emailStrategy){case"format:email":Wn(t,"email",i.message,e);break;case"format:idn-email":Wn(t,"idn-email",i.message,e);break;case"pattern:zod":er(t,Ai.email,i.message,e);break}break;case"url":Wn(t,"uri",i.message,e);break;case"uuid":Wn(t,"uuid",i.message,e);break;case"regex":er(t,i.regex,i.message,e);break;case"cuid":er(t,Ai.cuid,i.message,e);break;case"cuid2":er(t,Ai.cuid2,i.message,e);break;case"startsWith":er(t,RegExp(`^${r(i.value)}`),i.message,e);break;case"endsWith":er(t,RegExp(`${r(i.value)}$`),i.message,e);break;case"datetime":Wn(t,"date-time",i.message,e);break;case"date":Wn(t,"date",i.message,e);break;case"time":Wn(t,"time",i.message,e);break;case"duration":Wn(t,"duration",i.message,e);break;case"length":Ze(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,i.value):i.value,i.message,e),Ze(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,i.value):i.value,i.message,e);break;case"includes":{er(t,RegExp(r(i.value)),i.message,e);break}case"ip":{i.version!=="v6"&&Wn(t,"ipv4",i.message,e),i.version!=="v4"&&Wn(t,"ipv6",i.message,e);break}case"emoji":er(t,Ai.emoji,i.message,e);break;case"ulid":{er(t,Ai.ulid,i.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{Wn(t,"binary",i.message,e);break}case"contentEncoding:base64":{Ze(t,"contentEncoding","base64",i.message,e);break}case"pattern:zod":{er(t,Ai.base64,i.message,e);break}}break}case"nanoid":er(t,Ai.nanoid,i.message,e)}return t}const zB=n=>Array.from(n).map(e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`).join(""),Wn=(n,e,t,r)=>{var i;n.format||(i=n.anyOf)!=null&&i.some(o=>o.format)?(n.anyOf||(n.anyOf=[]),n.format&&(n.anyOf.push({format:n.format,...n.errorMessage&&r.errorMessages&&{errorMessage:{format:n.errorMessage.format}}}),delete n.format,n.errorMessage&&(delete n.errorMessage.format,Object.keys(n.errorMessage).length===0&&delete n.errorMessage)),n.anyOf.push({format:e,...t&&r.errorMessages&&{errorMessage:{format:t}}})):Ze(n,"format",e,t,r)},er=(n,e,t,r)=>{var i;n.pattern||(i=n.allOf)!=null&&i.some(o=>o.pattern)?(n.allOf||(n.allOf=[]),n.pattern&&(n.allOf.push({pattern:n.pattern,...n.errorMessage&&r.errorMessages&&{errorMessage:{pattern:n.errorMessage.pattern}}}),delete n.pattern,n.errorMessage&&(delete n.errorMessage.pattern,Object.keys(n.errorMessage).length===0&&delete n.errorMessage)),n.allOf.push({pattern:ox(e,r),...t&&r.errorMessages&&{errorMessage:{pattern:t}}})):Ze(n,"pattern",ox(e,r),t,r)},ox=(n,e)=>{var h;const t=typeof n=="function"?n():n;if(!e.applyRegexFlags||!t.flags)return t.source;const r={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},i=r.i?t.source.toLowerCase():t.source;let o="",l=!1,c=!1,d=!1;for(let m=0;m<i.length;m++){if(l){o+=i[m],l=!1;continue}if(r.i){if(c){if(i[m].match(/[a-z]/)){d?(o+=i[m],o+=`${i[m-2]}-${i[m]}`.toUpperCase(),d=!1):i[m+1]==="-"&&((h=i[m+2])!=null&&h.match(/[a-z]/))?(o+=i[m],d=!0):o+=`${i[m]}${i[m].toUpperCase()}`;continue}}else if(i[m].match(/[a-z]/)){o+=`[${i[m]}${i[m].toUpperCase()}]`;continue}}if(r.m){if(i[m]==="^"){o+=`(^|(?<=[\r
]))`;continue}else if(i[m]==="$"){o+=`($|(?=[\r
]))`;continue}}if(r.s&&i[m]==="."){o+=c?`${i[m]}\r
`:`[${i[m]}\r
]`;continue}o+=i[m],i[m]==="\\"?l=!0:c&&i[m]==="]"?c=!1:!c&&i[m]==="["&&(c=!0)}try{const m=new RegExp(o)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return o};function uC(n,e){var r,i,o,l;if(e.target==="openApi3"&&((r=n.keyType)==null?void 0:r._def.typeName)===q.ZodEnum)return{type:"object",required:n.keyType._def.values,properties:n.keyType._def.values.reduce((c,d)=>({...c,[d]:Ue(n.valueType._def,{...e,currentPath:[...e.currentPath,"properties",d]})??{}}),{}),additionalProperties:!1};const t={type:"object",additionalProperties:Ue(n.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??{}};if(e.target==="openApi3")return t;if(((i=n.keyType)==null?void 0:i._def.typeName)===q.ZodString&&((o=n.keyType._def.checks)!=null&&o.length)){const c=Object.entries(oC(n.keyType._def,e)).reduce((d,[h,m])=>h==="type"?d:{...d,[h]:m},{});return{...t,propertyNames:c}}else if(((l=n.keyType)==null?void 0:l._def.typeName)===q.ZodEnum)return{...t,propertyNames:{enum:n.keyType._def.values}};return t}function VB(n,e){if(e.mapStrategy==="record")return uC(n,e);const t=Ue(n.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},r=Ue(n.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[t,r],minItems:2,maxItems:2}}}function qB(n){const e=n.values,r=Object.keys(n.values).filter(o=>typeof e[e[o]]!="number").map(o=>e[o]),i=Array.from(new Set(r.map(o=>typeof o)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:r}}function FB(){return{not:{}}}function HB(n){return n.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const od={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function ZB(n,e){if(e.target==="openApi3")return ux(n,e);const t=n.options instanceof Map?Array.from(n.options.values()):n.options;if(t.every(r=>r._def.typeName in od&&(!r._def.checks||!r._def.checks.length))){const r=t.reduce((i,o)=>{const l=od[o._def.typeName];return l&&!i.includes(l)?[...i,l]:i},[]);return{type:r.length>1?r:r[0]}}else if(t.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=t.reduce((i,o)=>{const l=typeof o._def.value;switch(l){case"string":case"number":case"boolean":return[...i,l];case"bigint":return[...i,"integer"];case"object":if(o._def.value===null)return[...i,"null"];case"symbol":case"undefined":case"function":default:return i}},[]);if(r.length===t.length){const i=r.filter((o,l,c)=>c.indexOf(o)===l);return{type:i.length>1?i:i[0],enum:t.reduce((o,l)=>o.includes(l._def.value)?o:[...o,l._def.value],[])}}}else if(t.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:t.reduce((r,i)=>[...r,...i._def.values.filter(o=>!r.includes(o))],[])};return ux(n,e)}const ux=(n,e)=>{const t=(n.options instanceof Map?Array.from(n.options.values()):n.options).map((r,i)=>Ue(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${i}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return t.length?{anyOf:t}:void 0};function GB(n,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(n.innerType._def.typeName)&&(!n.innerType._def.checks||!n.innerType._def.checks.length))return e.target==="openApi3"||e.nullableStrategy==="property"?{type:od[n.innerType._def.typeName],nullable:!0}:{type:[od[n.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const r=Ue(n.innerType._def,{...e,currentPath:[...e.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const t=Ue(n.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return t&&{anyOf:[t,{type:"null"}]}}function YB(n,e){const t={type:"number"};if(!n.checks)return t;for(const r of n.checks)switch(r.kind){case"int":t.type="integer",iC(t,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?Ze(t,"minimum",r.value,r.message,e):Ze(t,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(t.exclusiveMinimum=!0),Ze(t,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?Ze(t,"maximum",r.value,r.message,e):Ze(t,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(t.exclusiveMaximum=!0),Ze(t,"maximum",r.value,r.message,e));break;case"multipleOf":Ze(t,"multipleOf",r.value,r.message,e);break}return t}function XB(n,e){return e.removeAdditionalStrategy==="strict"?n.catchall._def.typeName==="ZodNever"?n.unknownKeys!=="strict":Ue(n.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0:n.catchall._def.typeName==="ZodNever"?n.unknownKeys==="passthrough":Ue(n.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0}function KB(n,e){const t={type:"object",...Object.entries(n.shape()).reduce((r,[i,o])=>{if(o===void 0||o._def===void 0)return r;const l=[...e.currentPath,"properties",i],c=Ue(o._def,{...e,currentPath:l,propertyPath:l});return c===void 0?r:(e.openaiStrictMode&&o.isOptional()&&!o.isNullable()&&console.warn(`Zod field at \`${l.join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required
This will become an error in a future version of the SDK.`),{properties:{...r.properties,[i]:c},required:o.isOptional()&&!e.openaiStrictMode?r.required:[...r.required,i]})},{properties:{},required:[]}),additionalProperties:XB(n,e)};return t.required.length||delete t.required,t}const JB=(n,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)==null?void 0:r.toString()))return Ue(n.innerType._def,e);const t=Ue(n.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return t?{anyOf:[{not:{}},t]}:{}},QB=(n,e)=>{if(e.pipeStrategy==="input")return Ue(n.in._def,e);if(e.pipeStrategy==="output")return Ue(n.out._def,e);const t=Ue(n.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),r=Ue(n.out._def,{...e,currentPath:[...e.currentPath,"allOf",t?"1":"0"]});return{allOf:[t,r].filter(i=>i!==void 0)}};function WB(n,e){return Ue(n.type._def,e)}function e9(n,e){const r={type:"array",uniqueItems:!0,items:Ue(n.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return n.minSize&&Ze(r,"minItems",n.minSize.value,n.minSize.message,e),n.maxSize&&Ze(r,"maxItems",n.maxSize.value,n.maxSize.message,e),r}function t9(n,e){return n.rest?{type:"array",minItems:n.items.length,items:n.items.map((t,r)=>Ue(t._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((t,r)=>r===void 0?t:[...t,r],[]),additionalItems:Ue(n.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:n.items.length,maxItems:n.items.length,items:n.items.map((t,r)=>Ue(t._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((t,r)=>r===void 0?t:[...t,r],[])}}function n9(){return{not:{}}}function r9(){return{}}const a9=(n,e)=>Ue(n.innerType._def,e);function Ue(n,e,t=!1){var l;const r=e.seen.get(n);if(e.override){const c=(l=e.override)==null?void 0:l.call(e,n,e,r,t);if(c!==TB)return c}if(r&&!t){const c=i9(r,e);if(c!==void 0)return"$ref"in c&&e.seenRefs.add(c.$ref),c}const i={def:n,path:e.currentPath,jsonSchema:void 0};e.seen.set(n,i);const o=o9(n,n.typeName,e,t);return o&&u9(n,e,o),i.jsonSchema=o,o}const i9=(n,e)=>{switch(e.$refStrategy){case"root":return{$ref:n.path.join("/")};case"extract-to-root":const t=n.path.slice(e.basePath.length+1).join("_");return t!==e.name&&e.nameStrategy==="duplicate-ref"&&(e.definitions[t]=n.def),{$ref:[...e.basePath,e.definitionPath,t].join("/")};case"relative":return{$ref:s9(e.currentPath,n.path)};case"none":case"seen":return n.path.length<e.currentPath.length&&n.path.every((r,i)=>e.currentPath[i]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},s9=(n,e)=>{let t=0;for(;t<n.length&&t<e.length&&n[t]===e[t];t++);return[(n.length-t).toString(),...e.slice(t)].join("/")},o9=(n,e,t,r)=>{switch(e){case q.ZodString:return oC(n,t);case q.ZodNumber:return YB(n,t);case q.ZodObject:return KB(n,t);case q.ZodBigInt:return PB(n,t);case q.ZodBoolean:return NB();case q.ZodDate:return sC(n,t);case q.ZodUndefined:return n9();case q.ZodNull:return HB(t);case q.ZodArray:return CB(n,t);case q.ZodUnion:case q.ZodDiscriminatedUnion:return ZB(n,t);case q.ZodIntersection:return UB(n,t);case q.ZodTuple:return t9(n,t);case q.ZodRecord:return uC(n,t);case q.ZodLiteral:return BB(n,t);case q.ZodEnum:return DB(n);case q.ZodNativeEnum:return qB(n);case q.ZodNullable:return GB(n,t);case q.ZodOptional:return JB(n,t);case q.ZodMap:return VB(n,t);case q.ZodSet:return e9(n,t);case q.ZodLazy:return Ue(n.getter()._def,t);case q.ZodPromise:return WB(n,t);case q.ZodNaN:case q.ZodNever:return FB();case q.ZodEffects:return LB(n,t,r);case q.ZodAny:return RB();case q.ZodUnknown:return r9();case q.ZodDefault:return IB(n,t);case q.ZodBranded:return jB(n,t);case q.ZodReadonly:return a9(n,t);case q.ZodCatch:return kB(n,t);case q.ZodPipeline:return QB(n,t);case q.ZodFunction:case q.ZodVoid:case q.ZodSymbol:return;default:return(i=>{})()}},u9=(n,e,t)=>(n.description&&(t.description=n.description,e.markdownDescription&&(t.markdownDescription=n.description)),t),l9=(n,e)=>{const t=OB(e),r=typeof e=="string"?e:(e==null?void 0:e.nameStrategy)==="title"||e==null?void 0:e.name,i=Ue(n._def,r===void 0?t:{...t,currentPath:[...t.basePath,t.definitionPath,r]},!1)??{},o=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;o!==void 0&&(i.title=o);const l=(()=>{if(xB(t.definitions))return;const d={},h=new Set;for(let m=0;m<500;m++){const g=Object.entries(t.definitions).filter(([b])=>!h.has(b));if(g.length===0)break;for(const[b,_]of g)d[b]=Ue(Gy(_),{...t,currentPath:[...t.basePath,t.definitionPath,b]},!0)??{},h.add(b)}return d})(),c=r===void 0?l?{...i,[t.definitionPath]:l}:i:t.nameStrategy==="duplicate-ref"?{...i,...l||t.seenRefs.size?{[t.definitionPath]:{...l,...t.seenRefs.size?{[r]:i}:void 0}}:void 0}:{$ref:[...t.$refStrategy==="relative"?[]:t.basePath,t.definitionPath,r].join("/"),[t.definitionPath]:{...l,[r]:i}};return t.target==="jsonSchema7"?c.$schema="http://json-schema.org/draft-07/schema#":t.target==="jsonSchema2019-09"&&(c.$schema="https://json-schema.org/draft/2019-09/schema#"),c};function c9(n,e){return l9(n,{openaiStrictMode:!0,name:e.name,nameStrategy:"duplicate-ref",$refStrategy:"extract-to-root",nullableStrategy:"property"})}function f9(n,e,t){return HL({type:"json_schema",json_schema:{...t,name:e,strict:!0,schema:c9(n,{name:e})}},r=>n.parse(JSON.parse(r)))}function d9(n){const{azureOpenAIApiDeploymentName:e,azureOpenAIApiInstanceName:t,azureOpenAIApiKey:r,azureOpenAIBasePath:i,baseURL:o,azureADTokenProvider:l,azureOpenAIEndpoint:c}=n;if((r||l)&&i&&e)return`${i}/${e}`;if((r||l)&&c&&e)return`${c}/openai/deployments/${e}`;if(r||l){if(!t)throw new Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!e)throw new Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return`https://${t}.openai.azure.com/openai/deployments/${e}`}return o}function h9(n){return n!==void 0&&Array.isArray(n.lc_namespace)}function m9(n){return n!==void 0&&jt.isRunnable(n)&&"lc_name"in n.constructor&&typeof n.constructor.lc_name=="function"&&n.constructor.lc_name()==="RunnableToolLike"}function p9(n){return!!n&&typeof n=="object"&&"name"in n&&"schema"in n&&(E_(n.schema)||n.schema!=null&&typeof n.schema=="object"&&"type"in n.schema&&typeof n.schema.type=="string"&&["null","boolean","object","array","number","string"].includes(n.schema.type))}function lC(n){return p9(n)||m9(n)||h9(n)}function g9(n){return E_(n)?Dl(n):n}function y9(n,e){return{name:n.name,description:n.description,parameters:g9(n.schema)}}function b9(n,e){let t;return lC(n)?t={type:"function",function:y9(n)}:t=n,t}function vf(n,e){return n.lc_error_code=e,n.message=`${n.message}

Troubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${e}/
`,n}function Fg(n){let e;return n.constructor.name===gd.name?(e=new Error(n.message),e.name="TimeoutError"):n.constructor.name===Cn.name?(e=new Error(n.message),e.name="AbortError"):n.status===400&&n.message.includes("tool_calls")?e=vf(n,"INVALID_TOOL_RESULTS"):n.status===401?e=vf(n,"MODEL_AUTHENTICATION"):n.status===429?e=vf(n,"MODEL_RATE_LIMIT"):n.status===404?e=vf(n,"MODEL_NOT_FOUND"):e=n,e}function lx(n){if(n)return n==="any"||n==="required"?"required":n==="auto"?"auto":n==="none"?"none":typeof n=="string"?{type:"function",function:{name:n}}:n}function _9(n){return n.anyOf!==void 0&&Array.isArray(n.anyOf)}function v9(n){const e=["namespace functions {",""];for(const t of n)t.description&&e.push(`// ${t.description}`),Object.keys(t.parameters.properties??{}).length>0?(e.push(`type ${t.name} = (_: {`),e.push(cC(t.parameters,0)),e.push("}) => any;")):e.push(`type ${t.name} = () => any;`),e.push("");return e.push("} // namespace functions"),e.join(`
`)}function cC(n,e){var r;const t=[];for(const[i,o]of Object.entries(n.properties??{}))o.description&&e<2&&t.push(`// ${o.description}`),(r=n.required)!=null&&r.includes(i)?t.push(`${i}: ${ud(o,e)},`):t.push(`${i}?: ${ud(o,e)},`);return t.map(i=>" ".repeat(e)+i).join(`
`)}function ud(n,e){if(_9(n))return n.anyOf.map(t=>ud(t,e)).join(" | ");switch(n.type){case"string":return n.enum?n.enum.map(t=>`"${t}"`).join(" | "):"string";case"number":return n.enum?n.enum.map(t=>`${t}`).join(" | "):"number";case"integer":return n.enum?n.enum.map(t=>`${t}`).join(" | "):"number";case"boolean":return"boolean";case"null":return"null";case"object":return["{",cC(n,e+2),"}"].join(`
`);case"array":return n.items?`${ud(n.items,e)}[]`:"any[]";default:return""}}function w9(n,e){let t;return lC(n)?t=b9(n):t=n,(e==null?void 0:e.strict)!==void 0&&(t.function.strict=e.strict),t}function S9(n){return n.role!=="system"&&n.role!=="developer"&&n.role!=="assistant"&&n.role!=="user"&&n.role!=="function"&&n.role!=="tool"&&console.warn(`Unknown message role: ${n.role}`),n.role}function R_(n){const e=n._getType();switch(e){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"tool":return"tool";case"generic":{if(!Nl.isInstance(n))throw new Error("Invalid generic chat message");return S9(n)}default:throw new Error(`Unknown message type: ${e}`)}}const fC={providerName:"ChatOpenAI",fromStandardTextBlock(n){return{type:"text",text:n.text}},fromStandardImageBlock(n){var e,t;if(n.source_type==="url")return{type:"image_url",image_url:{url:n.url,...(e=n.metadata)!=null&&e.detail?{detail:n.metadata.detail}:{}}};if(n.source_type==="base64")return{type:"image_url",image_url:{url:`data:${n.mime_type??""};base64,${n.data}`,...(t=n.metadata)!=null&&t.detail?{detail:n.metadata.detail}:{}}};throw new Error(`Image content blocks with source_type ${n.source_type} are not supported for ChatOpenAI`)},fromStandardAudioBlock(n){if(n.source_type==="url"){const e=wT({dataUrl:n.url});if(!e)throw new Error(`URL audio blocks with source_type ${n.source_type} must be formatted as a data URL for ChatOpenAI`);const t=e.mime_type||n.mime_type||"";let r;try{r=vT(t)}catch{throw new Error(`Audio blocks with source_type ${n.source_type} must have mime type of audio/wav or audio/mp3`)}if(r.type!=="audio"||r.subtype!=="wav"&&r.subtype!=="mp3")throw new Error(`Audio blocks with source_type ${n.source_type} must have mime type of audio/wav or audio/mp3`);return{type:"input_audio",input_audio:{format:r.subtype,data:e.data}}}if(n.source_type==="base64"){let e;try{e=vT(n.mime_type??"")}catch{throw new Error(`Audio blocks with source_type ${n.source_type} must have mime type of audio/wav or audio/mp3`)}if(e.type!=="audio"||e.subtype!=="wav"&&e.subtype!=="mp3")throw new Error(`Audio blocks with source_type ${n.source_type} must have mime type of audio/wav or audio/mp3`);return{type:"input_audio",input_audio:{format:e.subtype,data:n.data}}}throw new Error(`Audio content blocks with source_type ${n.source_type} are not supported for ChatOpenAI`)},fromStandardFileBlock(n){var e,t,r,i,o,l,c,d,h,m;if(n.source_type==="url"){if(!wT({dataUrl:n.url}))throw new Error(`URL file blocks with source_type ${n.source_type} must be formatted as a data URL for ChatOpenAI`);return{type:"file",file:{file_data:n.url,...(e=n.metadata)!=null&&e.filename||(t=n.metadata)!=null&&t.name?{filename:((r=n.metadata)==null?void 0:r.filename)||((i=n.metadata)==null?void 0:i.name)}:{}}}}if(n.source_type==="base64")return{type:"file",file:{file_data:`data:${n.mime_type??""};base64,${n.data}`,...(o=n.metadata)!=null&&o.filename||(l=n.metadata)!=null&&l.name||(c=n.metadata)!=null&&c.title?{filename:((d=n.metadata)==null?void 0:d.filename)||((h=n.metadata)==null?void 0:h.name)||((m=n.metadata)==null?void 0:m.title)}:{}}};if(n.source_type==="id")return{type:"file",file:{file_id:n.id}};throw new Error(`File content blocks with source_type ${n.source_type} are not supported for ChatOpenAI`)}};function cx(n,e){return n.flatMap(t=>{var l;let r=R_(t);r==="system"&&ld(e)&&(r="developer");const i=typeof t.content=="string"?t.content:t.content.map(c=>Li(c)?yR(c,fC):c),o={role:r,content:i};if(t.name!=null&&(o.name=t.name),t.additional_kwargs.function_call!=null&&(o.function_call=t.additional_kwargs.function_call,o.content=""),za(t)&&((l=t.tool_calls)!=null&&l.length)?(o.tool_calls=t.tool_calls.map(SB),o.content=""):(t.additional_kwargs.tool_calls!=null&&(o.tool_calls=t.additional_kwargs.tool_calls),t.tool_call_id!=null&&(o.tool_call_id=t.tool_call_id)),t.additional_kwargs.audio&&typeof t.additional_kwargs.audio=="object"&&"id"in t.additional_kwargs.audio){const c={role:"assistant",audio:{id:t.additional_kwargs.audio.id}};return[o,c]}return o})}const Hs="__openai_function_call_ids__";function A9(n){const e=(n.summary.length>1?n.summary.reduce((t,r)=>{const i=t.at(-1);return i.index===r.index?i.text+=r.text:t.push(r),t},[{...n.summary[0]}]):n.summary).map(t=>Object.fromEntries(Object.entries(t).filter(([r])=>r!=="index")));return{...n,summary:e}}function fx(n,e,t){var l;const r=n.filter(c=>za(c)).pop(),i=(l=r==null?void 0:r.response_metadata)==null?void 0:l.id;return(i&&i.startsWith("resp_")&&!t?n.slice(n.indexOf(r)+1):n).flatMap(c=>{var m,g,b;let d=R_(c);if(d==="system"&&ld(e)&&(d="developer"),d==="function")throw new Error("Function messages are not supported in Responses API");if(d==="tool"){const _=c;return((m=_.additional_kwargs)==null?void 0:m.type)==="computer_call_output"?{type:"computer_call_output",output:(()=>{if(typeof _.content=="string")return{type:"computer_screenshot",image_url:_.content};if(Array.isArray(_.content)){const S=_.content.find(E=>E.type==="computer_screenshot");if(S)return S;const A=_.content.find(E=>E.type==="image_url");if(A)return{type:"computer_screenshot",image_url:typeof A.image_url=="string"?A.image_url:A.image_url.url}}throw new Error("Invalid computer call output")})(),call_id:_.tool_call_id}:{type:"function_call_output",call_id:_.tool_call_id,id:_.id,output:typeof _.content!="string"?JSON.stringify(_.content):_.content}}if(d==="assistant"){if(!t&&c.response_metadata.output!=null&&Array.isArray(c.response_metadata.output)&&c.response_metadata.output.length>0&&c.response_metadata.output.every(O=>"type"in O))return c.response_metadata.output;const _=[];if(!t&&c.additional_kwargs.reasoning!=null&&(x=>typeof x=="object"&&x!=null&&"type"in x&&x.type==="reasoning")(c.additional_kwargs.reasoning)){const x=A9(c.additional_kwargs.reasoning);_.push(x)}let{content:v}=c;c.additional_kwargs.refusal!=null&&(typeof v=="string"&&(v=[{type:"output_text",text:v,annotations:[]}]),v=[...v,{type:"refusal",refusal:c.additional_kwargs.refusal}]),_.push({type:"message",role:"assistant",...c.id&&!t?{id:c.id}:{},content:typeof v=="string"?v:v.flatMap(O=>O.type==="text"?{type:"output_text",text:O.text,annotations:O.annotations??[]}:O.type==="output_text"||O.type==="refusal"?O:[])});const S=c.additional_kwargs[Hs];za(c)&&((g=c.tool_calls)!=null&&g.length)?_.push(...c.tool_calls.map(O=>({type:"function_call",name:O.name,arguments:JSON.stringify(O.args),call_id:O.id,...t?{id:S==null?void 0:S[O.id]}:{}}))):c.additional_kwargs.tool_calls!=null&&_.push(...c.additional_kwargs.tool_calls.map(O=>({type:"function_call",name:O.function.name,call_id:O.id,...t?{id:S==null?void 0:S[O.id]}:{},arguments:O.function.arguments})));const A=(b=c.response_metadata.output)!=null&&b.length?c.response_metadata.output:c.additional_kwargs.tool_outputs;let E=[];if(A!=null){const O=A;E=O==null?void 0:O.filter(x=>x.type==="computer_call"),E.length>0&&_.push(...E)}return _}const h=typeof c.content=="string"?c.content:c.content.flatMap(_=>{if(Li(_))return yR(_,fC);if(_.type==="text")return{type:"input_text",text:_.text};if(_.type==="image_url"){const v=typeof _.image_url=="string"?_.image_url:_.image_url.url,S=typeof _.image_url=="string"?"auto":_.image_url.detail;return{type:"input_image",image_url:v,detail:S}}return _.type==="input_text"||_.type==="input_image"||_.type==="input_file"?_:[]});return d==="user"||d==="system"||d==="developer"?{type:"message",role:d,content:h}:(console.warn(`Unsupported role found when converting to OpenAI Responses API: ${d}`),[])})}function dC(n){if(n.error){const c=new Error(n.error.message);throw c.name=n.error.code,c}let e;const t=[],r=[],i=[],o={model:n.model,created_at:n.created_at,id:n.id,incomplete_details:n.incomplete_details,metadata:n.metadata,object:n.object,status:n.status,user:n.user,model_name:n.model},l={};for(const c of n.output)if(c.type==="message")e=c.id,t.push(...c.content.flatMap(d=>d.type==="output_text"?("parsed"in d&&d.parsed!=null&&(l.parsed=d.parsed),{type:"text",text:d.text,annotations:d.annotations}):d.type==="refusal"?(l.refusal=d.refusal,[]):d));else if(c.type==="function_call"){const d={function:{name:c.name,arguments:c.arguments},id:c.call_id};try{r.push(O_(d,{returnId:!0}))}catch(h){let m;typeof h=="object"&&h!=null&&"message"in h&&typeof h.message=="string"&&(m=h.message),i.push(aC(d,m))}l[Hs]??(l[Hs]={}),c.id&&(l[Hs][c.call_id]=c.id)}else c.type==="reasoning"?l.reasoning=c:(l.tool_outputs??(l.tool_outputs=[]),l.tool_outputs.push(c));return new nl({id:e,content:t,tool_calls:r,invalid_tool_calls:i,usage_metadata:n.usage,additional_kwargs:l,response_metadata:o})}function T9(n){var d,h;const e=[];let t={},r;const i=[],o={},l={};let c;if(n.type==="response.output_text.delta")e.push({type:"text",text:n.delta,index:n.content_index});else if(n.type==="response.output_text.annotation.added")e.push({type:"text",text:"",annotations:[n.annotation],index:n.content_index});else if(n.type==="response.output_item.added"&&n.item.type==="message")c=n.item.id;else if(n.type==="response.output_item.added"&&n.item.type==="function_call")i.push({type:"tool_call_chunk",name:n.item.name,args:n.item.arguments,id:n.item.call_id,index:n.output_index}),l[Hs]={[n.item.call_id]:n.item.id};else if(n.type==="response.output_item.done"&&(n.item.type==="web_search_call"||n.item.type==="file_search_call"||n.item.type==="computer_call"))l.tool_outputs=[n.item];else if(n.type==="response.created")o.id=n.response.id,o.model_name=n.response.model,o.model=n.response.model;else if(n.type==="response.completed"){const m=dC(n.response);r=n.response.usage,((h=(d=n.response.text)==null?void 0:d.format)==null?void 0:h.type)==="json_schema"&&(l.parsed??(l.parsed=JSON.parse(m.text)));for(const[g,b]of Object.entries(n.response))g!=="id"&&(o[g]=b)}else if(n.type==="response.function_call_arguments.delta")i.push({type:"tool_call_chunk",args:n.delta,index:n.output_index});else if(n.type==="response.web_search_call.completed"||n.type==="response.file_search_call.completed")t={tool_outputs:{id:n.item_id,type:n.type.replace("response.","").replace(".completed",""),status:"completed"}};else if(n.type==="response.refusal.done")l.refusal=n.refusal;else if(n.type==="response.output_item.added"&&"item"in n&&n.item.type==="reasoning"){const m=n.item.summary?n.item.summary.map((g,b)=>({...g,index:b})):void 0;l.reasoning={id:n.item.id,type:n.item.type,...m?{summary:m}:{}}}else if(n.type==="response.reasoning_summary_part.added")l.reasoning={type:"reasoning",summary:[{...n.part,index:n.summary_index}]};else if(n.type==="response.reasoning_summary_text.delta")l.reasoning={type:"reasoning",summary:[{text:n.delta,type:"summary_text",index:n.summary_index}]};else return null;return new Bi({text:e.map(m=>m.text).join(""),message:new Za({id:c,content:e,tool_call_chunks:i,usage_metadata:r,additional_kwargs:l,response_metadata:o}),generationInfo:t})}function Hg(n){return"type"in n&&n.type!=="function"}function E9(n){return n!=null&&typeof n=="object"&&"type"in n&&n.type!=="function"}function dx(n,e){return tC(n)?(e==null?void 0:e.strict)!==void 0?{...n,function:{...n.function,strict:e.strict}}:n:w9(n,e)}function ld(n){return n&&/^o\d/.test(n)}class x9 extends Ua{static lc_name(){return"ChatOpenAI"}get callKeys(){return[...super.callKeys,"options","function_call","functions","tools","tool_choice","promptIndex","response_format","seed","reasoning_effort"]}get lc_secrets(){return{openAIApiKey:"OPENAI_API_KEY",apiKey:"OPENAI_API_KEY",organization:"OPENAI_ORGANIZATION"}}get lc_aliases(){return{modelName:"model",openAIApiKey:"openai_api_key",apiKey:"openai_api_key"}}get lc_serializable_keys(){return["configuration","logprobs","topLogprobs","prefixMessages","supportsStrictToolCalling","modalities","audio","reasoningEffort","temperature","maxTokens","topP","frequencyPenalty","presencePenalty","n","logitBias","user","streaming","streamUsage","modelName","model","modelKwargs","stop","stopSequences","timeout","openAIApiKey","apiKey","cache","maxConcurrency","maxRetries","verbose","callbacks","tags","metadata","disableStreaming","useResponsesApi","zdrEnabled","reasoning"]}constructor(e){var t,r,i;super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stopSequences",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"streamUsage",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topLogprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"openAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"organization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__includeRawResponse",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"supportsStrictToolCalling",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"audio",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modalities",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reasoningEffort",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reasoning",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"useResponsesApi",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"zdrEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.openAIApiKey=(e==null?void 0:e.apiKey)??(e==null?void 0:e.openAIApiKey)??((t=e==null?void 0:e.configuration)==null?void 0:t.apiKey)??Nr("OPENAI_API_KEY"),this.apiKey=this.openAIApiKey,this.organization=((r=e==null?void 0:e.configuration)==null?void 0:r.organization)??Nr("OPENAI_ORGANIZATION"),this.model=(e==null?void 0:e.model)??(e==null?void 0:e.modelName)??this.model,this.modelName=this.model,this.modelKwargs=(e==null?void 0:e.modelKwargs)??{},this.timeout=e==null?void 0:e.timeout,this.temperature=(e==null?void 0:e.temperature)??this.temperature,this.topP=(e==null?void 0:e.topP)??this.topP,this.frequencyPenalty=(e==null?void 0:e.frequencyPenalty)??this.frequencyPenalty,this.presencePenalty=(e==null?void 0:e.presencePenalty)??this.presencePenalty,this.logprobs=e==null?void 0:e.logprobs,this.topLogprobs=e==null?void 0:e.topLogprobs,this.n=(e==null?void 0:e.n)??this.n,this.logitBias=e==null?void 0:e.logitBias,this.stop=(e==null?void 0:e.stopSequences)??(e==null?void 0:e.stop),this.stopSequences=this.stop,this.user=e==null?void 0:e.user,this.__includeRawResponse=e==null?void 0:e.__includeRawResponse,this.audio=e==null?void 0:e.audio,this.modalities=e==null?void 0:e.modalities,this.reasoningEffort=(e==null?void 0:e.reasoningEffort)??((i=e==null?void 0:e.reasoning)==null?void 0:i.effort),this.reasoning=(e==null?void 0:e.reasoning)??(e!=null&&e.reasoningEffort?{effort:e.reasoningEffort}:void 0),this.maxTokens=(e==null?void 0:e.maxCompletionTokens)??(e==null?void 0:e.maxTokens),this.useResponsesApi=(e==null?void 0:e.useResponsesApi)??this.useResponsesApi,this.disableStreaming=(e==null?void 0:e.disableStreaming)??this.disableStreaming,this.model==="o1"&&(this.disableStreaming=!0),this.streaming=(e==null?void 0:e.streaming)??!1,this.disableStreaming&&(this.streaming=!1),this.streamUsage=(e==null?void 0:e.streamUsage)??this.streamUsage,this.disableStreaming&&(this.streamUsage=!1),this.clientConfig={apiKey:this.apiKey,organization:this.organization,dangerouslyAllowBrowser:!0,...e==null?void 0:e.configuration},(e==null?void 0:e.supportsStrictToolCalling)!==void 0&&(this.supportsStrictToolCalling=e.supportsStrictToolCalling),this.zdrEnabled=(e==null?void 0:e.zdrEnabled)??!1}getLsParams(e){const t=this.invocationParams(e);return{ls_provider:"openai",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:t.temperature??void 0,ls_max_tokens:t.max_tokens??void 0,ls_stop:e.stop}}bindTools(e,t){let r;return(t==null?void 0:t.strict)!==void 0?r=t.strict:this.supportsStrictToolCalling!==void 0&&(r=this.supportsStrictToolCalling),this.bind({tools:e.map(i=>Hg(i)?i:dx(i,{strict:r})),...t})}createResponseFormat(e){return e&&e.type==="json_schema"&&e.json_schema.schema&&wf(e.json_schema.schema)?f9(e.json_schema.schema,e.json_schema.name,{description:e.json_schema.description}):e}getReasoningParams(e){if(!ld(this.model))return;let t;return this.reasoningEffort!==void 0&&(t={effort:this.reasoningEffort}),this.reasoning!==void 0&&(t={...t,...this.reasoning}),(e==null?void 0:e.reasoning_effort)!==void 0&&(t={...t,effort:e.reasoning_effort}),(e==null?void 0:e.reasoning)!==void 0&&(t={...t,...e.reasoning}),t}invocationParams(e,t){var c,d;let r;if((e==null?void 0:e.strict)!==void 0?r=e.strict:this.supportsStrictToolCalling!==void 0&&(r=this.supportsStrictToolCalling),this._useResponseApi(e)){const h={model:this.model,temperature:this.temperature,top_p:this.topP,user:this.user,stream:this.streaming,previous_response_id:e==null?void 0:e.previous_response_id,truncation:e==null?void 0:e.truncation,include:e==null?void 0:e.include,tools:(c=e==null?void 0:e.tools)!=null&&c.length?e.tools.map(g=>Hg(g)?g:tC(g)?{type:"function",name:g.function.name,parameters:g.function.parameters,description:g.function.description,strict:r}:null).filter(g=>g!==null):void 0,tool_choice:E9(e==null?void 0:e.tool_choice)?e==null?void 0:e.tool_choice:(()=>{const g=lx(e==null?void 0:e.tool_choice);if(typeof g=="object"&&"type"in g)return{type:"function",name:g.function.name}})(),text:(()=>{if(e!=null&&e.text)return e.text;const g=this.createResponseFormat(e==null?void 0:e.response_format);return(g==null?void 0:g.type)==="json_schema"?g.json_schema.schema!=null?{format:{type:"json_schema",schema:g.json_schema.schema,description:g.json_schema.description,name:g.json_schema.name,strict:g.json_schema.strict}}:void 0:{format:g}})(),parallel_tool_calls:e==null?void 0:e.parallel_tool_calls,max_output_tokens:this.maxTokens===-1?void 0:this.maxTokens,...this.zdrEnabled?{store:!1}:{},...this.modelKwargs},m=this.getReasoningParams(e);return m!==void 0&&(h.reasoning=m),h}let i={};(e==null?void 0:e.stream_options)!==void 0?i={stream_options:e.stream_options}:this.streamUsage&&(this.streaming||t!=null&&t.streaming)&&(i={stream_options:{include_usage:!0}});const o={model:this.model,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,logprobs:this.logprobs,top_logprobs:this.topLogprobs,n:this.n,logit_bias:this.logitBias,stop:(e==null?void 0:e.stop)??this.stopSequences,user:this.user,stream:this.streaming,functions:e==null?void 0:e.functions,function_call:e==null?void 0:e.function_call,tools:(d=e==null?void 0:e.tools)!=null&&d.length?e.tools.map(h=>dx(h,{strict:r})):void 0,tool_choice:lx(e==null?void 0:e.tool_choice),response_format:this.createResponseFormat(e==null?void 0:e.response_format),seed:e==null?void 0:e.seed,...i,parallel_tool_calls:e==null?void 0:e.parallel_tool_calls,...this.audio||e!=null&&e.audio?{audio:this.audio||(e==null?void 0:e.audio)}:{},...this.modalities||e!=null&&e.modalities?{modalities:this.modalities||(e==null?void 0:e.modalities)}:{},...this.modelKwargs};(e==null?void 0:e.prediction)!==void 0&&(o.prediction=e.prediction);const l=this.getReasoningParams(e);return l!==void 0&&l.effort!==void 0&&(o.reasoning_effort=l.effort),ld(o.model)?o.max_completion_tokens=this.maxTokens===-1?void 0:this.maxTokens:o.max_tokens=this.maxTokens===-1?void 0:this.maxTokens,o}_convertOpenAIChatCompletionMessageToBaseMessage(e,t){const r=e.tool_calls;switch(e.role){case"assistant":{const i=[],o=[];for(const d of r??[])try{i.push(O_(d,{returnId:!0}))}catch(h){o.push(aC(d,h.message))}const l={function_call:e.function_call,tool_calls:r};this.__includeRawResponse!==void 0&&(l.__raw_response=t);const c={model_name:t.model,...t.system_fingerprint?{usage:{...t.usage},system_fingerprint:t.system_fingerprint}:{}};return e.audio&&(l.audio=e.audio),new nl({content:e.content||"",tool_calls:i,invalid_tool_calls:o,additional_kwargs:l,response_metadata:c,id:t.id})}default:return new Nl(e.content||"",e.role??"unknown")}}_convertOpenAIDeltaToBaseMessageChunk(e,t,r){var d,h;const i=e.role??r,o=e.content??"";let l;e.function_call?l={function_call:e.function_call}:e.tool_calls?l={tool_calls:e.tool_calls}:l={},this.__includeRawResponse&&(l.__raw_response=t),e.audio&&(l.audio={...e.audio,index:t.choices[0].index});const c={usage:{...t.usage}};if(i==="user")return new jd({content:o,response_metadata:c});if(i==="assistant"){const m=[];if(Array.isArray(e.tool_calls))for(const g of e.tool_calls)m.push({name:(d=g.function)==null?void 0:d.name,args:(h=g.function)==null?void 0:h.arguments,id:g.id,index:g.index,type:"tool_call_chunk"});return new Za({content:o,tool_call_chunks:m,additional_kwargs:l,id:t.id,response_metadata:c})}else return i==="system"?new rl({content:o,response_metadata:c}):i==="developer"?new rl({content:o,response_metadata:c,additional_kwargs:{__openai_role__:"developer"}}):i==="function"?new Nd({content:o,additional_kwargs:l,name:e.name,response_metadata:c}):i==="tool"?new f_({content:o,additional_kwargs:l,tool_call_id:e.tool_call_id,response_metadata:c}):new Pd({content:o,role:i,response_metadata:c})}_identifyingParams(){return{model_name:this.model,...this.invocationParams(),...this.clientConfig}}async*_streamResponseChunks(e,t,r){var h,m,g,b,_,v,S,A,E,O,x;if(this._useResponseApi(t)){const j=e.filter(H=>za(H)).pop(),P=(h=j==null?void 0:j.response_metadata)==null?void 0:h.id,z=await this.responseApiWithRetry({...this.invocationParams(t,{streaming:!0}),input:fx(e,this.model,this.zdrEnabled),stream:!0,...P&&P.startsWith("resp_")&&!this.zdrEnabled?{previous_response_id:P}:{}},t);for await(const H of z){const V=T9(H);V!=null&&(yield V)}return}const i=cx(e,this.model),o={...this.invocationParams(t,{streaming:!0}),messages:i,stream:!0};let l;const c=await this.completionWithRetry(o,t);let d;for await(const j of c){const P=(m=j==null?void 0:j.choices)==null?void 0:m[0];if(j.usage&&(d=j.usage),!P)continue;const{delta:z}=P;if(!z)continue;const H=this._convertOpenAIDeltaToBaseMessageChunk(z,j,l);l=z.role??l;const V={prompt:t.promptIndex??0,completion:P.index??0};if(typeof H.content!="string"){console.log("[WARNING]: Received non-string content from OpenAI. This is currently not supported.");continue}const ie={...V};P.finish_reason!=null&&(ie.finish_reason=P.finish_reason,ie.system_fingerprint=j.system_fingerprint,ie.model_name=j.model),this.logprobs&&(ie.logprobs=P.logprobs);const he=new Bi({message:H,text:H.content,generationInfo:ie});yield he,await(r==null?void 0:r.handleLLMNewToken(he.text??"",V,void 0,void 0,void 0,{chunk:he}))}if(d){const j={...((g=d.prompt_tokens_details)==null?void 0:g.audio_tokens)!==null&&{audio:(b=d.prompt_tokens_details)==null?void 0:b.audio_tokens},...((_=d.prompt_tokens_details)==null?void 0:_.cached_tokens)!==null&&{cache_read:(v=d.prompt_tokens_details)==null?void 0:v.cached_tokens}},P={...((S=d.completion_tokens_details)==null?void 0:S.audio_tokens)!==null&&{audio:(A=d.completion_tokens_details)==null?void 0:A.audio_tokens},...((E=d.completion_tokens_details)==null?void 0:E.reasoning_tokens)!==null&&{reasoning:(O=d.completion_tokens_details)==null?void 0:O.reasoning_tokens}};yield new Bi({message:new Za({content:"",response_metadata:{usage:{...d}},usage_metadata:{input_tokens:d.prompt_tokens,output_tokens:d.completion_tokens,total_tokens:d.total_tokens,...Object.keys(j).length>0&&{input_token_details:j},...Object.keys(P).length>0&&{output_token_details:P}}}),text:""})}if((x=t.signal)!=null&&x.aborted)throw new Error("AbortError")}identifyingParams(){return this._identifyingParams()}async _responseApiGenerate(e,t,r){var h,m;const i=this.invocationParams(t);if(i.stream){const g=this._streamResponseChunks(e,t,r);let b;for await(const _ of g)_.message.response_metadata={..._.generationInfo,..._.message.response_metadata},b=(b==null?void 0:b.concat(_))??_;return{generations:b?[b]:[],llmOutput:{estimatedTokenUsage:(h=b==null?void 0:b.message)==null?void 0:h.usage_metadata}}}const o=e.filter(g=>za(g)).pop(),l=(m=o==null?void 0:o.response_metadata)==null?void 0:m.id,c=fx(e,this.model,this.zdrEnabled),d=await this.responseApiWithRetry({input:c,...i,...l&&l.startsWith("resp_")&&!this.zdrEnabled?{previous_response_id:l}:{}},{signal:t==null?void 0:t.signal,...t==null?void 0:t.options});return{generations:[{text:d.output_text,message:dC(d)}],llmOutput:{id:d.id,estimatedTokenUsage:d.usage?{promptTokens:d.usage.input_tokens,completionTokens:d.usage.output_tokens,totalTokens:d.usage.total_tokens}:void 0}}}_useResponseApi(e){var i,o,l;const t=(i=e==null?void 0:e.tools)==null?void 0:i.some(Hg),r=(e==null?void 0:e.previous_response_id)!=null||(e==null?void 0:e.text)!=null||(e==null?void 0:e.truncation)!=null||(e==null?void 0:e.include)!=null||((o=e==null?void 0:e.reasoning)==null?void 0:o.summary)!=null||((l=this.reasoning)==null?void 0:l.summary)!=null;return this.useResponsesApi||t||r}async _generate(e,t,r){var c,d;if(this._useResponseApi(t))return this._responseApiGenerate(e,t,r);const i={},o=this.invocationParams(t),l=cx(e,this.model);if(o.stream){const h=this._streamResponseChunks(e,t,r),m={};for await(const A of h){A.message.response_metadata={...A.generationInfo,...A.message.response_metadata};const E=((c=A.generationInfo)==null?void 0:c.completion)??0;m[E]===void 0?m[E]=A:m[E]=m[E].concat(A)}const g=Object.entries(m).sort(([A],[E])=>parseInt(A,10)-parseInt(E,10)).map(([A,E])=>E),{functions:b,function_call:_}=this.invocationParams(t),v=await this.getEstimatedTokenCountFromPrompt(e,b,_),S=await this.getNumTokensFromGenerations(g);return i.input_tokens=v,i.output_tokens=S,i.total_tokens=v+S,{generations:g,llmOutput:{estimatedTokenUsage:{promptTokens:i.input_tokens,completionTokens:i.output_tokens,totalTokens:i.total_tokens}}}}else{let h;t.response_format&&t.response_format.type==="json_schema"?h=await this.betaParsedCompletionWithRetry({...o,stream:!1,messages:l},{signal:t==null?void 0:t.signal,...t==null?void 0:t.options}):h=await this.completionWithRetry({...o,stream:!1,messages:l},{signal:t==null?void 0:t.signal,...t==null?void 0:t.options});const{completion_tokens:m,prompt_tokens:g,total_tokens:b,prompt_tokens_details:_,completion_tokens_details:v}=(h==null?void 0:h.usage)??{};m&&(i.output_tokens=(i.output_tokens??0)+m),g&&(i.input_tokens=(i.input_tokens??0)+g),b&&(i.total_tokens=(i.total_tokens??0)+b),((_==null?void 0:_.audio_tokens)!==null||(_==null?void 0:_.cached_tokens)!==null)&&(i.input_token_details={...(_==null?void 0:_.audio_tokens)!==null&&{audio:_==null?void 0:_.audio_tokens},...(_==null?void 0:_.cached_tokens)!==null&&{cache_read:_==null?void 0:_.cached_tokens}}),((v==null?void 0:v.audio_tokens)!==null||(v==null?void 0:v.reasoning_tokens)!==null)&&(i.output_token_details={...(v==null?void 0:v.audio_tokens)!==null&&{audio:v==null?void 0:v.audio_tokens},...(v==null?void 0:v.reasoning_tokens)!==null&&{reasoning:v==null?void 0:v.reasoning_tokens}});const S=[];for(const A of(h==null?void 0:h.choices)??[]){const O={text:((d=A.message)==null?void 0:d.content)??"",message:this._convertOpenAIChatCompletionMessageToBaseMessage(A.message??{role:"assistant"},h)};O.generationInfo={...A.finish_reason?{finish_reason:A.finish_reason}:{},...A.logprobs?{logprobs:A.logprobs}:{}},za(O.message)&&(O.message.usage_metadata=i),O.message=new nl(Object.fromEntries(Object.entries(O.message).filter(([x])=>!x.startsWith("lc_")))),S.push(O)}return{generations:S,llmOutput:{tokenUsage:{promptTokens:i.input_tokens,completionTokens:i.output_tokens,totalTokens:i.total_tokens}}}}}async getEstimatedTokenCountFromPrompt(e,t,r){let i=(await this.getNumTokensFromMessages(e)).totalCount;if(t&&r!=="auto"){const o=v9(t);i+=await this.getNumTokens(o),i+=9}return t&&e.find(o=>o._getType()==="system")&&(i-=4),r==="none"?i+=1:typeof r=="object"&&(i+=await this.getNumTokens(r.name)+4),i}async getNumTokensFromGenerations(e){return(await Promise.all(e.map(async r=>{var i;return(i=r.message.additional_kwargs)!=null&&i.function_call?(await this.getNumTokensFromMessages([r.message])).countPerMessage[0]:await this.getNumTokens(r.message.content)}))).reduce((r,i)=>r+i,0)}async getNumTokensFromMessages(e){let t=0,r=0,i=0;this.model==="gpt-3.5-turbo-0301"?(r=4,i=-1):(r=3,i=1);const o=await Promise.all(e.map(async l=>{var b,_,v,S,A,E;const c=await this.getNumTokens(l.content),d=await this.getNumTokens(R_(l)),h=l.name!==void 0?i+await this.getNumTokens(l.name):0;let m=c+r+d+h;const g=l;if(g._getType()==="function"&&(m-=2),(b=g.additional_kwargs)!=null&&b.function_call&&(m+=3),(_=g==null?void 0:g.additional_kwargs.function_call)!=null&&_.name&&(m+=await this.getNumTokens((v=g.additional_kwargs.function_call)==null?void 0:v.name)),(S=g.additional_kwargs.function_call)!=null&&S.arguments)try{m+=await this.getNumTokens(JSON.stringify(JSON.parse((A=g.additional_kwargs.function_call)==null?void 0:A.arguments)))}catch(O){console.error("Error parsing function arguments",O,JSON.stringify(g.additional_kwargs.function_call)),m+=await this.getNumTokens((E=g.additional_kwargs.function_call)==null?void 0:E.arguments)}return t+=m,m}));return t+=3,{totalCount:t,countPerMessage:o}}async completionWithRetry(e,t){const r=this._getClientOptions(t);return this.caller.call(async()=>{try{return await this.client.chat.completions.create(e,r)}catch(i){throw Fg(i)}})}async responseApiWithRetry(e,t){return this.caller.call(async()=>{var i,o;const r=this._getClientOptions(t);try{return((o=(i=e.text)==null?void 0:i.format)==null?void 0:o.type)==="json_schema"&&!e.stream?await this.client.responses.parse(e,r):await this.client.responses.create(e,r)}catch(l){throw Fg(l)}})}async betaParsedCompletionWithRetry(e,t){const r=this._getClientOptions(t);return this.caller.call(async()=>{try{return await this.client.beta.chat.completions.parse(e,r)}catch(i){throw Fg(i)}})}_getClientOptions(e){if(!this.client){const r={baseURL:this.clientConfig.baseURL},i=d9(r),o={...this.clientConfig,baseURL:i,timeout:this.timeout,maxRetries:0};o.baseURL||delete o.baseURL,this.client=new xe(o)}return{...this.clientConfig,...e}}_llmType(){return"openai"}_combineLLMOutput(...e){return e.reduce((t,r)=>(r&&r.tokenUsage&&(t.tokenUsage.completionTokens+=r.tokenUsage.completionTokens??0,t.tokenUsage.promptTokens+=r.tokenUsage.promptTokens??0,t.tokenUsage.totalTokens+=r.tokenUsage.totalTokens??0),t),{tokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}withStructuredOutput(e,t){let r,i,o,l;O9(e)?(r=e.schema,i=e.name,o=e.method,l=e.includeRaw):(r=e,i=t==null?void 0:t.name,o=t==null?void 0:t.method,l=t==null?void 0:t.includeRaw);let c,d;if((t==null?void 0:t.strict)!==void 0&&o==="jsonMode")throw new Error("Argument `strict` is only supported for `method` = 'function_calling'");if(!this.model.startsWith("gpt-3")&&!this.model.startsWith("gpt-4-")&&this.model!=="gpt-4"?o===void 0&&(o="jsonSchema"):o==="jsonSchema"&&console.warn(`[WARNING]: JSON Schema is not supported for model "${this.model}". Falling back to tool calling.`),o==="jsonMode")c=this.bind({response_format:{type:"json_object"}}),wf(r)?d=rx.fromZodSchema(r):d=new ax;else if(o==="jsonSchema")if(c=this.bind({response_format:{type:"json_schema",json_schema:{name:i??"extract",description:r.description,schema:r,strict:t==null?void 0:t.strict}}}),wf(r)){const b=rx.fromZodSchema(r);d=bo.from(_=>"parsed"in _.additional_kwargs?_.additional_kwargs.parsed:b)}else d=new ax;else{let b=i??"extract";if(wf(r)){const _=Dl(r);c=this.bind({tools:[{type:"function",function:{name:b,description:_.description,parameters:_}}],tool_choice:{type:"function",function:{name:b}},...(t==null?void 0:t.strict)!==void 0?{strict:t.strict}:{}}),d=new ix({returnSingle:!0,keyName:b,zodSchema:r})}else{let _;typeof r.name=="string"&&typeof r.parameters=="object"&&r.parameters!=null?(_=r,b=r.name):(b=r.title??b,_={name:b,description:r.description??"",parameters:r}),c=this.bind({tools:[{type:"function",function:_}],tool_choice:{type:"function",function:{name:b}},...(t==null?void 0:t.strict)!==void 0?{strict:t.strict}:{}}),d=new ix({returnSingle:!0,keyName:b})}}if(!l)return c.pipe(d);const h=sd.assign({parsed:(b,_)=>d.invoke(b.raw,_)}),m=sd.assign({parsed:()=>null}),g=h.withFallbacks({fallbacks:[m]});return na.from([{raw:c},g])}}function wf(n){return typeof(n==null?void 0:n.parse)=="function"}function O9(n){return n!==void 0&&typeof n.schema=="object"}const R9=new x9({basePath:"https://openrouter.ai/api/v1",apiKey:"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",modelName:"openai/gpt-4o",defaultHeaders:{"X-Title":"SoftSell"}}),C9=async n=>{const e=[new Ny("You are a helpful assistant for customers selling software licenses."),new jl(n)];return(await R9.invoke(e)).content},P9=()=>{const[n,e]=oe.useState(""),[t,r]=oe.useState([]),[i,o]=oe.useState(!1),[l,c]=oe.useState(!1),d=oe.useRef(null),h={"How do I sell my license?":"To sell your license, upload it to SoftSell and we'll give you a quote.","How fast is the process?":"You'll get paid within a few days.","What types of licenses can I sell?":"We accept software licenses including productivity tools, antivirus, design software, and more.","Is there any fee involved?":"There are no upfront fees. We only deduct a small commission after the sale.","How do I get paid?":"Payments are made via bank transfer or PayPal, whichever you prefer.","Is it legal to resell software licenses?":"Yes, reselling licenses is legal as long as they are original and transferable.","Can I track my license status?":"Yes, once submitted, you can track the status on your dashboard in real-time."},m=async()=>{n.trim()&&(r(b=>[...b,{type:"user",message:n}]),h[n]?r(b=>[...b,{type:"bot",message:h[n]}]):await g(n),e(""))},g=async b=>{try{c(!0);const _=await C9(b);r(v=>[...v,{type:"bot",message:_}])}catch(_){console.error("Langchain error:",_),r(v=>[...v,{type:"bot",message:"Sorry, something went wrong. Please try again."}])}finally{c(!1)}};return oe.useEffect(()=>{var b;(b=d.current)==null||b.scrollIntoView({behavior:"smooth"})},[t]),K.jsxs(K.Fragment,{children:[!i&&K.jsx("button",{className:"fixed bottom-5 right-5 bg-[#1A73E8] p-4 rounded-full shadow-lg hover:bg-[#155ACF] transition z-50 animate-bounce-slow",onClick:()=>o(!0),children:K.jsx("img",{src:rL,alt:"AI Icon",className:"w-14 h-14 rounded-full shadow-md transition-transform duration-500 hover:scale-110"})}),i&&K.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center backdrop-blur-sm bg-black/30",children:K.jsxs("div",{className:"bg-white dark:bg-[#1E1E1E] rounded-xl shadow-xl w-full max-w-sm h-[500px] flex flex-col p-3 border",children:[K.jsxs("div",{className:"flex justify-between items-center mb-2",children:[K.jsx("h2",{className:"text-lg font-semibold",children:"Ask SoftSell AI"}),K.jsx("button",{className:"text-gray-500 hover:text-gray-800 text-xl",onClick:()=>o(!1),children:""})]}),K.jsxs("div",{className:"mb-2",children:[K.jsx("textarea",{className:"w-full border border-gray-300 rounded-md p-2 text-sm resize-none focus:outline-none focus:ring",rows:"2",placeholder:"Type your question...",value:n,onChange:b=>e(b.target.value)}),K.jsx("button",{onClick:m,className:"bg-blue-600 text-white px-3 py-2 mt-1 rounded-md w-full text-sm hover:bg-blue-700",children:"Send"})]}),K.jsx("div",{className:"mb-2 flex flex-wrap gap-2 text-xs",children:Object.keys(h).map((b,_)=>K.jsx("button",{onClick:async()=>{r(v=>[...v,{type:"user",message:b}]),h[b]?r(v=>[...v,{type:"bot",message:h[b]}]):await g(b)},className:"bg-gray-200 hover:bg-blue-100 text-gray-700 px-2 py-1 rounded-md transition",children:b},_))}),K.jsxs("div",{className:"flex-1 overflow-y-auto bg-gray-50 p-2 border rounded mb-2",children:[t.map((b,_)=>K.jsxs("div",{className:`mb-2 flex ${b.type==="user"?"justify-end":"justify-start"}`,children:[b.type==="bot"&&K.jsx("div",{className:"w-6 h-6 bg-blue-500 text-white text-xs rounded-full flex items-center justify-center mr-2",children:""}),K.jsx("div",{className:`p-2 rounded-md text-sm max-w-[75%] ${b.type==="user"?"bg-gray-200 text-right":"bg-blue-100 text-left"}`,children:b.message})]},_)),l&&K.jsxs("div",{className:"flex justify-start items-center mb-2",children:[K.jsx("div",{className:"w-6 h-6 bg-blue-500 text-white text-xs rounded-full flex items-center justify-center mr-2",children:""}),K.jsx("div",{className:"bg-blue-100 text-left p-2 rounded-md text-sm",children:"Thinking..."})]}),K.jsx("div",{ref:d})]})]})})]})},N9=({onClose:n})=>{const[e,t]=oe.useState(""),[r,i]=oe.useState(""),[o,l]=oe.useState(""),[c,d]=oe.useState(""),[h,m]=oe.useState(null),g=b=>{b.preventDefault();const _=new FormData;_.append("licenseId",e),_.append("companyName",r),_.append("contactNumber",o),_.append("description",c),h&&_.append("companyIdImage",h),console.log("Submitting form:");for(let v of _.entries())console.log(v[0]+":",v[1]);n()};return K.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[K.jsx("div",{className:"absolute inset-0 bg-transparent bg-opacity-30 backdrop-blur-sm",onClick:n}),K.jsxs("div",{className:"bg-white dark:bg-[#1E1E1E] text-black dark:text-white p-6 rounded-xl shadow-xl z-50 w-full max-w-md relative",children:[K.jsx("button",{className:"absolute top-3 right-4 text-xl font-bold text-gray-500 hover:text-red-500",onClick:n,children:""}),K.jsx("h2",{className:"text-2xl font-semibold mb-6 text-center",children:"Sell Your License"}),K.jsxs("form",{onSubmit:g,className:"space-y-4",encType:"multipart/form-data",children:[K.jsxs("div",{children:[K.jsx("label",{className:"block text-sm font-medium",children:"License ID"}),K.jsx("input",{type:"text",value:e,onChange:b=>t(b.target.value),required:!0,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),K.jsxs("div",{children:[K.jsx("label",{className:"block text-sm font-medium",children:"Company Name"}),K.jsx("input",{type:"text",value:r,onChange:b=>i(b.target.value),required:!0,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),K.jsxs("div",{children:[K.jsx("label",{className:"block text-sm font-medium",children:"Contact Number (Optional)"}),K.jsx("input",{type:"tel",value:o,onChange:b=>l(b.target.value),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),K.jsxs("div",{children:[K.jsx("label",{className:"block text-sm font-medium",children:"License Description (Optional)"}),K.jsx("textarea",{value:c,onChange:b=>d(b.target.value),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"e.g., Adobe CC 2023 license, valid till Dec 2025"})]}),K.jsxs("div",{children:[K.jsx("label",{className:"block text-sm font-medium",children:"Upload Company ID (Image)"}),K.jsx("input",{type:"file",accept:"image/*",onChange:b=>m(b.target.files[0]),required:!0,className:"w-full px-2 py-1 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),K.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition",children:"Submit"})]})]})]})},j9={hidden:{opacity:0,y:20},visible:n=>({opacity:1,y:0,transition:{delay:n*.05,duration:1}})},tr={hidden:{opacity:0,y:40},visible:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut"}}};function k9(){const[n,e]=oe.useState(0),[t,r]=oe.useState(!1),[i,o]=oe.useState(!1),[l,c]=oe.useState(!1);oe.useEffect(()=>{const v=setInterval(()=>{e(S=>S+1)},5e3);return()=>clearInterval(v)},[]);const d=t?"text-gray-100":"text-[#2D2D2D]",h=t?"bg-[#121212]":"bg-white",m=t?"bg-[#1E1E1E]":"bg-white",g=t?"bg-[#1A1A1A]":"bg-[#E8F0FE]",b=t?"text-white":"text-[#1A73E8]",_=()=>{c(!0)};return K.jsxs("div",{className:`font-sans ${d} ${h} min-h-screen overflow-x-hidden`,children:[l&&K.jsx(N9,{onClose:()=>c(!1)}),K.jsxs("section",{className:"bg-[#1A73E8] text-white py-20 px-6 text-center",children:[K.jsx(Ft.h1,{className:"text-4xl md:text-5xl font-bold mb-4 flex justify-center flex-wrap",initial:"hidden",animate:"visible",children:"Unlock Value from Unused Software Licenses".split("").map((v,S)=>K.jsx(Ft.span,{custom:S,variants:j9,className:"inline-block",children:v===" "?"":v},S))},n),K.jsx(Ft.p,{className:"text-xl md:text-2xl mb-6",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:2},children:"Turn dormant software into dollars with SoftSell"}),K.jsxs(Ft.div,{className:"flex justify-center gap-4 flex-wrap mb-6",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:2.5},children:[K.jsx("button",{className:"bg-white text-[#1A73E8] font-semibold px-6 py-3 rounded-full hover:bg-[#E8F0FE] transition duration-300 hover:scale-105 hover:shadow-lg",children:"Get a Quote"}),K.jsx("button",{onClick:_,className:"bg-white text-[#1A73E8] font-semibold px-6 py-3 rounded-full hover:bg-[#E8F0FE] transition duration-300 hover:scale-105 hover:shadow-lg",children:"Sell My License"})]}),K.jsx("button",{onClick:()=>r(!t),className:"absolute top-5 right-5 p-2 rounded-full bg-white text-[#1A73E8] shadow-lg hover:scale-110 transition",children:t?K.jsx(YI,{size:24}):K.jsx(XI,{size:24})})]}),K.jsxs(Ft.section,{className:`py-16 px-6 ${g} text-center ${d}`,initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:tr,children:[K.jsx("h2",{className:"text-3xl font-bold mb-10",children:"How It Works"}),K.jsx("div",{className:"grid md:grid-cols-3 gap-10 max-w-6xl mx-auto",children:[{title:"Upload License",src:KI},{title:"Get Valuation",src:tL},{title:"Get Paid",src:QI}].map(({title:v,src:S},A)=>K.jsxs(Ft.div,{className:`${m} rounded-2xl p-6 shadow-md hover:shadow-xl transition duration-300 hover:scale-105 cursor-pointer`,initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:tr,children:[K.jsx("div",{className:"mb-4",children:K.jsx("img",{src:S,alt:v,className:"w-8 h-8 mx-auto"})}),K.jsx("h3",{className:"text-xl font-semibold",children:v})]},A))})]}),K.jsxs(Ft.section,{className:`py-16 px-6 text-center ${d}`,initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:tr,children:[K.jsx("h2",{className:"text-3xl font-bold mb-10",children:"Why Choose SoftSell?"}),K.jsx("div",{className:"grid md:grid-cols-4 gap-8 max-w-6xl mx-auto",children:[{src:WI,title:"Fast Transactions",desc:"Quick and easy license liquidation."},{src:nL,title:"Secure Process",desc:"Your data and licenses are safe with us."},{src:eL,title:"Best Market Rates",desc:"Get top dollar for your unused licenses."},{src:JI,title:"Trusted Experts",desc:"Years of experience in software resale."}].map(({src:v,title:S,desc:A},E)=>K.jsxs(Ft.div,{className:`${m} p-6 rounded-2xl shadow-md hover:shadow-xl transition duration-300 hover:scale-105 cursor-pointer`,initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:tr,children:[K.jsx("div",{className:"mb-3",children:K.jsx("img",{src:v,alt:S,className:"w-12 h-12 mx-auto object-contain"})}),K.jsx("h3",{className:"font-semibold text-lg mb-2",children:S}),K.jsx("p",{className:"text-sm",children:A})]},E))})]}),K.jsxs(Ft.section,{className:`py-16 px-6 ${g} text-center ${d}`,initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:tr,children:[K.jsx("h2",{className:"text-3xl font-bold mb-10",children:"What Our Customers Say"}),K.jsx("div",{className:"max-w-4xl mx-auto grid md:grid-cols-2 gap-8",children:[{name:"Emily Chen",role:"IT Director",company:"TechNova Inc.",review:"SoftSell made it incredibly easy to recover value from our legacy software. Highly recommend!"},{name:"David Lopez",role:"Procurement Manager",company:"BrightWave Solutions",review:"Fast, secure, and great customer service. SoftSell helped us monetize unused tools in days."}].map(({name:v,role:S,company:A,review:E},O)=>K.jsxs(Ft.div,{className:`${m} p-6 rounded-2xl shadow-md hover:shadow-xl transition duration-300 hover:scale-105 cursor-pointer`,initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:tr,children:[K.jsx(BI,{className:`w-6 h-6 ${b} mb-2 mx-auto`}),K.jsxs("p",{className:"italic mb-4",children:['"',E,'"']}),K.jsx("div",{className:"font-semibold",children:v}),K.jsxs("div",{className:"text-sm",children:[S,", ",A]})]},O))})]}),K.jsxs(Ft.section,{className:`py-16 px-6 text-center ${d}`,initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:tr,children:[K.jsx("h2",{className:"text-3xl font-bold mb-10",children:"Get in Touch"}),K.jsxs(Ft.form,{className:"max-w-xl mx-auto grid gap-4 text-left",initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:{visible:{transition:{staggerChildren:.1}}},children:[["Name","Email","Company"].map((v,S)=>K.jsx(Ft.div,{variants:tr,children:K.jsx("input",{type:v==="Email"?"email":"text",placeholder:v,required:!0,className:"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1A73E8] transition hover:shadow-md hover:scale-105"})},S)),K.jsx(Ft.div,{variants:tr,children:K.jsxs("select",{required:!0,className:"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1A73E8] transition hover:shadow-md hover:scale-105",children:[K.jsx("option",{value:"",children:"Select License Type"}),K.jsx("option",{value:"Single User",children:"Single User"}),K.jsx("option",{value:"Multi User",children:"Multi User"}),K.jsx("option",{value:"Enterprise",children:"Enterprise"})]})}),K.jsx(Ft.div,{variants:tr,children:K.jsx("textarea",{placeholder:"Message",rows:4,required:!0,className:"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1A73E8] transition hover:shadow-md hover:scale-105"})}),K.jsx(Ft.button,{type:"submit",className:"w-full bg-[#1A73E8] text-white py-3 rounded-lg hover:bg-[#155ACF] transition duration-300",variants:tr,children:"Submit"})]})]}),K.jsx(P9,{})]})}var Zg={exports:{}},Gg,hx;function M9(){if(hx)return Gg;hx=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Gg=n,Gg}var Yg,mx;function I9(){if(mx)return Yg;mx=1;var n=M9();function e(){}function t(){}return t.resetWarningCache=e,Yg=function(){function r(l,c,d,h,m,g){if(g!==n){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}r.isRequired=r;function i(){return r}var o={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return o.PropTypes=o,o},Yg}var px;function L9(){return px||(px=1,Zg.exports=I9()()),Zg.exports}var D9=L9();const tt=Mr(D9);var Xg,gx;function $9(){if(gx)return Xg;gx=1;function n(c){return c&&typeof c=="object"&&"default"in c?c.default:c}var e=fd(),t=n(e);function r(c,d,h){return d in c?Object.defineProperty(c,d,{value:h,enumerable:!0,configurable:!0,writable:!0}):c[d]=h,c}function i(c,d){c.prototype=Object.create(d.prototype),c.prototype.constructor=c,c.__proto__=d}var o=!!(typeof window<"u"&&window.document&&window.document.createElement);function l(c,d,h){if(typeof c!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof d!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof h<"u"&&typeof h!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function m(g){return g.displayName||g.name||"Component"}return function(b){if(typeof b!="function")throw new Error("Expected WrappedComponent to be a React component.");var _=[],v;function S(){v=c(_.map(function(E){return E.props})),A.canUseDOM?d(v):h&&(v=h(v))}var A=function(E){i(O,E);function O(){return E.apply(this,arguments)||this}O.peek=function(){return v},O.rewind=function(){if(O.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var P=v;return v=void 0,_=[],P};var x=O.prototype;return x.UNSAFE_componentWillMount=function(){_.push(this),S()},x.componentDidUpdate=function(){S()},x.componentWillUnmount=function(){var P=_.indexOf(this);_.splice(P,1),S()},x.render=function(){return t.createElement(b,this.props)},O}(e.PureComponent);return r(A,"displayName","SideEffect("+m(b)+")"),r(A,"canUseDOM",o),A}}return Xg=l,Xg}var U9=$9();const B9=Mr(U9);var Kg,yx;function z9(){if(yx)return Kg;yx=1;var n=typeof Element<"u",e=typeof Map=="function",t=typeof Set=="function",r=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function i(o,l){if(o===l)return!0;if(o&&l&&typeof o=="object"&&typeof l=="object"){if(o.constructor!==l.constructor)return!1;var c,d,h;if(Array.isArray(o)){if(c=o.length,c!=l.length)return!1;for(d=c;d--!==0;)if(!i(o[d],l[d]))return!1;return!0}var m;if(e&&o instanceof Map&&l instanceof Map){if(o.size!==l.size)return!1;for(m=o.entries();!(d=m.next()).done;)if(!l.has(d.value[0]))return!1;for(m=o.entries();!(d=m.next()).done;)if(!i(d.value[1],l.get(d.value[0])))return!1;return!0}if(t&&o instanceof Set&&l instanceof Set){if(o.size!==l.size)return!1;for(m=o.entries();!(d=m.next()).done;)if(!l.has(d.value[0]))return!1;return!0}if(r&&ArrayBuffer.isView(o)&&ArrayBuffer.isView(l)){if(c=o.length,c!=l.length)return!1;for(d=c;d--!==0;)if(o[d]!==l[d])return!1;return!0}if(o.constructor===RegExp)return o.source===l.source&&o.flags===l.flags;if(o.valueOf!==Object.prototype.valueOf&&typeof o.valueOf=="function"&&typeof l.valueOf=="function")return o.valueOf()===l.valueOf();if(o.toString!==Object.prototype.toString&&typeof o.toString=="function"&&typeof l.toString=="function")return o.toString()===l.toString();if(h=Object.keys(o),c=h.length,c!==Object.keys(l).length)return!1;for(d=c;d--!==0;)if(!Object.prototype.hasOwnProperty.call(l,h[d]))return!1;if(n&&o instanceof Element)return!1;for(d=c;d--!==0;)if(!((h[d]==="_owner"||h[d]==="__v"||h[d]==="__o")&&o.$$typeof)&&!i(o[h[d]],l[h[d]]))return!1;return!0}return o!==o&&l!==l}return Kg=function(l,c){try{return i(l,c)}catch(d){if((d.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw d}},Kg}var V9=z9();const q9=Mr(V9);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Jg,bx;function F9(){if(bx)return Jg;bx=1;var n=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable;function r(o){if(o==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(o)}function i(){try{if(!Object.assign)return!1;var o=new String("abc");if(o[5]="de",Object.getOwnPropertyNames(o)[0]==="5")return!1;for(var l={},c=0;c<10;c++)l["_"+String.fromCharCode(c)]=c;var d=Object.getOwnPropertyNames(l).map(function(m){return l[m]});if(d.join("")!=="0123456789")return!1;var h={};return"abcdefghijklmnopqrst".split("").forEach(function(m){h[m]=m}),Object.keys(Object.assign({},h)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return Jg=i()?Object.assign:function(o,l){for(var c,d=r(o),h,m=1;m<arguments.length;m++){c=Object(arguments[m]);for(var g in c)e.call(c,g)&&(d[g]=c[g]);if(n){h=n(c);for(var b=0;b<h.length;b++)t.call(c,h[b])&&(d[h[b]]=c[h[b]])}}return d},Jg}var H9=F9();const Z9=Mr(H9);var Mi={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},Ae={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(Ae).map(function(n){return Ae[n]});var nt={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},cd={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},vl={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},G9=Object.keys(cd).reduce(function(n,e){return n[cd[e]]=e,n},{}),Y9=[Ae.NOSCRIPT,Ae.SCRIPT,Ae.STYLE],or="data-react-helmet",X9=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},K9=function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")},J9=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),dn=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Q9=function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)},_x=function(n,e){var t={};for(var r in n)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t},W9=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n},Yy=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t===!1?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},e6=function(e){var t=Ks(e,Ae.TITLE),r=Ks(e,vl.TITLE_TEMPLATE);if(r&&t)return r.replace(/%s/g,function(){return Array.isArray(t)?t.join(""):t});var i=Ks(e,vl.DEFAULT_TITLE);return t||i||void 0},t6=function(e){return Ks(e,vl.ON_CHANGE_CLIENT_STATE)||function(){}},Qg=function(e,t){return t.filter(function(r){return typeof r[e]<"u"}).map(function(r){return r[e]}).reduce(function(r,i){return dn({},r,i)},{})},n6=function(e,t){return t.filter(function(r){return typeof r[Ae.BASE]<"u"}).map(function(r){return r[Ae.BASE]}).reverse().reduce(function(r,i){if(!r.length)for(var o=Object.keys(i),l=0;l<o.length;l++){var c=o[l],d=c.toLowerCase();if(e.indexOf(d)!==-1&&i[d])return r.concat(i)}return r},[])},Au=function(e,t,r){var i={};return r.filter(function(o){return Array.isArray(o[e])?!0:(typeof o[e]<"u"&&s6("Helmet: "+e+' should be of type "Array". Instead found type "'+X9(o[e])+'"'),!1)}).map(function(o){return o[e]}).reverse().reduce(function(o,l){var c={};l.filter(function(b){for(var _=void 0,v=Object.keys(b),S=0;S<v.length;S++){var A=v[S],E=A.toLowerCase();t.indexOf(E)!==-1&&!(_===nt.REL&&b[_].toLowerCase()==="canonical")&&!(E===nt.REL&&b[E].toLowerCase()==="stylesheet")&&(_=E),t.indexOf(A)!==-1&&(A===nt.INNER_HTML||A===nt.CSS_TEXT||A===nt.ITEM_PROP)&&(_=A)}if(!_||!b[_])return!1;var O=b[_].toLowerCase();return i[_]||(i[_]={}),c[_]||(c[_]={}),i[_][O]?!1:(c[_][O]=!0,!0)}).reverse().forEach(function(b){return o.push(b)});for(var d=Object.keys(c),h=0;h<d.length;h++){var m=d[h],g=Z9({},i[m],c[m]);i[m]=g}return o},[]).reverse()},Ks=function(e,t){for(var r=e.length-1;r>=0;r--){var i=e[r];if(i.hasOwnProperty(t))return i[t]}return null},r6=function(e){return{baseTag:n6([nt.HREF,nt.TARGET],e),bodyAttributes:Qg(Mi.BODY,e),defer:Ks(e,vl.DEFER),encode:Ks(e,vl.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Qg(Mi.HTML,e),linkTags:Au(Ae.LINK,[nt.REL,nt.HREF],e),metaTags:Au(Ae.META,[nt.NAME,nt.CHARSET,nt.HTTPEQUIV,nt.PROPERTY,nt.ITEM_PROP],e),noscriptTags:Au(Ae.NOSCRIPT,[nt.INNER_HTML],e),onChangeClientState:t6(e),scriptTags:Au(Ae.SCRIPT,[nt.SRC,nt.INNER_HTML],e),styleTags:Au(Ae.STYLE,[nt.CSS_TEXT],e),title:e6(e),titleAttributes:Qg(Mi.TITLE,e)}},Xy=function(){var n=Date.now();return function(e){var t=Date.now();t-n>16?(n=t,e(t)):setTimeout(function(){Xy(e)},0)}}(),vx=function(e){return clearTimeout(e)},a6=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||Xy:global.requestAnimationFrame||Xy,i6=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||vx:global.cancelAnimationFrame||vx,s6=function(e){return console&&typeof console.warn=="function"&&console.warn(e)},Tu=null,o6=function(e){Tu&&i6(Tu),e.defer?Tu=a6(function(){wx(e,function(){Tu=null})}):(wx(e),Tu=null)},wx=function(e,t){var r=e.baseTag,i=e.bodyAttributes,o=e.htmlAttributes,l=e.linkTags,c=e.metaTags,d=e.noscriptTags,h=e.onChangeClientState,m=e.scriptTags,g=e.styleTags,b=e.title,_=e.titleAttributes;Ky(Ae.BODY,i),Ky(Ae.HTML,o),u6(b,_);var v={baseTag:js(Ae.BASE,r),linkTags:js(Ae.LINK,l),metaTags:js(Ae.META,c),noscriptTags:js(Ae.NOSCRIPT,d),scriptTags:js(Ae.SCRIPT,m),styleTags:js(Ae.STYLE,g)},S={},A={};Object.keys(v).forEach(function(E){var O=v[E],x=O.newTags,j=O.oldTags;x.length&&(S[E]=x),j.length&&(A[E]=v[E].oldTags)}),t&&t(),h(e,S,A)},hC=function(e){return Array.isArray(e)?e.join(""):e},u6=function(e,t){typeof e<"u"&&document.title!==e&&(document.title=hC(e)),Ky(Ae.TITLE,t)},Ky=function(e,t){var r=document.getElementsByTagName(e)[0];if(r){for(var i=r.getAttribute(or),o=i?i.split(","):[],l=[].concat(o),c=Object.keys(t),d=0;d<c.length;d++){var h=c[d],m=t[h]||"";r.getAttribute(h)!==m&&r.setAttribute(h,m),o.indexOf(h)===-1&&o.push(h);var g=l.indexOf(h);g!==-1&&l.splice(g,1)}for(var b=l.length-1;b>=0;b--)r.removeAttribute(l[b]);o.length===l.length?r.removeAttribute(or):r.getAttribute(or)!==c.join(",")&&r.setAttribute(or,c.join(","))}},js=function(e,t){var r=document.head||document.querySelector(Ae.HEAD),i=r.querySelectorAll(e+"["+or+"]"),o=Array.prototype.slice.call(i),l=[],c=void 0;return t&&t.length&&t.forEach(function(d){var h=document.createElement(e);for(var m in d)if(d.hasOwnProperty(m))if(m===nt.INNER_HTML)h.innerHTML=d.innerHTML;else if(m===nt.CSS_TEXT)h.styleSheet?h.styleSheet.cssText=d.cssText:h.appendChild(document.createTextNode(d.cssText));else{var g=typeof d[m]>"u"?"":d[m];h.setAttribute(m,g)}h.setAttribute(or,"true"),o.some(function(b,_){return c=_,h.isEqualNode(b)})?o.splice(c,1):l.push(h)}),o.forEach(function(d){return d.parentNode.removeChild(d)}),l.forEach(function(d){return r.appendChild(d)}),{oldTags:o,newTags:l}},mC=function(e){return Object.keys(e).reduce(function(t,r){var i=typeof e[r]<"u"?r+'="'+e[r]+'"':""+r;return t?t+" "+i:i},"")},l6=function(e,t,r,i){var o=mC(r),l=hC(t);return o?"<"+e+" "+or+'="true" '+o+">"+Yy(l,i)+"</"+e+">":"<"+e+" "+or+'="true">'+Yy(l,i)+"</"+e+">"},c6=function(e,t,r){return t.reduce(function(i,o){var l=Object.keys(o).filter(function(h){return!(h===nt.INNER_HTML||h===nt.CSS_TEXT)}).reduce(function(h,m){var g=typeof o[m]>"u"?m:m+'="'+Yy(o[m],r)+'"';return h?h+" "+g:g},""),c=o.innerHTML||o.cssText||"",d=Y9.indexOf(e)===-1;return i+"<"+e+" "+or+'="true" '+l+(d?"/>":">"+c+"</"+e+">")},"")},pC=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(e).reduce(function(r,i){return r[cd[i]||i]=e[i],r},t)},f6=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(e).reduce(function(r,i){return r[G9[i]||i]=e[i],r},t)},d6=function(e,t,r){var i,o=(i={key:t},i[or]=!0,i),l=pC(r,o);return[Hn.createElement(Ae.TITLE,l,t)]},h6=function(e,t){return t.map(function(r,i){var o,l=(o={key:i},o[or]=!0,o);return Object.keys(r).forEach(function(c){var d=cd[c]||c;if(d===nt.INNER_HTML||d===nt.CSS_TEXT){var h=r.innerHTML||r.cssText;l.dangerouslySetInnerHTML={__html:h}}else l[d]=r[c]}),Hn.createElement(e,l)})},Qr=function(e,t,r){switch(e){case Ae.TITLE:return{toComponent:function(){return d6(e,t.title,t.titleAttributes)},toString:function(){return l6(e,t.title,t.titleAttributes,r)}};case Mi.BODY:case Mi.HTML:return{toComponent:function(){return pC(t)},toString:function(){return mC(t)}};default:return{toComponent:function(){return h6(e,t)},toString:function(){return c6(e,t,r)}}}},gC=function(e){var t=e.baseTag,r=e.bodyAttributes,i=e.encode,o=e.htmlAttributes,l=e.linkTags,c=e.metaTags,d=e.noscriptTags,h=e.scriptTags,m=e.styleTags,g=e.title,b=g===void 0?"":g,_=e.titleAttributes;return{base:Qr(Ae.BASE,t,i),bodyAttributes:Qr(Mi.BODY,r,i),htmlAttributes:Qr(Mi.HTML,o,i),link:Qr(Ae.LINK,l,i),meta:Qr(Ae.META,c,i),noscript:Qr(Ae.NOSCRIPT,d,i),script:Qr(Ae.SCRIPT,h,i),style:Qr(Ae.STYLE,m,i),title:Qr(Ae.TITLE,{title:b,titleAttributes:_},i)}},m6=function(e){var t,r;return r=t=function(i){Q9(o,i);function o(){return K9(this,o),W9(this,i.apply(this,arguments))}return o.prototype.shouldComponentUpdate=function(c){return!q9(this.props,c)},o.prototype.mapNestedChildrenToProps=function(c,d){if(!d)return null;switch(c.type){case Ae.SCRIPT:case Ae.NOSCRIPT:return{innerHTML:d};case Ae.STYLE:return{cssText:d}}throw new Error("<"+c.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},o.prototype.flattenArrayTypeChildren=function(c){var d,h=c.child,m=c.arrayTypeChildren,g=c.newChildProps,b=c.nestedChildren;return dn({},m,(d={},d[h.type]=[].concat(m[h.type]||[],[dn({},g,this.mapNestedChildrenToProps(h,b))]),d))},o.prototype.mapObjectTypeChildren=function(c){var d,h,m=c.child,g=c.newProps,b=c.newChildProps,_=c.nestedChildren;switch(m.type){case Ae.TITLE:return dn({},g,(d={},d[m.type]=_,d.titleAttributes=dn({},b),d));case Ae.BODY:return dn({},g,{bodyAttributes:dn({},b)});case Ae.HTML:return dn({},g,{htmlAttributes:dn({},b)})}return dn({},g,(h={},h[m.type]=dn({},b),h))},o.prototype.mapArrayTypeChildrenToProps=function(c,d){var h=dn({},d);return Object.keys(c).forEach(function(m){var g;h=dn({},h,(g={},g[m]=c[m],g))}),h},o.prototype.warnOnInvalidChildren=function(c,d){return!0},o.prototype.mapChildrenToProps=function(c,d){var h=this,m={};return Hn.Children.forEach(c,function(g){if(!(!g||!g.props)){var b=g.props,_=b.children,v=_x(b,["children"]),S=f6(v);switch(h.warnOnInvalidChildren(g,_),g.type){case Ae.LINK:case Ae.META:case Ae.NOSCRIPT:case Ae.SCRIPT:case Ae.STYLE:m=h.flattenArrayTypeChildren({child:g,arrayTypeChildren:m,newChildProps:S,nestedChildren:_});break;default:d=h.mapObjectTypeChildren({child:g,newProps:d,newChildProps:S,nestedChildren:_});break}}}),d=this.mapArrayTypeChildrenToProps(m,d),d},o.prototype.render=function(){var c=this.props,d=c.children,h=_x(c,["children"]),m=dn({},h);return d&&(m=this.mapChildrenToProps(d,m)),Hn.createElement(e,m)},J9(o,null,[{key:"canUseDOM",set:function(c){e.canUseDOM=c}}]),o}(Hn.Component),t.propTypes={base:tt.object,bodyAttributes:tt.object,children:tt.oneOfType([tt.arrayOf(tt.node),tt.node]),defaultTitle:tt.string,defer:tt.bool,encodeSpecialCharacters:tt.bool,htmlAttributes:tt.object,link:tt.arrayOf(tt.object),meta:tt.arrayOf(tt.object),noscript:tt.arrayOf(tt.object),onChangeClientState:tt.func,script:tt.arrayOf(tt.object),style:tt.arrayOf(tt.object),title:tt.string,titleAttributes:tt.object,titleTemplate:tt.string},t.defaultProps={defer:!0,encodeSpecialCharacters:!0},t.peek=e.peek,t.rewind=function(){var i=e.rewind();return i||(i=gC({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),i},r},p6=function(){return null},g6=B9(r6,o6,gC)(p6),Jy=m6(g6);Jy.renderStatic=Jy.rewind;const y6=({title:n,description:e,keywords:t,image:r,url:i})=>K.jsxs(Jy,{children:[K.jsx("title",{children:n}),K.jsx("meta",{name:"description",content:e}),K.jsx("meta",{name:"keywords",content:t}),K.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),K.jsx("meta",{property:"og:title",content:n}),K.jsx("meta",{property:"og:description",content:e})]});function b6(){return K.jsxs("div",{children:[K.jsx(y6,{title:"Sell Unused Software Licenses | SoftSell",description:"Turn your unused software licenses into cash quickly and securely with SoftSell.",keywords:"sell software license, unused software, license resale, SoftSell"}),K.jsx(k9,{})]})}KN.createRoot(document.getElementById("root")).render(K.jsx(oe.StrictMode,{children:K.jsx(b6,{})}));
